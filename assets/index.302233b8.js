/* empty css                    */import"./vue.8b5120b7.js";import{Z as b,u as oi,q as wl,C as r,b1 as Ze,aa as X,aE as h,a0 as S,a1 as f,aK as Ut,G as qe,t as z,aC as ri,w as _t,b2 as jt,a8 as a,O as F,ao as Ui,ay as al,ar as zt,aG as Cl,A as it,_ as B,b6 as te,b8 as ln,bs as gn,aq as Gt,bu as Un,bb as jl,T as zi,a7 as m,j as Ps,l as Pt,bv as Ci,aL as Dt,$ as j,J as Q,aN as De,I as Ie,aH as Ht,aF as Jt,z as Xt,bn as xs,br as Xi,al as El,au as ui,H as Hi,aJ as _n,a6 as Ts,ah as Fs,be as Es}from"./@vue.4ce677c2.js";import{i as Is}from"./is-plain-object.906d88e8.js";import{c as Ji}from"./nanoevents.1080beb7.js";import{L as Mn}from"./lz-string.f2f3b7cf.js";import{Y as Ds}from"./vue-next-select.b8c18309.js";import{D as Ls}from"./vuedraggable.6af78c68.js";import{p as As}from"./vue-textarea-autosize.35804eaf.js";import{A as Wi,T as Os,R as js,B as Rs,u as qs,E as $i}from"./@pixi.d7e055ca.js";import{s as Bs,u as ol}from"./vue-toastification.f7dd1d17.js";import{v as Gs,n as Vs}from"./workbox-window.8d14e8b7.js";import"./earcut.b6f90e68.js";import"./sortablejs.a68aa018.js";import"./ismobilejs.5c6954b9.js";import"./eventemitter3.dc5195d7.js";import"./url.832c6d94.js";import"./querystring.ed407679.js";const Us=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Us();const zs="modulepreload",Mi={},Xs="./",Il=function(t,n){return!n||n.length===0?t():Promise.all(n.map(l=>{if(l=`${Xs}${l}`,l in Mi)return;Mi[l]=!0;const i=l.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${o}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":zs,i||(u.as="script",u.crossOrigin=""),u.href=l,document.head.appendChild(u),i)return new Promise((c,p)=>{u.addEventListener("load",c),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t())},Hs="Kronos",Js="A game about flowers, time, and focus",Ws="kronos",Qs="thepaperpilot",Zs="",Ks="",Ys="0.3",ea="",ta=!1,na=!1,la=2,ia=!0,sa="banner.png",aa="pwa-192x192.png",oa=["main"],ra=3600,ua=1,ca=!0,da="base64";var Ve={title:Hs,description:Js,id:Ws,author:Qs,discordName:Zs,discordLink:Ks,versionNumber:Ys,versionTitle:ea,allowGoBack:ta,defaultShowSmall:na,defaultDecimalsShown:la,useHeader:ia,banner:sa,logo:aa,initialTabs:oa,maxTickLength:ra,offlineLimit:ua,enablePausing:ca,exportEncoding:da};const Wl=17,pa=9e15,ma=Math.log10(9e15),fa=1/9e15,va=308,ha=-324,Pi=5,ga=function(){const e=[];for(let n=ha+1;n<=va;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),qn=[2,Math.E,3,4,5,6,7,8,9,10],ya=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],ba=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],k=function(t){return s.fromValue_noAlloc(t)},me=function(e,t,n){return s.fromComponents(e,t,n)},Ne=function(t,n,l){return s.fromComponents_noNormalize(t,n,l)},Cn=function(t,n){const l=n+1,i=Math.ceil(Math.log10(Math.abs(t))),o=Math.round(t*Math.pow(10,l-i))*Math.pow(10,i-l);return parseFloat(o.toFixed(Math.max(l-i,0)))},Ql=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},_a=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const l=e*e;let i=e;return n=n+1/(12*i),i=i*l,n=n+1/(360*i),i=i*l,n=n+1/(1260*i),i=i*l,n=n+1/(1680*i),i=i*l,n=n+1/(1188*i),i=i*l,n=n+691/(360360*i),i=i*l,n=n+7/(1092*i),i=i*l,n=n+3617/(122400*i),Math.exp(n)/t},Qi=.5671432904097838,xi=function(e,t=1e-10){let n,l;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Qi;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let i=0;i<100;++i){if(l=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(l-n)<t*Math.abs(l))return l;n=l}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Ti(e,t=1e-10){let n,l,i,o;if(!Number.isFinite(e.mag)||e===s.dZero)return e;if(e===s.dOne)return k(Qi);s.abs(e),n=s.ln(e);for(let u=0;u<100;++u){if(l=s.exp(-n),i=n.sub(e.mul(l)),o=n.sub(i.div(n.add(1).sub(n.add(2).mul(i).div(s.mul(2,n).add(2))))),s.abs(o.sub(n)).lt(s.abs(o).mul(t)))return o;n=o}throw Error(`Iteration failed to converge: ${e.toString()}`)}const P=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof P||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/ga(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new P().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new P().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new P().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new P().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new P().fromDecimal(e)}static fromNumber(e){return new P().fromNumber(e)}static fromString(e){return new P().fromString(e)}static fromValue(e){return new P().fromValue(e)}static fromValue_noAlloc(e){return e instanceof P?e:new P(e)}static abs(e){return k(e).abs()}static neg(e){return k(e).neg()}static negate(e){return k(e).neg()}static negated(e){return k(e).neg()}static sign(e){return k(e).sign}static sgn(e){return k(e).sign}static round(e){return k(e).round()}static floor(e){return k(e).floor()}static ceil(e){return k(e).ceil()}static trunc(e){return k(e).trunc()}static add(e,t){return k(e).add(t)}static plus(e,t){return k(e).add(t)}static sub(e,t){return k(e).sub(t)}static subtract(e,t){return k(e).sub(t)}static minus(e,t){return k(e).sub(t)}static mul(e,t){return k(e).mul(t)}static multiply(e,t){return k(e).mul(t)}static times(e,t){return k(e).mul(t)}static div(e,t){return k(e).div(t)}static divide(e,t){return k(e).div(t)}static recip(e){return k(e).recip()}static reciprocal(e){return k(e).recip()}static reciprocate(e){return k(e).reciprocate()}static cmp(e,t){return k(e).cmp(t)}static cmpabs(e,t){return k(e).cmpabs(t)}static compare(e,t){return k(e).cmp(t)}static isNaN(e){return e=k(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=k(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return k(e).eq(t)}static equals(e,t){return k(e).eq(t)}static neq(e,t){return k(e).neq(t)}static notEquals(e,t){return k(e).notEquals(t)}static lt(e,t){return k(e).lt(t)}static lte(e,t){return k(e).lte(t)}static gt(e,t){return k(e).gt(t)}static gte(e,t){return k(e).gte(t)}static max(e,t){return k(e).max(t)}static min(e,t){return k(e).min(t)}static minabs(e,t){return k(e).minabs(t)}static maxabs(e,t){return k(e).maxabs(t)}static clamp(e,t,n){return k(e).clamp(t,n)}static clampMin(e,t){return k(e).clampMin(t)}static clampMax(e,t){return k(e).clampMax(t)}static cmp_tolerance(e,t,n){return k(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return k(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return k(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return k(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return k(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return k(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return k(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return k(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return k(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return k(e).gte_tolerance(t,n)}static pLog10(e){return k(e).pLog10()}static absLog10(e){return k(e).absLog10()}static log10(e){return k(e).log10()}static log(e,t){return k(e).log(t)}static log2(e){return k(e).log2()}static ln(e){return k(e).ln()}static logarithm(e,t){return k(e).logarithm(t)}static pow(e,t){return k(e).pow(t)}static pow10(e){return k(e).pow10()}static root(e,t){return k(e).root(t)}static factorial(e,t){return k(e).factorial()}static gamma(e,t){return k(e).gamma()}static lngamma(e,t){return k(e).lngamma()}static exp(e){return k(e).exp()}static sqr(e){return k(e).sqr()}static sqrt(e){return k(e).sqrt()}static cube(e){return k(e).cube()}static cbrt(e){return k(e).cbrt()}static tetrate(e,t=2,n=Ne(1,0,1)){return k(e).tetrate(t,n)}static iteratedexp(e,t=2,n=Ne(1,0,1)){return k(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return k(e).iteratedlog(t,n)}static layeradd10(e,t){return k(e).layeradd10(t)}static layeradd(e,t,n=10){return k(e).layeradd(t,n)}static slog(e,t=10){return k(e).slog(t)}static lambertw(e){return k(e).lambertw()}static ssqrt(e){return k(e).ssqrt()}static pentate(e,t=2,n=Ne(1,0,1)){return k(e).pentate(t,n)}static affordGeometricSeries(e,t,n,l){return this.affordGeometricSeries_core(k(e),k(t),k(n),l)}static sumGeometricSeries(e,t,n,l){return this.sumGeometricSeries_core(e,k(t),k(n),l)}static affordArithmeticSeries(e,t,n,l){return this.affordArithmeticSeries_core(k(e),k(t),k(n),k(l))}static sumArithmeticSeries(e,t,n,l){return this.sumArithmeticSeries_core(k(e),k(t),k(n),k(l))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(k(e),k(t),k(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return Ne(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return Ne(t,0,1);const n=Math.floor(Math.random()*(e+1));let l=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(l=Math.trunc(l));let i=Math.pow(10,l);return Math.random()>.9&&(i=Math.trunc(i)),me(t,n,i)}static affordGeometricSeries_core(e,t,n,l){const i=t.mul(n.pow(l));return P.floor(e.div(i).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,l){return t.mul(n.pow(l)).mul(P.sub(1,n.pow(e))).div(P.sub(1,n))}static affordArithmeticSeries_core(e,t,n,l){const o=t.add(l.mul(n)).sub(n.div(2)),u=o.pow(2);return o.neg().add(u.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,l){const i=t.add(l.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<fa)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=pa)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<ma&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const y=parseFloat(t[0]),_=parseFloat(t[1]),w=t[1].split(";");let M=1;if(w.length===2&&(M=parseFloat(w[1]),isFinite(M)||(M=1)),isFinite(y)&&isFinite(_)){const G=P.pentate(y,_,M);return this.sign=G.sign,this.layer=G.layer,this.mag=G.mag,this}}const n=e.split("^^");if(n.length===2){const y=parseFloat(n[0]),_=parseFloat(n[1]),w=n[1].split(";");let M=1;if(w.length===2&&(M=parseFloat(w[1]),isFinite(M)||(M=1)),isFinite(y)&&isFinite(_)){const G=P.tetrate(y,_,M);return this.sign=G.sign,this.layer=G.layer,this.mag=G.mag,this}}const l=e.split("^");if(l.length===2){const y=parseFloat(l[0]),_=parseFloat(l[1]);if(isFinite(y)&&isFinite(_)){const w=P.pow(y,_);return this.sign=w.sign,this.layer=w.layer,this.mag=w.mag,this}}e=e.trim().toLowerCase();let i,o,u=e.split("pt");if(u.length===2){i=10,o=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let y=parseFloat(u[1]);if(isFinite(y)||(y=1),isFinite(i)&&isFinite(o)){const _=P.tetrate(i,o,y);return this.sign=_.sign,this.layer=_.layer,this.mag=_.mag,this}}if(u=e.split("p"),u.length===2){i=10,o=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let y=parseFloat(u[1]);if(isFinite(y)||(y=1),isFinite(i)&&isFinite(o)){const _=P.tetrate(i,o,y);return this.sign=_.sign,this.layer=_.layer,this.mag=_.mag,this}}const c=e.split("e"),p=c.length-1;if(p===0){const y=parseFloat(e);if(isFinite(y))return this.fromNumber(y)}else if(p===1){const y=parseFloat(e);if(isFinite(y)&&y!==0)return this.fromNumber(y)}const d=e.split("e^");if(d.length===2){this.sign=1,d[0].charAt(0)=="-"&&(this.sign=-1);let y="";for(let _=0;_<d[1].length;++_){const w=d[1].charCodeAt(_);if(w>=43&&w<=57||w===101)y+=d[1].charAt(_);else return this.layer=parseFloat(y),this.mag=parseFloat(d[1].substr(_+1)),this.normalize(),this}}if(p<1)return this.sign=0,this.layer=0,this.mag=0,this;const v=parseFloat(c[0]);if(v===0)return this.sign=0,this.layer=0,this.mag=0,this;let g=parseFloat(c[c.length-1]);if(p>=2){const y=parseFloat(c[c.length-2]);isFinite(y)&&(g*=Math.sign(y),g+=Ql(y))}if(!isFinite(v))this.sign=c[0]==="-"?-1:1,this.layer=p,this.mag=g;else if(p===1)this.sign=Math.sign(v),this.layer=1,this.mag=g+Math.log10(Math.abs(v));else if(this.sign=Math.sign(v),this.layer=p,p===2){const y=P.mul(me(1,2,g),k(v));return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,this}else this.mag=g;return this.normalize(),this}fromValue(e){return e instanceof P||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Cn(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Cn(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Pi?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Cn(this.m,e)+"e"+Cn(this.e,e):this.layer===1?Cn(this.m,e)+"e"+Cn(this.e,e):this.layer<=Pi?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Cn(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Cn(this.mag,e)}abs(){return Ne(this.sign===0?0:1,this.layer,this.mag)}neg(){return Ne(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?P.dZero:this.layer===0?me(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?P.dZero:this.layer===0?me(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?P.dZero:this.layer===0?me(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?P.dZero:this.layer===0?me(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=k(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return Ne(0,0,0);let n,l;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(P.cmpabs(this,t)>0?(n=this,l=t):(n=t,l=this),n.layer===0&&l.layer===0)return k(n.sign*n.mag+l.sign*l.mag);const i=n.layer*Math.sign(n.mag),o=l.layer*Math.sign(l.mag);if(i-o>=2)return n;if(i===0&&o===-1){if(Math.abs(l.mag-Math.log10(n.mag))>Wl)return n;{const u=Math.pow(10,Math.log10(n.mag)-l.mag),c=l.sign+n.sign*u;return me(Math.sign(c),1,l.mag+Math.log10(Math.abs(c)))}}if(i===1&&o===0){if(Math.abs(n.mag-Math.log10(l.mag))>Wl)return n;{const u=Math.pow(10,n.mag-Math.log10(l.mag)),c=l.sign+n.sign*u;return me(Math.sign(c),1,Math.log10(l.mag)+Math.log10(Math.abs(c)))}}if(Math.abs(n.mag-l.mag)>Wl)return n;{const u=Math.pow(10,n.mag-l.mag),c=l.sign+n.sign*u;return me(Math.sign(c),1,l.mag+Math.log10(Math.abs(c)))}}plus(e){return this.add(e)}sub(e){return this.add(k(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=k(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return Ne(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return Ne(this.sign*t.sign,0,1);let n,l;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,l=t):(n=t,l=this),n.layer===0&&l.layer===0)return k(n.sign*l.sign*n.mag*l.mag);if(n.layer>=3||n.layer-l.layer>=2)return me(n.sign*l.sign,n.layer,n.mag);if(n.layer===1&&l.layer===0)return me(n.sign*l.sign,1,n.mag+Math.log10(l.mag));if(n.layer===1&&l.layer===1)return me(n.sign*l.sign,1,n.mag+l.mag);if(n.layer===2&&l.layer===1){const i=me(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(me(Math.sign(l.mag),l.layer-1,Math.abs(l.mag)));return me(n.sign*l.sign,i.layer+1,i.sign*i.mag)}if(n.layer===2&&l.layer===2){const i=me(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(me(Math.sign(l.mag),l.layer-1,Math.abs(l.mag)));return me(n.sign*l.sign,i.layer+1,i.sign*i.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=k(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?P.dNaN:this.layer===0?me(this.sign,0,1/this.mag):me(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=k(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=k(e),n=this.mag>0?this.layer:-this.layer,l=t.mag>0?t.layer:-t.layer;return n>l?1:n<l?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=k(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=k(e);return this.lt(t)?t:this}min(e){const t=k(e);return this.gt(t)?t:this}maxabs(e){const t=k(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=k(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=k(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=k(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let l=this.mag,i=n.mag;return this.layer>n.layer&&(i=Ql(i)),this.layer<n.layer&&(l=Ql(l)),Math.abs(l-i)<=t*Math.max(Math.abs(l),Math.abs(i))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=k(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=k(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=k(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=k(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(P.dZero)?P.dZero:this.log10()}absLog10(){return this.sign===0?P.dNaN:this.layer>0?me(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):me(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?P.dNaN:this.layer>0?me(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):me(this.sign,0,Math.log10(this.mag))}log(e){return e=k(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?P.dNaN:this.layer===0&&e.layer===0?me(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):P.div(this.log10(),e.log10())}log2(){return this.sign<=0?P.dNaN:this.layer===0?me(this.sign,0,Math.log2(this.mag)):this.layer===1?me(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?me(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):me(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?P.dNaN:this.layer===0?me(this.sign,0,Math.log(this.mag)):this.layer===1?me(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?me(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):me(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=k(e),n=this,l=t;if(n.sign===0)return l.eq(0)?Ne(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(l.sign===0)return Ne(1,0,1);if(l.sign===1&&l.layer===0&&l.mag===1)return n;const i=n.absLog10().mul(l).pow10();return this.sign===-1?Math.abs(l.toNumber()%2)%2===1?i.neg():Math.abs(l.toNumber()%2)%2===0?i:P.dNaN:i}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return P.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return me(1,0,t);if(e.sign===0)return P.dOne;e=Ne(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?me(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?me(-e.sign,e.layer+1,-e.mag):P.dOne}pow_base(e){return k(e).pow(this)}root(e){const t=k(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?P.exp(P.mul(this,P.ln(this).sub(1))):P.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(Ne(1,0,24)))return k(_a(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let l=e,i=12*l,o=1/i,u=t+o;if(u===t||(t=u,l=l*n,i=360*l,o=1/i,u=t-o,u===t))return P.exp(t);t=u,l=l*n,i=1260*l;let c=1/i;return t=t+c,l=l*n,i=1680*l,c=1/i,t=t-c,P.exp(t)}else return this.layer===1?P.exp(P.mul(this,P.ln(this).sub(1))):P.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?P.dOne:this.layer===0&&this.mag<=709.7?k(Math.exp(this.sign*this.mag)):this.layer===0?me(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?me(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):me(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return k(Math.sqrt(this.sign*this.mag));if(this.layer===1)return me(1,2,Math.log10(this.mag)-.3010299956639812);{const e=P.div(Ne(this.sign,this.layer-1,this.mag),Ne(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=Ne(1,0,1)){if(e===1)return P.pow(this,t);if(e===0)return new P(t);if(this.eq(P.dOne))return P.dOne;if(this.eq(-1))return P.pow(this,t);if(e===Number.POSITIVE_INFINITY){const i=this.toNumber();if(i<=1.444667861009766&&i>=.06598803584531254){if(i>1.444667861009099)return new P(Math.E);const o=P.ln(this).neg();return o.lambertw().div(o)}else return i>1.444667861009766?new P(Number.POSITIVE_INFINITY):P.dNaN}if(this.eq(P.dZero)){let i=Math.abs((e+1)%2);return i>1&&(i=2-i),new P(i)}if(e<0)return P.iteratedlog(t,this,-e);t=k(t);const n=e;e=Math.trunc(e);const l=n-e;if(this.gt(P.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let i=0;i<e;++i){const o=t;if(t=this.pow(t),o.eq(t))return t}if(l!=0){const i=this.pow(t);return t.mul(1-l).add(i.mul(l))}return t}l!==0&&(t.eq(P.dOne)?this.gt(10)?t=this.pow(l):(t=k(P.tetrate_critical(this.toNumber(),l)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(l):t=t.layeradd(l,this));for(let i=0;i<e;++i){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return Ne(t.sign,t.layer+(e-i-1),t.mag);if(i>1e4)return t}return t}iteratedexp(e=2,t=Ne(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return P.tetrate(e,-t,this);e=k(e);let n=k(this);const l=t;t=Math.trunc(t);const i=l-t;if(n.layer-e.layer>3){const o=Math.min(t,n.layer-e.layer-3);t-=o,n.layer-=o}for(let o=0;o<t;++o){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(o>1e4)return n}return i>0&&i<1&&(e.eq(10)?n=n.layeradd10(-i):n=n.layeradd(-i,e)),n}slog(e=10){if(e=k(e),e.lte(P.dZero)||e.eq(P.dOne))return P.dNaN;if(e.lt(P.dOne))return this.eq(P.dOne)?P.dZero:this.eq(P.dZero)?P.dNegOne:P.dNaN;if(this.mag<0||this.eq(P.dZero))return P.dNegOne;let t=0,n=k(this);if(n.layer-e.layer>3){const l=n.layer-e.layer-3;t+=l,n.layer-=l}for(let l=0;l<100;++l)if(n.lt(P.dZero))n=P.pow(e,n),t-=1;else{if(n.lte(P.dOne))return k(t+P.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=P.log(n,e)}return k(t)}static slog_critical(e,t){return e>10?t-1:P.critical_section(e,t,ba)}static tetrate_critical(e,t){return P.critical_section(e,t,ya)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let l=0,i=0;for(let c=0;c<qn.length;++c)if(qn[c]==e){l=n[c][Math.floor(t)],i=n[c][Math.ceil(t)];break}else if(qn[c]<e&&qn[c+1]>e){const p=(e-qn[c])/(qn[c+1]-qn[c]);l=n[c][Math.floor(t)]*(1-p)+n[c+1][Math.floor(t)]*p,i=n[c][Math.ceil(t)]*(1-p)+n[c+1][Math.ceil(t)]*p;break}const o=t-Math.floor(t);return l*(1-o)+i*o}layeradd10(e){e=P.fromValue_noAlloc(e).toNumber();const t=k(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let l=0;l<100;++l){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const l=this.slog(t).toNumber()+e;return l>=0?P.tetrate(t,l):Number.isFinite(l)?l>=-1?P.log(P.tetrate(t,l+1),t):P.log(P.log(P.tetrate(t,l+2),t),t):P.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return k(xi(this.toNumber()));if(this.layer===0)return k(xi(this.sign*this.mag));if(this.layer===1)return Ti(this);if(this.layer===2)return Ti(this);if(this.layer>=3)return Ne(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return Ne(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=Ne(1,0,1)){t=k(t);const n=e;e=Math.trunc(e);const l=n-e;l!==0&&(t.eq(P.dOne)?(++e,t=new P(l)):this.eq(10)?t=t.layeradd10(l):t=t.layeradd(l,this));for(let i=0;i<e;++i){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(i>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?k(Math.sin(this.sign*this.mag)):Ne(0,0,0)}cos(){return this.mag<0?P.dOne:this.layer===0?k(Math.cos(this.sign*this.mag)):Ne(0,0,0)}tan(){return this.mag<0?this:this.layer===0?k(Math.tan(this.sign*this.mag)):Ne(0,0,0)}asin(){return this.mag<0?this:this.layer===0?k(Math.asin(this.sign*this.mag)):Ne(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?k(Math.acos(this.toNumber())):this.layer===0?k(Math.acos(this.sign*this.mag)):Ne(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?k(Math.atan(this.sign*this.mag)):k(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return P.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return P.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?Ne(Number.NaN,Number.NaN,Number.NaN):P.ln(this.add(1).div(k(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(P.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let s=P;s.dZero=Ne(0,0,0);s.dOne=Ne(1,0,1);s.dNegOne=Ne(-1,0,1);s.dTwo=Ne(1,0,2);s.dTen=Ne(1,0,10);s.dNaN=Ne(Number.NaN,Number.NaN,Number.NaN);s.dInf=Ne(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);s.dNegInf=Ne(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);s.dNumberMax=me(1,0,Number.MAX_VALUE);s.dNumberMin=me(1,0,Number.MIN_VALUE);const wa=new s(1);function pl(e,t,n=!0){let l=s.log10(e).floor(),i=s.div(e,s.pow(10,l));i.toStringWithDecimalPlaces(t)==="10"&&(i=wa,l=l.add(1));const o=l.gte(1e9)?nn(l,Math.max(Math.max(t,3),Ve.defaultDecimalsShown)):l.gte(1e4)?Dl(l,0):l.toStringWithDecimalPlaces(0);return n?i.toStringWithDecimalPlaces(t)+"e"+o:"e"+o}function Dl(e,t){if(e==null)return"NaN";if(e=new s(e),e.mag<.001)return 0 .toFixed(t);const l=e.toStringWithDecimalPlaces(t).split(".");return l[0]=l[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),l.length==1?l[0]:l[0]+"."+l[1]}function Zi(e,t){return e==null?"NaN":(e=new s(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),Ve.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const ka=new s("eeee1000"),Na=new s("e100000"),Fi=new s("e1000"),Ki=new s(1e9),Sa=new s(1e6),Ca=new s(1e3),$a=new s(.98),Ma=new s(.001),Yi=new s(0);function nn(e,t,n){if(t==null&&(t=Ve.defaultDecimalsShown),n=n!=null?n:Ve.defaultShowSmall,e=new s(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+nn(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(ka)){const l=e.slog();return l.gte(Sa)?"F"+nn(l.floor()):s.pow(10,l.sub(l.floor())).toStringWithDecimalPlaces(3)+"F"+Dl(l.floor(),0)}else{if(e.gte(Na))return pl(e,0,!1);if(e.gte(Fi))return pl(e,0);if(e.gte(Ki))return pl(e,t);if(e.gte(Ca))return Dl(e,0);if(e.gte(Ma)||!n)return Zi(e,t);if(e.eq(Yi))return 0 .toFixed(t)}return e=ts(e),e.lt(Fi)?pl(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):nn(e,t)+"\u207B\xB9"}function It(e){return e=new s(e),e.sign<0?"-"+It(e.neg()):e.gte(Ki)||e.lte($a)&&!e.eq(Yi)?nn(e):nn(e,0)}function es(e){return s.lt(e,0)?"-"+es(s.neg(e)):s.gt(e,2**51)?nn(s.div(e,31536e3))+"y":(e=new s(e).toNumber(),e<60?nn(e)+"s":e<3600?It(Math.floor(e/60))+"m "+nn(e%60)+"s":e<86400?It(Math.floor(e/3600))+"h "+It(Math.floor(e/60)%60)+"m "+It(e%60)+"s":e<31536e3?It(Math.floor(e/84600)%365)+"d "+It(Math.floor(e/3600)%24)+"h "+It(Math.floor(e/60)%60)+"m":It(Math.floor(e/31536e3))+"y "+It(Math.floor(e/84600)%365)+"d "+It(Math.floor(e/3600)%24)+"h")}function Pa(e,t,n){e=new s(e);let l=e.toStringWithDecimalPlaces(t);return new s(l).gte(n)&&(l=s.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),l}function xa(e,t){return nn(e,t,!0)}function ts(e){let t=s.log10(e).ceil();const n=s.div(e,s.pow(10,t));return t=t.neg(),e=new s(10).pow(t).times(n),e}var Ta=Object.freeze(Object.defineProperty({__proto__:null,default:s,exponentialFormat:pl,commaFormat:Dl,regularFormat:Zi,format:nn,formatWhole:It,formatTime:es,toPlaces:Pa,formatSmall:xa,invertOOM:ts},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Fa,commaFormat:Ea,regularFormat:Ia,format:be,formatWhole:pe,formatTime:En,toPlaces:Da,formatSmall:La,invertOOM:Aa}=Ta;window.Decimal=s;window.exponentialFormat=Fa;window.commaFormat=Ea;window.regularFormat=Ia;window.format=be;window.formatWhole=pe;window.formatTime=En;window.toPlaces=Da;window.formatSmall=La;window.invertOOM=Aa;function tn(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function ni(e){return typeof e=="function"}var je=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(je||{});const vl=Symbol("DoNotCache");function E(e,t){const n=e[t];ni(n)&&n.length===0&&!n[vl]?e[t]=b(n.bind(e)):ni(n)&&(e[t]=n.bind(e),e[t][vl]=!0)}function pt(e){return ni(e)&&!e[vl]&&(e=b(e)),e}const Ye=Symbol("Component"),Re=Symbol("GatherProps");let Oa=0;function an(e="feature-"){return e+Oa++}var ue=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(ue||{});function N(e){return e[vl]=!0,e}function J(e,t=2){return e?0:t}function ft(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}const Bn={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var ci=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(ci||{}),rl={classic:Bn,paper:{...Bn,variables:{...Bn.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Bn,variables:{...Bn.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Bn,variables:{...Bn.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const yt=Symbol("ProxyState"),tl=Symbol("ProxyPath");function vt(e,t={}){const n=t;let l=!1;function i(){return l||(Object.assign(n,e(n)),l=!0),n}return new Proxy(n,{get(o,u){return u===yt?i():i()[u]},set(o,u,c){return i()[u]=c,!0},has(o,u){return u===yt?!0:Reflect.has(i(),u)},ownKeys(){return Reflect.ownKeys(i())},getOwnPropertyDescriptor(o,u){return l||(Object.assign(n,e(n)),l=!0),Object.getOwnPropertyDescriptor(o,u)}})}var tt=window.state=oi({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const ns=wl({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function ls(e){return JSON.stringify(e,(t,n)=>r(n))}const is={get(e,t){var l;if(t===yt||t===tl)return e[t];const n=e[yt][t];if(t!=="value"&&(Is(n)||Array.isArray(n))){if(n!==((l=e[t])==null?void 0:l[yt])){const i=[...e[tl],t];e[t]=new Proxy({[yt]:n,[tl]:i},is)}return e[t]}return n},set(e,t,n,l){if(!tt.hasNaN&&(typeof n=="number"&&isNaN(n)||n instanceof s&&(isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag)))){const i=e[yt][t];if(!(typeof i=="number"&&isNaN(i)||i instanceof s&&(isNaN(i.sign)||isNaN(i.layer)||isNaN(i.mag))))throw ns.autosave=!1,tt.hasNaN=!0,tt.NaNPath=[...e[tl],t],tt.NaNReceiver=l,console.error("Attempted to set NaN value",[...e[tl],t],e[yt]),"Attempted to set NaN value. See above for details"}return e[yt][t]=n,!0},ownKeys(e){return Reflect.ownKeys(e[yt])},has(e,t){return Reflect.has(e[yt],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[yt],t)}};var D=window.player=new Proxy({[yt]:ns,[tl]:["player"]},is);const xt=Ji();let nl=null,ml=null;function Ll(){const e=Date.now();let t=(e-D.time)/1e3;D.time=e;const n=t;if(tt.lastTenTicks.push(n),tt.lastTenTicks.length>10&&(tt.lastTenTicks=tt.lastTenTicks.slice(1)),!((ml==null?void 0:ml.value)&&!D.keepGoing)&&!tt.hasNaN&&(t=Math.max(t,0),D.devSpeed!==0)){if(D.offlineTime!=null){if(s.gt(D.offlineTime,Ve.offlineLimit*3600)&&(D.offlineTime=Ve.offlineLimit*3600),s.gt(D.offlineTime,0)&&D.devSpeed!==0){const l=Math.max(D.offlineTime/10,t);D.offlineTime=D.offlineTime-l,t+=l}else D.devSpeed===0&&(D.offlineTime+=t);(!D.offlineProd||s.lt(D.offlineTime,0))&&(D.offlineTime=null)}t=Math.min(t,Ve.maxTickLength),D.devSpeed!=null&&(t*=D.devSpeed),Number.isFinite(t)||(t=1e308),!s.eq(t,0)&&(D.timePlayed+=t,Number.isFinite(D.timePlayed)||(D.timePlayed=1e308),xt.emit("update",t,n),Be.unthrottled?(requestAnimationFrame(Ll),nl!=null&&(clearInterval(nl),nl=null)):nl==null&&(nl=setInterval(Ll,50)))}}async function ja(){ml=(await Il(()=>Promise.resolve().then(function(){return Ns}),void 0)).hasWon,Ze(ml,e=>{e&&xt.emit("gameWon")}),Be.unthrottled?requestAnimationFrame(Ll):nl=setInterval(Ll,50)}document.fonts.onloadingdone=()=>xt.emit("fontsLoaded");var Ra=Object.freeze(Object.defineProperty({__proto__:null,globalBus:xt,startGameLoop:ja},Symbol.toStringTag,{value:"Module"}));function ss(e={}){return Object.assign({id:`${Ve.id}-0`,name:"Default Save",tabs:Ve.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:Ve.id,modVersion:Ve.versionNumber,layers:{}},e)}function on(e){const t=Mn.compressToUTF16(ls(e!=null?e:D[yt]));return localStorage.setItem((e!=null?e:D[yt]).id,t),t}async function qa(){Ga();try{let e=localStorage.getItem(Be.active);if(e==null){await Vn(il());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Mn.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==Ve.id){await Vn(il());return}t.id=Be.active,await Vn(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Vn(il())}}function il(){const e=xl(),t=ss({id:e});return on(t),Be.saves.push(e),t}function xl(){let e,t=0;do e=`${Ve.id}-${t++}`;while(localStorage.getItem(e));return e}async function Vn(e){console.info("Loading save",e);const{layers:t,removeLayer:n,addLayer:l}=await Il(()=>Promise.resolve().then(function(){return co}),void 0),{fixOldSave:i,getInitialLayers:o}=await Il(()=>Promise.resolve().then(function(){return Ns}),void 0);for(const u in t){const c=t[u];c&&n(c)}o(e).forEach(u=>l(u,e)),e=ss(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==Ve.versionNumber&&i(e.modVersion,e),Object.assign(D,e),Be.active=D.id,xt.emit("onLoad")}setInterval(()=>{D.autosave&&on()},1e3);window.onbeforeunload=()=>{D.autosave&&on()};window.save=on;const Ba=window.hardReset=async()=>{await Vn(il())},hl=wl({active:"",saves:[],showTPS:!0,theme:ci.Nordic,unthrottled:!1});Ze(hl,e=>{const t=Mn.compressToUTF16(JSON.stringify(e));localStorage.setItem(Ve.id,t)},{deep:!0});var Be=window.settings=hl;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:ci.Nordic};xt.emit("loadSettings",e),Object.assign(hl,e),Ba()};function Ga(){try{let e=localStorage.getItem(Ve.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Mn.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(hl,t)}xt.emit("loadSettings",hl)}catch{}}const as=wl([]);function Va(e){as.push(e)}const Ua=wl([]),za=wl([]),Xa={class:"table"},Rl=X({__name:"Column",setup(e){const t=b(()=>rl[Be.theme].mergeAdjacent);return(n,l)=>(h(),S("div",Xa,[f("div",{class:qe(["col",{mergeAdjacent:r(t)}])},[Ut(n.$slots,"default")],2)]))}}),Ha={class:"table"},gl=X({__name:"Row",setup(e){const t=b(()=>rl[Be.theme].mergeAdjacent);return(n,l)=>(h(),S("div",Ha,[f("div",{class:qe(["row",{mergeAdjacent:r(t)}])},[Ut(n.$slots,"default")],2)]))}});function ql(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ui(e)}function fe(e,t="span"){return typeof e=="function"?X({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),X({template:e})):X({render:()=>({})}):e}function Qe(e){if(un(e))return typeof e=="function"?e():fe(e);const t=e[Ye];return a(t,e[Re](),null)}function Tl(...e){let t;return a(gl,null,ql(t=e.map(Qe))?t:{default:()=>[t]})}function yl(...e){let t;return a(Rl,null,ql(t=e.map(Qe))?t:{default:()=>[t]})}function ut(e){if(un(e))return typeof e=="function"?e():typeof e=="string"?a(F,null,[e]):a(e,null,null);const t=e[Ye];return a(t,e[Re](),null)}function li(...e){let t;return a(gl,null,ql(t=e.map(ut))?t:{default:()=>[t]})}function Hn(...e){let t;return a(Rl,null,ql(t=e.map(ut))?t:{default:()=>[t]})}function Ja(e,t){return e.reduce((n,l)=>a(F,null,[n,t,l]))}function un(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[vl]===!0}function os(e,t){const n=z(null),l=z(void 0);function i(c){n.value||(n.value=setInterval(u,250)),l.value=c}function o(){n.value&&(clearInterval(n.value),n.value=null)}function u(){t&&t.value?t.value():e&&e.value&&e.value(l.value)}return ri(o),{start:i,stop:o,handleHolding:u}}function Jn(e,t){const n=b(()=>e.filter(l=>r(l.visibility)===ue.Visible&&t(l)));return{firstFeature:b(()=>n.value[0]),collapsedContent:N(()=>yl(...n.value.slice(1))),hasCollapsedContent:b(()=>n.value.length>1)}}function zn(e,t="div"){const n=_t();return jt(()=>{n.value=fe(at(e),t)}),n}function In(e,t="div"){const n=_t(null);return jt(()=>{const l=at(e);n.value=l==null?null:fe(l,t)}),n}function Wa(e){return b(()=>at(e))}function at(e){return r(r(e))}function O(...e){return e.includes(Object)||e.push(Object),e}function rs(e){const t=z(!1),n=e[Re].bind(e);return e[Re]=()=>({...n(),onPointerenter:()=>t.value=!0,onPointerleave:()=>t.value=!1}),t}var oe=(e,t)=>{const n=e.__vccOpts||e;for(const[l,i]of t)n[l]=i;return n};const Qa=X({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var v;const n=z({}),l=new ResizeObserver(c),i=z(null);al(()=>{const g=i.value;g!=null&&l.observe(g)});let o=!0,u=z((v=i.value)==null?void 0:v.getBoundingClientRect());function c(){o&&(o=!1,zt(()=>{var g;u.value=(g=i.value)==null?void 0:g.getBoundingClientRect(),Object.values(n.value).filter(y=>y).forEach(y=>y.rect=y.element.getBoundingClientRect()),t("updateNodes",n.value),o=!0}))}xt.on("fontsLoaded",c);const p={attributes:!1,childList:!0,subtree:!1};Cl(di,(g,y)=>{const _=new MutationObserver(()=>d(g));_.observe(y,p),n.value[g]={element:y,observer:_,rect:y.getBoundingClientRect()},c()}),Cl(pi,g=>{var y;(y=n.value[g])==null||y.observer.disconnect(),n.value[g]=void 0,c()}),Cl(mi,n),Cl(fi,u);function d(g){const y=n.value[g];y!=null&&(y.rect=y.element.getBoundingClientRect(),t("updateNodes",n.value))}return(g,y)=>(h(),S(F,null,[Ut(g.$slots,"default",{},void 0,!0),f("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var us=oe(Qa,[["__scopeId","data-v-2b1dc1bc"]]);const Za=["onPointerdown"],Ka={class:"modal-wrapper"},Ya={class:"modal-container"},eo={class:"modal-header"},to=m(" default header "),no={class:"modal-body"},lo=m(" default body "),io={class:"modal-footer"},so=f("div",{class:"modal-default-flex-grow"},null,-1),Dn=X({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const i=it(e),o=b(()=>i.modelValue||c.value);function u(){n("update:modelValue",!1)}const c=z(!1),p=z(null),d=b(()=>{var v,g;return(g=(v=p.value)==null?void 0:v.nodes)!=null?g:null});return t({isOpen:o,nodes:d}),(v,g)=>(h(),B(zi,{to:"#modal-root"},[a(jl,{name:"modal",onBeforeEnter:g[0]||(g[0]=y=>c.value=!0),onAfterLeave:g[1]||(g[1]=y=>c.value=!1)},{default:te(()=>[ln(f("div",Gt({class:"modal-mask",onPointerdown:Un(u,["self"])},v.$attrs),[f("div",Ka,[f("div",Ya,[f("div",eo,[Ut(v.$slots,"header",{shown:r(o)},()=>[to])]),f("div",no,[a(us,{ref_key:"contextRef",ref:p},{default:te(()=>[Ut(v.$slots,"body",{shown:r(o)},()=>[lo])]),_:3},512)]),f("div",io,[Ut(v.$slots,"footer",{shown:r(o)},()=>[f("div",{class:"modal-default-footer"},[so,f("button",{class:"button modal-default-button",onClick:u}," Close ")])])])])])],16,Za),[[gn,e.modelValue]])]),_:3})]))}}),ii=Symbol("PersistentState"),bl=Symbol("DefaultValue"),Al=Symbol("StackTrace"),cs=Symbol("Deleted");function ao(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function V(e){const t=Pt(e)?e:z(e);return t[ii]=t,t[bl]=Pt(e)?e.value:e,t[Al]=ao(),t[cs]=!1,rn.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[Al]):sl[rn[rn.length-1]].add(t),t}xt.on("addLayer",(e,t)=>{const n=[],l=(i,o=[])=>{let u=!1;return Object.keys(i).forEach(c=>{const p=i[c];if(p&&typeof p=="object")if(ii in p){if(u=!0,p[cs]){console.warn("Deleted persistent ref present in returned object. Ignoring...",p,`
Created at:
`+p[Al]);return}sl[e.id].delete(yt in p?p[yt]:p);const d=o.reduce((g,y)=>(y in g||(g[y]={}),g[y]),t),v=d[c];d[c]=p[ii],Ps(d)?v!=null?d[c]=v:d[c]=p[bl]:v!=null?d[c].value=v:d[c].value=p[bl]}else!(p instanceof s)&&!Pt(p)&&!n.includes(p)&&(typeof p.type=="symbol"&&n.push(p),l(p,[...o,c])&&(Ci(p)&&!Ci(i)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",yt in i?i[yt]:i,c):u=!0))}),u};l(e),sl[e.id].forEach(i=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,i,`
Created at:
`+i[Al])}),sl[e.id].clear()});const di=Symbol("RegisterNode"),pi=Symbol("UnregisterNode"),mi=Symbol("Nodes"),fi=Symbol("Bounds"),Vt=oi({});window.layers=Vt;const sl={},rn=[];function wn(e,t){return vt(()=>{const n={},l=n.emitter=Ji();if(n.on=l.on.bind(l),n.emit=l.emit.bind(l),n.nodes=z({}),n.id=e,rn.push(e),sl[e]=new Set,n.minimized=V(!1),Object.assign(n,t.call(n)),rn[rn.length-1]==null||rn[rn.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${rn}
Trying to pop ${n.id}`;return rn.pop(),E(n,"color"),E(n,"display"),E(n,"name"),ft(n,"name",n.id),E(n,"minWidth"),ft(n,"minWidth",600),E(n,"minimizable"),ft(n,"minimizable",!0),n})}function vn(e,t){if(console.info("Adding layer",e.id),Vt[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,Vt[e.id]);return}ft(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),Vt[e.id]=e,xt.emit("addLayer",e,t.layers[e.id])}function oo(e){return Vt[e]}function ds(e){console.info("Removing layer",e.id),xt.emit("removeLayer",e),Vt[e.id]=void 0}function ro(e){ds(e),vn(e,D)}function uo(e){const t=z(!1);return{openModal:()=>t.value=!0,modal:N(()=>a(Dn,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>a("h2",null,[r(e.name)]),body:r(e.display)}))}}xt.on("update",function(t){Object.values(Vt).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(Vt).forEach(n=>{n==null||n.emit("update",t)}),Object.values(Vt).forEach(n=>{n==null||n.emit("postUpdate",t)})});var co=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:di,UnregisterNodeInjectionKey:pi,NodesInjectionKey:mi,BoundsInjectionKey:fi,layers:Vt,persistentRefs:sl,addingLayers:rn,createLayer:wn,addLayer:vn,getLayer:oo,removeLayer:ds,reloadLayer:ro,setupLayerModal:uo},Symbol.toStringTag,{value:"Module"}));const po=X({components:{Context:us},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:O(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:O(Number,String),required:!0},name:{type:O(String),required:!0},color:O(String),minimizable:O(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:n,minimized:l,minWidth:i,tab:o}=it(e),u=zn(t),c=b(()=>Ve.allowGoBack&&n.value>0&&!l.value);function p(){D.tabs.splice(r(e.index),1/0)}zt(()=>v(l.value,r(i.value))),Ze([l,Wa(i)],([g,y])=>v(g,y));function d(g){e.nodes.value=g}function v(g,y){const _=typeof y=="number"||Number.isNaN(parseInt(y))?y+"px":y,w=o.value();w!=null&&(g?(w.style.flexGrow="0",w.style.flexShrink="0",w.style.width="60px",w.style.minWidth=w.style.flexBasis="",w.style.margin="0"):(w.style.flexGrow="",w.style.flexShrink="",w.style.width="",w.style.minWidth=w.style.flexBasis=_,w.style.margin=""))}return{component:u,showGoBack:c,updateNodes:d,unref:r,goBack:p}}});function mo(e,t,n,l,i,o){const u=Dt("Context");return h(),S("div",{class:"layer-container",style:Ie({"--layer-color":e.unref(e.color)})},[e.showGoBack?(h(),S("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...c)=>e.goBack&&e.goBack(...c))},"\u2190")):j("",!0),e.minimized.value?(h(),S("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=c=>e.minimized.value=!1)},[f("div",null,Q(e.unref(e.name)),1)])):(h(),S("div",{key:2,class:qe(["layer-tab",{showGoBack:e.showGoBack}])},[a(u,{onUpdateNodes:e.updateNodes},{default:te(()=>[(h(),B(De(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(h(),S("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=c=>e.minimized.value=!0)}," \u25BC ")):j("",!0)],4)}var fo=oe(po,[["render",mo],["__scopeId","data-v-34c9d881"]]);const ps=e=>(Ht("data-v-4b4bda40"),e=e(),Jt(),e),vo=ps(()=>f("h2",null,"Changelog",-1)),ho=ps(()=>f("details",{open:""},[f("summary",null,[m("v0.0 Initial Commit - "),f("time",null,"2021-09-04")]),m(" This is the first release :D "),f("ul",null,[f("li",{class:"feature"},"Did everything"),f("li",{class:"fix"},"Had some fun"),f("li",{class:"breaking"},"Removed everything"),f("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),go=X({__name:"Changelog",setup(e,{expose:t}){const n=z(!1);return t({open(){n.value=!0}}),(l,i)=>(h(),B(Dn,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=o=>n.value=o)},{header:te(()=>[vo]),body:te(()=>[ho]),_:1},8,["modelValue"]))}});var yo=oe(go,[["__scopeId","data-v-4b4bda40"]]),bo=X({props:{element:Object,display:{type:O(Object,String,Function),required:!0},style:O(Object,String,Array),classes:O(Object),direction:O(String),xoffset:O(String),yoffset:O(String),pinned:Object},setup(e){const{element:t,display:n,pinned:l}=it(e),i=z(!1),o=b(()=>(at(l)||i.value)&&u.value),u=In(n),c=_t(fe(N(()=>{const v=at(t);return v==null?"":ut(v)})));function p(v){const g=l;v.shiftKey&&g&&(g.value=!g.value,v.stopPropagation(),v.preventDefault())}const d=b(()=>at(l)&&rl[Be.theme].showPin);return{Direction:je,isHovered:i,isShown:o,comp:u,elementComp:c,unref:r,togglePinned:p,showPin:d}}});const _o={key:0,class:"material-icons pinned"};function wo(e,t,n,l,i,o){return h(),S("div",{class:qe(["tooltip-container",{shown:e.isShown,...e.unref(e.classes)}]),onMouseenter:t[0]||(t[0]=u=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=u=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...u)=>e.togglePinned&&e.togglePinned(...u))},[Ut(e.$slots,"default",{},void 0,!0),e.elementComp?(h(),B(De(e.elementComp),{key:0})):j("",!0),a(jl,{name:"fade"},{default:te(()=>{var u;return[e.isShown?(h(),S("div",{key:0,class:qe(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:Ie([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(u=e.unref(e.style))!=null?u:{}])},[e.showPin?(h(),S("span",_o,"push_pin")):j("",!0),e.comp?(h(),B(De(e.comp),{key:1})):j("",!0)],6)):j("",!0)]}),_:1})],34)}var nt=oe(bo,[["render",wo],["__scopeId","data-v-be7a60de"]]);const Wn=e=>(Ht("data-v-7dec2dec"),e=e(),Jt(),e),ko={class:"info-modal-header"},No=["src","alt"],So={class:"info-modal-title"},Co={key:0},$o={key:0},Mo={key:0},Po=Wn(()=>f("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),xo=Wn(()=>f("br",null,null,-1)),To=Wn(()=>f("br",null,null,-1)),Fo=["href"],Eo=Wn(()=>f("span",{class:"material-icons info-modal-discord"},"discord",-1)),Io=Wn(()=>f("div",null,[f("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[f("span",{class:"material-icons info-modal-discord"},"discord"),m(" The Paper Pilot Community ")])],-1)),Do=Wn(()=>f("div",null,[f("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[f("span",{class:"material-icons info-modal-discord"},"discord"),m(" The Modding Tree ")])],-1)),Lo=Wn(()=>f("br",null,null,-1));var Ao=X({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:l,logo:i,author:o,discordName:u,discordLink:c,versionNumber:p,versionTitle:d}=Ve,v=it(n),g=z(!1),y=b(()=>En(D.timePlayed)),_=b(()=>fe(N(()=>a(F,null,[Ua.map(Qe)]))));t({open(){g.value=!0}});function w(){var M;(M=r(v.changelog))==null||M.open()}return(M,G)=>(h(),B(Dn,{modelValue:g.value,"onUpdate:modelValue":G[0]||(G[0]=ye=>g.value=ye)},{header:te(()=>[f("div",ko,[r(i)?(h(),S("img",{key:0,class:"info-modal-logo",src:r(i),alt:r(l)},null,8,No)):j("",!0),f("div",So,[f("h2",null,Q(r(l)),1),f("h4",null,[m(" v"+Q(r(p)),1),r(d)?(h(),S("span",Co,": "+Q(r(d)),1)):j("",!0)])])])]),body:te(({shown:ye})=>[ye?(h(),S("div",$o,[r(o)?(h(),S("div",Mo,"By "+Q(r(o)),1)):j("",!0),Po,xo,f("div",{class:"link",onClick:w},"Changelog"),To,f("div",null,[r(c)?(h(),S("a",{key:0,href:r(c),class:"info-modal-discord-link"},[Eo,m(" "+Q(r(u)),1)],8,Fo)):j("",!0)]),Io,Do,Lo,f("div",null,"Time Played: "+Q(r(y)),1),(h(),B(De(r(_))))])):j("",!0)]),_:1},8,["modelValue"]))}});var Oo=oe(Ao,[["__scopeId","data-v-7dec2dec"]]);const jo={class:"field"},Ro={key:0,class:"field-title"},vi=X({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var u;const n=e,l=In(Xt(n,"title"),"span"),i=z((u=n.options.find(c=>c.value===n.modelValue))!=null?u:null);Ze(Xt(n,"modelValue"),c=>{var p;at(i)!==c&&(i.value=(p=n.options.find(d=>d.value===c))!=null?p:null)});function o(c){t("update:modelValue",c.value)}return(c,p)=>(h(),S("div",jo,[r(l)?(h(),S("span",Ro,[(h(),B(De(r(l))))])):j("",!0),a(r(Ds),{options:e.options,modelValue:i.value,"onUpdate:modelValue":[p[0]||(p[0]=d=>i.value=d),o],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const qo={class:"field"},Bo=X({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,l=b(()=>fe(r(n.title)||"<span></span>","span")),i=b({get(){return!!n.modelValue},set(o){t("update:modelValue",o)}});return(o,u)=>(h(),S("label",qo,[ln(f("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":u[0]||(u[0]=c=>Pt(i)?i.value=c:null)},null,512),[[xs,r(i)]]),(h(),B(De(r(l))))]))}});var $n=oe(Bo,[["__scopeId","data-v-2b109500"]]);const ms=e=>(Ht("data-v-bc13791c"),e=e(),Jt(),e),Go=ms(()=>f("div",{class:"header"},[f("h2",null,"Options")],-1)),Vo=ms(()=>f("hr",null,null,-1));var Uo=X({__name:"Options",setup(e,{expose:t}){const n=z(!1);t({open(){n.value=!0}});const l=Object.keys(rl).map(w=>({label:tn(w),value:w})),i=b(()=>fe(N(()=>a(F,null,[as.map(Qe)])))),{showTPS:o,theme:u,unthrottled:c}=it(Be),{autosave:p,offlineProd:d}=it(D),v=b({get(){return D.devSpeed===0},set(w){D.devSpeed=w?0:null}}),g=N(()=>a("span",null,[m("Offline Production"),a(nt,{display:"Save-specific"},{default:()=>[m("*")]})])),y=N(()=>a("span",null,[m("Autosave"),a(nt,{display:"Save-specific"},{default:()=>[m("*")]})])),_=N(()=>a("span",null,[m("Pause game"),a(nt,{display:"Save-specific"},{default:()=>[m("*")]})]));return(w,M)=>(h(),B(Dn,{modelValue:n.value,"onUpdate:modelValue":M[6]||(M[6]=G=>n.value=G)},{header:te(()=>[Go]),body:te(()=>[a(vi,{title:"Theme",options:r(l),modelValue:r(u),"onUpdate:modelValue":M[0]||(M[0]=G=>Pt(u)?u.value=G:null)},null,8,["options","modelValue"]),(h(),B(De(r(i)))),a($n,{title:"Show TPS",modelValue:r(o),"onUpdate:modelValue":M[1]||(M[1]=G=>Pt(o)?o.value=G:null)},null,8,["modelValue"]),Vo,a($n,{title:"Unthrottled",modelValue:r(c),"onUpdate:modelValue":M[2]||(M[2]=G=>Pt(c)?c.value=G:null)},null,8,["modelValue"]),a($n,{title:r(g),modelValue:r(d),"onUpdate:modelValue":M[3]||(M[3]=G=>Pt(d)?d.value=G:null)},null,8,["title","modelValue"]),a($n,{title:r(y),modelValue:r(p),"onUpdate:modelValue":M[4]||(M[4]=G=>Pt(p)?p.value=G:null)},null,8,["title","modelValue"]),r(Ve).enablePausing?(h(),B($n,{key:0,title:r(_),modelValue:r(v),"onUpdate:modelValue":M[5]||(M[5]=G=>Pt(v)?v.value=G:null)},null,8,["title","modelValue"])):j("",!0)]),_:1},8,["modelValue"]))}});var zo=oe(Uo,[["__scopeId","data-v-bc13791c"]]);const Xo=["onSubmit"],Ho={class:"field"},Jo={key:0,class:"field-title"},Wo=["placeholder"],Qo=X({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,l=In(Xt(n,"title"),"span"),i=_t(null);al(()=>{var p;(p=i.value)==null||p.focus()});const o=b({get(){return r(n.modelValue)||""},set(p){t("update:modelValue",p)}});function u(){t("submit")}function c(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(p,d)=>(h(),S("form",{onSubmit:Un(u,["prevent"])},[f("div",Ho,[r(l)?(h(),S("span",Jo,[(h(),B(De(r(l))))])):j("",!0),e.textArea?(h(),B(r(As),{key:1,modelValue:r(o),"onUpdate:modelValue":d[0]||(d[0]=v=>Pt(o)?o.value=v:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:c,ref_key:"field",ref:i},null,8,["modelValue","placeholder","maxHeight"])):ln((h(),S("input",{key:2,type:"text","onUpdate:modelValue":d[1]||(d[1]=v=>Pt(o)?o.value=v:null),placeholder:e.placeholder,class:qe({fullWidth:!e.title}),onBlur:c,ref_key:"field",ref:i},null,42,Wo)),[[Xi,r(o)]])])],40,Xo))}});var fs=oe(Qo,[["__scopeId","data-v-67b44a54"]]);const Zo=X({__name:"Node",props:{id:null},setup(e){const n=it(e),l=El(di,()=>{}),i=El(pi,()=>{}),o=_t(null),u=b(()=>o.value&&o.value.parentElement);return Ze([u,n.id],([c,p],[d,v])=>{d&&i(r(v)),c&&l(p,c)}),ri(()=>i(r(n.id))),(c,p)=>(h(),S("div",{class:"node",ref_key:"node",ref:o},null,512))}});var Ln=oe(Zo,[["__scopeId","data-v-a48cb382"]]);const Ko={},Yo={class:"notif"};function er(e,t){return h(),S("div",Yo,"!")}var yn=oe(Ko,[["render",er],["__scopeId","data-v-5156253e"]]);const Ce=X({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(h(),S("div",{style:Ie({width:e.width,height:e.height})},null,4))}});Wi.registerPlugin(Os);js.registerPlugin("batch",Rs);var tr=X({props:{style:O(String,Object,Array),classes:O(Object),onInit:{type:Function,required:!0},id:{type:String,required:!0},onContainerResized:Function,onHotReload:Function},setup(e){const t=_t(null),n=new ResizeObserver(o),l=_t(null);al(()=>{var c,p;const u=l.value;u!=null&&(n.observe(u),t.value=new Wi({resizeTo:u,backgroundAlpha:0}),(c=l.value)==null||c.appendChild(t.value.view),(p=e.onInit)==null||p.call(e,t.value)),o(),e.onHotReload&&zt(e.onHotReload)}),ui(()=>{var u;(u=t.value)==null||u.destroy()});let i=!0;function o(){i&&(i=!1,zt(()=>{var u;l.value!=null&&((u=e.onContainerResized)==null||u.call(e,l.value.getBoundingClientRect())),i=!0}))}return xt.on("fontsLoaded",o),{unref:r,resizeListener:l}}});function nr(e,t,n,l,i,o){return h(),S("div",{ref:"resizeListener",class:qe(["resize-listener",e.unref(e.classes)]),style:Ie(e.unref(e.style))},null,6)}var lr=oe(tr,[["render",nr],["__scopeId","data-v-48dd302a"]]);const ir=Symbol("Particles");function Bl(e){return vt(()=>{var i,o;const t=(i=e==null?void 0:e())!=null?i:{};t.id=an("particles-"),t.type=ir,t[Ye]=lr,t.app=_t(null),t.addEmitter=u=>{const c=t;return c.app.value?Promise.resolve(new $i(c.app.value.stage,u)):new Promise(p=>{n.push({resolve:p,config:u})})};let n=[];function l(u){const c=t;c.app.value=u,n.forEach(({resolve:p,config:d})=>p(new $i(u.stage,d))),n=[]}return t.onContainerResized=(o=t.onContainerResized)==null?void 0:o.bind(t),t[Re]=function(){const{id:u,style:c,classes:p,onContainerResized:d,onHotReload:v}=this;return{id:u,style:r(c),classes:p,onContainerResized:d,onHotReload:v,onInit:l}},t})}window.upgradeConfig=qs;function sn(e,t="points",n=0,l=void 0){const i=Pt(e)?e:V(e);return i.displayName=t,i.precision=n,i.small=l,i}function Gl(e){const t=V(e.value);return Ze(e,n=>{s.gt(n,t.value)&&(t.value=n)}),t}function sr(e){const t=V(e.value);return Ze(e,(n,l)=>{s.gt(n,l)&&(t.value=s.add(t.value,s.sub(n,l)))}),t}new s("10^^8");new s("1e100");function Tn(e,t){const n=t!=null?t:e.value;return s.eq(e.precision,0)?pe(n):be(n,e.precision,e.small)}function cl(e){return"displayName"in e?e:r(e)}const ar={key:0},or={key:0,class:"mark star"},rr=["src"],ur=X({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(h(),S("div",ar,[e.mark===!0?(h(),S("div",or)):(h(),S("img",{key:1,class:"mark",src:e.mark},null,8,rr))])):j("",!0)}});var Vl=oe(ur,[["__scopeId","data-v-2207999f"]]),cr=X({props:{display:{type:O(String,Object,Function),required:!0},visibility:{type:O(Number),required:!0},style:O(String,Object,Array),classes:O(Object),resource:Object,cost:O(String,Object,Number),canPurchase:{type:O(Boolean),required:!0},bought:{type:O(Boolean),required:!0},mark:O(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:Ln,MarkNode:Vl},setup(e){const{display:t,cost:n}=it(e),l=_t("");return jt(()=>{const i=at(t);if(i==null){l.value="";return}if(un(i)){l.value=fe(i);return}const o=at(n),u=fe(i.title||"","h3"),c=fe(i.description,"div"),p=fe(i.effectDisplay||"");l.value=fe(N(()=>{var d;return a("span",null,[i.title?a("div",null,[a(u,null,null)]):null,a(c,null,null),i.effectDisplay?a("div",null,[m("Currently: "),a(p,null,null)]):null,e.resource!=null?a(F,null,[a("br",null,null),m("Cost: "),e.resource&&Tn(e.resource,o)," ",(d=e.resource)==null?void 0:d.displayName]):null])}))}),{component:l,unref:r,Visibility:ue}}});const dr=["disabled"];function pr(e,t,n,l,i,o){var p;const u=Dt("MarkNode"),c=Dt("Node");return e.unref(e.visibility)!==e.Visibility.None?(h(),S("button",{key:0,style:Ie([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(p=e.unref(e.style))!=null?p:{}]),onClick:t[0]||(t[0]=(...d)=>e.purchase&&e.purchase(...d)),class:qe({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(h(),B(De(e.unref(e.component)),{key:0})):j("",!0),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(c,{id:e.id},null,8,["id"])],14,dr)):j("",!0)}var mr=oe(cr,[["render",pr],["__scopeId","data-v-7742f590"]]);const fr=Symbol("Upgrade");function vr(e){const t=V(!1);return vt(()=>{const n=e();return n.id=an("upgrade-"),n.type=fr,n[Ye]=mr,n.canAfford==null&&(n.resource==null||n.cost==null)&&console.warn("Error: can't create upgrade without a canAfford property or a resource and cost property",n),n.bought=t,n.canAfford==null?n.canAfford=b(()=>{const l=n;return l.resource!=null&&l.cost!=null&&s.gte(l.resource.value,r(l.cost))}):E(n,"canAfford"),n.canPurchase=b(()=>r(n.visibility)===ue.Visible&&r(n.canAfford)&&!r(n.bought)),n.purchase=function(){var i;const l=n;!r(l.canPurchase)||(l.resource!=null&&l.cost!=null&&(l.resource.value=s.sub(l.resource.value,r(l.cost))),t.value=!0,(i=l.onPurchase)==null||i.call(l))},E(n,"visibility"),ft(n,"visibility",ue.Visible),E(n,"classes"),E(n,"style"),E(n,"display"),E(n,"mark"),E(n,"cost"),E(n,"resource"),n[Re]=function(){const{display:l,visibility:i,style:o,classes:u,resource:c,cost:p,canPurchase:d,bought:v,mark:g,id:y,purchase:_}=this;return{display:l,visibility:i,style:r(o),classes:u,resource:c,cost:p,canPurchase:d,bought:v,mark:g,id:y,purchase:_}},n})}const hr=X({__name:"Collapsible",props:{collapsed:null,display:null,content:null},setup(e){const t=e,n=zn(Xt(t,"display")),l=zn(Xt(t,"content"));return(i,o)=>(h(),B(Rl,{class:"collapsible-container"},{default:te(()=>[f("button",{onClick:o[0]||(o[0]=u=>e.collapsed.value=!e.collapsed.value),class:"feature collapsible-toggle"},[(h(),B(De(r(n))))]),e.collapsed.value?j("",!0):(h(),B(De(r(l)),{key:0}))]),_:1}))}});var Qn=oe(hr,[["__scopeId","data-v-a388d5de"]]),gr=X({props:{display:{type:O(Object,String,Function),required:!0},visibility:{type:O(Number),required:!0},style:O(Object,String,Array),classes:O(Object),onClick:Function,onHold:Function,canClick:{type:O(Boolean),required:!0},small:Boolean,mark:O(Boolean,String),id:{type:String,required:!0}},components:{Node:Ln,MarkNode:Vl},setup(e){const{display:t,onClick:n,onHold:l}=it(e),i=_t("");jt(()=>{const c=at(t);if(c==null){i.value="";return}if(un(c)){i.value=fe(c);return}const p=fe(c.title||"","h3"),d=fe(c.description,"div");i.value=fe(N(()=>a("span",null,[c.title?a("div",null,[a(p,null,null)]):null,a(d,null,null)])))});const{start:o,stop:u}=os(n,l);return{start:o,stop:u,comp:i,Visibility:ue,unref:r}}});function yr(e,t,n,l,i,o){var p;const u=Dt("MarkNode"),c=Dt("Node");return e.unref(e.visibility)!==e.Visibility.None?(h(),S("button",{key:0,style:Ie([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(p=e.unref(e.style))!=null?p:[]]),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d)),class:qe({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(h(),B(De(e.unref(e.comp)),{key:0})):j("",!0),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(c,{id:e.id},null,8,["id"])],38)):j("",!0)}var fl=oe(gr,[["render",yr],["__scopeId","data-v-23983505"]]);const br=Symbol("Clickable");function Pn(e){return vt(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=an("clickable-"),t.type=br,t[Ye]=fl,E(t,"visibility"),ft(t,"visibility",ue.Visible),E(t,"canClick"),ft(t,"canClick",!0),E(t,"classes"),E(t,"style"),E(t,"mark"),E(t,"display"),t.onClick){const l=t.onClick.bind(t);t.onClick=function(i){r(t.canClick)&&l(i)}}if(t.onHold){const l=t.onHold.bind(t);t.onHold=function(){r(t.canClick)&&l()}}return t[Re]=function(){const{display:l,visibility:i,style:o,classes:u,onClick:c,onHold:p,canClick:d,small:v,mark:g,id:y}=this;return{display:l,visibility:i,style:r(o),classes:u,onClick:c,onHold:p,canClick:d,small:v,mark:g,id:y}},t})}const _r=["x1","y1","x2","y2"],wr=X({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=it(e),l=b(()=>{const o=n.startNode.value.rect,u=n.boundingRect.value,c=u?{x:o.x+o.width/2-u.x,y:o.y+o.height/2-u.y}:{x:0,y:0};return n.link.value.offsetStart&&(c.x+=n.link.value.offsetStart.x,c.y+=n.link.value.offsetStart.y),c}),i=b(()=>{const o=n.endNode.value.rect,u=n.boundingRect.value,c=u?{x:o.x+o.width/2-u.x,y:o.y+o.height/2-u.y}:{x:0,y:0};return n.link.value.offsetEnd&&(c.x+=n.link.value.offsetEnd.x,c.y+=n.link.value.offsetEnd.y),c});return(o,u)=>(h(),S("line",Gt({"stroke-width":"15px",stroke:"white"},e.link,{x1:r(l).x,y1:r(l).y,x2:r(i).x,y2:r(i).y}),null,16,_r))}});const kr=X({__name:"Links",props:{links:null},setup(e){var p;const n=Xt(e,"links"),l=z(null),i=El(mi,z({})),o=El(fi,z(void 0)),u=z((p=l.value)==null?void 0:p.getBoundingClientRect());Ze(o,()=>{var d;return u.value=(d=l.value)==null?void 0:d.getBoundingClientRect()}),al(()=>{var d;return u.value=(d=l.value)==null?void 0:d.getBoundingClientRect()});const c=b(()=>{var v,g;const d=i.value;return(g=(v=n.value)==null?void 0:v.filter(y=>{var _,w;return((_=d[y.startNode.id])==null?void 0:_.rect)&&((w=d[y.startNode.id])==null?void 0:w.rect)}))!=null?g:[]});return(d,v)=>(h(),S(F,null,[r(c)?(h(),S("svg",Hi(Gt({key:0},d.$attrs)),[(h(!0),S(F,null,_n(r(c),(g,y)=>(h(),B(wr,{key:y,link:g,boundingRect:u.value,startNode:r(i)[g.startNode.id],endNode:r(i)[g.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):j("",!0),f("div",{ref_key:"resizeListener",ref:l,class:"resize-listener"},null,512)],64))}});var Nr=oe(kr,[["__scopeId","data-v-063f6d6b"]]),Sr=X({props:{nodes:{type:O(Array),required:!0},leftSideNodes:O(Array),rightSideNodes:O(Array),branches:O(Array)},components:{Links:Nr},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:l}=it(e),i=_t();jt(()=>{const c=at(t);i.value=fe(N(()=>a(F,null,[c.map(p=>a("span",{class:"row tree-row",style:"margin: 50px auto;"},[p.map(ut)]))])))});const o=_t();jt(()=>{const c=at(n);o.value=c?fe(N(()=>a("span",{class:"left-side-nodes small"},[c.map(ut)]))):""});const u=_t();return jt(()=>{const c=at(l);u.value=c?fe(N(()=>a("span",{class:"side-nodes small"},[c.map(ut)]))):""}),{unref:r,nodesComp:i,leftNodesComp:o,rightNodesComp:u}}});function Cr(e,t,n,l,i,o){const u=Dt("Links");return h(),S(F,null,[(h(),B(De(e.nodesComp))),e.leftNodesComp?(h(),B(De(e.leftNodesComp),{key:0})):j("",!0),e.rightNodesComp?(h(),B(De(e.rightNodesComp),{key:1})):j("",!0),e.branches?(h(),B(u,{key:2,links:e.unref(e.branches)},null,8,["links"])):j("",!0)],64)}var $r=oe(Sr,[["render",Cr],["__scopeId","data-v-39ca96d0"]]);const Mr=X({props:{display:O(Object,String,Function),visibility:{type:O(Number),required:!0},style:O(String,Object,Array),classes:O(Object),onClick:Function,onHold:Function,color:O(String),glowColor:O(String),canClick:{type:O(Boolean),required:!0},mark:O(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Vl,Node:Ln},setup(e){const{onClick:t,onHold:n,display:l}=it(e),i=In(l),{start:o,stop:u}=os(t,n);return{start:o,stop:u,comp:i,unref:r,Visibility:ue,isCoercableComponent:un}}});function Pr(e,t,n,l,i,o){var p;const u=Dt("MarkNode"),c=Dt("Node");return e.unref(e.visibility)!==e.Visibility.None?(h(),S("div",{key:0,style:Ie({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:qe({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d))},[f("div",{style:Ie([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(p=e.unref(e.style))!=null?p:[]])},[(h(),B(De(e.unref(e.comp))))],4),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(c,{id:e.id},null,8,["id"])],38)):j("",!0)}var xr=oe(Mr,[["render",Pr],["__scopeId","data-v-1c0c107d"]]);const Tr=Symbol("TreeNode"),Fr=Symbol("Tree");function Ei(e){return vt(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=an("treeNode-"),t.type=Tr,t[Ye]=xr,E(t,"visibility"),ft(t,"visibility",ue.Visible),E(t,"canClick"),ft(t,"canClick",!0),E(t,"color"),E(t,"display"),E(t,"glowColor"),E(t,"classes"),E(t,"style"),E(t,"mark"),t.onClick){const l=t.onClick.bind(t);t.onClick=function(){r(t.canClick)&&l()}}if(t.onHold){const l=t.onHold.bind(t);t.onHold=function(){r(t.canClick)&&l()}}return t[Re]=function(){const{display:l,visibility:i,style:o,classes:u,onClick:c,onHold:p,color:d,glowColor:v,canClick:g,mark:y,id:_}=this;return{display:l,visibility:i,style:o,classes:u,onClick:c,onHold:p,color:d,glowColor:v,canClick:g,mark:y,id:_}},t})}function Er(e){return vt(()=>{const t=e();return t.id=an("tree-"),t.type=Fr,t[Ye]=$r,t.isResetting=z(!1),t.resettingNode=_t(null),t.reset=function(n){var i,o;const l=t;l.isResetting.value=!0,l.resettingNode.value=n,(i=l.resetPropagation)==null||i.call(l,l,n),(o=l.onReset)==null||o.call(l,n),l.isResetting.value=!1,l.resettingNode.value=null},t.links=b(()=>{var l;return(l=r(t.branches))!=null?l:[]}),E(t,"visibility"),ft(t,"visibility",ue.Visible),E(t,"nodes"),E(t,"leftSideNodes"),E(t,"rightSideNodes"),E(t,"branches"),t[Re]=function(){const{nodes:n,leftSideNodes:l,rightSideNodes:i,branches:o}=this;return{nodes:n,leftSideNodes:l,rightSideNodes:i,branches:o}},t})}function Bt(e){const t=[],n={};let l=!1;function i(){return l||(t.push(...e()),n.base=t.map(c=>pt(c.base)),n.baseText=t.map(c=>pt(c.baseText)),n.visible=t.map(c=>pt(c.visible)),l=!0),t}const o=V({});return[N(()=>{const c=i();let p=!0;const d=c.map((v,g)=>{var M,G,ye;if(r(n.visible[g])===!1)return null;const y=a("h3",{onClick:()=>o.value[g]=!o.value[g],style:"cursor: pointer"},[a("span",{class:"modifier-toggle"+(r(o.value[g])?" collapsed":"")},[m("\u25BC")]),v.title,v.subtitle?a("span",{class:"subtitle"},[m(" ("),v.subtitle,m(")")]):null]),_=r(o.value[g])?null:a(F,null,[a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[be((M=r(n.base[g]))!=null?M:1),v.unit]),a("span",{class:"modifier-description"},[ut((G=r(n.baseText[g]))!=null?G:"Base")])]),ut(r(v.modifier.description))]),w=!p;return p=!1,a(F,null,[w?a("br",null,null):null,a("div",null,[y,a("br",null,null),_,a("hr",null,null),m("Total: "),be(v.modifier.apply((ye=r(n.base[g]))!=null?ye:1)),v.unit])])});return a(F,null,[d])}),o]}function Mt(e,t="var(--accent2)"){return a("span",{style:{color:t}},[e])}const Ir=X({props:{progress:{type:O(String,Object,Number),required:!0},width:{type:O(Number),required:!0},height:{type:O(Number),required:!0},direction:{type:O(String),required:!0},display:O(Object,String,Function),visibility:{type:O(Number),required:!0},style:O(Object,String,Array),classes:O(Object),borderStyle:O(Object,String,Array),textStyle:O(Object,String,Array),baseStyle:O(Object,String,Array),fillStyle:O(Object,String,Array),mark:O(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Vl,Node:Ln},setup(e){const{progress:t,width:n,height:l,direction:i,display:o}=it(e),u=b(()=>{let d=t.value instanceof s?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(d,0),1))*100}),c=b(()=>{const d={width:at(n)+.5+"px",height:at(l)+.5+"px"};switch(r(i)){case je.Up:d.clipPath=`inset(${u.value}% 0% 0% 0%)`,d.width=at(n)+1+"px";break;case je.Down:d.clipPath=`inset(0% 0% ${u.value}% 0%)`,d.width=at(n)+1+"px";break;case je.Right:d.clipPath=`inset(0% ${u.value}% 0% 0%)`;break;case je.Left:d.clipPath=`inset(0% 0% 0% ${u.value} + '%)`;break;case je.Default:d.clipPath="inset(0% 50% 0% 0%)";break}return d}),p=In(o);return{normalizedProgress:u,barStyle:c,component:p,unref:r,Visibility:ue}}});function Dr(e,t,n,l,i,o){var p,d,v,g,y,_,w;const u=Dt("MarkNode"),c=Dt("Node");return e.unref(e.visibility)!==e.Visibility.None?(h(),S("div",{key:0,style:Ie([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(p=e.unref(e.style))!=null?p:{}]),class:qe({bar:!0,...e.unref(e.classes)})},[f("div",{class:"overlayTextContainer border",style:Ie([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(d=e.unref(e.borderStyle))!=null?d:{}])},[e.component?(h(),S("span",{key:0,class:"overlayText",style:Ie(e.unref(e.textStyle))},[(h(),B(De(e.component)))],4)):j("",!0)],4),f("div",{class:"border",style:Ie([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(v=e.unref(e.style))!=null?v:{},(g=e.unref(e.baseStyle))!=null?g:{},(y=e.unref(e.borderStyle))!=null?y:{}])},[f("div",{class:"fill",style:Ie([e.barStyle,(_=e.unref(e.style))!=null?_:{},(w=e.unref(e.fillStyle))!=null?w:{}])},null,4)],4),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(c,{id:e.id},null,8,["id"])],6)):j("",!0)}var Lr=oe(Ir,[["render",Dr],["__scopeId","data-v-02d0d7b2"]]);const Ar=Symbol("Bar");function Fl(e){return vt(()=>{const t=e();return t.id=an("bar-"),t.type=Ar,t[Ye]=Lr,E(t,"visibility"),ft(t,"visibility",ue.Visible),E(t,"width"),E(t,"height"),E(t,"direction"),E(t,"style"),E(t,"classes"),E(t,"borderStyle"),E(t,"baseStyle"),E(t,"textStyle"),E(t,"fillStyle"),E(t,"progress"),E(t,"display"),E(t,"mark"),t[Re]=function(){const{progress:n,width:l,height:i,direction:o,display:u,visibility:c,style:p,classes:d,borderStyle:v,textStyle:g,baseStyle:y,fillStyle:_,mark:w,id:M}=this;return{progress:n,width:l,height:i,direction:o,display:u,visibility:c,style:r(p),classes:d,borderStyle:v,textStyle:g,baseStyle:y,fillStyle:_,mark:w,id:M}},t})}var Or=X({props:{visibility:{type:O(Number),required:!0},display:{type:O(String,Object,Function),required:!0},style:O(String,Object,Array),classes:O(Object),earned:{type:O(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:Ln},setup(e){const{display:t}=it(e),n=_t("");return jt(()=>{const l=at(t);if(l==null){n.value="";return}if(un(l)){n.value=fe(l);return}const i=fe(l.requirement,"h3"),o=fe(l.effectDisplay||"","b"),u=fe(l.optionsDisplay||"","span");n.value=fe(N(()=>a("span",null,[a(i,null,null),l.effectDisplay?a("div",null,[a(o,null,null)]):null,l.optionsDisplay?a("div",{class:"equal-spaced"},[a(u,null,null)]):null])))}),{comp:n,unref:r,Visibility:ue}}});function jr(e,t,n,l,i,o){var c;const u=Dt("Node");return e.unref(e.visibility)!==e.Visibility.None?(h(),S("div",{key:0,style:Ie([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),class:qe({feature:!0,milestone:!0,done:e.unref(e.earned),...e.unref(e.classes)})},[(h(),B(De(e.unref(e.comp)))),a(u,{id:e.id},null,8,["id"])],6)):j("",!0)}var Rr=oe(Or,[["render",jr],["__scopeId","data-v-f4e8794e"]]);xt.on("setupVue",e=>e.use(Bs));function qr(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}function _l(e,t){const n=pt(t),l=z(!1);return zt(()=>{l.value=n.value,Ze(rs(e),i=>{i||(l.value=!1)}),Ze(n,i=>{l.value=i})}),l}const Br=ol(),Gr=Symbol("Milestone");let xn;(function(e){e.All="all",e.Configurable="configurable",e.Incomplete="incomplete",e.None="none"})(xn||(xn={}));function he(e){const t=V(!1);return vt(()=>{var i;const n=(i=e==null?void 0:e())!=null?i:{};n.id=an("milestone-"),n.type=Gr,n[Ye]=Rr,n.earned=t,n.complete=function(){t.value=!0},E(n,"visibility"),ft(n,"visibility",ue.Visible);const l=n.visibility;if(n.visibility=b(()=>{const o=r(n.display);switch(Be.msDisplay){default:case xn.All:return r(l);case xn.Configurable:return r(n.earned)&&!(o!=null&&typeof o=="object"&&"optionsDisplay"in o)?ue.None:r(l);case xn.Incomplete:return r(n.earned)?ue.None:r(l);case xn.None:return ue.None}}),E(n,"style"),E(n,"classes"),E(n,"display"),n[Re]=function(){const{visibility:o,display:u,style:c,classes:p,earned:d,id:v}=this;return{visibility:o,display:u,style:r(c),classes:p,earned:d,id:v}},n.shouldEarn){const o=n;jt(()=>{var u,c;if(Be.active===D.id&&!o.earned.value&&r(o.visibility)===ue.Visible&&((u=o.shouldEarn)==null?void 0:u.call(o))&&(o.earned.value=!0,(c=o.onComplete)==null||c.call(o),o.display)){const p=r(o.display),d=fe(un(p)?p:p.requirement);Br(a(F,null,[a("h3",null,[m("Milestone earned!")]),a("div",null,[a(d,null,null)])]))}})}return n})}xt.on("loadSettings",e=>{ft(e,"msDisplay",xn.All)});const Vr=Object.values(xn).map(e=>({label:tn(e),value:e}));Va(N(()=>a(vi,{title:"Show Milestones",options:Vr,"onUpdate:modelValue":e=>Be.msDisplay=e,modelValue:Be.msDisplay},null)));const Ur=X({__name:"Sticky",setup(e){const t=z("0"),n=new ResizeObserver(i),l=_t(null);function i(){let o=l.value;if(o==null)return;let u=0;for(;o.previousSibling;){const c=o.previousSibling;c.dataset&&"vSticky"in c.dataset&&(u+=c.offsetHeight),o=c}t.value=u+"px"}return zt(i),document.fonts.ready.then(i),al(()=>{var u;const o=(u=l.value)==null?void 0:u.parentElement;o&&n.observe(o)}),(o,u)=>(h(),S("div",{class:"sticky",style:Ie({top:t.value}),ref_key:"element",ref:l,"data-v-sticky":""},[Ut(o.$slots,"default",{},void 0,!0)],4))}});var hi=oe(Ur,[["__scopeId","data-v-cccac690"]]);const si=X({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=b(()=>Tn(t.resource));return(l,i)=>(h(),S("h2",{style:Ie({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},Q(r(n)),5))}});const zr={class:"main-display"},Xr={key:0},Hr={key:1},Jr=m(", "),kl=X({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=it(e),l=z(null),i=In(n.effectDisplay),o=b(()=>s.lt(n.resource.value,"1e1000"));return(u,c)=>(h(),B(hi,null,{default:te(()=>{var p,d;return[f("div",{class:"main-display-container",style:Ie({height:`${((d=(p=l.value)==null?void 0:p.$el.clientHeight)!=null?d:0)+50}px`})},[f("div",zr,[r(o)?(h(),S("span",Xr,"You have ")):j("",!0),a(si,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),m(" "+Q(e.resource.displayName),1),r(i)?(h(),S("span",Hr,[Jr,(h(),B(De(r(i)),{ref_key:"effectRef",ref:l},null,512))])):j("",!0)])],4)]}),_:1}))}}),vs=e=>(Ht("data-v-71dcf259"),e=e(),Jt(),e),Wr={class:"spell-tree-container"},Qr=vs(()=>f("div",{class:"spell-tree"},null,-1)),Zr={style:{display:"none"}},Kr=vs(()=>f("filter",{id:"skilltreeturbulence"},[f("feTurbulence",{x:"-50vw",y:"-50vh",width:"200vw",height:"200vh",baseFrequency:"0.015",numOctaves:"10",seed:"2"}),f("feDisplacementMap",{in:"SourceGraphic",scale:"10"},[f("animate",{attributeName:"scale",values:"10;50;10",dur:"10s",repeatCount:"indefinite"})])],-1)),Yr=[Kr];var eu=X({__name:"SpellTree",props:{spell:null},setup(e){const t=e,n=_t("");jt(()=>{n.value=Qe(t.spell.tree)});const l=Pn(()=>({display:"reset",classes:{"reset-tree":!0},onClick(){Object.values(t.spell.treeNodes).forEach(o=>o.bought.value=!1),t.spell.castingTime.value=0}})),i=Qe(l);return(o,u)=>(h(),S("div",Wr,[Qr,(h(),B(De(r(n)))),(h(),B(De(r(i)))),(h(),S("svg",Zr,Yr))]))}});var tu=oe(eu,[["__scopeId","data-v-71dcf259"]]);const nu=X({props:{visibility:{type:O(Number),required:!0},display:{type:O(Object,String,Function),required:!0},style:O(String,Object,Array),classes:O(Object),glowColor:O(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:n,glowColor:l,floating:i}=it(e),o=zn(n),u=b(()=>{const p=at(l);return p?r(i)?qr(p):{boxShadow:`0px 9px 5px -6px ${p}`}:{}});function c(){t("selectTab")}return{selectTab:c,component:o,glowColorStyle:u,unref:r,Visibility:ue}}});function lu(e,t,n,l,i,o){var u;return e.unref(e.visibility)!==e.Visibility.None?(h(),S("button",{key:0,onClick:t[0]||(t[0]=(...c)=>e.selectTab&&e.selectTab(...c)),class:qe(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:Ie([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.glowColorStyle,(u=e.unref(e.style))!=null?u:{}])},[(h(),B(De(e.component)))],6)):j("",!0)}var hs=oe(nu,[["render",lu],["__scopeId","data-v-610a2549"]]);const iu=X({props:{visibility:{type:O(Number),required:!0},activeTab:{type:O(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:O(Object),required:!0},style:O(String,Object,Array),classes:O(Object),buttonContainerStyle:O(String,Object,Array),buttonContainerClasses:O(Object)},components:{Sticky:hi,TabButton:hs},setup(e){const{activeTab:t}=it(e),n=b(()=>rl[Be.theme].floatingTabs),l=_t("");jt(()=>{const c=at(t);if(c==null){l.value="";return}if(un(c)){l.value=fe(c);return}l.value=fe(r(c.display))});const i=b(()=>{const c=at(t);return un(c)||!c?void 0:r(c.classes)}),o=b(()=>{const c=at(t);return un(c)||!c?void 0:r(c.style)});function u(c){const{display:p,style:d,classes:v,glowColor:g,visibility:y}=c;return{display:p,style:r(d),classes:v,glowColor:g,visibility:y}}return{floating:n,tabClasses:i,tabStyle:o,Visibility:ue,component:l,gatherButtonProps:u,unref:r}}});function su(e,t,n,l,i,o){var p,d;const u=Dt("TabButton"),c=Dt("Sticky");return e.unref(e.visibility)!==e.Visibility.None?(h(),S("div",{key:0,class:qe(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:Ie([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(p=e.unref(e.style))!=null?p:[],(d=e.tabStyle)!=null?d:[]])},[a(c,{class:qe(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:Ie(e.unref(e.buttonContainerStyle))},{default:te(()=>[f("div",{class:qe(["tab-buttons",{floating:e.floating}])},[(h(!0),S(F,null,_n(e.unref(e.tabs),(v,g)=>(h(),B(u,Gt({onSelectTab:y=>e.selected.value=g,floating:e.floating,key:g,active:e.unref(v.tab)===e.unref(e.activeTab)},e.gatherButtonProps(v)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(h(),B(De(e.unref(e.component)),{key:0})):j("",!0)],6)):j("",!0)}var au=oe(iu,[["render",su],["__scopeId","data-v-11575f45"]]);const ou=Symbol("TabButton"),ru=Symbol("TabFamily");function bn(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),"Cannot create tab family with 0 tabs";const n=V(Object.keys(e)[0]);return vt(()=>{var o;const l=(o=t==null?void 0:t())!=null?o:{};l.id=an("tabFamily-"),l.type=ru,l[Ye]=au,l.tabs=Object.keys(e).reduce((u,c)=>{const p=e[c]();return p.type=ou,p[Ye]=hs,E(p,"visibility"),ft(p,"visibility",ue.Visible),E(p,"tab"),E(p,"display"),E(p,"classes"),E(p,"style"),E(p,"glowColor"),u[c]=p,u},{}),l.selected=n,l.activeTab=b(()=>{const u=r(i.tabs);if(n.value in u&&r(u[n.value].visibility)===ue.Visible)return r(u[n.value].tab);const c=Object.values(u).find(p=>r(p.visibility)===ue.Visible);return c?r(c.tab):null}),E(l,"visibility"),ft(l,"visibility",ue.Visible),E(l,"classes"),E(l,"style"),E(l,"buttonContainerClasses"),E(l,"buttonContainerStyle"),l[Re]=function(){const{visibility:u,activeTab:c,selected:p,tabs:d,style:v,classes:g,buttonContainerClasses:y,buttonContainerStyle:_}=this;return{visibility:u,activeTab:c,selected:p,tabs:d,style:r(v),classes:g,buttonContainerClasses:y,buttonContainerStyle:_}};const i=l;return i})}function mt(e){return vt(()=>{const{addend:t,description:n,enabled:l}=e(),i=pt(t),o=pt(n),u=l==null?void 0:pt(l);return{apply:c=>s.add(c,r(i)),revert:c=>s.sub(c,r(i)),enabled:u,description:n==null?void 0:N(()=>a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[s.gte(r(i),0)?"+":"",be(r(i))]),r(o)?a("span",{class:"modifier-description"},[ut(r(o))]):null]))}})}function I(e){return vt(()=>{const{multiplier:t,description:n,enabled:l}=e(),i=pt(t),o=pt(n),u=l==null?void 0:pt(l);return{apply:c=>s.times(c,r(i)),revert:c=>s.div(c,r(i)),enabled:u,description:n==null?void 0:N(()=>a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[m("x"),be(r(i))]),r(o)?a("span",{class:"modifier-description"},[ut(r(o))]):null]))}})}function Ol(e){return vt(()=>{const{exponent:t,description:n,enabled:l,supportLowNumbers:i}=e(),o=pt(t),u=pt(n),c=l==null?void 0:pt(l);return{apply:p=>{let d=p;return i&&(d=s.add(d,1)),d=s.pow(d,r(o)),i&&(d=s.sub(d,1)),d},revert:p=>{let d=p;return i&&(d=s.add(d,1)),d=s.root(d,r(o)),i&&(d=s.sub(d,1)),d},enabled:c,description:n==null?void 0:N(()=>a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[m("^"),be(r(o))]),r(u)?a("span",{class:"modifier-description"},[ut(r(u)),i?" (+1 effective)":null]):null]))}})}function K(e){return vt(()=>{const t=e();return{apply:n=>t.filter(l=>r(l.enabled)!==!1).reduce((l,i)=>i.apply(l),n),revert:t.every(n=>n.revert!=null)?n=>t.filter(l=>r(l.enabled)!==!1).reduceRight((l,i)=>i.revert(l),n):void 0,enabled:b(()=>t.filter(n=>r(n.enabled)!==!1).length>0),description:N(()=>a(F,null,[t.filter(n=>r(n.enabled)!==!1).map(n=>r(n.description)).filter(n=>n).map(ut)]))}})}const uu=X({__name:"Tab",props:{display:null},setup(e){const t=e,{display:n}=it(t),l=zn(n);return(i,o)=>(h(),B(De(r(l))))}}),cu=Symbol("Tab");function Fn(e){return vt(()=>{const t=e();return t.id=an("tab-"),t.type=cu,t[Ye]=uu,t[Re]=function(){const{display:n}=this;return{display:n}},t})}var Zn=["Can we skip to the good part?","I have such great expectations for myself","I'm standing on the shoulders of giants","I can feel it's power","I feel you","What other job should I start?","I wonder what comes next","I hope I'm not too late","Will I finish in time? Can I go back?","Sometimes the logic of this world surprises me","This reminds me of something...","Hello, world!","I must keep moving forward, keep progressing"],du=["Chalk? I love chalk!","It's all coming together","I'm so close now...","Everything must be so precise","Fortunately I have a penchant for rules","Careful now"];const pu=X({__name:"Ritual",setup(e){return(t,n)=>(h(),S("div",null," Ritual goes here "))}}),$l="rituals",Xn=wn($l,function(){const e="Performing Rituals",t="#D12626",n=sn(b(()=>0),"active rituals"),l=An(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"\u238A",randomQuips(){return[...du,...Zn]},resource:n,layerID:$l,modifierInfo:N(()=>ut(Ae)),visibility:()=>J(Ee.milestones.jobMilestone.earned.value&&bt.milestones.jobMilestone.earned.value)}));V([]);const i=he(()=>({shouldEarn(){return s.gte(l.rawLevel.value,2)},display:{requirement:`Achieve ${l.name} Level 2`,effectDisplay:`Unlock fourth column of runes and ${ie.name}`}})),o=he(()=>({shouldEarn(){return s.gte(l.rawLevel.value,4)},display:{requirement:`Achieve ${l.name} Level 4`,effectDisplay:`Unlock fourth row of runes and ${ge.name}`},visibility(){return J(i.earned.value)}})),u=he(()=>({shouldEarn(){return s.gte(l.rawLevel.value,5)},display:{requirement:`Achieve ${l.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility(){return J(o.earned.value)}})),c=he(()=>({shouldEarn(){return s.gte(l.rawLevel.value,6)},display:{requirement:`Achieve ${l.name} Level 6`,effectDisplay:`Unlock fifth column of runes and ${ne.name}`},visibility(){return J(u.earned.value)}})),p=he(()=>({shouldEarn(){return s.gte(l.rawLevel.value,8)},display:{requirement:`Achieve ${l.name} Level 8`,effectDisplay:`Unlock fifth row of runes and ${ce.name}`},visibility(){return J(c.earned.value)}})),d=he(()=>({shouldEarn(){return s.gte(l.rawLevel.value,10)},display:{requirement:`Achieve ${l.name} Level 10`,effectDisplay:"Unlock Ritual of G\xE9nesis"},visibility(){return J(p.earned.value)}})),v={fourthColMilestone:i,fourthRowMilestone:o,timeSlotMilestone:u,fifthColMilestone:c,fifthRowMilestone:p,genesisMilestone:d},g=[d,p,c,u,o,i],y=V(!0),_=b(()=>g.filter(ve=>ve.earned.value===!1)),{firstFeature:w,collapsedContent:M,hasCollapsedContent:G}=Jn(g,ve=>ve.earned.value),ye=b(()=>{let ve=3;return o.earned.value&&ve++,p.earned.value&&ve++,ve}),T=b(()=>{let ve=3;return i.earned.value&&ve++,c.earned.value&&ve++,ve});function $({name:ve,visibility:R}){const q=pt(R!=null?R:ue.Visible);return{name:ve,visibility:q,[Ye]:pu,[Re]:function(){return{}}}}const W=$({name:"Ritual of Doctrina"}),ie=$({name:"Ritual of Emolumentum",visibility:()=>J(i.earned.value)}),ge=$({name:"Ritual of Melius",visibility:()=>J(o.earned.value)}),ne=$({name:"Ritual of Collegium",visibility:()=>J(c.earned.value)}),ce=$({name:"Ritual of Celeritas",visibility:()=>J(p.earned.value)}),Le={doctrina:W,emolumentum:ie,melius:ge,collegium:ne,celeritas:ce};b(()=>s.pow(1.1,l.level.value));const $e=K(()=>[I(()=>({multiplier:_e.appliedTimeEffect,description:"Applied time",enabled:()=>_e.job.active.value&&_e.milestones.appliedTimeMilestone.earned.value&&_e.selectedJob.value===$l})),Ee.batteries.breeding.timePassing.modifier]),we=b(()=>new s($e.apply(1)).toNumber()),ze=K(()=>[Ee.batteries.breeding.xpGain.modifier]),ee={timePassing:$e,jobXpGain:ze},[$t,ot]=Bt(()=>[{title:"Time Passing",modifier:$e,base:1,visible:()=>_e.milestones.appliedTimeMilestone.earned.value||Ee.milestones.timeBatteriesMilestone.earned.value},{title:`${l.name} EXP Gain`,modifier:ze,base:1}]),Ae=bn({general:()=>({display:"General",glowColor(){return Ae.activeTab.value===this.tab?t:""},tab:$t,generalTabCollapsed:ot})},()=>({style:`--layer-color: ${t}`}));return this.on("preUpdate",ve=>{l.timeLoopActive.value===!1&&D.tabs[1]!==$l||(ve=s.times(ve,we.value).toNumber())}),{name:e,color:t,minWidth:670,job:l,activeRituals:n,runeRows:ye,runeCols:T,rituals:Le,modifiers:ee,milestones:v,collapseMilestones:y,modifierTabs:Ae,display:N(()=>{const ve=[..._.value];return w.value&&ve.push(w.value),a(F,null,[Hn(...ve,N(()=>ln(a(Qn,{collapsed:y,content:M,display:y.value?"Show other completed milestones":"Hide other completed milestones"},null),[[gn,r(G)]]))),a(Ce,null,null)])})}});const mu={width:"300",height:"300",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fu={transform:"translate(50 50)"},vu=["transform"],hu=["transform","fill"],gu=X({__name:"Atom",props:{speed:null},setup(e){const t=e,n=["#7E7DFF","#7290E8","#89C6FF","#72CEE8","#7DFFF9"],l=z(Math.random()*1e5);let i=null;al(()=>{i=xt.on("update",c=>{l.value=l.value+t.speed*c/1e3})}),ui(()=>{i&&(i(),i=null)});function o(c){return c<=2?.168:c<=10?.333:c<=28?.5:c<=60?.667:c<=78?.833:1}function u(c){const p=c**2,d=(c%2===0?1:-1)*p,v=l.value+p;return d*v%360}return(c,p)=>(h(),S("svg",mu,[f("g",fu,[(h(),S(F,null,_n(82,d=>f("g",{key:d,transform:`scale(${o(d)})`},[f("path",{d:"M0 0L0 -40A40 40 0 0 1 3.061970113459826 -39.88263204734962",class:"electron",transform:`rotate(${u(d)} 0 0)`,fill:n[d%5]},null,8,hu)],8,vu)),64))])]))}});var Zl=oe(gu,[["__scopeId","data-v-baafb966"]]);const yu={class:"field"},bu={key:0,class:"field-title"},_u=["min","max"],wu=X({__name:"Slider",props:{title:null,modelValue:null,min:null,max:null},emits:["update:modelValue"],setup(e,{emit:t}){const l=it(e),i=b({get(){return String(r(l.modelValue)||0)},set(o){t("update:modelValue",Number(o))}});return(o,u)=>(h(),S("div",yu,[e.title?(h(),S("span",bu,Q(e.title),1)):j("",!0),a(nt,{display:`${r(i)}`,class:qe({fullWidth:!e.title}),direction:r(je).Down},{default:te(()=>[ln(f("input",{type:"range","onUpdate:modelValue":u[0]||(u[0]=c=>Pt(i)?i.value=c:null),min:e.min,max:e.max},null,8,_u),[[Xi,r(i)]])]),_:1},8,["display","class","direction"])]))}});var gs=oe(wu,[["__scopeId","data-v-1b053b9f"]]);const gi=e=>(Ht("data-v-075bb677"),e=e(),Jt(),e),ku=gi(()=>f("br",null,null,-1)),Nu=gi(()=>f("defs",null,[f("filter",{id:"glow",x:"-100%",y:"-100%",width:"300%",height:"300%"},[f("feDropShadow",{dx:"0",dy:"0",stdDeviation:3})])],-1)),Su=["d"],Cu={class:"charge-display"},$u=gi(()=>f("br",null,null,-1)),Mu=m("energeia"),Pu=X({__name:"Battery",props:{charge:null,effect:null,effectDescription:null,feedAmount:null,color:null,sumFeedAmounts:null,visibility:null,setFeedAmount:null},setup(e){const t=e,n=20,l=4,i=30,o=0,u=100-o*2,c=100,p=z([]),d=z(3);let v=null,g=()=>{const y=Math.max(3,Math.floor(n*t.feedAmount.value/u));p.value=new Array(y).fill(1).map((_,w)=>{let M=w===0,G=w===y-1,ye=(t.feedAmount.value-o*2)/(y-1)*w+o;return{x:M||G?c/2:(c-i)/2+Math.random()*i,y:ye}}),d.value=Math.random()*(5-2)+2,v&&clearTimeout(v),v=setTimeout(g,Math.random()*200+100)};return Ze(()=>t.feedAmount.value,g,{immediate:!0}),(y,_)=>r(e.visibility)!==r(ue).None?(h(),S("div",{key:0,class:"battery-container feature dontMerge",style:Ie({visibility:r(e.visibility)===r(ue).Hidden?"hidden":void 0})},[f("div",null,Q(r(be)(r(e.effect)))+"x "+Q(e.effectDescription),1),ku,f("div",{class:"battery",style:Ie({borderColor:r(e.color),width:`${c}px`})},[(h(),S("svg",{style:Ie({height:`${e.feedAmount.value}%`,borderColor:r(e.color)})},[Nu,f("path",{style:Ie([{filter:"url(#glow)"},{opacity:3,strokeWidth:l}]),d:`M${p.value.map(w=>w.x+","+w.y).join(" L")}`},null,12,Su)],4)),f("div",Cu,[m(Q(r(be)(e.charge.value)),1),$u,Mu])],4),a(gs,{max:100-r(e.sumFeedAmounts)+r(e.feedAmount),modelValue:r(e.feedAmount),"onUpdate:modelValue":_[0]||(_[0]=w=>e.setFeedAmount(w))},null,8,["max","modelValue"])],4)):j("",!0)}});var xu=oe(Pu,[["__scopeId","data-v-075bb677"]]),Tu=["Huh, why is 82 compelling? It doesn't fit the usual patterns...","Atoms? I love atoms!","I can feel the power!","The power kinda tingles"];function Fu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ui(e)}const Gn="generators",Ee=wn(Gn,function(){const e="Harnessing Power",t="#26D1CE",n=sn(0,"energeia"),l=V(0),i=An(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"\u269B",randomQuips(){return[...Tu,...Zn]},resource:n,layerID:Gn,modifierInfo:N(()=>ut(Ae)),visibility:()=>J(_e.milestones.jobMilestone.earned.value)})),o=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,2)},display:{requirement:`Achieve ${i.name} Level 2`,effectDisplay:"Unlock multiple generators"}})),u=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,4)},display:{requirement:`Achieve ${i.name} Level 4`,effectDisplay:"Unlock resource gain batteries"},visibility(){return J(o.earned.value)}})),c=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,5)},display:{requirement:`Achieve ${i.name} Level 5`,effectDisplay:`Unlock buying machines in "${bt.job.name}" Job`},visibility(){return J(u.earned.value)}})),p=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,6)},display:{requirement:`Achieve ${i.name} Level 6`,effectDisplay:"Unlock xp gain batteries"},visibility(){return J(c.earned.value)}})),d=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,8)},display:{requirement:`Achieve ${i.name} Level 8`,effectDisplay:"Unlock time passing batteries"},visibility(){return J(p.earned.value)}})),v=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,10)},display:{requirement:`Achieve ${i.name} Level 10`,effectDisplay:`Unlock 1/2 of "${Xn.job.name}" Job`},visibility(){return J(d.earned.value)},onComplete(){bt.milestones.jobMilestone.earned.value&&vn(Xn,D)}})),g={multiLoopMilestone:o,resourceBatteriesMilestone:u,machinesMilestone:c,xpBatteriesMilestone:p,timeBatteriesMilestone:d,jobMilestone:v},y=[v,d,p,c,u,o],_=V(!0),w=b(()=>y.filter(R=>R.earned.value===!1)),{firstFeature:M,collapsedContent:G,hasCollapsedContent:ye}=Jn(y,R=>R.earned.value);function T(R){const q=V(0),re=V(0);return vt(()=>{const de=R(),Se=b(()=>r(lt.jobs[de.job].color)),ht=de.visibility?pt(de.visibility):ue.Visible,wt=b(()=>de.effectFormula(q.value)),H=K(()=>[mt(()=>({addend:()=>s.times(n.value,re.value).div(100),description:"Battery charging"})),Ol(()=>({exponent:()=>s.div(re.value,500).add(1),description:"Battery charging bonus",supportLowNumbers:!0})),mt(()=>({addend:()=>s.times(q.value,.1).neg(),description:"Battery discharge"}))]),et=b(()=>H.apply(0)),Oe=I(()=>({multiplier:wt,description:tn(de.effectDescription)+" battery",enabled:()=>r(ht)===ue.Visible}));return{charge:q,chargeGain:H,computedChargeGain:et,color:Se,feedAmount:re,effect:wt,effectDescription:de.effectDescription,modifier:Oe,visibility:ht,setFeedAmount:Xe=>re.value=Xe,[Ye]:xu,[Re]:function(){const{charge:Xe,effect:Ge,effectDescription:se,feedAmount:ct,color:gt,visibility:Ke,setFeedAmount:C}=this;return{charge:Xe,effect:Ge,effectDescription:se,feedAmount:ct,color:gt,visibility:Ke,sumFeedAmounts:W,setFeedAmount:C}}}})}const $=yi.reduce((R,q)=>(R[q]={job:q,resourceGain:T(()=>({job:q,effectDescription:"resource gain",effectFormula:re=>s.div(re,q===Gn?10:100).add(1).log(1.3).add(1).pow(1)})),xpGain:T(()=>({job:q,effectDescription:"xp gain",effectFormula:re=>s.div(re,q===Gn?6:60).add(1).log(1.3).add(1),visibility:()=>J(p.earned.value)})),timePassing:T(()=>({job:q,effectDescription:"time passing",effectFormula:re=>s.div(re,q===Gn?10:100).add(1).log(10).add(1),visibility:()=>J(u.earned.value)}))},R),{}),W=b(()=>Object.values($).reduce((R,q)=>R+q.timePassing.feedAmount.value+q.resourceGain.feedAmount.value+q.xpGain.feedAmount.value,0)),ie=b(()=>s.pow(1.1,i.level.value)),ge=K(()=>[I(()=>({multiplier:_e.appliedTimeEffect,description:"Applied time",enabled:()=>_e.job.active.value&&_e.milestones.appliedTimeMilestone.earned.value&&_e.selectedJob.value===Gn})),$.generators.timePassing.modifier]),ne=b(()=>new s(ge.apply(1)).toNumber()),ce=K(()=>[mt(()=>({addend:l,description:"Allocated time slots"})),mt(()=>({addend:1,description:"Bonus generator",enabled:()=>bt.job.active.value&&bt.milestones.bonusGeneratorMilestone.earned.value}))]),Le=b(()=>ce.apply(1)),$e=K(()=>[I(()=>({multiplier:ie,description:`${i.name} level (x1.1 each)`})),I(()=>({multiplier:()=>s.pow(Le.value,2),description:"Allocated time slots",enabled:o.earned})),$.generators.resourceGain.modifier,bt.plants.energeia.modifier]),we=K(()=>[$.generators.xpGain.modifier]),ze={timePassing:ge,timeSlotsGenerating:ce,energeiaGain:$e,jobXpGain:we},[ee,$t]=Bt(()=>[{title:"Time Passing",modifier:ge,base:1,visible:()=>_e.milestones.appliedTimeMilestone.earned.value||d.earned.value},{title:"Generators",modifier:ce,base:1},{title:"Energeia Gain",modifier:$e,base:1},{title:`${i.name} EXP Gain`,modifier:we,base:1,baseText:"Base (per energeia gained)"}]),ot=["resourceGain","xpGain","timePassing"].map(R=>Bt(()=>Object.values($).map(q=>({title:tn(q.job)+" Battery Charge Gain",modifier:q[R].chargeGain,enabled:r(q[R].visibility)===ue.Visible,base:0})))),Ae=bn({general:()=>({display:"General",glowColor(){return Ae.activeTab.value===this.tab?t:""},tab:ee,generalTabCollapsed:$t}),...ot.reduce((R,[q,re],de)=>{const Se=["timePassing","resourceGain","xpGain"][de];return R[Se]=()=>({display:tn(Se),glowColor(){return Ae.activeTab.value===this.tab?t:""},tab:q,tabCollapsed:re,visibility:()=>J([d,u,p][de].earned.value)}),R},{})},()=>({style:`--layer-color: ${t}`}));this.on("preUpdate",R=>{if(i.timeLoopActive.value===!1&&D.tabs[1]!==Gn)return;R=s.times(R,ne.value).toNumber();let q=new s(0);Object.values($).forEach(de=>{Object.values(de).forEach(Se=>{typeof Se!="string"&&(Se.charge.value=s.add(Se.charge.value,s.times(Se.computedChargeGain.value,R)).clampMin(0),q=q.add(Se.feedAmount.value))})}),n.value=s.sub(n.value,s.div(q,100).times(n.value));const re=s.times($e.apply(1),R);n.value=s.add(n.value,re),i.xp.value=s.add(i.xp.value,we.apply(re))});const ve=bn({generation:()=>({display:"Generation",tab:Fn(()=>({display:N(()=>{let R;return a(F,null,[a(gl,null,{default:()=>[a(Zl,{speed:ne.value},null),bt.milestones.bonusGeneratorMilestone.earned.value?a(Zl,{speed:ne.value},null):null]}),o.earned.value?a(F,null,[a("div",null,[lt.hasTimeSlotAvailable.value?"Click to allocate or deallocate additional time loops to this job":"Free up time slots to allocate additional time loops to this job"]),a(gl,null,Fu(R=Array(lt.hasTimeSlotAvailable.value?l.value+1:l.value).fill(0).map((q,re)=>a(Zl,{speed:ne.value,width:"100px",height:"100px",style:s.lt(l.value,re+1)?"opacity: 0.25":"",onClick:()=>s.lt(l.value,re+1)?l.value++:l.value--},null)))?R:{default:()=>[R]})]):null])})})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),batteries:()=>({display:"Batteries",tab:Fn(()=>({display:N(()=>a(F,null,[a(Ce,null,null),a("div",null,[m("Allocate a percentage of "),n.displayName,m("/s to feed into each battery.")]),a("div",null,[m("Batteries discharge over time.")]),a(Ce,null,null),Ja(Object.values($).filter(R=>r(lt.jobs[R.job].visibility)===ue.Visible).map(R=>a(F,null,[a("h2",null,[lt.jobs[R.job].name]),Tl(R.resourceGain,R.xpGain,R.timePassing)])),a(Ce,{height:"50px"},null))]))})),visibility:b(()=>J(d.earned.value))})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}}));return{name:e,color:t,minWidth:670,energeia:n,extraTimeSlotsAllocated:l,job:i,modifiers:ze,milestones:g,collapseMilestones:_,batteries:$,modifierTabs:Ae,tabs:ve,display:N(()=>{const R=[...w.value];return M.value&&R.push(M.value),a(F,null,[a(kl,{resource:n,color:t},null),Hn(...R,N(()=>ln(a(Qn,{collapsed:_,content:G,display:_.value?"Show other completed milestones":"Hide other completed milestones"},null),[[gn,r(ye)]]))),a(Ce,null,null),d.earned.value?Qe(ve):Qe(ve.activeTab.value)])})}});var Eu=["I am the petals of the flower that is my inner soul","I am the stem of the flower that is my inner mind","These flowers are powerful, I can feel it","There is so much power here. I must fulfill their potential","How will I store all these flowers?","Euch; These flowers taste terrible!","It is a mistake to do things too easily","You are my number one priority now","Flowers? I love flowers!","It's the time you have wasted for your rose that makes your rose so important","What is essential is invisible to the eye"];const Iu=!1,Du=!0,Lu={min:.5,max:2},Au=.005,Ou=-1,ju=1e3,Ru=!0,qu={x:0,y:0},Bu=[{type:"alpha",config:{alpha:{list:[{time:0,value:1},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:2},{time:1,value:25}]},minMult:2}},{type:"scale",config:{scale:{list:[{time:0,value:.001},{time:1,value:1}]},minMult:.25}},{type:"color",config:{color:{list:[{time:0,value:"#EB428F"},{time:.25,value:"#F545ED"},{time:.5,value:"#B949DE"},{time:.75,value:"#9945F5"},{time:1,value:"#6442EB"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:20,minStart:270,maxStart:300}},{type:"textureRandom",config:{textures:["/Fire.png"]}},{type:"spawnShape",config:{type:"torus",data:{x:0,y:0,radius:75,innerRadius:75,affectRotation:!0}}}];var Ii={emit:Iu,autoUpdate:Du,lifetime:Lu,frequency:Au,emitterLifetime:Ou,maxParticles:ju,addAtBack:Ru,pos:qu,behaviors:Bu};const Di=ol(),Kl="flowers",Fe=wn(Kl,function(){const e="Harvesting Flowers",t="#A626D1",n=sn(0,"moly"),l=Gl(n),i=An(e,()=>({color:t,image:"/harvesting.png",imageFocus:{x:"50%",y:"65%"},symbol:"\u2698",randomQuips(){return[...Eu,...Zn]},resource:n,layerID:Kl,modifierInfo:N(()=>ut(jn)),modifierModalAttrs:{class:"flowers-modal"},showNotif:()=>Object.values(Se).some(Z=>Z.showNotif.value)})),o=b(()=>Object.values(Se).filter(Z=>Z.active.value).length),u=b(()=>1),c=Bl(()=>({fullscreen:!1,zIndex:-1,boundingRect:z(null),onContainerResized(Z){this.boundingRect.value=Z},onHotReload(){Object.values(Se).forEach(Z=>{Z.particleEffect.value.then(At=>At.destroy()),Z.particleEffect.value=c.addEmitter(Z.particleEffectConfig),Z.updateParticleEffect(Z.active.value)})}})),p=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,2)},display:{requirement:`Achieve ${i.name} Level 2`,effectDisplay:"Double T\xE9chnasma potency and unlock experience for spells"}})),d=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,4)},display:{requirement:`Achieve ${i.name} Level 4`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Theriz\xF3"},visibility(){return J(p.earned.value)}})),v=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,6)},display:{requirement:`Achieve ${i.name} Level 6`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Pr\u014Dfici\u014D"},visibility(){return J(d.earned.value)}})),g=he(()=>({shouldEarn(){return s.gte(i.rawLevel.value,8)},display:{requirement:`Achieve ${i.name} Level 8`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Schol\u0113"},visibility(){return J(v.earned.value)}})),y={spellExpMilestone:p,flowerSpellMilestone:d,chargeSpellMilestone:v,expSpellMilestone:g},_=[g,v,d,p],w=V(!0),M=b(()=>_.filter(Z=>Z.earned.value===!1)),{firstFeature:G,collapsedContent:ye,hasCollapsedContent:T}=Jn(_,Z=>Z.earned.value),$=Ei(()=>({visibility:ue.Hidden}));function W(Z,At,$s,Ms,Yn,wi){const pn=Object.keys(Yn).reduce((Ct,Je)=>{const Sn=V(!1);return Ct[Je]=Ei(()=>({display:Yn[Je].display,classes(){return{"spell-node":!0,bought:Sn.value}},bought:Sn,canClick(){var ul;return!(pn[Je].bought.value||s.gte(Hl.value,Rn.value)||(ul=Yn[Je].requirements)!=null&&ul.some(mn=>!pn[mn].bought.value))},onClick(){pn[Je].bought.value=!0}})),Ct},{}),Xl=V(0),Rn=b(()=>s.clampMin(Xl.value,1).log10().floor()),Hl=b(()=>Object.values(pn).reduce((Ct,Je)=>Ct+(Je.bought.value?1:0),0)),ki=b(()=>{const Ct=s.eq(Rn.value,0)?0:s.pow10(Rn.value),Je=s.pow10(s.add(Rn.value,1));return s.sub(Xl.value,Ct).div(s.sub(Je,Ct)).times(100)}),Ni=b(()=>J(r(Ms))),Sl=Pn(()=>({canClick(){return Ot.active.value||o.value<u.value},display(){return{title:`<h2>${Z}</h2>`,description:N(()=>a(F,null,[a("br",null,null),a("i",null,[At]),a("br",null,null),a("br",null,null),a("h3",null,[$s]),p.earned.value?a("div",{class:"spell-level"},[a("div",{class:"spell-exp",style:`--exp: ${be(ki.value)}%`},null),a("span",null,[m("("),It(s.sub(Rn.value,Hl.value)),m("/"),It(Rn.value),m(")")])]):null,Si.value?a(yn,null,null):null]))}},classes(){return{spellSelector:!0,activeSpell:Ot.active.value,can:r(Sl.canClick)}},onClick(){Ot.active.value=!Ot.active.value,Ot.castingTime.value=0},visibility:Ni})),Si=_l(Sl,()=>wi.some(Ct=>Ct.some(Je=>Je!==$&&r(pn[Je].canClick)))),Ot={treeNodes:pn,tree:Er(()=>({nodes:wi.map(Ct=>Ct.map(Je=>Je===$?$:pn[Je])),branches:()=>Object.keys(Yn).reduce((Ct,Je)=>Yn[Je].requirements?[...Ct,...Yn[Je].requirements.map(Sn=>({startNode:pn[Je],endNode:pn[Sn],stroke:pn[Sn].bought.value?"#B949DE":"var(--locked)","stroke-width":"4px"}))]:Ct,[])})),visibility:Ni,selector:Sl,showNotif:Si,particleEffectConfig:Ii,active:V(!1),xp:Xl,castingTime:V(0),level:Rn,spentPoints:Hl,levelProgress:ki,particleEffectWatcher:z(null),particleEffect:z(c.addEmitter(Ii)),async updateParticleEffect(Ct){var Sn,ul;const Je=await Ot.particleEffect.value;(ul=(Sn=Ot.particleEffectWatcher).value)==null||ul.call(Sn),Ct?Ot.particleEffectWatcher.value=Ze([()=>{var mn;return(mn=Fe.nodes.value[Sl.id])==null?void 0:mn.rect},c.boundingRect],async([mn,Jl])=>{mn!=null&&Jl!=null?(Je.cleanup(),Je.updateOwnerPos(mn.x+mn.width/2-Jl.x,mn.y+mn.height/2-Jl.y),Je.resetPositionTracking(),Je.emit=!0):Je.emit=!1},{immediate:!0}):(Je.emit=!1,Ot.particleEffectWatcher.value=null)}};return Ze(Ot.active,Ot.updateParticleEffect),Ze(Ot.level,(Ct,Je)=>{Be.active!==D.id||s.neq(Ct,s.add(Je,1))||(Ot.notif!=null&&Di.dismiss(Ot.notif),Ot.notif=Di.info(`${Z} is now level ${Ct}!`))}),Ot}const ie=V(0),ge=Fl(()=>({direction:je.Right,height:20,width:200,fillStyle:()=>`--time: ${(D.time%1e8/10).toLocaleString("fullwide",{useGrouping:!1})}px; --time-deg: ${(D.time%1e8/100).toLocaleString("fullwide",{useGrouping:!1})}deg`,classes:{chargeBar:!0},progress(){return s.div(ie.value,Tt.value)},visibility:()=>J(v.earned.value)})),ne=b(()=>s.pow(1.1,i.level.value)),ce=b(()=>s.pow(1.25,Object.values(Se).filter(Z=>Z.visibility.value===ue.Visible).length)),Le=ne,$e=ne,we=b(()=>s.pow(1.1,ee.level.value)),ze=ne,ee=W("T\xE9chnasma","Practice using the flowers to perform minor magical tricks.","Gain job exp.",!0,{moreJobXpFlat:{display:"x4 job exp"},moreJobXpPerSpell:{display:N(()=>a("div",null,[m("x1.25 job exp per known spell"),a("br",null,null),m("(x"),be(ce.value),m(")")])),requirements:["moreJobXpFlat"]},morePotencyPerJobLevel:{display:N(()=>a("div",null,[m("Additional x1.1 all spell potency per job level"),a("br",null,null),m("(x"),be(Le.value),m(")")])),requirements:["moreJobXpFlat"]},moreJobXpPerJobLevel:{display:N(()=>a("div",null,[m("Additional x1.1 job exp per job level"),a("br",null,null),m("(x"),be($e.value),m(")")])),requirements:["moreJobXpPerSpell"]},moreJobXpPerSpellLevel:{display:N(()=>a("div",null,[m("Additional x1.1 job exp per T\xE9chnasma level"),a("br",null,null),m("(x"),be(we.value),m(")")])),requirements:["moreJobXpPerSpell"]},morePotencyOverTime:{display:"Additional spell potency the longer it's been consecutively casted",requirements:["morePotencyPerJobLevel"]},moreSpellXpPerJobLevel:{display:N(()=>a("div",null,[m("x1.1 all spell exp per job level"),a("br",null,null),m("(x"),be(ze.value),m(")")])),requirements:["morePotencyPerJobLevel"]}},[["moreJobXpFlat"],["moreJobXpPerSpell",$,"morePotencyPerJobLevel"],["moreJobXpPerJobLevel","moreJobXpPerSpellLevel","morePotencyOverTime","moreSpellXpPerJobLevel"]]),$t=b(()=>Object.values(Se).filter(Z=>Z.visibility.value===ue.Visible).length*.25),ot=b(()=>s.pow(1.1,R.level.value)),Ae=b(()=>s.log10(s.add(n.value,1)).pow(.777).add(1)),ve=a(F,null,[m("log"),a("sub",null,[m("2")]),m("(flowers + 1)"),a("sup",null,[m("0.777")]),m(" + 1")]),R=W("Theriz\xF3","Use the magic of the flowers to harvest themselves. They should make my spells more potent.","Gain flowers.",d.earned,{moreFlowersFlat:{display:"x2 flowers gain"},moreFlowersPerSpell:{display:N(()=>a("div",null,[m("+.25x Theriz\xF3 potency per known spell"),a("br",null,null),m("(+"),be($t.value),m(")")])),requirements:["moreFlowersFlat"]},moreFlowersPerLevel:{display:N(()=>a("div",null,[m("Additional x1.1 Theriz\xF3 potency per Theriz\xF3 level"),a("br",null,null),m("(x"),be(ot.value),m(")")])),requirements:["moreFlowersPerSpell"]},moreJobXpPerFlower:{display:N(()=>a("div",null,[m("Flowers affect job exp"),a("br",null,null),m("(x"),be(Ae.value),m(")")])),requirements:["moreFlowersFlat"]},moreSpellXpPerFlower:{display:N(()=>a("div",null,[m("Flowers affect all spell exp"),a("br",null,null),m("(x"),be(Ae.value),m(")")])),requirements:["moreJobXpPerFlower"]},morePotencyPerFlower:{display:N(()=>a("div",null,[m("Flower's affect all spell potency twice"),a("br",null,null),m("(x"),be(Ae.value),m(")")])),requirements:["moreSpellXpPerFlower"]},passiveFlowerGain:{display:"1% of flower gain when casting other spells",requirements:["moreSpellXpPerFlower"]}},[["moreFlowersPerLevel","moreFlowersPerSpell","moreFlowersFlat"],[$,$,"moreJobXpPerFlower"],[$,"passiveFlowerGain","moreSpellXpPerFlower"],[$,$,"morePotencyPerFlower"]]),q=W("Pr\u014Dfici\u014D","Charge up magic to cast another spell with greater potency.","Charge spell potency.",v.earned,{spellEff:{display:"x1.25 spell potency when discharging"},fasterChargeFlat:{display:"x1.5 faster charging",requirements:["spellEff"]},fasterChargeByLevel:{display:"Additional x1.1 faster charging for each Pr\u014Dfici\u014D level",requirements:["fasterChargeFlat"]},betterChargeMulti:{display:"Charge effect on spells is raised ^1.1",requirements:["fasterChargeByLevel"]},largerChargeFlat:{display:"x1.5 max charge",requirements:["spellEff"]},largerChargeByLevel:{display:"Additional x1.2 max charge for each Pr\u014Dfici\u014D level",requirements:["largerChargeFlat"]},slowerDischargeByLevel:{display:"x1.05 slower discharge for each of that spell's levels",requirements:["largerChargeByLevel"]}},[["spellEff"],["fasterChargeFlat","largerChargeFlat"],["fasterChargeByLevel","largerChargeByLevel"],["betterChargeMulti","slowerDischargeByLevel"]]),re=b(()=>s.div(de.level.value,10)),de=W("Schol\u0113","Practice a difficult routine that improves your ability at casting all spells.","Gain spell exp.",g.earned,{moreSpellXp:{display:"All spells gain double exp"},moreXpSpellXp:{display:"T\xE9chnasma spell gains double exp",requirements:["moreSpellXp"]},moreFlowerSpellXp:{display:"Theriz\xF3 spell gains double exp",requirements:["moreSpellXp"]},moreChargeSpellXp:{display:"Pr\u014Dfici\u014D spell gains double exp",requirements:["moreSpellXp"]},moreMassXpSpellXp:{display:"Schol\u0113 spell gains double exp",requirements:["moreSpellXp"]},moreXpPerLevel:{display:N(()=>a("div",null,[m("+.1x other spell exp per level of this spell"),a("br",null,null),m("(+"),be(re.value),m(")")])),requirements:["moreSpellXp"]},morePotency:{display:"Double potency of this spell",requirements:["moreSpellXp"]}},[["moreXpSpellXp","moreFlowerSpellXp"],["moreXpPerLevel","moreSpellXp","morePotency"],["moreChargeSpellXp","moreMassXpSpellXp"]]),Se={xpSpell:ee,flowerSpell:R,chargeSpell:q,massXpSpell:de},ht=K(()=>[I(()=>({multiplier:_e.appliedTimeEffect,description:"Applied time",enabled:()=>_e.job.active.value&&_e.milestones.appliedTimeMilestone.earned.value&&_e.selectedJob.value===Kl})),Ee.batteries.flowers.timePassing.modifier]),wt=b(()=>ht.apply(1)),H=K(()=>[I(()=>({multiplier:1.25,description:"Pr\u014Dfici\u014D skill (x1.25 when discharging)",enabled:()=>q.treeNodes.spellEff.bought.value&&s.gt(ie.value,0)})),Ol(()=>({exponent:1.1,description:"Pr\u014Dfici\u014D skill (flat)",enabled:q.treeNodes.betterChargeMulti.bought}))]),et=b(()=>H.apply(s.log10(s.add(ie.value,1)).add(1))),Oe=K(()=>[I(()=>({multiplier:ne,description:`${i.name} level (x1.1 each)`})),I(()=>({multiplier:Le,description:`T\xE9chnasma skill (x1.1 per ${i.name} level)`,enabled:ee.treeNodes.morePotencyPerJobLevel.bought})),I(()=>({multiplier:Ae,description:N(()=>a(F,null,[m("Flowers Effect ("),ve,m(")")]))})),I(()=>({multiplier:Ae,description:"Theriz\xF3 skill (Re-apply flowers effect)",enabled:R.treeNodes.morePotencyPerFlower.bought}))]),Xe=b(()=>Oe.apply(1)),Ge=K(()=>[I(()=>({multiplier:ze,description:`T\xE9chnasma skill (x1.1 per ${i.name} level)`,enabled:ee.treeNodes.moreSpellXpPerJobLevel.bought})),I(()=>({multiplier:Ae,description:N(()=>a(F,null,[m("Theriz\xF3 skill ("),ve,m(")")])),enabled:R.treeNodes.moreSpellXpPerFlower.bought})),I(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:de.treeNodes.moreSpellXp.bought}))]),se=b(()=>Ge.apply(1)),ct=K(()=>[I(()=>({multiplier:Xe,description:"All Spell Potency"})),I(()=>({multiplier:2,description:"Spell EXP milestone (flat)",enabled:p.earned})),I(()=>({multiplier:2,description:"Theriz\xF3 milestone (flat)",enabled:d.earned})),I(()=>({multiplier:2,description:"Pr\u014Dfici\u014D milestone (flat)",enabled:v.earned})),I(()=>({multiplier:2,description:"Schol\u0113 milestone (flat)",enabled:g.earned})),I(()=>({multiplier:()=>s.pow(1.1,ee.level.value),description:"T\xE9chnasma level (x1.1 each)",enabled:p.earned})),I(()=>({multiplier:()=>s.log2(s.add(ee.castingTime.value,1)).div(10).add(1),description:N(()=>a(F,null,[m("T\xE9chnasma skill (log"),a("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:ee.treeNodes.morePotencyOverTime.bought})),I(()=>({multiplier:et,description:"Charge Multiplier",enabled:v.earned}))]),gt=b(()=>ct.apply(1)),Ke=K(()=>[mt(()=>({addend:()=>s.div(de.level.value,10),description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:de.treeNodes.moreXpPerLevel.bought})),I(()=>({multiplier:se,description:"All Spell EXP Gain"})),I(()=>({multiplier:gt,description:"T\xE9chnasma potency"})),I(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:de.treeNodes.moreXpSpellXp.bought}))]),C=K(()=>[mt(()=>({addend:gt,description:"T\xE9chnasma potency"})),I(()=>({multiplier:ne,description:`${i.name} level (x1.1 each)`})),I(()=>({multiplier:4,description:"T\xE9chnasma skill (flat)",enabled:ee.treeNodes.moreJobXpFlat.bought})),I(()=>({multiplier:ce,description:"T\xE9chnasma skill (x1.25 per known spell)",enabled:ee.treeNodes.moreJobXpPerSpell.bought})),I(()=>({multiplier:$e,description:`T\xE9chnasma skill (x1.1 per ${i.name} level)`,enabled:ee.treeNodes.moreJobXpPerJobLevel.bought})),I(()=>({multiplier:we,description:"T\xE9chnasma skill (x1.1 per T\xE9chnasma level)",enabled:ee.treeNodes.moreJobXpPerSpellLevel.bought})),I(()=>({multiplier:Ae,description:N(()=>a(F,null,[m("Flowers Effect ("),ve,m(")")])),enabled:R.treeNodes.moreJobXpPerFlower.bought})),Ee.batteries.study.xpGain.modifier]),L=K(()=>[I(()=>({multiplier:()=>{var Z;return s.pow(1/1.05,(Z=ee.level.value)!=null?Z:0)},description:"Theriz\xF3 skill (/1.05 per T\xE9chnasma level)",enabled:q.treeNodes.slowerDischargeByLevel.bought}))]),A=b(()=>L.apply(Et.value)),ke=K(()=>[mt(()=>({addend:$t,description:"Theriz\xF3 skill (+.25 per known spell)",enabled:R.treeNodes.moreFlowersPerSpell.bought})),I(()=>({multiplier:Xe,description:"All Spell Potency"})),I(()=>({multiplier:()=>s.pow(1.1,R.level.value),description:"Theriz\xF3 level (x1.1 each)",enabled:p.earned})),I(()=>({multiplier:()=>s.log2(s.add(R.castingTime.value,1)).div(10).add(1),description:N(()=>a(F,null,[m("T\xE9chnasma skill (log"),a("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:ee.treeNodes.morePotencyOverTime.bought})),I(()=>({multiplier:et,description:"Charge Multiplier",enabled:v.earned}))]),Y=b(()=>ke.apply(1)),Ue=K(()=>[mt(()=>({addend:re,description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:de.treeNodes.moreXpPerLevel.bought})),I(()=>({multiplier:se,description:"All Spell EXP Gain"})),I(()=>({multiplier:Y,description:"Theriz\xF3 potency"})),I(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:de.treeNodes.moreFlowerSpellXp.bought}))]),kt=K(()=>[mt(()=>({addend:Y,description:"Theriz\xF3 potency"})),I(()=>({multiplier:2,description:"Theriz\xF3 skill (flat)",enabled:R.treeNodes.moreFlowersFlat.bought})),I(()=>({multiplier:ot,description:"Theriz\xF3 skill (x1.1 per Theriz\xF3 level)",enabled:R.treeNodes.moreFlowersPerLevel.bought})),Ee.batteries.study.resourceGain.modifier,bt.plants.moly.modifier]),dt=b(()=>kt.apply(0)),Rt=K(()=>[mt(()=>({addend:.01,description:"Theriz\xF3 skill (flat)",enabled:R.treeNodes.passiveFlowerGain.bought})),I(()=>({multiplier:dt,description:"Flower gain"}))]),He=K(()=>[I(()=>({multiplier:()=>{var Z;return s.pow(1/1.05,(Z=R.level.value)!=null?Z:0)},description:"Theriz\xF3 skill (/1.05 per Theriz\xF3 level)",enabled:q.treeNodes.slowerDischargeByLevel.bought}))]),le=b(()=>He.apply(Et.value)),Me=K(()=>[I(()=>({multiplier:Xe,description:"All Spell Potency"})),I(()=>({multiplier:()=>s.pow(1.1,q.level.value),description:"Pr\u014Dfici\u014D level (x1.1 each)"})),I(()=>({multiplier:()=>s.log2(s.add(q.castingTime.value,1)).div(10).add(1),description:N(()=>a(F,null,[m("T\xE9chnasma skill (log"),a("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:ee.treeNodes.morePotencyOverTime.bought}))]),Pe=b(()=>Me.apply(1)),U=K(()=>[mt(()=>({addend:()=>s.div(de.level.value,10),description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:de.treeNodes.moreXpPerLevel.bought})),I(()=>({multiplier:se,description:"All Spell EXP Gain"})),I(()=>({multiplier:Pe,description:"Pr\u014Dfici\u014D potency"})),I(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:de.treeNodes.moreChargeSpellXp.bought}))]),rt=K(()=>[mt(()=>({addend:Pe,description:"Pr\u014Dfici\u014D potency"})),I(()=>({multiplier:1.5,description:"Pr\u014Dfici\u014D skill (flat)",enabled:q.treeNodes.largerChargeFlat.bought})),I(()=>({multiplier:()=>s.pow(1.2,q.level.value),description:"Pr\u014Dfici\u014D skill (x1.2 per Pr\u014Dfici\u014D level)",enabled:q.treeNodes.largerChargeByLevel.bought}))]),Tt=b(()=>rt.apply(0)),Yt=K(()=>[mt(()=>({addend:()=>s.div(Pe.value,10),description:"Pr\u014Dfici\u014D potency (/10)"})),I(()=>({multiplier:1.5,description:"Pr\u014Dfici\u014D skill (flat)",enabled:q.treeNodes.fasterChargeFlat.bought})),I(()=>({multiplier:()=>s.pow(1.1,q.level.value),description:"Pr\u014Dfici\u014D skill (x1.1 per Pr\u014Dfici\u014D level)",enabled:q.treeNodes.fasterChargeFlat.bought}))]),Ft=b(()=>Yt.apply(0)),Wt=K(()=>[mt(()=>({addend:()=>s.div(Pe.value,10),description:"Pr\u014Dfici\u014D potency (/10)"}))]),Et=b(()=>Wt.apply(0)),cn=K(()=>[I(()=>({multiplier:Xe,description:"All Spell Potency"})),I(()=>({multiplier:()=>s.pow(1.1,de.level.value),description:"Schol\u0113 level (x1.1 each)"})),I(()=>({multiplier:()=>s.log2(s.add(de.castingTime.value,1)).div(10).add(1),description:N(()=>a(F,null,[m("T\xE9chnasma skill (log"),a("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:ee.treeNodes.morePotencyOverTime.bought})),I(()=>({multiplier:et,description:"Charge Multiplier",enabled:v.earned})),I(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:de.treeNodes.morePotency.bought}))]),On=b(()=>cn.apply(1)),Qt=K(()=>[I(()=>({multiplier:se,description:"All Spell EXP Gain"})),I(()=>({multiplier:On,description:"Schol\u0113 potency"})),I(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:de.treeNodes.moreMassXpSpellXp.bought}))]),qt=K(()=>[mt(()=>({addend:()=>s.times(On.value,1),description:"Schol\u0113 potency"})),Ol(()=>({exponent:.9,description:"(softcapped)"}))]),Zt=K(()=>[I(()=>({multiplier:()=>{var Z;return s.pow(1/1.05,(Z=de.level.value)!=null?Z:0)},description:"Pr\u014Dfici\u014D skill (/1.05 per Schol\u0113 level)",enabled:q.treeNodes.slowerDischargeByLevel.bought}))]),Nt=b(()=>Zt.apply(Et.value)),hn={timePassing:ht,chargeMult:H,allSpellPotency:Oe,allSpellXpGain:Ge,xpSpellPotency:ct,xpSpellXp:Ke,jobXpGain:C,jobXpDischargeRate:L,flowerSpellPotency:ke,flowerSpellXp:Ue,flowerGain:kt,flowerPassiveGain:Rt,flowerDischargeRate:He,chargeSpellPotency:Me,chargeSpellXp:U,chargeCap:rt,chargeRate:Yt,baseDischargeRate:Wt,massXpSpellPotency:cn,massXpSpellXp:Qt,massXpGain:qt,massXpDischargeRate:Zt},[x,ae]=Bt(()=>[{title:"Time Passing",modifier:ht,base:1,visible:()=>_e.milestones.appliedTimeMilestone.earned.value||Ee.milestones.timeBatteriesMilestone.earned.value},{title:"Harvesting Flowers EXP Gain",subtitle:"When T\xE9chnasma is active",modifier:C,base:0,unit:"/sec"},{title:"All Spell Potency",modifier:Oe},{title:"All Spell EXP Gain",subtitle:"When the spell is active",modifier:Ge,unit:"/sec"},{title:"Flowers Gain",subtitle:"When Theriz\xF3 is active",modifier:kt,base:0,unit:"/sec",visible:d.earned},{title:"Flowers Gain",subtitle:"When Theriz\xF3 is NOT active",modifier:Rt,base:0,unit:"/sec",visible:()=>d.earned.value&&s.neq(Rt.apply(0),0)}]),[xe,Te]=Bt(()=>[{title:"T\xE9chnasma Potency",modifier:ct},{title:"T\xE9chnasma EXP Gain",subtitle:"When T\xE9chnasma is active",modifier:Ke,unit:"/sec"},{title:"Discharge Rate",subtitle:"When T\xE9chnasma is active",modifier:L,base:Et,unit:"/sec",visible:v.earned}]),[st,St]=Bt(()=>[{title:"Theriz\xF3 Potency",modifier:ke},{title:"Theriz\xF3 EXP Gain",subtitle:"When Theriz\xF3 is active",modifier:Ue,base:.1,unit:"/sec"},{title:"Discharge Rate",subtitle:"When Theriz\xF3 is active",modifier:He,base:Et,unit:"/sec",visible:v.earned}]),[Lt,dn]=Bt(()=>[{title:"Pr\u014Dfici\u014D Potency",modifier:Me},{title:"Pr\u014Dfici\u014D EXP Gain",subtitle:"When Pr\u014Dfici\u014D is active",modifier:U,base:.01,unit:"/sec"},{title:"Charge Multiplier",subtitle:"When a non-Pr\u014Dfici\u014D spell is active",modifier:H,base:()=>s.log2(s.add(ie.value,1)).add(1),unit:"x",baseText:N(()=>a(F,null,[m("Base (log"),a("sub",null,[m("2")]),m("(charge + 1) + 1)")]))},{title:"Charge Rate",subtitle:"When Pr\u014Dfici\u014D is active",modifier:Yt,base:0,unit:"/sec"},{title:"Base Discharge Rate",subtitle:"When a non-Pr\u014Dfici\u014D spell is active",modifier:Wt,base:0,unit:"/sec"},{title:"Maximum Charge",modifier:rt,base:0}]),[Nn,Kn]=Bt(()=>[{title:"Schol\u0113 Potency",modifier:cn},{title:"Schol\u0113 EXP Gain",subtitle:"When Schol\u0113 is active",modifier:Qt,base:.001,unit:"/sec"},{title:"Other Spell EXP Gain Efficiency",subtitle:"When Schol\u0113 is active",modifier:qt,base:0,unit:"%"},{title:"Discharge Rate",subtitle:"When Schol\u0113 is active",modifier:Zt,base:Et,unit:"/sec",visible:v.earned}]),jn=bn({general:()=>({display:"General",glowColor(){return jn.activeTab.value===this.tab?t:""},tab:x,generalTabCollapsed:ae}),xpSpell:()=>({display:"T\xE9chnasma",glowColor(){return jn.activeTab.value===this.tab?t:""},tab:xe,xpSpellTabCollapsed:Te}),flowerSpell:()=>({display:"Theriz\xF3",visibility:()=>J(d.earned.value),glowColor(){return jn.activeTab.value===this.tab?t:""},tab:st,flowerSpellTabCollapsed:St}),chargeSpell:()=>({display:"Pr\u014Dfici\u014D",visibility:()=>J(v.earned.value),glowColor(){return jn.activeTab.value===this.tab?t:""},tab:Lt,chargeSpellTabCollapsed:dn}),massXpSpell:()=>({display:"Schol\u0113",visibility:()=>J(g.earned.value),glowColor(){return jn.activeTab.value===this.tab?t:""},tab:Nn,massXpSpellTabCollapsed:Kn})},()=>({style:`--layer-color: ${t}`}));return this.on("update",Z=>{if(!!i.active.value){if(Z=s.times(Z,wt.value).toNumber(),ee.active.value&&(i.xp.value=s.add(i.xp.value,s.times(C.apply(0),Z)),p.earned.value&&(ee.xp.value=s.add(ee.xp.value,s.times(Ke.apply(1),Z))),ee.castingTime.value+=Z,ie.value=s.max(s.sub(ie.value,s.times(A.value,Z)),0)),R.active.value)n.value=s.min(lt.chapter.value>1?s.dInf:1e7,s.add(n.value,s.times(kt.apply(0),Z))),p.earned.value&&(R.xp.value=s.add(R.xp.value,s.times(Ue.apply(.1),Z))),R.castingTime.value+=Z,ie.value=s.max(s.sub(ie.value,s.times(le.value,Z)),0);else{const At=Rt.apply(0);s.neq(At,0)&&(n.value=s.min(lt.chapter.value>1?s.dInf:1e7,s.add(n.value,s.times(At,Z))))}if(q.active.value&&(q.xp.value=s.add(q.xp.value,s.times(U.apply(.01),Z)),q.castingTime.value+=Z,ie.value=s.min(s.add(ie.value,s.times(Ft.value,Z)),Tt.value)),de.active.value){const At=s.div(qt.apply(0),100);ee.xp.value=s.add(ee.xp.value,s.times(Ke.apply(At),Z)),R.xp.value=s.add(R.xp.value,s.times(Ue.apply(At),Z)),q.xp.value=s.add(q.xp.value,s.times(U.apply(At),Z)),de.xp.value=s.add(de.xp.value,s.times(Qt.apply(.001),Z)),de.castingTime.value+=Z,ie.value=s.max(s.sub(ie.value,s.times(Nt.value,Z)),0)}}}),{name:e,color:t,minWidth:670,flowers:n,bestMoly:l,job:i,spells:Se,modifiers:hn,milestones:y,collapseMilestones:w,chargeAmount:ie,modifierTabs:jn,display:N(()=>{const Z=[...M.value];return G.value&&Z.push(G.value),a(F,null,[ln(a(kl,{resource:n,color:t,effectDisplay:`multiplying spell potency by x${be(Ae.value)}`},null),[[gn,d.earned.value]]),Hn(...Z,N(()=>ln(a(Qn,{collapsed:w,content:ye,display:w.value?"Show other completed milestones":"Hide other completed milestones"},null),[[gn,r(T)]]))),a(Ce,null,null),a("div",{style:"position: relative; z-index: 1"},[m("You can cast "),It(u.value),m(" spell"),u.value===1?"":"s",m(" at a time")]),li(...Object.values(Se).map(At=>At.selector)),v.earned.value?a(gl,{style:"margin-top: 40px !important; margin-bottom: -20px;"},{default:()=>[ut(ge),a("span",{style:"margin-left: 10px"},[be(et.value),m("x")])]}):null,p.earned.value?Object.values(Se).filter(At=>At.active.value).map(At=>a(tu,{spell:At},null)):null,ut(c)])})}}),Gu={},Vu={style:{"white-space":"nowrap","font-size":"larger","font-family":"initial"}},Uu=m(" \u230A\xA0"),zu=m("\xA0\u230B ");function Xu(e,t){return h(),S("span",Vu,[Uu,Ut(e.$slots,"default"),zu])}var Li=oe(Gu,[["render",Xu]]);const Hu={},Ju={style:{"white-space":"nowrap"}},Wu=f("span",{style:{"font-size":"larger","font-family":"initial"}},"\u221A",-1),Qu={style:{"text-decoration":"overline"}};function Zu(e,t){return h(),S("span",Ju,[Wu,f("span",Qu,[Ut(e.$slots,"default")])])}var Ku=oe(Hu,[["render",Zu]]);const Ai={gold:"\u2609",silver:"\u263D",mercury:"\u263F",copper:"\u2640",iron:"\u2642",tin:"\u2643",lead:"\u2644"},Yu=["leo","virgo","libra","scorpio","capricorn","pisces"],ec=["aries","taurus","gemini","cancer","sagittarius","aquarius"],Ml={aries:"fire",taurus:"earth",gemini:"air",cancer:"water",leo:"fire",virgo:"earth",libra:"air",scorpio:"water",sagittarius:"fire",capricorn:"earth",aquarius:"air",pisces:"water"},tc=Symbol("Card");function en(e){const t=V(0),n=V(0);return vt(()=>{const l=e();l.id=an("card-"),l.type=tc,l[Ye]=fl,l.amount=t,l.level=n,l.startingAmount&&(t[bl]=t.value=l.startingAmount),l.display=N(()=>{var _;const v=l,g=fe(typeof v.description=="function"?v.description(r(v.level)):r(v.description),"h3"),y=fe((_=r(v.formula))!=null?_:"");return a(F,null,[a(g,null,null),a("div",{class:"metal"},[Ai[v.metal]]),v.formula?a("div",{class:"formula"},[a(y,null,null)]):null])});const i=fe(l.display),o=fl,u=N(()=>{var _;const v=l,g=fe(typeof v.description=="function"?v.description(s.add(r(v.level),1)):r(v.description),"h3"),y=fe((_=r(v.formula))!=null?_:"");return a(F,null,[a(g,null,null),a("div",{class:"metal"},[Ai[v.metal]]),v.formula?a("div",{class:"formula"},[a(y,null,null)]):null])});l.renderForUpgrade=v=>a(o,Gt({id:`${l.id}-upg-${v}`},l[Re](),{display:v?u:i,class:"big",canClick:!1}),null),l.renderForDeck={[Ye]:o,[Re]:()=>({id:`${l.id}-deck`,...l[Re](),display:N(()=>a(F,null,[a(i,null,null),a("div",{class:"badge amount"},[l.amount.value]),l.showNotif.value?a(yn,{style:"left: 20px; top: -20px"},null):null])),onClick:l.onSelect})};const c=N(()=>a(F,null,[a(i,null,null),l.amount.value===0?a("div",{class:"badge new"},[m("NEW!")]):null]));l.renderForShop=N(()=>{const v=l;return v.price==null?a(o,Gt({id:`${l.id}-shop`},v[Re](),{class:{shop:!0,hidden:!0},canClick:!1}),null):a(o,Gt({id:`${l.id}-shop`},v[Re](),{class:{shop:!0},display:c,canClick:!1}),null)});const p=z(!0);let d=-1;return l.renderForPlay=v=>{const g=l,y=fl;return v.value!==d&&(p.value=!1,requestAnimationFrame(()=>p.value=!0),d=v.value),a(y,Gt({id:`${l.id}-play`},g[Re](),{class:{big:!0,playing:!0,flipping:p.value},canClick:!1}),null)},E(l,"description"),ft(l,"actions",{}),E(l,"formula"),l.showNotif=_l(l.renderForDeck,l.shouldNotify.bind(l)),l[Re]=function(){const{id:v,display:g,sign:y}=this;return{id:v,display:g,visibility:ue.Visible,classes:{card:!0,dontMerge:!0,solar:Yu.includes(y),lunar:ec.includes(y)},canClick:!0}},l})}function ys(e,t){return E(t,"display"),E(t,"classes"),E(t,"style"),E(t,"direction"),ft(t,"direction",je.Up),E(t,"xoffset"),E(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=V(!1)),zt(()=>{const n=e[Ye];e[Ye]=nt;const l=e[Re].bind(e);e[Re]=function(){const{display:o,classes:u,style:c,direction:p,xoffset:d,yoffset:v,pinned:g}=this;return{element:{[Ye]:n,[Re]:l},display:o,classes:u,style:r(c),direction:p,xoffset:d,yoffset:v,pinned:g}}.bind(t)}),t}const nc=Symbol("Buyable");function bs(e){const t=V(0);return vt(()=>{var o,u,c;const n=e();if(n.canPurchase==null&&(n.resource==null||n.cost==null))throw console.warn("Cannot create buyable without a canPurchase property or a resource and cost property",n),"Cannot create buyable without a canPurchase property or a resource and cost property";n.id=an("buyable-"),n.type=nc,n[Ye]=fl,n.amount=t,n.amount[bl]=(o=n.initialValue)!=null?o:0,n.canAfford=b(()=>{const p=n,d=r(p.cost);return p.resource!=null&&d!=null&&s.gte(p.resource.value,d)}),n.canPurchase==null&&(n.canPurchase=b(()=>r(n.visibility)===ue.Visible&&r(n.canAfford)&&s.lt(n.amount.value,r(n.purchaseLimit)))),n.maxed=b(()=>s.gte(n.amount.value,r(n.purchaseLimit))),E(n,"classes");const l=n.classes;n.classes=b(()=>{const p=r(l)||{};return n.maxed.value&&(p.bought=!0),p}),E(n,"canPurchase"),n.canClick=n.canPurchase,n.onClick=n.purchase=(c=(u=n.onClick)!=null?u:n.purchase)!=null?c:function(){var v;const p=n;if(!r(p.canPurchase))return;const d=r(p.cost);p.cost!=null&&p.resource!=null&&(p.resource.value=s.sub(p.resource.value,d),p.amount.value=s.add(p.amount.value,1)),(v=p.onPurchase)==null||v.call(p,d)},E(n,"display");const i=n.display;return n.display=N(()=>{const p=r(i);if(un(p)){const d=fe(p);return a(d,null,null)}if(p!=null&&n.cost!=null&&n.resource!=null){const d=n,v=fe(p.title||"","h3"),g=fe(p.description||""),y=fe(p.effectDisplay||"");return a("span",null,[p.title?a("div",null,[a(v,null,null)]):null,p.description?a(g,null,null):null,p.showAmount===!1?null:a("div",null,[a("br",null,null),r(d.purchaseLimit)===s.dInf?a(F,null,[m("Amount: "),pe(d.amount.value)]):a(F,null,[m("Amount: "),pe(d.amount.value),m(" /")," ",pe(r(d.purchaseLimit))])]),p.effectDisplay?a("div",null,[a("br",null,null),m("Currently: "),a(y,null,null)]):null,d.cost&&!d.maxed.value?a("div",null,[a("br",null,null),m("Cost: "),be(r(d.cost)||0)," ",n.resource.displayName]):null])}return""}),E(n,"visibility"),ft(n,"visibility",ue.Visible),E(n,"cost"),E(n,"resource"),E(n,"purchaseLimit"),ft(n,"purchaseLimit",s.dInf),E(n,"style"),E(n,"mark"),E(n,"small"),n[Re]=function(){const{display:p,visibility:d,style:v,classes:g,onClick:y,canClick:_,small:w,mark:M,id:G}=this;return{display:p,visibility:d,style:r(v),classes:g,onClick:y,canClick:_,small:w,mark:M,id:G}},n})}const lc=!1,ic=!0,sc={min:2,max:1.8},ac=.1,oc=-1,rc=1e3,uc=!0,cc={x:.5,y:.5},dc=[{type:"alpha",config:{alpha:{list:[{time:0,value:0},{time:.2,value:.4},{time:1,value:0}]}}},{type:"moveSpeedStatic",config:{min:10,max:10}},{type:"scale",config:{scale:{list:[{time:0,value:.5},{time:1,value:.1}]},minMult:1}},{type:"rotationStatic",config:{min:0,max:360}},{type:"blendMode",config:{blendMode:"screen"}},{type:"textureRandom",config:{textures:["/smokeparticle.png","/particle.png"]}},{type:"spawnShape",config:{type:"torus",data:{x:0,y:12.5,radius:25,innerRadius:0,affectRotation:!1}}}];var Oi={emit:lc,autoUpdate:ic,lifetime:sc,frequency:ac,emitterLifetime:oc,maxParticles:rc,addAtBack:uc,pos:cc,behaviors:dc},pc=["Now we're cooking","Alchemy's always been more of a philosophical experience for me","Transform!","The elements transform you just as much as you transform them","You cannot step twice into the same stream","Sometimes I wonder if there may be dozens of elements","Could I mix two elements to create something new? No, that wouldn't make sense","There is no intelligence where there is no need of change.","But what good is time without change?","Elements? I love elements!"];const mc=b(()=>J(lt.chapter.value>1));function Pl(e,t){return Object.assign({},Oi,{behaviors:[...Oi.behaviors,{type:"color",config:{color:{list:[{time:0,value:e},{time:1,value:t}]}}}]})}const Yl="distill",We=wn(Yl,function(){const e="Purifying Flowers",t="#267BD1",n=sn(0,"essentia"),l=Gl(n),i=b(()=>Object.values($e).some(H=>{var et;return r((et=H.showNotif)==null?void 0:et.value)})),o=An(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"25%",y:"60%"},symbol:"\u{1F76D}",randomQuips(){return[...pc,...Zn]},resource:n,layerID:Yl,modifierInfo:N(()=>ut(wt)),visibility:mc,showNotif:i})),u=he(()=>({shouldEarn(){return s.gte(o.rawLevel.value,2)},display:{requirement:`Achieve ${o.name} Level 2`,effectDisplay:"Unlock Water"}})),c=he(()=>({shouldEarn(){return s.gte(o.rawLevel.value,4)},display:{requirement:`Achieve ${o.name} Level 4`,effectDisplay:"Unlock Principles"},visibility(){return J(u.earned.value)}})),p=he(()=>({shouldEarn(){return s.gte(o.rawLevel.value,5)},display:{requirement:`Achieve ${o.name} Level 5`,effectDisplay:`Unlock "${fn.job.name}" Job`},visibility(){return J(c.earned.value)},onComplete(){vn(fn,D)}})),d=he(()=>({shouldEarn(){return s.gte(o.rawLevel.value,6)},display:{requirement:`Achieve ${o.name} Level 6`,effectDisplay:"Unlock Air"},visibility(){return J(p.earned.value)}})),v=he(()=>({shouldEarn(){return s.gte(o.rawLevel.value,8)},display:{requirement:`Achieve ${o.name} Level 8`,effectDisplay:"Unlock Fire"},visibility(){return J(d.earned.value)}})),g=he(()=>({shouldEarn(){return s.gte(o.rawLevel.value,10)},display:{requirement:`Achieve ${o.name} Level 10`,effectDisplay:`Unlock "${_e.job.name}" Job`},visibility(){return J(v.earned.value)},onComplete(){vn(_e,D)}})),y={waterMilestone:u,principlesMilestone:c,studyMilestone:p,airMilestone:d,fireMilestone:v,experimentsMilestone:g},_=[g,v,d,p,c,u],w=V(!0),M=b(()=>_.filter(H=>H.earned.value===!1)),{firstFeature:G,collapsedContent:ye,hasCollapsedContent:T}=Jn(_,H=>H.earned.value),$=Bl(()=>({fullscreen:!1,zIndex:-1,boundingRect:z(void 0),onContainerResized(H){this.boundingRect.value=H},onHotReload(){Object.values($e).forEach(H=>H.refreshParticleEffect())}})),W=b(()=>s.pow(1.1,o.level.value));function ie(H,et,Oe=""){const Xe=V(0),Ge=sn(0,H+" essence",2);let se=[];const[ct,gt]=Bt(()=>se);let Ke=null,C=null;const L=K(()=>[mt(()=>({addend:()=>{var A;return s.times((A=Ke==null?void 0:Ke.amount.value)!=null?A:0,5)},description:N(()=>a(F,null,[tn(Oe),m(" effect (5 x "),Oe,m(" amount)")]))}))]);return Oe&&(Ke=bs(()=>({display:N(()=>a("div",null,[m("Prepare "),Oe,m(" to gain a portion of "),H,m(" whenever the above instrument is active"),a("br",null,null),m("("),pe(L.apply(0)),m("%)"),a("br",null,null),a("br",null,null),m("Cost: "),Tn(Ge,r(Ke.cost))," ",Ge.displayName,C!=null&&C.value?a(yn,{style:"top: -25px"},null):null])),visibility:()=>J(c.earned.value),resource:Ge,cost(){return s.pow(10,Ke.amount.value)}})),C=_l(Ke,Ke.canAfford)),vt(()=>{const A=Object.assign({principle:"",prevElement:null,visible:!0},et()),ke=pt(A.visible),Y=K(()=>[]),Ue=b(()=>Y.apply(s.times(Fe.flowers.value,Xe.value).div(100).floor())),kt=K(()=>[I(()=>({multiplier:()=>s.div(Xe.value,100)})),I(()=>({multiplier:W,description:`${o.name} level (x1.1 each)`})),Ee.batteries.distill.resourceGain.modifier,...A.modifiers()]),dt=b(()=>{var Pe,U;return s.add(kt.apply(s.gt(Ue.value,0)?s.div(Ue.value,100).ceil().log(10):0),s.times((U=(Pe=A.prevElement)==null?void 0:Pe.actualGain.value)!=null?U:0,L.apply(0)).div(100))});se=[{title:"Flowers Loss",modifier:Y,base:()=>s.times(Fe.flowers.value,Xe.value).div(100).floor(),baseText:N(()=>a(F,null,[m("Base (\u230Aflowers x conversion amount\u230B)")])),unit:"/sec"},{title:`${tn(H)} Essence Gain`,subtitle:"When cost is non-zero",modifier:kt,base:()=>s.gt(Ue.value,0)?s.div(Ue.value,100).ceil().log(10):0,baseText:N(()=>a(F,null,[m("Base (log"),a("sub",null,[m("10")]),m("(flowers loss))")])),unit:"/sec"}],Ke&&A.prevElement&&se.push({title:`${tn(H)} Essence Gain`,subtitle:`% of ${tn(A.prevElement.name)} essence gain`,modifier:L,base:0,unit:"%"});const Rt=N(()=>r(ke)?a("div",{class:"element-display",style:"color: "+A.color},[a(nt,{display:tn(H)},{default:()=>[a("div",{class:"element-logo"},[A.symbol,a(Ln,{id:H},null)])]}),a("div",{class:"element-amount"},[pe(Ge.value)])]):""),He=z($.addEmitter(A.particlesConfig)),le=async([Pe,U,rt])=>{const Tt=await He.value;Tt.emit=Pe&&U!=null&&rt!=null,Pe&&U&&rt&&!Tt.destroyed&&(Tt.cleanup(),Tt.updateOwnerPos(U.x+U.width/2-rt.x,U.y+U.height/2-rt.y),Tt.resetPositionTracking())},Me=()=>{He.value.then(Pe=>Pe.destroy()).then(()=>He.value=$.addEmitter(A.particlesConfig)).then(()=>{var Pe;return le([s.gt(dt.value,0),(Pe=We.nodes.value[H])==null?void 0:Pe.rect,$.boundingRect.value])})};return zt(()=>Ze([()=>s.gt(dt.value,0),()=>{var Pe;return(Pe=We.nodes.value[H])==null?void 0:Pe.rect},$.boundingRect],le)),{name:H,...A,resource:Ge,conversionAmount:Xe,cost:Y,computedCost:Ue,gain:kt,actualGain:dt,tab:ct,tabCollapsed:gt,display:Rt,showNotif:C,visible:ke,principleClickable:Ke,particlesEmitter:He,refreshParticleEffect:Me}})}const ge=ie("earth",()=>({symbol:"\u{1F703}",color:"green",particlesConfig:Pl("#B6FF0D","#59E80C"),modifiers:()=>[bt.plants.earthEssence.modifier]})),ne=ie("water",()=>({symbol:"\u{1F704}",color:"blue",particlesConfig:Pl("#0D8CFF","#0C46E8"),modifiers:()=>[bt.plants.waterEssence.modifier],prevElement:ge,visible:u.earned}),"salt"),ce=ie("air",()=>({symbol:"\u{1F701}",color:"yellow",particlesConfig:Pl("#FFCE0D","#E8D20C"),modifiers:()=>[bt.plants.airEssence.modifier],prevElement:ne,visible:d.earned}),"mercury"),Le=ie("fire",()=>({symbol:"\u{1F702}",color:"red",particlesConfig:Pl("#FF530D","#E82C0C"),modifiers:()=>[bt.plants.fireEssence.modifier],prevElement:ce,visible:v.earned}),"sulfur"),$e={earth:ge,water:ne,air:ce,fire:Le};function we(H,et,Oe){const Xe=N(()=>r(H.visible)?a("div",null,[a("div",{class:{instrument:!0,principled:H.principleClickable&&r(H.principleClickable.visibility)==ue.Visible},style:`--progress: ${H.conversionAmount.value/100}; --foreground: ${H.color}`},[a("div",{style:"width: 100%; display: flex"},[a("span",{class:"instrument-logo"},[Oe]),a("span",{class:"instrument-details"},[a("div",null,[tn(et)]),a("div",null,[m("-"),Tn(Fe.flowers,H.computedCost.value)," ",Fe.flowers.displayName,m("/sec")]),a("div",null,[m("+"),Tn(H.resource,H.actualGain.value)," ",H.resource.displayName,m("/sec")]),a(gs,{max:Object.values(Ae).filter(Ge=>Ge.name!==et).reduce((Ge,se)=>Ge-se.element.conversionAmount.value,100),modelValue:H.conversionAmount.value,"onUpdate:modelValue":Ge=>H.conversionAmount.value=Ge},null)])])]),H.principleClickable?ut(H.principleClickable):null]):"");return{name:et,symbol:Oe,element:H,display:Xe}}const ze=we(ge,"alembic","\u{1F76A}"),ee=we(ne,"retort","\u{1F76D}"),$t=we(ce,"crucible","\u{1F767}"),ot=we(Le,"bainMarie","\u{1F76B}"),Ae={retort:ee,alembic:ze,crucible:$t,bainMarie:ot},ve=K(()=>[I(()=>({multiplier:_e.appliedTimeEffect,description:"Applied time",enabled:()=>_e.job.active.value&&_e.milestones.appliedTimeMilestone.earned.value&&_e.selectedJob.value===Yl})),Ee.batteries.distill.timePassing.modifier]),R=b(()=>ve.apply(1)),q=K(()=>[I(()=>({multiplier:()=>s.max(1,ge.resource.value),description:"Earth Essence"})),I(()=>({multiplier:()=>s.max(1,ne.resource.value),description:"Water Essence"})),I(()=>({multiplier:()=>s.max(1,ce.resource.value),description:"Air Essence"})),I(()=>({multiplier:()=>s.max(1,Le.resource.value),description:"Fire Essence"})),Ee.batteries.distill.xpGain.modifier]),re=K(()=>[mt(()=>({addend:ge.computedCost,description:"Alembic"})),mt(()=>({addend:ne.computedCost,description:"Retort"})),mt(()=>({addend:ce.computedCost,description:"Crucible"})),mt(()=>({addend:Le.computedCost,description:"Bain-Marie"}))]),de={timePassing:ve,jobXp:q,totalFlowerLoss:re},[Se,ht]=Bt(()=>[{title:"Time Passing",modifier:ve,base:1,visible:()=>_e.milestones.appliedTimeMilestone.earned.value||Ee.milestones.timeBatteriesMilestone.earned.value},{title:"Essentia",subtitle:`Also ${o.name} EXP Amount`,modifier:q,base:1},{title:"Flowers Loss",modifier:re,base:0,unit:"/sec"}]),wt=bn({general:()=>({display:"General",glowColor(){return wt.activeTab.value===this.tab?t:""},tab:Se,generalTabCollapsed:ht}),...Object.entries($e).reduce((H,[et,Oe])=>({...H,[et]:()=>({display:tn(Oe.name),glowColor(){return wt.activeTab.value===this.tab?t:""},tab:Oe.tab,tabCollapsed:Oe.tabCollapsed})}),{})});return this.on("preUpdate",H=>{if(n.value=Object.values($e).reduce((Oe,Xe)=>Oe.times(s.max(1,Xe.resource.value)),new s(1)),s.gt(n.value,o.xp.value)&&(o.xp.value=n.value),!o.active.value)return;H=s.times(H,R.value).toNumber();const et=re.apply(0);Object.values($e).forEach(Oe=>{Oe.resource.value=s.add(Oe.resource.value,s.times(Oe.actualGain.value,H))}),Fe.flowers.value=s.sub(Fe.flowers.value,et).max(0)}),{name:e,color:t,minWidth:670,essentia:n,bestEssentia:l,elements:$e,instruments:Ae,job:o,milestones:y,modifiers:de,modifierTabs:wt,collapseMilestones:w,display:N(()=>{const H=[...M.value];return G.value&&H.push(G.value),a(F,null,[a(kl,{resource:n,color:t},null),Hn(...H,N(()=>ln(a(Qn,{collapsed:w,content:ye,display:w.value?"Show other completed milestones":"Hide other completed milestones"},null),[[gn,r(T)]]))),li(ge.display,ne.display,ce.display,Le.display),a(Ce,null,null),li(ze.display,ee.display,$t.display,ot.display),Qe($)])})}});var fc=["I've always had an affinity for lead","When I'm near lead I feel in my element","Sometimes I wonder if there may be more planets","I have to believe in the heart of the cards","My deck has no bad cards","Honestly, cards are pretty abstract","Cards? I love cards!"];const vc={min:.5,max:1},hc=[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],gc=.001,yc=.1,bc=100,_c=!0,wc={x:0,y:0},kc=!1,Nc=[{type:"alpha",config:{alpha:{list:[{time:0,value:.74},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:700},{time:1,value:0}]},minMult:1}},{type:"scale",config:{scale:{list:[{time:0,value:5},{time:1,value:1.2}]},minMult:1}},{type:"color",config:{color:{list:[{time:0,value:"#ffdfa0"},{time:1,value:"#100f0c"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:200,minStart:0,maxStart:360}},{type:"textureRandom",config:{textures:["/particle.png"]}},{type:"spawnShape",config:{type:"rect",data:{x:-300,y:-125,w:600,h:250}}}];var Sc={lifetime:vc,ease:hc,frequency:gc,emitterLifetime:yc,maxParticles:bc,addAtBack:_c,pos:wc,emit:kc,behaviors:Nc};const el=ol(),ei="study",fn=wn(ei,function(){const e="Studying",t="#D16726",n=sn(0,"properties"),l=sn(0,"insights"),i=Gl(l),o=V(0),u=V(0),c=b(()=>v.earned.value&&Object.values(U).some(x=>x.showNotif.value)),p=An(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"25%",y:"20%"},symbol:"\u{1F56E}",randomQuips(){return[...fc,...Zn]},resource:n,layerID:ei,modifierInfo:N(()=>ut(et)),visibility:()=>J(We.milestones.studyMilestone.earned.value),showNotif:c})),d=he(()=>({shouldEarn(){return s.gte(p.rawLevel.value,2)},display:{requirement:`Achieve ${p.name} Level 2`,effectDisplay:"Unlock drawing cards manually"}})),v=he(()=>({shouldEarn(){return s.gte(p.rawLevel.value,4)},display:{requirement:`Achieve ${p.name} Level 4`,effectDisplay:"Unlock purchasing and selling cards"},visibility(){return J(d.earned.value)}})),g=he(()=>({shouldEarn(){return s.gte(p.rawLevel.value,5)},display:{requirement:`Achieve ${p.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility(){return J(v.earned.value)}})),y=he(()=>({shouldEarn(){return s.gte(p.rawLevel.value,6)},display:{requirement:`Achieve ${p.name} Level 6`,effectDisplay:"Unlock optimizations"},visibility(){return J(g.earned.value)}})),_=he(()=>({shouldEarn(){return s.gte(p.rawLevel.value,8)},display:{requirement:`Achieve ${p.name} Level 8`,effectDisplay:"Unlock upgrading cards"},visibility(){return J(y.earned.value)}})),w=he(()=>({shouldEarn(){return s.gte(p.rawLevel.value,10)},display:{requirement:`Achieve ${p.name} Level 10`,effectDisplay:`Unlock "${bt.job.name}" Job`},visibility(){return J(_.earned.value)},onComplete(){vn(bt,D)}})),M={manualMilestone:d,shopMilestone:v,timeSlotMilestone:g,optimizationsMilestone:y,upgradingMilestone:_,jobMilestone:w},G=[w,_,y,g,v,d],ye=V(!0),T=b(()=>G.filter(x=>x.earned.value===!1)),{firstFeature:$,collapsedContent:W,hasCollapsedContent:ie}=Jn(G,x=>x.earned.value),ge=b(()=>y.earned.value?s.pow(1.1,s.max(Fe.bestMoly.value,1).log10().floor()):1);let ne=null;Ze(()=>pe(s.times(ge.value,100).sub(100)),x=>{Be.active===D.id&&(ne!=null&&el.dismiss(ne),ne=el.info(a(F,null,[a("h3",null,[m("Experience Optimized!")]),a("div",null,[m("Experience optimization is now "),x,m("%")])])))});const ce=Fl(()=>({direction:je.Right,width:500,height:25,progress:()=>s.sub(1,s.add(Fe.bestMoly.value,1).log10().ceil().sub(s.max(Fe.bestMoly.value,1).log10())),display:N(()=>a(F,null,[be(Fe.bestMoly.value),m(" best moly")])),borderStyle:{borderColor:Fe.color,color:"#FFF"},fillStyle:{backgroundColor:Fe.color}})),Le=b(()=>y.earned.value?s.pow(1.1,s.max(We.bestEssentia.value,1).log10().floor()):1);let $e=null;Ze(()=>pe(s.times(Le.value,100).sub(100)),x=>{Be.active===D.id&&($e!=null&&el.dismiss($e),$e=el.info(a(F,null,[a("h3",null,[p.name,m(" Optimized!")]),a("div",null,[p.name,m(" optimization is now "),x,m("%")])])))});const we=Fl(()=>({direction:je.Right,width:500,height:25,progress:()=>s.sub(1,s.add(We.bestEssentia.value,1).log10().ceil().sub(s.max(We.bestEssentia.value,1).log10())),display:N(()=>a(F,null,[be(We.bestEssentia.value),m(" best essentia")])),borderStyle:{borderColor:We.color,color:"#FFF"},fillStyle:{backgroundColor:We.color}})),ze=b(()=>y.earned.value?s.pow(1.1,s.max(i.value,1).log10().floor()):1);let ee=null;Ze(()=>pe(s.times(ze.value,100).sub(100)),x=>{Be.active===D.id&&(ee!=null&&el.dismiss(ee),ee=el.info(a(F,null,[a("h3",null,[m("Draw Time Optimized!")]),a("div",null,[m("Draw time optimization is now "),x,m("%")])])))});const $t=Fl(()=>({direction:je.Right,width:500,height:25,progress:()=>s.sub(1,s.add(i.value,1).log10().ceil().sub(s.max(i.value,1).log10())),display:N(()=>a(F,null,[be(i.value),m(" best insights")])),borderStyle:{borderColor:t,color:"#FFF"},fillStyle:{backgroundColor:t}})),ot=b(()=>s.pow(1.1,p.level.value)),Ae=K(()=>[I(()=>({multiplier:_e.appliedTimeEffect,description:"Applied time",enabled:()=>_e.job.active.value&&_e.milestones.appliedTimeMilestone.earned.value&&_e.selectedJob.value===ei})),Ee.batteries.study.timePassing.modifier]),ve=b(()=>Ae.apply(1)),R=K(()=>[I(()=>({multiplier:ot,description:`${p.name} level (x1.1 each)`})),I(()=>({multiplier:Le,description:`${p.name} optimization`,enabled:y.earned})),Ee.batteries.study.resourceGain.modifier,bt.plants.properties.modifier]),q=b(()=>R.apply(10)),re=K(()=>[I(()=>({multiplier:()=>s.times(.01,u.value).add(1),description:"Drawn cards (+.01x each)"})),I(()=>({multiplier:ge,description:"Experience optimization",enabled:y.earned})),Ee.batteries.study.xpGain.modifier]),de=K(()=>[I(()=>({multiplier:()=>s.div(1,ze.value),description:"Draw speed optimization",enabled:y.earned})),I(()=>({multiplier:.5,description:"Faster draw card",enabled:()=>dt.value>0}))]),Se=b(()=>de.apply(10)),ht=K(()=>[I(()=>({multiplier:.5,description:"Manual bonus"}))]),wt=b(()=>ht.apply(Se.value)),H={timePassing:Ae,propertiesGain:R,jobXpGain:re,drawTime:de,manualDrawTime:ht},[et,Oe]=Bt(()=>[{title:"Time Passing",modifier:Ae,base:1,visible:()=>_e.milestones.appliedTimeMilestone.earned.value||Ee.milestones.timeBatteriesMilestone.earned.value},{title:"Properties Gain",modifier:R,base:10},{title:`${p.name} EXP Gain`,modifier:re,base:1,baseText:"Base (per property gained)"},{title:"Automatic Card Draw",modifier:de,base:10,unit:"s"},{title:"Manual Card Draw",modifier:ht,base:Se,unit:"s"}]),Xe=Bl(()=>({fullscreen:!1,zIndex:-1,boundingRect:z(null),onContainerResized(x){this.boundingRect.value=x}})),Ge=b(()=>Object.values(U).reduce((x,ae)=>x+ae.amount.value,0)),se=V(""),ct=V(["","",""]),gt=V("nothing"),Ke=z(0),C=en(()=>({description:"Do nothing.",metal:"mercury",sign:"gemini",startingAmount:4,onSelect:()=>se.value="nothing",shouldNotify:function(){return Nt(this)}})),L=en(()=>({description:x=>N(()=>a("h3",null,[m("Record")," ",Mt(pe(s.times(q.value,s.add(x,1))))," ",m("properties and job exp.")])),metal:"gold",sign:"leo",actions:{onPlay:x=>{const ae=s.times(q.value,s.add(x,1));n.value=s.add(n.value,ae),p.xp.value=s.add(p.xp.value,re.apply(ae))}},formula:N(()=>Mt("properties gain x level")),price:1,startingAmount:4,onSelect:()=>se.value="gainPoints",shouldNotify:function(){return Nt(this)}})),A=en(()=>({description:x=>N(()=>a("h3",null,[m("Record")," ",Mt(pe(s.times(q.value,s.add(x,1)).times(10).pow(1.2)))," ",m("properties and job exp. Destroy this card.")])),metal:"tin",sign:"sagittarius",actions:{onPlay:(x,ae)=>{const xe=s.times(q.value,s.add(x,1)).times(10).pow(1.2);n.value=s.add(n.value,xe),p.xp.value=s.add(p.xp.value,re.apply(xe)),ae||(A.amount.value=Math.max(A.amount.value-1,0),A.amount.value<=0&&se.value==="gainBigPoints"&&(se.value=""))}},formula:N(()=>a("span",{style:"color: var(--accent2)"},[m("(properties gain x 10 x level)"),a("sup",null,[m("1.2")])])),price:8,onSelect:()=>se.value="gainBigPoints",shouldNotify:function(){return Nt(this)}})),ke=en(()=>({description:x=>s.eq(x,0)?N(()=>a("h3",null,[m("Gain "),Mt("1"),m(" key insight.")])):N(()=>a("h3",null,[m("Gain "),Mt(pe(s.add(x,1))),m(" key insights.")])),metal:"copper",sign:"libra",actions:{onPlay:x=>{l.value=s.add(l.value,x).add(1)}},formula:N(()=>Mt("level")),price:0,startingAmount:2,onSelect:()=>se.value="gainInsight",shouldNotify:function(){return Nt(this)}})),Y=en(()=>({description:x=>N(()=>a("h3",null,[m("Use the size of your deck to gain")," ",Mt(pe(s.times(Ge.value,s.add(x,1))))," ",m("key insights.")])),metal:"silver",sign:"cancer",actions:{onPlay:x=>{const ae=s.times(Ge.value,s.add(x,1));l.value=s.add(l.value,ae)}},formula:N(()=>a("span",{style:"color: var(--accent2)"},[m("cards x level")])),price:13,onSelect:()=>se.value="gainBigInsight",shouldNotify:function(){return Nt(this)}})),Ue=en(()=>({description:x=>s.eq(x,0)?"Play the next card an extra time (does not stack)":N(()=>a("h3",null,[m("Play the next card an extra time, with")," ",Mt(be(s.div(x,4))),m(" bonus levels (does not stack)")])),metal:"iron",sign:"scorpio",actions:{onNextCardPlay:x=>{const ae=x.actions.onPlay;return ae&&ae(s.add(x.level.value,s.div(Ue.level.value,4)),!0),u.value++,!0}},formula:N(()=>Mt("(level - 1) / 4")),price:32,onSelect:()=>se.value="playTwice",shouldNotify:function(){return Nt(this)}})),kt=en(()=>({description:x=>N(()=>a("h3",null,[m("Gain xp equal to "),Mt(be(s.div(s.add(x,1),10),1)),m("x times your number of properties.")])),metal:"tin",sign:"pisces",actions:{onPlay:x=>{p.xp.value=s.add(p.xp.value,re.apply(s.add(x,1).div(10).times(n.value)))}},formula:N(()=>Mt("properties x level / 10")),price:25,onSelect:()=>se.value="gainXp",shouldNotify:function(){return Nt(this)}})),dt=V(0),Rt=en(()=>({description:x=>N(()=>a("h3",null,[m("Drawing cards is 2x faster for the next")," ",Mt(pe(s.times(ai.value,s.add(x,1))))," ",m("seconds (doesn't stack)")])),metal:"mercury",sign:"virgo",actions:{onPlay:x=>dt.value=s.times(ai.value,s.add(x,1)).toNumber()},formula:N(()=>Mt("number of jobs x level")),price:48,onSelect:()=>se.value="fasterDraws",shouldNotify:function(){return Nt(this)}})),He=en(()=>({description:x=>N(()=>a("h3",null,[m("Gain")," ",Mt(pe(Object.values(lt.jobs).reduce((ae,xe)=>ae.add(xe.level.value),new s(0)).sqrt().floor().times(s.add(x,1))))," ",m("of a random elemental essence")])),metal:"iron",sign:"aries",actions:{onPlay:x=>{const ae=Object.values(We.elements).filter(Te=>r(Te.visible)),xe=ae[Math.floor(Math.random()*ae.length)];xe.resource.value=s.add(xe.resource.value,lt.sumJobLevels.value.times(s.add(x,1).sqrt().floor()))}},formula:N(()=>a("span",{style:"color: var(--accent2)"},[a(Li,null,{default:()=>[a(Ku,null,{default:()=>[m("sum job levels")]})]})," ",m("x level")])),price:16,onSelect:()=>se.value="gainElementalEssence",shouldNotify:function(){return Nt(this)}})),le=en(()=>({description:x=>N(()=>a("h3",null,[m("Gain")," ",Mt(pe(s.times(Object.values(lt.jobs).reduce((ae,xe)=>ae.add(xe.level.value),new s(0)),s.add(x,1)).floor()))," ",m("key insights")])),metal:"lead",sign:"capricorn",actions:{onPlay:x=>{const ae=s.times(Object.values(lt.jobs).reduce((xe,Te)=>xe.add(Te.level.value),new s(0)),s.add(x,1)).floor();l.value=s.add(l.value,ae)}},formula:N(()=>a("span",{style:"color: var(--accent2)"},[m("sum job levels x level")])),price:14,onSelect:()=>se.value="gainInsightFromJobs",shouldNotify:function(){return Nt(this)}})),Me=en(()=>({description:x=>N(()=>a("h3",null,[m("Gain "),Mt(pe(s.add(x,1).times(5))),m("s of moly production")])),metal:"lead",sign:"aquarius",actions:{onPlay:x=>{Fe.flowers.value=s.add(Fe.flowers.value,s.times(Fe.modifiers.flowerGain.apply(0),s.add(1,x).times(5)))}},formula:N(()=>Mt("5 x level")),price:9,onSelect:()=>se.value="gainMolyFromEssentia",shouldNotify:function(){return Nt(this)}})),Pe=en(()=>({description:x=>N(()=>a("h3",null,[m("Convert half your moly into")," ",Mt(pe(s.div(Fe.flowers.value,2).max(1).ln().floor().times(s.add(1,x)).times(q.value)))," ",m("properties and job exp")])),metal:"copper",sign:"taurus",actions:{onPlay:x=>{const ae=s.div(Fe.flowers.value,2).max(1).ln().floor().times(s.add(1,x)).times(q.value);Fe.flowers.value=s.div(Fe.flowers.value,2).floor(),n.value=s.add(n.value,ae),p.xp.value=s.add(p.xp.value,re.apply(ae))}},formula:N(()=>a("span",{style:"color: var(--accent2)"},[m("properties gain x "),a(Li,null,{default:()=>[m("ln(spent moly)")]}),m(" x level")])),price:8,onSelect:()=>se.value="gainPropertiesFromFlowers",shouldNotify:function(){return Nt(this)}})),U={nothing:C,gainPoints:L,gainBigPoints:A,gainInsight:ke,gainBigInsight:Y,playTwice:Ue,gainXp:kt,fasterDraws:Rt,gainElementalEssence:He,gainInsightFromJobs:le,gainMolyFromEssentia:Me,gainPropertiesFromFlowers:Pe},rt=b(()=>{if(se.value in U){const x=U[se.value];return new s(10).pow(s.add(x.level.value,2))}return 0}),Tt=Pn(()=>({display:{title:"+1 Level",description:N(()=>{if(se.value in U){const x=U[se.value];return a(F,null,[m("Current level: "),pe(s.add(x.level.value,1)),a("br",null,null),se.value==="nothing"?a("span",null,[m("Max level!")]):a("span",null,[m("Cost: "),be(rt.value),m(" "),l.displayName])])}return""})},canClick(){return se.value!=="nothing"&&se.value in U&&s.gte(l.value,rt.value)},onClick(){if(se.value in U){const x=U[se.value];l.value=s.sub(l.value,rt.value),x.level.value=s.add(x.level.value,1)}},style:{height:"120px",alignSelf:"center"}})),Yt=b(()=>s.gte(o.value,wt.value)),Ft=Pn(()=>({display:{title:"Draw",description:N(()=>a(F,null,[a("div",null,[m("Focus harder in order to discover the next card faster.")]),Yt.value?a("div",null,[m("Available Now!")]):a("div",null,[m("Available in")," ",En(s.sub(wt.value,o.value))])]))},canClick:Yt,onClick:Zt,style:{minHeight:"50px",width:"200px"}})),Wt=V(0),Et=b(()=>s.pow(2,Wt.value).times(100)),cn=Pn(()=>({display:{title:"Purge card",description:N(()=>a(F,null,[m("Remove card from deck"),a("br",null,null),m("Cost: "),be(Et.value),m(" "),l.displayName]))},canClick(){return s.gte(l.value,Et.value)},async onClick(){var x;if(se.value in U){const ae=U[se.value];l.value=s.sub(l.value,Et.value),Wt.value++,ae.amount.value--;const xe=Xe.boundingRect.value,Te=(x=fn.nodes.value.deck)==null?void 0:x.rect;xe&&Te&&(await zt(),Xe.addEmitter(Sc).then(st=>{st.updateOwnerPos(Te.x+Te.width/2-xe.x,Te.y+Te.height/2-xe.y),st.playOnceAndDestroy()})),ae.amount.value<=0&&(se.value="")}},style:{"--layer-color":"var(--danger)",minHeight:"50px",width:"200px"}})),On=new Array(3).fill(0).map((x,ae)=>{const xe=Pn(()=>({display:{title:"Purchase Card",description:N(()=>{const Te=ct.value[ae];if(Te==="")return a(F,null,[m("Out of Stock!"),a("div",{class:"element-cost"},null)]);const st=U[Te],St=Ml[st.sign];return a(F,null,[pe(st.price),m(" "),St,m(" essence"),a("div",{class:"element-cost",style:{color:We.elements[St].color}},[We.elements[St].symbol])])})},canClick(){const Te=ct.value[ae];if(Te==="")return!1;const st=U[Te],St=Ml[st.sign],Lt=We.elements[St].resource;return s.gte(Lt.value,st.price)},onClick(){const Te=ct.value[ae];if(Te==="")return!1;const st=U[Te],St=Ml[st.sign],Lt=We.elements[St].resource;st.amount.value+=1,Lt.value=s.sub(Lt.value,st.price),ct.value[ae]=""},style:{width:"165px",margin:"20px 7.5px",minHeight:"50px",paddingLeft:"55px",borderTopLeftRadius:"25px",borderBottomLeftRadius:"25px"}}));return ys(xe,{display:N(()=>{const Te=ct.value[ae];if(Te==="")return a(F,null,null);const st=U[Te],St=Ml[st.sign],Lt=We.elements[St].resource;return a(F,null,[m("You have "),Tn(Lt),m(" "),Lt.displayName])}),direction:je.Down}),xe}),Qt=V(0),qt=b(()=>7);function Zt(){var xe,Te,st,St,Lt;o.value=0,Ke.value++,Qt.value++,u.value++;const x=gt.value;let ae=Math.floor(Math.random()*Ge.value);if(gt.value=Object.keys(U).find(dn=>ae<=U[dn].amount.value?!0:(ae-=U[dn].amount.value,!1)),((st=(Te=(xe=U[x].actions).onNextCardPlay)==null?void 0:Te.call(xe,U[gt.value],!1))==null||st)&&((Lt=(St=U[gt.value].actions).onPlay)==null||Lt.call(St,U[gt.value].level.value,!1)),Qt.value>=qt.value){Qt.value=0;const dn=Object.keys(U).filter(Nn=>"price"in U[Nn]);ct.value=new Array(3).fill(0).map(()=>dn[Math.floor(Math.random()*dn.length)])}}function Nt(x){return v.earned.value&&x.amount.value>0&&s.gte(l.value,new s(10).pow(s.add(x.level.value,2)))}this.on("preUpdate",x=>{!p.active.value||(x=s.times(x,ve.value).toNumber(),o.value+=x,dt.value=Math.max(0,dt.value-x),s.gte(o.value,Se.value)&&Zt())});const hn=bn({play:()=>({display:"Play",tab:Fn(()=>({display:N(()=>a(F,null,[a(Ce,null,null),U[gt.value].renderForPlay(Ke),a(Ce,null,null),d.earned.value?Tl(Ft):null,a(Ce,null,null),v.earned.value?a("div",null,[m("Shop will refresh in")," ",qt.value-Qt.value,m(" draws")]):null,a("div",null,[m("Card will be drawn automatically in")," ",En(s.sub(Se.value,o.value))])]))})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),deck:()=>({display:N(()=>a("span",{style:"position: relative;"},[m("Cards"),c.value?a(yn,{style:"left: -15px; top: -10px"},null):null])),tab:Fn(()=>({display:N(()=>{const x=Object.values(U).filter(xe=>xe.amount.value>0),ae=Math.ceil(x.length/5);return a(F,null,[a(Ce,null,null),v.earned.value?a(F,null,[a("h2",null,[m("Shop")]),a(Ce,null,null),ct.value.map(xe=>xe===""?U.nothing.renderForShop():U[xe].renderForShop()),Tl(...On),a("div",null,[m("Shop will refresh in")," ",qt.value-Qt.value," ",m("draws")]),a(Ce,{height:"50px"},null)]):null,a("h2",null,[m("Deck")]),a(Ce,null,null),a("div",{class:"cardDeck-container"},[a(Ln,{id:"deck"},null),...new Array(ae).fill(0).map((xe,Te)=>Tl(...x.slice(Te*Math.ceil(x.length/ae),(Te+1)*Math.ceil(x.length/ae)).map(st=>st.renderForDeck)))]),a(Ce,null,null),se.value?a(F,null,[_.earned.value?a("div",{style:"display: flex; justify-content: center;"},[U[se.value].renderForUpgrade(!1),a("div",{style:"display: flex; flex-direction: column; color: var(--layer-color); font-size: xxx-large; margin-left: -30px; margin-right: -30px"},[a("span",{style:"margin-bottom: 20px"},[m(">>>")]),Qe(Tt),a("span",{style:"margin-top: 20px"},[m(">>>")])]),U[se.value].renderForUpgrade(!0)]):U[se.value].renderForUpgrade(!1),v.earned.value?Qe(cn):null]):null])})}))}),optimizations:()=>({display:"Optimizations",visibility:()=>J(y.earned.value),tab:Fn(()=>({display:N(()=>a(F,null,[a(Ce,null,null),a("h2",null,[m("Experience Optimization")]),a("div",{style:"margin: 20px"},[m("The magnitude of your best moly amount has allowed you to optimize your exp gain by")," ",pe(s.times(ge.value,100).sub(100)),m("%."),a("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),Qe(ce),a(Ce,{height:"50px"},null),a("h2",null,[p.name,m(" Optimization")]),a("div",{style:"margin: 20px"},[m("The magnitude of your best essentia amount has allowed you to optimize your properties gain by")," ",pe(s.times(Le.value,100).sub(100)),m("%."),a("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),Qe(we),a(Ce,{height:"50px"},null),a("h2",null,[m("Draw Speed Optimization")]),a("div",{style:"margin: 20px"},[m("The magnitude of your best insights amount has allowed you to optimize your drawing speed by")," ",pe(s.times(ze.value,100).sub(100)),m("%."),a("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),Qe($t)]))}))})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}}));return{name:e,color:t,minWidth:670,properties:n,insights:l,bestInsights:i,timeDrawing:o,job:p,cards:U,modifiers:H,milestones:M,collapseMilestones:ye,generalTabCollapsed:Oe,tabs:hn,selectedCard:se,drawnCard:gt,soldCards:Wt,cardShop:ct,cardsDrawnToShop:Qt,fasterDrawTime:dt,totalCardsDrawn:u,display:N(()=>{const x=[...T.value];return $.value&&x.push($.value),a(F,null,[a(hi,null,{default:()=>[a("div",{style:"height: 50px; line-height: 50px; margin-bottom: 20px"},[m("You have "),a(si,{resource:n,color:t},null),m(" properties studied and "),a(si,{resource:l,color:"darkcyan"},null),m(" key insights")])]}),Hn(...x,N(()=>ln(a(Qn,{collapsed:ye,content:W,display:ye.value?"Show other completed milestones":"Hide other completed milestones"},null),[[gn,r(ie)]]))),a(Ce,null,null),Qe(hn),Qe(Xe)])})}});const Cc={class:"applied-time-selectors-container"},$c=["onClick"],Mc={key:0,class:"applied-time-symbol"},Pc={key:1,class:"applied-time-symbol material-icons"},xc={class:"applied-time-effect"},Tc=X({__name:"AppliedTimeSelectors",props:{jobs:null,selectedJob:null,effect:null},emits:["selectJob"],setup(e,{emit:t}){const n=e,{jobs:l,selectedJob:i,effect:o}=it(n),u=b(()=>Object.keys(l.value).filter(p=>r(l.value[p].visibility)===ue.Visible).reduce((p,d)=>({...p,[d]:l.value[d]}),{})),c=b(()=>Math.PI*2/Object.keys(u.value).length);return(p,d)=>(h(),S("div",Cc,[(h(!0),S(F,null,_n(r(u),(v,g,y)=>(h(),S("div",{key:g,class:qe(["feature can dontMerge applied-time-selector",r(i)===g?"selected":""]),style:Ie({backgroundColor:r(v.color),top:`${Math.sin(y*r(c)+r(D).time/1e4)*200+300}px`,left:`${Math.cos(y*r(c)+r(D).time/1e4)*200+300}px`}),onClick:_=>t("selectJob",g)},[r(v.symbol).length<=2?(h(),S("div",Mc,Q(v.symbol),1)):(h(),S("span",Pc,Q(v.symbol),1))],14,$c))),128)),f("div",xc,Q(r(be)(r(o)))+"x",1)]))}});var Fc=oe(Tc,[["__scopeId","data-v-913f3a08"]]);const Ec={key:1,class:"grain complete"},Ic=X({__name:"Grain",props:{index:null,chippingProgress:null,chippingIndex:null},setup(e){const t=e,{index:n,chippingProgress:l,chippingIndex:i}=it(t);return(o,u)=>r(i)<r(n)?(h(),S("div",{key:0,class:qe(["grain not-started",{}])})):(h(),S("div",Ec,[r(i)===r(n)?(h(),S("div",{key:0,class:"grain",style:Ie({clipPath:`polygon(0 0, 100% 0, 100% ${(1-r(l))*100}%, 0 ${(1-r(l))*100}%)`})},null,4)):j("",!0)]))}});var ji=oe(Ic,[["__scopeId","data-v-63857638"]]);const Dc=e=>(Ht("data-v-e8dadcb2"),e=e(),Jt(),e),Lc={class:"single-grain-label"},Ac={style:{display:"none"}},Oc={id:"grain-filter"},jc=["seed"],Rc=Dc(()=>f("feDisplacementMap",{in:"SourceGraphic",scale:"20"},null,-1)),qc=X({__name:"Grains",props:{baseGrains:null,chippingProgress:null},setup(e){const t=e,{baseGrains:n,chippingProgress:l}=it(t),i=b(()=>s.pow(2,new s(n.value).log2().floor()).round().toNumber()),o=b(()=>s.pow(2,new s(i.value).log2().div(2).floor()).round().toNumber()),u=b(()=>s.div(i.value,o.value).round().toNumber()),c=b(()=>s.sub(n.value,i.value).add(1).round().toNumber());return(p,d)=>(h(),S(F,null,[r(s).lt(r(n),1024)?(h(),S("div",{key:0,class:"grains-container",style:Ie({gridTemplateColumns:`repeat(${r(u)}, 1fr)`,columnGap:r(u)===r(o)?"var(--feature-margin)":`calc(var(--feature-margin) + ${150/(r(u)-1)}px)`,maxWidth:r(u)===r(o)?"300px":"600px"})},[(h(!0),S(F,null,_n(r(i),v=>(h(),B(ji,{key:v,index:v,chippingProgress:r(l),chippingIndex:r(c)},null,8,["index","chippingProgress","chippingIndex"]))),128))],4)):(h(),S(F,{key:1},[a(ji,{index:0,chippingProgress:r(l),chippingIndex:0,class:"single-grain"},null,8,["chippingProgress"]),f("div",Lc,Q(r(pe)(r(c)))+"/"+Q(r(pe)(r(i))),1)],64)),(h(),S("svg",Ac,[f("filter",Oc,[f("feTurbulence",{x:"0",y:"0",width:"700px",height:"700px",baseFrequency:"0.005",numOctaves:"10",seed:r(s).lt(r(n),1024)?r(i):new r(s)(r(n)).toNumber()},null,8,jc),Rc])]))],64))}});var Bc=oe(qc,[["__scopeId","data-v-e8dadcb2"]]);const _s=e=>(Ht("data-v-93b37faa"),e=e(),Jt(),e),Gc=_s(()=>f("clipPath",{id:"glass-mask"},[f("path",{d:"M204 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175C103 254.699 -38 300 10 350H204C252 300 111 254.699 111 175C111 95.3005 252 50 204 -2.82683e-05Z",fill:"black"})],-1)),Vc={id:"sand-top-mask"},Uc=["transform"],zc={id:"sand-bottom-mask"},Xc=["transform"],Hc={id:"flipping-mask"},Jc=["transform"],Wc=Ts('<g id="sand" transform="translate(42, 20)" clip-path="url(#glass-mask)" data-v-93b37faa><g clip-path="url(#flipping-mask)" data-v-93b37faa><path id="sand-top" d="M204 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175V350H111V175C111 95.3005 252 50 204 -2.82683e-05Z" fill="white" clip-path="url(#sand-top-mask)" data-v-93b37faa></path></g><rect id="sand-bottom" width="300" height="390" fill="white" clip-path="url(#sand-bottom-mask)" data-v-93b37faa></rect></g><path id="glass" transform="translate(38, 20)" d="M212 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175C103 254.699 -38 300 10 350H212C260 300 119 254.699 119 175C119 95.3005 260 50 212 -2.82683e-05Z" fill="#0003" data-v-93b37faa></path><path id="frame" fill-rule="evenodd" clip-rule="evenodd" d="M300 0H0V20H300V0ZM300 370H0V390H300V370Z" fill="#9E9169" data-v-93b37faa></path><path id="sides" transform="translate(15, 20)" d="M20 0H0V350H20V0ZM270 0H250V350H270V0Z" fill="#817654" data-v-93b37faa></path>',4),Qc={key:1,class:"remainingGrains"},Zc={key:2,class:"flip-request"},Kc=m(" Press to "),Yc=_s(()=>f("br",null,null,-1)),ed=m(" flip "),td=[Kc,Yc,ed],nd={class:"fallenGrains"},ld=X({__name:"Hourglass",props:{totalGrains:null,grainsFallen:null,flippingProgress:null,showHourglassNotif:{type:Boolean}},emits:["flip"],setup(e,{emit:t}){return(n,l)=>(h(),S("div",{class:qe(["hourglass-container",{flipping:e.flippingProgress<1}]),onClick:l[0]||(l[0]=i=>t("flip"))},[e.showHourglassNotif?(h(),B(yn,{key:0})):j("",!0),(h(),S("svg",{width:"240",height:"312",viewBox:"0 0 300 390",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Ie({transform:`rotateZ(${(1-e.flippingProgress)*180}deg)`})},[f("defs",null,[Gc,f("clipPath",Vc,[f("path",{d:"M149.25 19.5C89.9195 19.5 0.5 0.5 0.5 0.5V390H299.5V0.5C299.5 0.5 208.581 19.5 149.25 19.5Z",transform:e.flippingProgress<1?`translate(0, ${-40+e.flippingProgress*40})`:`translate(0, ${r(s).div(e.grainsFallen,e.totalGrains).sqr().times(190).toNumber()})`,fill:"black"},null,8,Uc)]),f("clipPath",zc,[f("path",{d:"M148.75 0C89.4195 0 0 19 0 19V389.5H299V19C299 19 208.081 0 148.75 0Z",transform:`translate(-40, ${r(s).sub(350,r(s).div(e.grainsFallen,e.totalGrains).sqr().times(150)).toNumber()})`,fill:"black"},null,8,Xc)]),f("clipPath",Hc,[f("path",{d:"M150.25 389.5C209.581 389.5 300 370.5 300 370.5L300 3.05176e-05L1.87924e-05 4.37817e-06L-1.35978e-05 370.5C-1.35978e-05 370.5 90.9194 389.5 150.25 389.5Z",fill:"black",transform:`translate(0, ${Math.max(e.flippingProgress,.5)*420-445})`},null,8,Jc)])]),Wc],4)),r(s).sub(e.totalGrains,e.grainsFallen).gt(0)?(h(),S("div",Qc,Q(r(pe)(r(s).sub(e.totalGrains,e.grainsFallen))),1)):(h(),S("div",Zc,td)),f("div",nd,Q(r(pe)(e.grainsFallen)),1)],2))}});var id=oe(ld,[["__scopeId","data-v-93b37faa"]]),sd=["Time? I love time!","I don't like sand. It's coarse and rough and irritating - and it gets everywhere","Those who make the worst use of their time are the first to complain of its brevity","Oh, how the time has flown","Time is an illusion","Time does not pass, it continues","This, too, shall pass","The hourglass mesmerizes me","Each grain split makes my measurements more precise"];const Ri=ol(),qi={additive:"+",multiplicative:"x",exponential:"^"},ad={additive:(e,t)=>()=>s.times(r(e),t.value),multiplicative:(e,t)=>()=>s.pow(r(e),t.value),exponential:(e,t)=>()=>s.tetrate(r(e),new s(t.value).toNumber())},ti="experiments",_e=wn(ti,function(){const e="Measuring",t="#D1C926",n=sn(0,"potentia"),l=V(1),i=V(0),o=V(1),u=V(0),c=V("experiments"),p=b(()=>g.earned.value?Object.values(we).some(le=>le.showNotif.value)?!0:_.earned.value?!!Object.values(Ae).some(le=>le.showNotif.value):!1:!1),d=An(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"85%",y:"60%"},symbol:"\u29D6",randomQuips(){return[...sd,...Zn]},resource:n,layerID:ti,modifierInfo:N(()=>ut(Y)),visibility:()=>J(We.milestones.experimentsMilestone.earned.value),showNotif:()=>He.value||p.value})),v=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,2)},display:{requirement:`Achieve ${d.name} Level 2`,effectDisplay:"Unlock grinding grains"}})),g=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,4)},display:{requirement:`Achieve ${d.name} Level 4`,effectDisplay:"Unlock potentials"},visibility(){return J(v.earned.value)}})),y=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,5)},display:{requirement:`Achieve ${d.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility(){return J(g.earned.value)}})),_=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,6)},display:{requirement:`Achieve ${d.name} Level 6`,effectDisplay:"Unlock advanced potentials"},visibility(){return J(y.earned.value)}})),w=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,8)},display:{requirement:`Achieve ${d.name} Level 8`,effectDisplay:"Unlock applied time"},visibility(){return J(_.earned.value)}})),M=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,10)},display:{requirement:`Achieve ${d.name} Level 10`,effectDisplay:`Unlock "${Ee.job.name}" Job`},visibility(){return J(w.earned.value)},onComplete(){vn(Ee,D)}})),G={chippingMilestone:v,potentialsMilestone:g,timeSlotMilestone:y,advancedPotentialsMilestone:_,appliedTimeMilestone:w,jobMilestone:M},ye=[M,w,_,y,g,v],T=V(!0),$=b(()=>ye.filter(le=>le.earned.value===!1)),{firstFeature:W,collapsedContent:ie,hasCollapsedContent:ge}=Jn(ye,le=>le.earned.value);function ne({name:le,precision:Me,effectRatio:Pe,xpReqRatio:U,baseBoostCost:rt,boostCostRatio:Tt,boostCostResource:Yt,modifierType:Ft,isAdvanced:Wt}){const Et=pt(Pe),cn=pt(U),On=pt(rt),Qt=pt(Tt),qt=pt(Yt),Zt=V(0),Nt=V(0),hn=b(()=>s.pow(r(cn),Zt.value).times(100)),x=ad[Ft!=null?Ft:"multiplicative"](Et,Zt);let ae;Ft==="exponential"?ae=Ol(()=>({exponent:x,description:le+" potential",enabled:Wt?_.earned:g.earned})):Ft==="additive"?ae=mt(()=>({addend:x,description:le+" potential",enabled:Wt?_.earned:g.earned})):ae=I(()=>({multiplier:x,description:le+" potential",enabled:Wt?_.earned:g.earned}));const xe=V(0),Te=b(()=>s.times(r(On),s.pow(r(Qt),xe.value))),st=b(()=>s.gte(cl(qt).value,Te.value)),St=Pn(()=>({display:N(()=>a(F,null,[m("x2 boost for"),a("br",null,null),It(Te.value),a("br",null,null),cl(qt).displayName,dn.value?a(yn,{style:"top: -15px"},null):null])),canClick:st,onClick(){const Nn=cl(qt);Nn.value=s.sub(Nn.value,Te.value),xe.value++}}));ys(St,{display:N(()=>a(F,null,[m("You have "),Tn(cl(qt))," ",cl(qt).displayName]))});let Lt=null;Ze(Zt,()=>{Be.active===D.id&&(Lt!=null&&Ri.dismiss(Lt),Lt=Ri.info(a(F,null,[a("h3",null,[m("Potential increased!")]),a("div",null,[qi[Ft!=null?Ft:"multiplicative"],be(r(Et),Me!=null?Me:2),m(" "),le])])))});const dn=_l(St,st);return{level:Zt,xp:Nt,xpRequired:hn,effect:x,modifier:ae,boosts:xe,cost:Te,clickable:St,showNotif:dn,effectRatio:Et,xpReqRatio:cn,baseBoostCost:On,boostCostRatio:Qt,boostCostResource:qt,update(Nn){let Kn=s.add(Nt.value,s.pow(2,xe.value).times(gt.apply(Nn)));for(;s.gte(Kn,hn.value);)Kn=Kn.sub(hn.value),Zt.value++;Nt.value=Kn.toNumber()},display:N(()=>a("div",{class:"potential feature dontMerge"},[Qe(St),a("div",{class:"potential-details"},[m("Lv "),It(Zt.value),m(" "),le,m(" ("),qi[Ft!=null?Ft:"multiplicative"],be(r(Et),Me!=null?Me:2),m(" each)")]),a("div",{class:"potential-xp"},[a("div",{class:"potential-xp-fill",style:{width:`${s.div(Nt.value,hn.value).times(100).toNumber()}%`}},null)])]))}}const ce=ne({name:"Grinding duration",effectRatio:.9,precision:1,xpReqRatio:1.3,baseBoostCost:100,boostCostRatio:2,boostCostResource:n}),Le=ne({name:"Potentia gain",effectRatio:1.05,xpReqRatio:1.08,baseBoostCost:100,boostCostRatio:10,boostCostResource:n}),$e=ne({name:"Grains fall speed",effectRatio:1.025,precision:3,xpReqRatio:1.1,baseBoostCost:100,boostCostRatio:4,boostCostResource:n}),we={grindingSpeedPotential:ce,potentiaGainPotential:Le,fallSpeedPotential:$e},ze=ne({name:"Potentials speed",effectRatio:1.1,precision:1,xpReqRatio:1.5,baseBoostCost:1e4,boostCostRatio:10,boostCostResource:n,isAdvanced:!0}),ee=ne({name:"Bonus grains",effectRatio:1.05,xpReqRatio:2,baseBoostCost:100,boostCostRatio:1.25,boostCostResource:()=>Object.values(We.elements)[ee.boosts.value%4].resource,isAdvanced:!0}),$t=ne({name:"Job EXP gain",effectRatio:1.1,precision:1,xpReqRatio:1.25,baseBoostCost:1e6,boostCostRatio:8,boostCostResource:Fe.flowers,isAdvanced:!0}),ot=ne({name:"Passive grinding",effectRatio:1,precision:0,xpReqRatio:1.2,baseBoostCost:1e3,boostCostRatio:5,boostCostResource:fn.insights,modifierType:"additive",isAdvanced:!0}),Ae={potentialsSpeedPotential:ze,effectiveGrainsPotential:ee,jobXPPotential:$t,passiveGrindingPotential:ot},ve=b(()=>s.pow(1.1,d.level.value)),R=b(()=>new s(l.value).log2().floor()),q=b(()=>s.pow(1.1,d.level.value)),re=K(()=>[I(()=>({multiplier:q,description:"Applied time",enabled:()=>d.active.value&&w.earned.value&&c.value===ti})),Ee.batteries.experiments.timePassing.modifier]),de=b(()=>re.apply(1)),Se=K(()=>[$t.modifier,Ee.batteries.experiments.xpGain.modifier]),ht=K(()=>[ee.modifier]),wt=b(()=>ht.apply(l.value)),H=K(()=>[I(()=>({multiplier:()=>s.pow(1.1,R.value),description:"Grain size (x1.1 each split)",enabled:v.earned})),$e.modifier]),et=b(()=>H.apply(1)),Oe=K(()=>[I(()=>({multiplier:()=>s.pow(2,R.value),description:"Grain size (x2 each split)"})),ce.modifier]),Xe=b(()=>Oe.apply(1)),Ge=K(()=>[ot.modifier]),se=b(()=>Ge.apply(0)),ct=K(()=>[I(()=>({multiplier:ve,description:`${d.name} level (x1.1 each)`})),Le.modifier,Ee.batteries.experiments.resourceGain.modifier,bt.plants.potentia.modifier]),gt=K(()=>[ze.modifier]),Ke={timePassing:re,jobXpGain:Se,totalGrains:ht,grainsFallRate:H,chippingDuration:Oe,potentiaGain:ct,potentialsSpeed:gt,passiveGrinding:Ge},[C,L]=Bt(()=>[{title:"Time Passing",modifier:re,base:1,visible:()=>w.earned.value||Ee.milestones.timeBatteriesMilestone.earned.value},{title:`${d.name} EXP Gain`,modifier:Se,base:1},{title:"Potentia Gain",modifier:ct,base:1},{title:"Potentials speed",modifier:gt,base:1,visible:_.earned}]),[A,ke]=Bt(()=>[{title:"Total Grains",modifier:ht,base:l},{title:"Grains Fall Speed",modifier:H,base:1,unit:"/s"},{title:"Grinding duration",modifier:Oe,base:1,unit:"s",visible:v.earned},{title:"Passive grinding",modifier:Ge,base:0,unit:"%",visible:_.earned}]),Y=bn({general:()=>({display:"General",glowColor(){return Y.activeTab.value===this.tab?t:""},tab:C,generalTabCollapsed:L}),grains:()=>({display:"Grains",glowColor(){return Y.activeTab.value===this.tab?t:""},tab:A,grainsTabCollapsed:ke})},()=>({style:`--layer-color: ${t}`})),Ue=Pn(()=>({display:{title:"Grind",description:"Hover to grind grains apart, to create new grains"}})),kt=rs(Ue);this.on("preUpdate",le=>{if(!!d.active.value){if(le=s.times(le,de.value).toNumber(),g.earned.value&&Object.values(we).forEach(Me=>Me.update(le)),_.earned.value&&(Object.values(Ae).forEach(Me=>Me.update(le)),u.value=s.add(u.value,s.times(le,se.value).div(100)).toNumber()),s.lt(o.value,1))o.value=s.add(o.value,le).min(1).toNumber();else if(s.lt(i.value,wt.value)){const Me=s.add(i.value,s.times(et.value,le)).min(wt.value),Pe=ct.apply(s.sub(Me,i.value));n.value=s.add(n.value,Pe),d.xp.value=s.add(d.xp.value,Se.apply(Pe)),i.value=Me}for(kt.value&&(u.value=u.value+le);s.gt(u.value,Xe.value);){const Me=s.div(u.value,Xe.value).floor().min(new s(2).pow(new s(l.value).add(1).log2().floor().add(1)).sub(l.value));u.value=u.value-Me.times(Xe.value).toNumber(),l.value=s.add(l.value,Me)}}});const dt=bn({grains:()=>({display:"Grains",tab:Fn(()=>({display:N(()=>a(F,null,[a(Ce,null,null),a(Bc,{baseGrains:l.value,chippingProgress:s.div(u.value,Xe.value).toNumber()},null),a(Ce,null,null),Qe(Ue)]))})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),potentials:()=>({display:N(()=>a("span",{style:"position: relative;"},[m("Potentials"),p.value?a(yn,{style:"left: -15px; top: -10px"},null):null])),tab:Fn(()=>({display:N(()=>a(F,null,[a(Ce,null,null),a("h2",null,[m("Basic Potentials")]),a(Ce,null,null),yl(...Object.values(we).map(le=>le.display)),_.earned.value?a(F,null,[a(Ce,null,null),a("h2",null,[m("Advanced Potentials")]),a(Ce,null,null),yl(...Object.values(Ae).map(le=>le.display))]):null]))})),visibility:b(()=>J(g.earned.value))}),appliedTime:()=>({display:"Applied Time",tab:Fn(()=>({display:N(()=>a(F,null,[a(Ce,null,null),a("div",null,[m("Focus your potential towards speeding up an entire job's time loop."),a("br",null,null),m("Strength increases with "),d.name,m(" level.")]),a(Ce,null,null),a(Fc,{effect:q.value,jobs:lt.jobs,selectedJob:c.value,onSelectJob:le=>c.value=le},null)]))})),visibility:b(()=>J(w.earned.value))})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}})),Rt={[Ye]:id,[Re]:()=>({totalGrains:wt.value,grainsFallen:i.value,flippingProgress:o.value,onFlip:()=>{o.value=o.value>=1?0:o.value,i.value=0},showHourglassNotif:He.value})},He=_l(Rt,()=>s.sub(wt.value,i.value).lte(0));return{name:e,color:t,minWidth:670,potentia:n,baseTotalGrains:l,grainsFallen:i,flippingProgress:o,chippingProgress:u,basicPotentials:we,advancedPotentials:Ae,job:d,selectedJob:c,modifiers:Ke,milestones:G,collapseMilestones:T,modifierTabs:Y,tabs:dt,appliedTimeEffect:q,display:N(()=>{const le=[...$.value];return W.value&&le.push(W.value),a(F,null,[a(kl,{resource:n,color:t},null),Hn(...le,N(()=>ln(a(Qn,{collapsed:T,content:ie,display:T.value?"Show other completed milestones":"Hide other completed milestones"},null),[[gn,r(ge)]]))),a(Ce,null,null),Qe(Rt),a(Ce,{height:"50px"},null),v.earned.value?Qe(dt):null])})}});var od=["Seeds? I love seeds!","They can still be improved, I'm sure of it","Together we'll both grow to our full potentials","Progress moves ever forward, generation by generation","Grow!","They require meticulous care"];const rd={key:2,class:"analyzed"};var ll=X({__name:"SeedSlot",props:{selected:{type:Boolean},seed:null,onClick:null},setup(e){const t=e,n=In(b(()=>N(()=>t.seed==="none"?"":ut(bt.plants[t.seed.type].seed)))),l=fe(N(()=>t.seed==="none"||!t.seed.analyzed?"":a(F,null,[m("Speed: "),pe(t.seed.speed),a("br",null,null),m("Harvest Size: "),pe(t.seed.harvest),a("br",null,null),m("Mutability: "),pe(t.seed.mutability)])));return(i,o)=>(h(),S("div",{class:qe(["seed feature can",{selected:e.selected}]),onClick:o[0]||(o[0]=u=>e.onClick(e.seed))},[e.seed!=="none"&&e.seed.analyzed?(h(),B(nt,{key:0,display:r(l)},{default:te(()=>[r(n)?(h(),B(De(r(n)),{key:0})):j("",!0),Ut(i.$slots,"default")]),_:3},8,["display"])):(h(),S(F,{key:1},[r(n)?(h(),B(De(r(n)),{key:0})):j("",!0),Ut(i.$slots,"default")],64)),e.seed!=="none"&&e.seed.analyzed?(h(),S("div",rd,"*")):j("",!0)],2))}});const ud={class:"inputs"},cd=f("path",{d:"M4 29C15.1929 16.5 26.3858 4 54 4C109.228 4 98.7715 54 154 54C181.614 54 192.807 41.5 204 29",stroke:"grey","stroke-width":"7","stroke-linecap":"round"},null,-1),dd=X({__name:"Machine",props:{index:null,numInputs:null,inputs:null,timer:null,poweredUp:{type:Boolean},canPowerUp:null,duration:null,outputDisplay:null,setInput:null},emits:["setPoweredUp"],setup(e,{emit:t}){const n=e,l=_t();jt(()=>{l.value=fe(n.outputDisplay(n.inputs,n.index))});const i=b(()=>n.numInputs!==n.inputs.filter(o=>o!=null&&o!=="none").length);return(o,u)=>(h(),S("div",{class:qe(["machine feature",{poweredUp:e.poweredUp,canPowerUp:!e.poweredUp&&r(e.canPowerUp)}])},[f("div",ud,[(h(!0),S(F,null,_n(e.numInputs,c=>{var p;return h(),B(ll,{key:c-1,seed:(p=e.inputs[c-1])!=null?p:"none",onClick:()=>e.setInput(e.index,c-1)},null,8,["seed","onClick"])}),128))]),(h(),S("svg",{width:"208",height:"58",viewBox:"0 0 208 58",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:u[0]||(u[0]=c=>t("setPoweredUp"))},[cd,f("path",{d:"M4 29C15.1929 16.5 26.3858 4 54 4C109.228 4 98.7715 54 154 54C181.614 54 192.807 41.5 204 29",stroke:"black","stroke-width":"7","stroke-linecap":"round",class:"progress",style:Ie({strokeDashoffset:`calc(var(--dash-length) * ${r(s).sub(.33,r(s).div(e.timer,e.duration(e.inputs)).times(1.33)).toNumber()})`})},null,4)])),r(l)?(h(),B(De(r(l)),{key:0})):j("",!0),r(i)?(h(),B(yn,{key:1})):j("",!0)],2))}});const pd={key:0},md=f("span",{class:"toggle"},"\u25BC",-1),fd=X({__name:"MachineType",props:{id:null,name:null,enabled:null,numInputs:null,inputs:null,timers:null,collapsed:null,machines:null,poweredUpMachine:null,canPowerUp:null,duration:null,outputDisplay:null,setInput:null,setPoweredUpMachine:null},setup(e){return(t,n)=>r(e.enabled)?(h(),S("div",pd,[f("h2",{onClick:n[0]||(n[0]=l=>e.collapsed.value=!e.collapsed.value),class:qe(["breeding-collapsible",{collapsed:e.collapsed.value}])},[md,m(Q(e.name),1)],2),e.collapsed.value?j("",!0):(h(),B(Rl,{key:0},{default:te(()=>[(h(!0),S(F,null,_n(new r(s)(e.machines.amount.value).toNumber(),l=>{var i,o;return h(),B(dd,{key:l-1,index:l-1,numInputs:e.numInputs,inputs:(i=r(e.inputs)[l-1])!=null?i:[],timer:(o=r(e.timers)[l-1])!=null?o:0,duration:e.duration,outputDisplay:e.outputDisplay,setInput:e.setInput,canPowerUp:e.canPowerUp,poweredUp:e.poweredUpMachine.value.type===e.id&&l-1===e.poweredUpMachine.value.index,onSetPoweredUp:()=>e.setPoweredUpMachine(l-1)},null,8,["index","numInputs","inputs","timer","duration","outputDisplay","setInput","canPowerUp","poweredUp","onSetPoweredUp"])}),128)),(h(),B(De(e.machines[r(Ye)]),Hi(Fs(e.machines[r(Re)]())),null,16))]),_:1}))])):j("",!0)}});const vd={class:"plant feature"},hd={class:"plant-symbol"},gd={class:"plant-details"},yd=f("div",{style:{"flex-grow":"1"}},null,-1),bd=f("h3",null,"Consume",-1),_d=f("br",null,null,-1),wd={key:0},kd=X({__name:"Plant",props:{name:null,symbol:null,color:null,effectDescription:null,amount:null,consumedTimeRemaining:null,multiplier:null,consume:null},setup(e){const t=e,n=b(()=>`${be(s.add(t.amount.value,1).log10().add(1))}x ${t.effectDescription} for ${En(s.pow(t.amount.value,2).add(1).log2())}`);return(l,i)=>(h(),S("div",vd,[f("div",{class:"plant-info",style:Ie({color:e.color})},[f("span",hd,Q(e.symbol),1),f("div",gd,[f("span",null,Q(e.name),1),f("span",null,"Stored: "+Q(r(pe)(r(e.amount))),1)]),yd,f("button",{class:"button",onClick:i[0]||(i[0]=(...o)=>e.consume&&e.consume(...o))},[bd,_d,m(Q(r(n)),1)])],4),r(e.consumedTimeRemaining)>0?(h(),S("div",wd," Current bonus: "+Q(r(be)(r(e.multiplier)))+"x "+Q(e.effectDescription)+" for "+Q(r(En)(r(e.consumedTimeRemaining))),1)):j("",!0)]))}}),dl="breeding",bt=wn(dl,function(){const e="Breeding Plants",t="#51D126",n=sn(0,"mutagens"),l=V([{type:"moly",analyzed:!1,speed:1,mutability:1,harvest:1}]),i=V("none"),o=V("none"),u=V({type:"none",index:-1}),c=V(!1),p=V(!1),d=An(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"emoji_nature",randomQuips(){return[...od,...Zn]},resource:n,layerID:dl,modifierInfo:N(()=>ut(Ke)),visibility:()=>J(fn.milestones.jobMilestone.earned.value),showNotif:()=>Object.values(ht).some(C=>r(C.machines.canPurchase)||l.value.length!==0&&C.inputs.value.some(L=>C.numInputs!==L.filter(A=>A!==null&&A!=="none").length))})),v=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,2)},display:{requirement:`Achieve ${d.name} Level 2`,effectDisplay:"Unlock breeding and analyzing machines"}})),g=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,4)},display:{requirement:`Achieve ${d.name} Level 4`,effectDisplay:"Unlock powering up machines"},visibility(){return J(v.earned.value)}})),y=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,5)},display:{requirement:`Achieve ${d.name} Level 5`,effectDisplay:`Unlock bonus generator in "${Ee.job.name}" job`},visibility(){return J(g.earned.value)}})),_=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,6)},display:{requirement:`Achieve ${d.name} Level 6`,effectDisplay:"Unlock recycling machine"},visibility(){return J(y.earned.value)}})),w=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,8)},display:{requirement:`Achieve ${d.name} Level 8`,effectDisplay:"Unlock mutating machine"},visibility(){return J(_.earned.value)}})),M=he(()=>({shouldEarn(){return s.gte(d.rawLevel.value,10)},display:{requirement:`Achieve ${d.name} Level 10`,effectDisplay:`Unlock 1/2 of "${Xn.job.name}" Job`},visibility(){return J(w.earned.value)},onComplete(){Ee.milestones.jobMilestone.earned.value&&vn(Xn,D)}})),G={breedingAnalyzingMilestone:v,powerupMilestone:g,bonusGeneratorMilestone:y,recyclingMilestone:_,mutatingMilestone:w,jobMilestone:M},ye=[M,w,_,y,g,v],T=V(!0),$=b(()=>ye.filter(C=>C.earned.value===!1)),{firstFeature:W,collapsedContent:ie,hasCollapsedContent:ge}=Jn(ye,C=>C.earned.value);function ne(C){const L=V(0),A=V(0),ke=V(0),Y=V(!1);return vt(()=>{const Ue=C(),kt=b(()=>s.add(A.value,1).log10().add(1));return{...Ue,amount:L,consumedAmount:A,consumedTimeRemaining:ke,discovered:Y,multiplier:kt,modifier:I(()=>({multiplier:kt,description:`${Ue.name} consumption`,enabled:()=>ke.value>0})),consume:function(){A.value=L.value,ke.value=s.pow(L.value,2).add(1).log2().toNumber(),L.value=0,Y.value=!0},seed:{[Ye]:fe(`\u{1F331}<sub><span class="material-icons" style="color: ${Ue.color}">${Ue.symbol}</span></sub>`),[Re]:()=>({})},[Ye]:kd,[Re]:function(){const{name:dt,symbol:Rt,color:He,effectDescription:le,amount:Me,consumedTimeRemaining:Pe,multiplier:U,consume:rt}=this;return{name:dt,symbol:Rt,color:He,effectDescription:le,amount:Me,consumedTimeRemaining:Pe,multiplier:U,consume:rt}}}})}const ce={moly:ne(()=>({name:"Tempus Largitatis",symbol:Fe.job.symbol,color:Fe.job.color,effectDescription:"Moly gain"})),earthEssence:ne(()=>({name:"Terra Lupulus",symbol:We.elements.earth.symbol,color:We.elements.earth.color,effectDescription:"Earth essence gain"})),waterEssence:ne(()=>({name:"Aqua Lupulus",symbol:We.elements.water.symbol,color:We.elements.water.color,effectDescription:"Water essence gain"})),airEssence:ne(()=>({name:"Aer Lupulus",symbol:We.elements.air.symbol,color:We.elements.air.color,effectDescription:"Air essence gain"})),fireEssence:ne(()=>({name:"Ignis Lupulus",symbol:We.elements.fire.symbol,color:We.elements.fire.color,effectDescription:"Fire essence gain"})),properties:ne(()=>({name:"Discipulo Scriptor",symbol:fn.job.symbol,color:fn.job.color,effectDescription:"Properties gain"})),potentia:ne(()=>({name:"Glarea Fovea",symbol:_e.job.symbol,color:_e.job.color,effectDescription:"Potentia gain"})),energeia:ne(()=>({name:"Vis Salutarias",symbol:Ee.job.symbol,color:Ee.job.color,effectDescription:"Energeia gain"}))};function Le(C,L,A){const ke=V([]),Y=V([]),Ue=V(!1),kt=bs(()=>({initialValue:1,visibility:()=>J(Ee.milestones.machinesMilestone.earned.value),cost:()=>s.pow(L,r(kt.amount)),resource:Ee.energeia,display:{description:`Additional ${C.slice(0,-1)}`,showAmount:!1},style:{width:"600px",minHeight:"unset"}}));return vt(()=>{const dt=A(),Rt=pt(dt.enabled);return Ze(kt.amount,He=>{for(;ke.value.length<He;)ke.value.push([]);for(;Y.value.length<He;)Y.value.push(0)}),{...dt,name:C,priceRatio:L,enabled:Rt,inputs:ke,timers:Y,collapsed:Ue,machines:kt,setInput:function(He,le){var U,rt,Tt;const Me=(rt=(U=ke.value[He])==null?void 0:U[le])!=null?rt:"none";Me&&Me!=="none"&&l.value.push(Me);const Pe=(Tt=ke.value[He])!=null?Tt:[];Pe[le]=i.value,ke.value[He]=Pe,l.value=l.value.filter(Yt=>Yt!==i.value),i.value="none"},duration:function(He){const le=He.filter(U=>U!=="none");if(le.length===0)return 1/0;const Me=le.map(U=>U.speed).reduce((U,rt)=>U+rt)/le.length,Pe=s.times(dt.baseDuration,s.pow(.99,s.sqrt(Me)));return new s(dt.durationModifier.apply(Pe)).toNumber()},setPoweredUpMachine(He){wt(dt.id,He)},[Ye]:fd,[Re]:function(){const{id:He,name:le,enabled:Me,numInputs:Pe,inputs:U,timers:rt,collapsed:Tt,machines:Yt,duration:Ft,outputDisplay:Wt,setInput:Et,setPoweredUpMachine:cn}=this;return{id:He,name:le,enabled:Me,numInputs:Pe,inputs:U,timers:rt,collapsed:Tt,machines:Yt,poweredUpMachine:u,canPowerUp:g.earned,duration:Ft,outputDisplay:Wt,setInput:Et,setPoweredUpMachine:cn}}}})}const $e=Le("Growing Machines",50,()=>({id:"growMachines",enabled:!0,numInputs:1,baseDuration:100,durationModifier:K(()=>[]),isRunning:C=>Object.keys(C).length===1&&C[0]!=="none",onActivate:C=>{if(Object.keys(C).length===0||C[0]==="none")return;ce[C[0].type].amount.value=s.add(ce[C[0].type].amount.value,C[0].harvest);const L=C[0].mutability;n.value=s.add(n.value,L),d.xp.value=s.add(d.xp.value,Ge.apply(L))},outputDisplay:C=>N(()=>Object.keys(C).length===0||C[0]==="none"?a("div",null,[a("div",{style:"font-size: xx-large"},[m("?")]),a("div",null,[m("+1 mutations")])]):a("div",null,[a("div",{style:{fontSize:"xx-large",color:ce[C[0].type].color}},[pe(ce[C[0].type].amount.value)," ",ce[C[0].type].symbol]),a("div",null,[m("+ mutations")])]))})),we=V([]);function ze(C){return s.times(C.speed,C.harvest).pow(2).div(C.mutability).ceil()}function ee(C,L){return s.max(1,s.add(C,s.sqrt(L).times(Math.random()-.4).ceil())).toNumber()}const $t=Le("Breeding Machines",80,()=>({id:"breedingMachines",enabled:v.earned,numInputs:1,baseDuration:600,durationModifier:K(()=>[]),isRunning:(C,L)=>{var A;return((A=we.value[L])!=null?A:"none")==="none"&&Object.keys(C).length===1&&C[0]!=="none"&&s.gte(n.value,ze(C[0]))},onActivate:(C,L)=>{if(Object.keys(C).length!==1||C[0]==="none"||we.value[L]!=null&&we.value[L]!=="none")return;n.value=s.sub(n.value,ze(C[0]));let{speed:A,harvest:ke,mutability:Y}=C[0],Ue=C[0].type;s.sub(1,s.add(Y,1).log(1e6).pow(1.3).add(1).recip()).toNumber()>Math.random()&&(Ue=Object.keys(ce)[Math.floor(Math.random()*Object.keys(ce).length)],A=Math.sqrt(A),ke=Math.sqrt(ke),Y=Math.sqrt(Y)),A=ee(A,Y),ke=ee(ke,Y),Y=ee(Y,Y),we.value[L]={type:Ue,speed:A,harvest:ke,mutability:Y,analyzed:!1}},outputDisplay:(C,L)=>N(()=>{var A;return a("div",null,[a(ll,{seed:(A=we.value[L])!=null?A:"none",onClick:ke=>{const Y=we.value[L];ke!=="none"&&Y!=null&&Y!=="none"&&(l.value.push(Y),we.value[L]="none")}},null),$t.isRunning(C,L)?a("div",null,[m("-"),pe(ze(C[0]))," ",n.displayName]):null])})})),ot=V([]);function Ae(C){return s.times(C.speed,C.harvest).times(C.mutability).ceil()}const ve=Le("Analyzing Machines",100,()=>({id:"analyzingMachines",enabled:v.earned,numInputs:1,baseDuration:1200,durationModifier:K(()=>[]),isRunning:(C,L)=>{var A;return((A=ot.value[L])!=null?A:"none")==="none"&&Object.keys(C).length===1&&C[0]!=="none"&&C[0].analyzed===!1&&s.gte(Fe.flowers.value,Ae(C[0]))},onActivate:(C,L)=>{Object.keys(C).length!==1||C[0]==="none"||C[0].analyzed||ot.value[L]!=null&&ot.value[L]!=="none"||(Fe.flowers.value=s.sub(Fe.flowers.value,Ae(C[0])),ot.value[L]={...C[0],analyzed:!0},ve.inputs.value[L]=[])},outputDisplay:(C,L)=>N(()=>{var A;return a("div",null,[a(ll,{seed:(A=ot.value[L])!=null?A:"none",onClick:ke=>{const Y=ot.value[L];ke!=="none"&&Y!=null&&Y!=="none"&&(l.value.push(Y),ot.value[L]="none")}},null),ve.isRunning(C,L)?a("div",null,[m("-"),pe(Ae(C[0]))," ",Fe.flowers.displayName]):null])})}));function R(C){return s.times(C.speed,C.harvest).times(C.mutability).ceil()}const q=Le("Recycling Machines",90,()=>({id:"recyclingMachines",enabled:_.earned,numInputs:1,baseDuration:900,durationModifier:K(()=>[]),isRunning:C=>Object.keys(C).length===1&&C[0]!=="none",onActivate:(C,L)=>{if(Object.keys(C).length!==1||C[0]==="none")return;const A=R(C[0]);n.value=s.add(n.value,A),d.xp.value=s.add(d.xp.value,Ge.apply(A.times(10))),q.inputs.value[L]=[]},outputDisplay:(C,L)=>N(()=>a("div",null,[q.isRunning(C,L)&&C[0].analyzed?a("div",null,[m("+"),pe(R(C[0]))," ",n.displayName,a("br",null,null),m("x10 exp gained")]):a("div",null,[m("+ mutations"),a("br",null,null),m("x10 exp gained")])]))})),re=V([]);function de(C){return s.times(C.mutability,2).pow(2).ceil()}const Se=Le("Mutating Machines",150,()=>({id:"mutatingMachines",enabled:w.earned,numInputs:1,baseDuration:1800,durationModifier:K(()=>[]),isRunning:(C,L)=>{var A;return((A=re.value[L])!=null?A:"none")==="none"&&Object.keys(C).length===1&&C[0]!=="none"&&s.gte(n.value,de(C[0]))},onActivate:(C,L)=>{Object.keys(C).length!==1||C[0]==="none"||re.value[L]!=null&&re.value[L]!=="none"||(n.value=s.sub(n.value,de(C[0])),re.value[L]={...C[0],mutability:C[0].mutability*2},Se.inputs.value[L]=[])},outputDisplay:(C,L)=>N(()=>{var A;return a("div",null,[a(ll,{seed:(A=re.value[L])!=null?A:"none",onClick:ke=>{const Y=re.value[L];ke!=="none"&&Y!=null&&Y!=="none"&&(l.value.push(Y),re.value[L]="none")}},null),Se.isRunning(C,L)?a("div",null,[m("-"),pe(de(C[0])),m(" "),n.displayName]):null])})})),ht={growMachines:$e,breedingMachines:$t,analyzingMachines:ve,recyclingMachines:q,mutatingMachines:Se};function wt(C,L){u.value={type:C,index:L}}const H=b(()=>s.pow(1.1,d.level.value)),et=b(()=>Object.values(ce).filter(C=>C.discovered.value).length),Oe=K(()=>[I(()=>({multiplier:_e.appliedTimeEffect,description:"Applied time",enabled:()=>_e.job.active.value&&_e.milestones.appliedTimeMilestone.earned.value&&_e.selectedJob.value===dl})),I(()=>({multiplier:()=>s.pow(1.1,et.value),description:"Unique plants eaten (x1.1 each)"})),I(()=>({multiplier:H,description:`${d.name} level (x1.1 each)`})),Ee.batteries.breeding.timePassing.modifier]),Xe=b(()=>new s(Oe.apply(1)).toNumber()),Ge=K(()=>[Ee.batteries.breeding.xpGain.modifier,I(()=>({multiplier:H,description:`${d.name} level (x1.1 each)`}))]),se={timePassing:Oe,jobXpGain:Ge},[ct,gt]=Bt(()=>[{title:"Time Passing",modifier:Oe,base:1},{title:`${d.name} EXP Gain`,modifier:Ge,base:1}]),Ke=bn({general:()=>({display:"General",glowColor(){return Ke.activeTab.value===this.tab?t:""},tab:ct,generalTabCollapsed:gt})},()=>({style:`--layer-color: ${t}`}));return this.on("preUpdate",C=>{d.timeLoopActive.value===!1&&D.tabs[1]!==dl||(C=s.times(C,Xe.value).toNumber(),Object.values(ht).forEach(L=>{var ke;const A=L.timers.value;for(let Y=0;Y<L.machines.amount.value;Y++){const Ue=(ke=L.inputs.value[Y])!=null?ke:[];L.isRunning(Ue,Y)?(A[Y]+=u.value.type===L.id&&u.value.index===Y?C*2:C,s.gte(A[Y],L.duration(Ue))&&(L.onActivate(L.inputs.value[Y],Y),A[Y]=0)):A[Y]=0}L.timers.value=A}))}),xt.on("update",(C,L)=>{d.timeLoopActive.value===!1&&D.tabs[1]!==dl||Object.values(ce).forEach(A=>{A.consumedTimeRemaining.value!==0&&(A.consumedTimeRemaining.value=Math.max(0,A.consumedTimeRemaining.value-L))})}),{name:e,color:t,minWidth:670,job:d,modifiers:se,milestones:G,collapseMilestones:T,modifierTabs:Ke,machines:ht,seeds:l,selectedSeed:i,recycling:o,plants:ce,breedingOutputs:we,analyzingOutputs:ot,mutatingOutputs:re,poweredUpMachine:u,plantsCollapsed:c,seedsCollapsed:p,display:N(()=>{const C=[...$.value];W.value&&C.push(W.value);const L=Object.keys(ce).filter(A=>ce[A].discovered.value||s.gt(ce[A].amount.value,0));return a(F,null,[a(kl,{resource:n,color:t},null),Hn(...C,N(()=>ln(a(Qn,{collapsed:T,content:ie,display:T.value?"Show other completed milestones":"Hide other completed milestones"},null),[[gn,r(ge)]]))),a(Ce,null,null),g.earned.value?a(F,null,[a("div",null,[m("Select a machine by clicking on its progress bar to make it work 2x faster")]),a(Ce,null,null)]):null,Qe($e),Qe($t),Qe(ve),Qe(q),Qe(Se),L.length>0?a(F,null,[a(Ce,null,null),a("h2",{class:{"breeding-collapsible":!0,collapsed:c.value},onClick:()=>c.value=!c.value},[a("span",{class:"toggle"},[m("\u25BC")]),m("Plants")]),c.value?null:yl(...L.map(A=>ce[A]))]):null,a(Ce,null,null),a("h2",{class:{"breeding-collapsible":!0,collapsed:p.value},onClick:()=>p.value=!p.value},[a("span",{class:"toggle"},[m("\u25BC")]),m("Seeds")]),p.value?null:a("div",{style:"width: 600px"},[l.value.map(A=>a(ll,{seed:A,selected:i.value===A,onClick:()=>{i.value=i.value===A?"none":A}},null)),a("hr",null,null),a("div",{style:"display: flex; align-items: center; text-align: left"},[a(ll,{seed:o.value,onClick:()=>{i.value==="none"?o.value!=="none"&&(l.value.push(o.value),o.value="none"):(o.value=i.value,l.value=l.value.filter(A=>A!==i.value),i.value="none")}},{default:()=>[o.value==="none"?a("div",{class:"material-icons",style:"font-size: xxx-large; color: var(--outline); position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: -1;"},[m("delete")]):null]}),a("span",{style:"margin-left: 10px"},[m("Click here to trash your selected seed, or restore your most recently trashed seed.")])])])])})}}),Nd={min:.5,max:1},Sd=[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],Cd=.001,$d=.1,Md=100,Pd=!0,xd={x:0,y:0},Td=!1,Fd=[{type:"alpha",config:{alpha:{list:[{time:0,value:.74},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:700},{time:1,value:0}]},minMult:1}},{type:"scale",config:{scale:{list:[{time:0,value:5},{time:1,value:1.2}]},minMult:1}},{type:"color",config:{color:{list:[{time:0,value:"#ffdfa0"},{time:1,value:"#100f0c"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:200,minStart:0,maxStart:360}},{type:"textureRandom",config:{textures:["/particle.png"]}},{type:"spawnShape",config:{type:"rect",data:{x:0,y:0,w:200,h:100}}}];var Bi={lifetime:Nd,ease:Sd,frequency:Cd,emitterLifetime:$d,maxParticles:Md,addAtBack:Pd,pos:xd,emit:Td,behaviors:Fd};const ws=e=>(Ht("data-v-22f08ee0"),e=e(),Jt(),e),Ed={class:"modal-mask",style:{"z-index":"10","background-color":"var(--raised-background)",top:"50px"}},Id={class:"cutscene-positioner"},Dd={class:"modal-container cutscene-container"},Ld=ws(()=>f("div",{class:"paper-background"},null,-1)),Ad={class:"content"},Od={key:0,class:"caption"},jd={style:{display:"none"}},Rd={id:"wavy2"},qd=["seed"],Bd=ws(()=>f("feDisplacementMap",{in:"SourceGraphic",scale:"20"},null,-1)),Gd=X({__name:"Cutscene",props:{stage:null,caption:null},emits:["next"],setup(e,{emit:t}){const n=e,l=Xt(n,"stage"),i=Xt(n,"caption"),o=z(1);Ze([l,i],()=>o.value++);const u=zn(l),c=In(i);return(p,d)=>(h(),B(zi,{to:"#modal-root"},[a(jl,{name:"cutscene-modal"},{default:te(()=>[f("div",Ed,[f("div",Id,[f("div",Dd,[Ld,f("div",Ad,[(h(),B(De(r(u)))),r(c)?(h(),S("div",Od,[(h(),B(De(r(c))))])):j("",!0)]),f("button",{onClick:d[0]||(d[0]=v=>t("next")),class:"button next"},"Next")]),(h(),S("svg",jd,[f("filter",Rd,[f("feTurbulence",{x:"-50vw",y:"-50vh",width:"200vw",height:"200vh",baseFrequency:"0.015",numOctaves:"10",seed:o.value},null,8,qd),Bd])]))])])]),_:1})]))}});var Vd=oe(Gd,[["__scopeId","data-v-22f08ee0"]]);const Gi=ol(),yi=["flowers","distill","study","experiments","generators","breeding","rituals"],Ud="main",lt=wn(Ud,function(){const e=V(0),t={flowers:Fe.job,distill:We.job,study:fn.job,experiments:_e.job,generators:Ee.job,breeding:bt.job,rituals:Xn.job},n=b(()=>{let w=0;return e.value>1&&(w=1,fn.milestones.timeSlotMilestone.earned.value&&w++,_e.milestones.timeSlotMilestone.earned.value&&w++,Xn.milestones.timeSlotMilestone.earned.value&&w++),w}),l=b(()=>Object.values(t).filter(w=>w.timeLoopActive.value).length+Ee.extraTimeSlotsAllocated.value),i=b(()=>n.value>l.value),o=V([0,0,0,0,0]);Object.values(t).forEach(w=>{let M=0;Ze(w.rawLevel,(G,ye)=>{var T;if(!(Be.active!==D.id||s.neq(G,s.add(ye,1)))&&(w.notif!=null&&Gi.dismiss(w.notif),w.notif=Gi.info(`${w.name} is now level ${G}!`),Date.now()-M>500)){const $=(T=lt.nodes.value[w.id])==null?void 0:T.rect,W=v.boundingRect.value;if($&&W){M=Date.now();const ie=Object.assign({},Bi,{behaviors:[...Bi.behaviors.slice(0,-1),{type:"spawnShape",config:{type:"rect",data:{x:$.x-W.x,y:$.y-W.y,w:$.width,h:$.height}}}]});v.addEmitter(ie).then(ge=>ge.playOnceAndDestroy())}}})});const u=sn(b(()=>Object.values(t).reduce((w,M)=>w.add(M.level.value),new s(0))),"Sum of all job levels"),c=sr(u),p=Gl(u),d=vr(()=>({display:{title:"<h1>Close the time loop</h1>",description:"<br/><i>The flowers are collected, and I have just enough. It's time to get started.</i>"},canAfford:!0,style:`width: 150px; height: 150px; --layer-color: ${Fe.color}`,visibility:()=>J(e.value==1&&s.gte(Fe.flowers.value,1e7))})),v=Bl(()=>({boundingRect:z(null),onContainerResized(w){this.boundingRect.value=w},style:"z-index: -1"})),g=z(null);jt(()=>{if(Be.active===D.id){if(e.value===0){g.value={pages:[{stage:N(()=>a("img",{style:"max-width: 100%; flex-grow: 1",src:"https://upload.wikimedia.org/wikipedia/commons/7/71/Serpiente_alquimica.jpg"},null))},{stage:N(()=>a("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"Test"},{stage:N(()=>a("div",{style:"display: flex"},[a("img",{style:"max-width: 100%; flex-grow: 1; margin-right: -20%",src:"https://dummyimage.com/386x320/000/fff.png"},null),a("img",{style:"max-width: 100%; flex-grow: 1; margin-left: -20%",src:"https://dummyimage.com/386x320/000/fff.png"},null)])),caption:"Other test"}],page:0,onFinished(){e.value=1,vn(Fe,D)}};return}else if(e.value===1&&d.bought.value){g.value={pages:[{stage:N(()=>a("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"I can wrap this field in a time loop and reset it whenever the field is empty. If I take the flowers out of the loop before hand I will have a perfectly sustainable source of moly."},{stage:N(()=>a("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"Now my focus will be transforming the flowers, and determining how best to utilize their power. I'll start by distilling the flowers into their component elements."}],page:0,onFinished(){e.value=2,vn(We,D)}};return}g.value=null}});const y=b(()=>e.value===1?a("h2",null,[m("Current Goal: Harvest all the moly"),a("br",null,null),m("("),pe(s.sub(1e7,Fe.flowers.value).clampMin(0))," ",m("remaining)")]):e.value==2?a("h2",null,[m("Current Goal: Perform Ritual of G\xE9nesis")]):a(F,null,null)),_=An("???",()=>({color:"black",image:"https://dummyimage.com/720x320/000/fff.png",imageFocus:{x:"50%",y:"50%"},layerID:"unknown",symbol:"",loopable:!1,visibility:()=>Ee.milestones.jobMilestone.earned.value!==bt.milestones.jobMilestone.earned.value?ue.Visible:ue.None,classes:{broken:!0},open:()=>{}}));return{name:"Jobs",chapter:e,timeSlots:n,hasTimeSlotAvailable:i,resetTimes:o,closeTimeLoop:d,activeCutscene:g,classes:{nigredo:!0},jobs:t,partialJob:_,sumJobLevels:u,bestJobLevelsSum:p,totalJobLevelsSum:c,display:N(()=>g.value?a(Vd,{stage:g.value.pages[g.value.page].stage,caption:g.value.pages[g.value.page].caption,onNext:()=>{var w,M;g.value&&(g.value.page==g.value.pages.length-1?(M=(w=g.value).onFinished)==null||M.call(w):g.value.page++)}},null):a(F,null,[D.devSpeed===0?a("div",null,[m("Game Paused")]):null,D.devSpeed&&D.devSpeed!==1?a("div",null,[m("Dev Speed: "),be(D.devSpeed),m("x")]):null,D.offlineTime?a("div",null,[m("Offline Time: "),En(D.offlineTime)]):null,D.devSpeed!=null||D.offlineTime!=null?a(Ce,null,null):null,r(y),a(Ce,null,null),s.gt(n.value,0)?a("div",null,[n.value-l.value,m(" Time Slot"),n.value-l.value===1?"":"s",m(" Available")]):null,yl(...Object.values(t),_),Qe(d),Qe(v)]))}});xt.on("update",e=>{lt.chapter.value>-1&&lt.activeCutscene.value!=null&&(lt.resetTimes.value[lt.chapter.value-1]+=e)});const ai=b(()=>yi.filter(e=>r(lt.jobs[e].visibility)===ue.Visible).length),zd=e=>{var n,l,i,o,u,c,p,d,v,g,y,_,w,M,G,ye,T,$,W,ie,ge,ne,ce,Le,$e,we,ze;const t=(i=(l=(n=e.layers)==null?void 0:n.main)==null?void 0:l.chapter)!=null?i:0;if(t===0)return[lt];if(t===1)return[lt,Fe];if(t===2){const ee=[lt,Fe,We];return((p=(c=(u=(o=e.layers)==null?void 0:o.distill)==null?void 0:u.milestones)==null?void 0:c.studyMilestone)==null?void 0:p.earned)===!0&&ee.push(fn),((y=(g=(v=(d=e.layers)==null?void 0:d.distill)==null?void 0:v.milestones)==null?void 0:g.experimentsMilestone)==null?void 0:y.earned)===!0&&ee.push(_e),((G=(M=(w=(_=e.layers)==null?void 0:_.experiments)==null?void 0:w.milestones)==null?void 0:M.jobMilestone)==null?void 0:G.earned)===!0&&ee.push(Ee),((W=($=(T=(ye=e.layers)==null?void 0:ye.study)==null?void 0:T.milestones)==null?void 0:$.jobMilestone)==null?void 0:W.earned)===!0&&ee.push(bt),((ce=(ne=(ge=(ie=e.layers)==null?void 0:ie.generators)==null?void 0:ge.milestones)==null?void 0:ne.jobMilestone)==null?void 0:ce.earned)===!0&&((ze=(we=($e=(Le=e.layers)==null?void 0:Le.breeding)==null?void 0:$e.milestones)==null?void 0:we.jobMilestone)==null?void 0:ze.earned)===!0&&ee.push(Xn),ee}throw`Chapter ${t} not supported`},ks=b(()=>!1);function Xd(e,t){}var Ns=Object.freeze(Object.defineProperty({__proto__:null,jobKeys:yi,main:lt,numJobs:ai,getInitialLayers:zd,hasWon:ks,fixOldSave:Xd},Symbol.toStringTag,{value:"Module"}));const Hd={class:"modifier-info-toggle"},Jd=X({__name:"ModifierInfo",props:{display:null,name:null},setup(e){const n=Xt(e,"display"),l=z(!1),i=_t();let o=null;return Ze(l,u=>{o==null||o(),u?o=jt(()=>{i.value=fe(at(n))}):o=null}),ui(()=>o==null?void 0:o()),(u,c)=>(h(),S(F,null,[a(nt,{direction:r(je).Left,display:"Open Modifiers",xoffset:"10px"},{default:te(()=>[f("div",Hd,[f("button",{onClick:c[0]||(c[0]=Un(p=>l.value=!0,["stop"]))},"?")])]),_:1},8,["direction"]),a(Dn,Gt({modelValue:l.value,"onUpdate:modelValue":c[1]||(c[1]=p=>l.value=p),class:"modifiers-modal"},u.$attrs),{header:te(()=>[f("h2",null,Q(e.name)+" Modifiers",1)]),body:te(({shown:p})=>[p?(h(),B(De(r(i)),{key:0})):j("",!0)]),_:1},16,["modelValue"])],64))}});var Wd=oe(Jd,[["__scopeId","data-v-19951ae7"]]),Qd=X({props:{visibility:{type:O(Number),required:!0},style:O(String,Object,Array),classes:O(Object),xp:{type:Object,required:!0},level:{type:Object,required:!0},levelProgress:{type:Object,required:!0},timeLoopActive:{type:Object,required:!0},name:{type:String,required:!0},color:{type:O(String),required:!0},image:{type:O(String),required:!0},imageFocus:{type:O(Object),required:!0},resource:[Object,Array],layerID:{type:String,required:!0},currentQuip:{type:Object,required:!0},randomQuips:{type:O(Array)},modifierInfo:O(String,Object,Function),id:{type:String,required:!0},modifierModalAttrs:Object,showNotif:O(Boolean),loopable:O(Boolean),open:{type:Function,required:!0}},components:{Node:Ln,ModifierInfo:Wd,Tooltip:nt,Notif:yn},setup(e){const{layerID:t,currentQuip:n,randomQuips:l,resource:i}=it(e),o=b(()=>D.tabs[1]==t.value),u=b(()=>lt.chapter.value>1),c=lt.hasTimeSlotAvailable;let p;jt(()=>{var y;clearInterval(p);const g=(y=at(l))!=null?y:[];n.value?p=setTimeout(()=>{n.value=null},15e3):p=setTimeout(()=>{n.value=g[Math.floor(Math.random()*g.length)]},Math.random()*15e3+15e3)}),ri(()=>clearInterval(p));const d=z(!1);Ze(o,()=>{d.value=!0,setTimeout(()=>d.value=!1,250)});const v=b(()=>{if("displayName"in i)return[i];const g=r(i);return Array.isArray(g)?g:[]});return{selected:o,animating:d,finishedFirstChapter:u,hasTimeSlotAvailable:c,formatWhole:pe,unref:r,displayResource:Tn,resourceArray:v,Visibility:ue,Direction:je}}});const Ul=e=>(Ht("data-v-022eac8b"),e=e(),Jt(),e),Zd=["src"],Kd={class:"job-contents"},Yd={class:"job-resource"},ep=Ul(()=>f("br",null,null,-1)),tp=Ul(()=>f("br",null,null,-1)),np={class:"job-title"},lp={style:{"margin-bottom":"0"}},ip=Ul(()=>f("span",{style:{"flex-grow":"1"}},null,-1)),sp={key:0,class:"job-quip"},ap=Ul(()=>f("div",{class:"job-clipping-container"},[f("div",{class:"job-progress-container"},[f("div",{class:"job-progress"})])],-1)),op=["disabled"];function rp(e,t,n,l,i,o){var v,g;const u=Dt("ModifierInfo"),c=Dt("Tooltip"),p=Dt("Node"),d=Dt("Notif");return e.unref(e.visibility)!==e.Visibility.None?(h(),S("span",{key:0,style:Ie([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0,"--posx":e.unref(e.imageFocus).x,"--posy":e.unref(e.imageFocus).y,"--progress":`${(1-e.unref(e.levelProgress))*100}%`,"--foreground":e.unref(e.color)},(v=e.unref(e.style))!=null?v:{}]),class:qe(["feature dontMerge job",[{selected:e.selected,active:e.selected||e.unref(e.timeLoopActive),animating:e.animating},(g=e.unref(e.classes))!=null?g:{}]]),onClick:t[1]||(t[1]=(...y)=>e.open&&e.open(...y))},[f("img",{src:e.unref(e.image)},null,8,Zd),f("div",Kd,[(h(!0),S(F,null,_n(e.resourceArray,(y,_)=>(h(),S(F,{key:_},[f("div",Yd,[m(Q(e.displayResource(y))+" "+Q(y.displayName),1),ep]),tp],64))),128)),f("div",np,[f("h2",null,Q(e.name),1),f("span",lp,"Lv. "+Q(e.formatWhole(e.level.value)),1),ip,e.modifierInfo?(h(),B(u,Gt({key:0,display:e.modifierInfo,name:e.name},e.modifierModalAttrs),null,16,["display","name"])):j("",!0)])]),e.selected&&e.unref(e.currentQuip)?(h(),S("div",sp,'"'+Q(e.unref(e.currentQuip))+'"',1)):j("",!0),ap,e.unref(e.loopable)!==!1?(h(),B(c,{key:1,direction:e.Direction.Left,display:"Toggle Time Loop",class:"job-loop-toggle"},{default:te(()=>[e.finishedFirstChapter?(h(),S("button",{key:0,class:qe(["material-icons",{active:e.unref(e.timeLoopActive)}]),onClick:t[0]||(t[0]=Un(y=>e.timeLoopActive.value=!e.unref(e.timeLoopActive),["stop"])),disabled:!e.hasTimeSlotAvailable&&!e.unref(e.timeLoopActive)}," all_inclusive ",10,op)):j("",!0)]),_:1},8,["direction"])):j("",!0),a(p,{id:e.id},null,8,["id"]),e.unref(e.showNotif)?(h(),B(d,{key:2})):j("",!0)],6)):j("",!0)}var up=oe(Qd,[["render",rp],["__scopeId","data-v-022eac8b"]]);const cp=Symbol("Job"),bi=.7643;function An(e,t){const n=sn(0,e+" XP"),l=V(!1);return vt(()=>{const i=t();return i.id=an("job-"),i.type=cp,i[Ye]=up,i.name=e,i.xp=n,i.timeLoopActive=l,i.rawLevel=b(()=>{const o=i;if(s.eq(o.xp.value,0))return 1;let u=s.clampMin(o.xp.value,1).log10().add(1);return u.gt(25)&&(u=u.sub(25).pow(bi).add(25)),u.floor()}),i.level=sn(b(()=>i.rawLevel.value),i.name+" Levels"),i.levelProgress=b(()=>{const o=i,u=o.rawLevel.value,c=Vi(u),p=Vi(s.add(u,1));let d;return s.lt(u,25)?d=s.sub(o.xp.value,c).div(s.sub(p,c)).toNumber():d=s.log10(o.xp.value).sub(s.log10(c)).div(s.log10(p).sub(s.log10(c))).toNumber(),d}),i.active=b(()=>r(i.visibility)===ue.Visible&&(i.timeLoopActive.value||D.tabs[1]===i.layerID)),i.currentQuip=z(null),ft(i,"open",function(){D.tabs.splice(1,1,i.layerID)}),i.setQuip=function(o){const u=i;if(u.currentQuip.value){u.currentQuip.value=null,zt(u.setQuip);return}if(o)u.currentQuip.value=o;else if(r(u.randomQuips)){const c=r(u.randomQuips);u.currentQuip.value=c[Math.floor(Math.random()*c.length)]}},E(i,"visibility"),ft(i,"visibility",ue.Visible),E(i,"classes"),E(i,"style"),E(i,"color"),E(i,"image"),E(i,"imageFocus"),E(i,"randomQuips"),E(i,"modifierInfo"),E(i,"showNotif"),E(i,"loopable"),i[Re]=function(){const{id:o,xp:u,level:c,levelProgress:p,timeLoopActive:d,name:v,visibility:g,color:y,image:_,imageFocus:w,resource:M,layerID:G,classes:ye,style:T,currentQuip:$,randomQuips:W,modifierInfo:ie,modifierModalAttrs:ge,showNotif:ne,loopable:ce,open:Le}=this;return{id:o,xp:u,level:c,levelProgress:p,timeLoopActive:d,name:v,visibility:g,color:y,image:_,imageFocus:w,resource:M,layerID:G,classes:ye,style:r(T),currentQuip:$,randomQuips:W,modifierInfo:ie,modifierModalAttrs:ge,showNotif:ne,loopable:ce,open:Le}},i})}function Vi(e){return s.eq(e,1)?0:(s.gt(e,25)&&(e=s.sub(e,25).pow(1/bi).add(25)),s.sub(e,1).pow10())}const dp={key:0},pp=["onClick","disabled"],mp={key:0},fp=["onClick"],vp=X({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const l=it(e),i=z(!1);Ze(i,c=>{t("confirmingChanged",c)});function o(){if(r(l.skipConfirm)){t("click");return}i.value&&t("click"),i.value=!i.value}function u(){i.value=!1}return(c,p)=>(h(),S("span",{class:qe(["container",{confirming:i.value}])},[i.value?(h(),S("span",dp,"Are you sure?")):j("",!0),f("button",{onClick:Un(o,["stop"]),class:"button danger",disabled:e.disabled},[i.value?(h(),S("span",mp,"Yes")):Ut(c.$slots,"default",{key:1},void 0,!0)],8,pp),i.value?(h(),S("button",{key:1,class:"button",onClick:Un(u,["stop"])},"No",8,fp)):j("",!0)],2))}});var hp=oe(vp,[["__scopeId","data-v-2f8ef34c"]]);const gp=["onClick"],yp=X({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=z(!1),l=z(null);function i(){t("click"),l.value&&clearTimeout(l.value),n.value=!1,zt(()=>{n.value=!0,l.value=setTimeout(()=>n.value=!1,500)})}return(o,u)=>(h(),S("button",{onClick:Un(i,["stop"]),class:qe(["feedback",{activated:n.value,left:e.left}])},[Ut(o.$slots,"default",{},void 0,!0)],10,gp))}});var bp=oe(yp,[["__scopeId","data-v-01a1b95c"]]);const kn=e=>(Ht("data-v-187b1bd1"),e=e(),Jt(),e),_p=kn(()=>f("div",{class:"handle material-icons"},"drag_handle",-1)),wp={key:0,class:"actions"},kp=kn(()=>f("span",{class:"material-icons"},"content_paste",-1)),Np=kn(()=>f("span",{class:"material-icons"},"content_copy",-1)),Sp=kn(()=>f("span",{class:"material-icons"},"edit",-1)),Cp=kn(()=>f("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),$p={key:1,class:"actions"},Mp=kn(()=>f("span",{class:"material-icons"},"check",-1)),Pp=kn(()=>f("span",{class:"material-icons"},"close",-1)),xp={key:2,class:"details"},Tp={class:"save-version"},Fp=kn(()=>f("br",null,null,-1)),Ep={key:0},Ip={key:1},Dp={key:3,class:"details"},Lp={key:4,class:"details error"},Ap=kn(()=>f("br",null,null,-1)),Op=X({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:l}=it(n),i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),o=z(!1),u=z(!1),c=z("");Ze(o,()=>c.value=l.value.name||"");const p=b(()=>l.value&&l.value.id===D.id),d=b(()=>p.value?D.time:l.value&&l.value.time||0),v=zn(b(()=>{var _,w,M,G,ye,T,$,W,ie,ge,ne,ce,Le;const y=(G=(M=(w=(_=l.value)==null?void 0:_.layers)==null?void 0:w.main)==null?void 0:M.chapter)!=null?G:0;if(y==0)return"Just started";if(y==1){const $e=(W=($=(T=(ye=l.value)==null?void 0:ye.layers)==null?void 0:T.flowers)==null?void 0:$.flowers)!=null?W:0;return`Chapter 1; ${pe($e)} flowers`}else if(y==2){const $e=(Le=Object.values((ce=(ne=(ge=(ie=l.value)==null?void 0:ie.layers)==null?void 0:ge.main)==null?void 0:ne.jobs)!=null?ce:{}).reduce((we,ze)=>{if(ze.xp==null)return we;if(s.eq(ze.xp,0))return we.add(1);let ee=s.clampMin(ze.xp,1).log10().add(1);return ee.gt(25)&&(ee=ee.sub(25).pow(bi).add(25)),ee.floor().add(we)},new s(0)))!=null?Le:new s(0);return`Chapter 2; ${pe($e)} total job levels`}else return`Chapter ${y}`}));function g(){t("editName",c.value),o.value=!1}return(y,_)=>(h(),S("div",{class:qe(["save",{active:r(p)}])},[_p,o.value?(h(),S("div",$p,[f("button",{onClick:g,class:"button"},[a(nt,{display:"Save",direction:r(je).Left,class:"info"},{default:te(()=>[Mp]),_:1},8,["direction"])]),f("button",{onClick:_[5]||(_[5]=w=>o.value=!o.value),class:"button"},[a(nt,{display:"Cancel",direction:r(je).Left,class:"info"},{default:te(()=>[Pp]),_:1},8,["direction"])])])):(h(),S("div",wp,[r(l).error==null&&!u.value?(h(),B(bp,{key:0,onClick:_[0]||(_[0]=w=>t("export")),class:"button",left:""},{default:te(()=>[a(nt,{display:"Export",direction:r(je).Left,class:"info"},{default:te(()=>[kp]),_:1},8,["direction"])]),_:1})):j("",!0),r(l).error==null&&!u.value?(h(),S("button",{key:1,onClick:_[1]||(_[1]=w=>t("duplicate")),class:"button"},[a(nt,{display:"Duplicate",direction:r(je).Left,class:"info"},{default:te(()=>[Np]),_:1},8,["direction"])])):j("",!0),r(l).error==null&&!u.value?(h(),S("button",{key:2,onClick:_[2]||(_[2]=w=>o.value=!o.value),class:"button"},[a(nt,{display:"Edit Name",direction:r(je).Left,class:"info"},{default:te(()=>[Sp]),_:1},8,["direction"])])):j("",!0),a(hp,{disabled:r(p),onClick:_[3]||(_[3]=w=>t("delete")),onConfirmingChanged:_[4]||(_[4]=w=>u.value=w)},{default:te(()=>[a(nt,{display:"Delete",direction:r(je).Left,class:"info"},{default:te(()=>[Cp]),_:1},8,["direction"])]),_:1},8,["disabled"])])),r(l).error==null&&!o.value?(h(),S("div",xp,[f("button",{class:"button open",onClick:_[6]||(_[6]=w=>t("open"))},[f("h3",null,Q(r(l).name),1)]),f("span",Tp,"v"+Q(r(l).modVersion),1),Fp,r(d)?(h(),S("div",Ep,"Last played "+Q(r(i).format(r(d))),1)):j("",!0),r(v)?(h(),S("div",Ip,[(h(),B(De(r(v))))])):j("",!0)])):r(l).error==null&&o.value?(h(),S("div",Dp,[a(fs,{modelValue:c.value,"onUpdate:modelValue":_[7]||(_[7]=w=>c.value=w),class:"editname",onSubmit:g},null,8,["modelValue"])])):(h(),S("div",Lp,[m(" Error: Failed to load save with id "+Q(r(l).id),1),Ap,m(Q(r(l).error),1)]))],2))}});var jp=oe(Op,[["__scopeId","data-v-187b1bd1"]]);const _i=e=>(Ht("data-v-3b9991aa"),e=e(),Jt(),e),Rp=_i(()=>f("h2",null,"Saves Manager",-1)),qp={class:"modal-footer"},Bp={class:"field"},Gp=_i(()=>f("span",{class:"field-title"},"Create Save",-1)),Vp={class:"field-buttons"},Up={class:"footer"},zp=_i(()=>f("div",{style:{"flex-grow":"1"}},null,-1)),Xp=X({__name:"SavesManager",setup(e,{expose:t}){const n=z(!1),l=z(null);t({open(){n.value=!0}});const i=z(!1),o=z(""),u=z(null);Ze(o,T=>{T?zt(()=>{try{if(T[0]!=="{")if(T[0]==="e")T=decodeURIComponent(escape(atob(T)));else if(T[0]==="\u1BE1")T=Mn.decompressFromUTF16(T);else{console.warn("Unable to determine preset encoding",T),i.value=!0;return}const $=JSON.parse(T);if(typeof $!="object"){i.value=!0;return}const W=xl();$.id=W,on($),o.value="",i.value=!1,Be.saves.push(W)}catch{i.value=!0}}):i.value=!1});let c={},p=z(Object.keys(c).reduce((T,$)=>(T.push({label:$.split("/").slice(-1)[0].slice(0,-4),value:c[$]}),T),[]));const d=oi({});function v(T){if(d[T]==null){let $=localStorage.getItem(T);if($==null)d[T]={error:"Save doesn't exist in localStorage",id:T};else if($==="dW5kZWZpbmVk")d[T]={error:"Save is undefined",id:T};else try{if($[0]!=="{")if($[0]==="e")$=decodeURIComponent(escape(atob($)));else if($[0]==="\u1BE1")$=Mn.decompressFromUTF16($);else return console.warn("Unable to determine preset encoding",$),i.value=!0,d[T]={error:"Unable to determine preset encoding",id:T},d[T];d[T]={...JSON.parse($),id:T}}catch(W){d[T]={error:W,id:T},console.warn(`SavesManager: Failed to load info about save with id ${T}:
${W}
${$}`)}}return d[T]}Ze(n,T=>{T&&Object.keys(d).forEach($=>delete d[$])});const g=b(()=>Be.saves.reduce((T,$)=>(T[$]=v($),T),{}));function y(T){let $;switch(D.id===T?$=ls(D[yt]):$=JSON.stringify(g.value[T]),Ve.exportEncoding){default:console.warn(`Unknown save encoding: ${Ve.exportEncoding}. Defaulting to lz`);case"lz":$=Mn.compressToUTF16($);break;case"base64":$=btoa(unescape(encodeURIComponent($)));break;case"plain":break}const W=document.createElement("textarea");W.value=$,document.body.appendChild(W),W.select(),W.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(W)}function _(T){D.id===T&&on();const $={...g.value[T],id:xl()};on($),Be.saves.push($.id)}function w(T){Be.saves=Be.saves.filter($=>$!==T),localStorage.removeItem(T),d[T]=void 0}function M(T){g.value[D.id].time=D.time,on(),d[D.id]=void 0,Vn(g.value[T]),d[T]=void 0}function G(T){if(u.value=T,zt(()=>{u.value=null}),T[0]!=="{")if(T[0]==="e")T=decodeURIComponent(escape(atob(T)));else if(T[0]==="\u1BE1")T=Mn.decompressFromUTF16(T);else{console.warn("Unable to determine preset encoding",T);return}const $=JSON.parse(T);$.id=xl(),on($),Be.saves.push($.id),M($.id)}function ye(T,$){const W=g.value[T];W&&(W.name=$,D.id===T?(D.name=$,on()):(on(W),d[T]=void 0))}return(T,$)=>(h(),B(Dn,{modelValue:n.value,"onUpdate:modelValue":$[4]||($[4]=W=>n.value=W),ref_key:"modal",ref:l},{header:te(()=>[Rp]),body:te(({shown:W})=>[W?(h(),B(r(Ls),{key:0,list:r(Be).saves,handle:".handle",itemKey:ie=>ie},{item:te(({element:ie})=>[a(jp,{save:r(g)[ie],onOpen:ge=>M(ie),onExport:ge=>y(ie),onEditName:ge=>ye(ie,ge),onDuplicate:ge=>_(ie),onDelete:ge=>w(ie)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):j("",!0)]),footer:te(()=>[f("div",qp,[a(fs,{modelValue:o.value,"onUpdate:modelValue":$[0]||($[0]=W=>o.value=W),title:"Import Save",placeholder:"Paste your save here!",class:qe({importingFailed:i.value})},null,8,["modelValue","class"]),f("div",Bp,[Gp,f("div",Vp,[f("button",{class:"button",onClick:$[1]||($[1]=W=>M(r(il)().id))},"New Game"),Object.keys(r(p)).length>0?(h(),B(vi,{key:0,options:r(p),modelValue:u.value,"onUpdate:modelValue":$[2]||($[2]=W=>G(W)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):j("",!0)])]),f("div",Up,[zp,f("button",{class:"button modal-default-button",onClick:$[3]||($[3]=W=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var Ss=oe(Xp,[["__scopeId","data-v-3b9991aa"]]);const Kt=e=>(Ht("data-v-e2f96700"),e=e(),Jt(),e),Hp=["src","alt"],Jp={key:1,class:"title"},Wp=Kt(()=>f("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Qp={class:"discord"},Zp={class:"discord-links"},Kp={key:0},Yp=["href"],em=Kt(()=>f("li",null,[f("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),tm=Kt(()=>f("li",null,[f("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),nm={href:"https://forums.moddingtree.com/",target:"_blank"},lm=Kt(()=>f("span",{class:"material-icons"},"forum",-1)),im=Kt(()=>f("span",{class:"material-icons"},"info",-1)),sm=Kt(()=>f("span",{class:"material-icons"},"library_books",-1)),am=Kt(()=>f("span",{class:"material-icons"},"settings",-1)),om=Kt(()=>f("span",{class:"material-icons"},"library_books",-1)),rm=Kt(()=>f("span",{class:"material-icons"},"settings",-1)),um=Kt(()=>f("span",{class:"material-icons"},"info",-1)),cm={href:"https://forums.moddingtree.com/",target:"_blank"},dm=Kt(()=>f("span",{class:"material-icons"},"forum",-1)),pm={class:"discord"},mm={class:"discord-links"},fm={key:0},vm=["href"],hm=Kt(()=>f("li",null,[f("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),gm=Kt(()=>f("li",null,[f("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),ym=X({__name:"Nav",setup(e){const t=z(null),n=z(null),l=z(null),i=z(null),{useHeader:o,banner:u,title:c,discordName:p,discordLink:d,versionNumber:v}=Ve;function g(){window.open(d,"mywindow")}return(y,_)=>(h(),S(F,null,[r(o)?(h(),S("div",Gt({key:0,class:"nav"},y.$attrs),[r(u)?(h(),S("img",{key:0,src:r(u),class:"banner",alt:r(c),style:{"margin-left":"10px"}},null,8,Hp)):(h(),S("div",Jp,Q(r(c)),1)),f("div",{onClick:_[0]||(_[0]=w=>{var M;return(M=i.value)==null?void 0:M.open()}),class:"version-container"},[a(nt,{display:"Changelog",direction:r(je).Down,class:"version"},{default:te(()=>[f("span",null,"v"+Q(r(v)),1)]),_:1},8,["direction"])]),Wp,f("div",Qp,[f("span",{onClick:g,class:"material-icons"},"discord"),f("ul",Zp,[r(d)?(h(),S("li",Kp,[f("a",{href:r(d),target:"_blank"},Q(r(p)),9,Yp)])):j("",!0),em,tm])]),f("div",null,[f("a",nm,[a(nt,{display:"Forums",direction:r(je).Down,yoffset:"5px"},{default:te(()=>[lm]),_:1},8,["direction"])])]),f("div",{onClick:_[1]||(_[1]=w=>{var M;return(M=t.value)==null?void 0:M.open()})},[a(nt,{display:"Info",direction:r(je).Down,class:"info"},{default:te(()=>[im]),_:1},8,["direction"])]),f("div",{onClick:_[2]||(_[2]=w=>{var M;return(M=n.value)==null?void 0:M.open()})},[a(nt,{display:"Saves",direction:r(je).Down,xoffset:"-20px"},{default:te(()=>[sm]),_:1},8,["direction"])]),f("div",{onClick:_[3]||(_[3]=w=>{var M;return(M=l.value)==null?void 0:M.open()})},[a(nt,{display:"Options",direction:r(je).Down,xoffset:"-66px"},{default:te(()=>[am]),_:1},8,["direction"])])],16)):(h(),S("div",Gt({key:1,class:"overlay-nav"},y.$attrs),[f("div",{onClick:_[4]||(_[4]=w=>{var M;return(M=i.value)==null?void 0:M.open()}),class:"version-container"},[a(nt,{display:"Changelog",direction:r(je).Right,xoffset:"25%",class:"version"},{default:te(()=>[f("span",null,"v"+Q(r(v)),1)]),_:1},8,["direction"])]),f("div",{onClick:_[5]||(_[5]=w=>{var M;return(M=n.value)==null?void 0:M.open()})},[a(nt,{display:"Saves",direction:r(je).Right},{default:te(()=>[om]),_:1},8,["direction"])]),f("div",{onClick:_[6]||(_[6]=w=>{var M;return(M=l.value)==null?void 0:M.open()})},[a(nt,{display:"Options",direction:r(je).Right},{default:te(()=>[rm]),_:1},8,["direction"])]),f("div",{onClick:_[7]||(_[7]=w=>{var M;return(M=t.value)==null?void 0:M.open()})},[a(nt,{display:"Info",direction:r(je).Right},{default:te(()=>[um]),_:1},8,["direction"])]),f("div",null,[f("a",cm,[a(nt,{display:"Forums",direction:r(je).Right,xoffset:"7px"},{default:te(()=>[dm]),_:1},8,["direction"])])]),f("div",pm,[f("span",{onClick:g,class:"material-icons"},"discord"),f("ul",mm,[r(d)?(h(),S("li",fm,[f("a",{href:r(d),target:"_blank"},Q(r(p)),9,vm)])):j("",!0),hm,gm])])],16)),a(Oo,{ref_key:"info",ref:t,changelog:i.value},null,8,["changelog"]),a(Ss,{ref_key:"savesManager",ref:n},null,512),a(zo,{ref_key:"options",ref:l},null,512),a(yo,{ref_key:"changelog",ref:i},null,512)],64))}});var Cs=oe(ym,[["__scopeId","data-v-e2f96700"]]);const bm={class:"inner-tab"},_m=X({__name:"Game",setup(e){const t=Xt(D,"tabs"),n=b(()=>Object.keys(Vt)),l=Ve.useHeader;function i(o){const{display:u,minimized:c,minWidth:p,name:d,color:v,minimizable:g,nodes:y}=o;return{display:u,minimized:c,minWidth:p,name:d,color:v,minimizable:g,nodes:y}}return(o,u)=>(h(),S("div",{class:qe(["tabs-container",{useHeader:r(l)}])},[(h(!0),S(F,null,_n(r(t),(c,p)=>{var d,v;return h(),S("div",{key:p,class:qe(["tab",r((d=r(Vt)[c])==null?void 0:d.classes)]),ref_for:!0,ref:`tab-${p}`,style:Ie(r((v=r(Vt)[c])==null?void 0:v.style))},[p===0&&!r(l)?(h(),B(Cs,{key:0})):j("",!0),f("div",bm,[r(n).includes(c)?(h(),B(fo,Gt({key:0},i(r(Vt)[c]),{index:p,tab:()=>{var g;return(g=o.$refs[`tab-${p}`])==null?void 0:g[0]}}),null,16,["index","tab"])):(h(),B(De(c),{key:1,index:p},null,8,["index"]))])],6)}),128))],2))}});var wm=oe(_m,[["__scopeId","data-v-4cb9ce0f"]]);const Nl=e=>(Ht("data-v-4a50ce42"),e=e(),Jt(),e),km={class:"game-over-modal-header"},Nm=["src","alt"],Sm={class:"game-over-modal-title"},Cm=Nl(()=>f("h2",null,"Congratulations!",-1)),$m={key:0},Mm=Nl(()=>f("br",null,null,-1)),Pm=Nl(()=>f("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),xm=Nl(()=>f("br",null,null,-1)),Tm=["href"],Fm=Nl(()=>f("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),Em=X({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:l,discordLink:i,versionNumber:o,versionTitle:u}=Ve,c=b(()=>En(D.timePlayed)),p=b(()=>ks.value&&!D.keepGoing),d=Xt(D,"autosave");function v(){D.keepGoing=!0}function g(){Vn(il())}return(y,_)=>(h(),B(Dn,{"model-value":r(p)},{header:te(()=>[f("div",km,[r(n)?(h(),S("img",{key:0,class:"game-over-modal-logo",src:r(n),alt:r(t)},null,8,Nm)):j("",!0),f("div",Sm,[Cm,f("h4",null,"You've beaten "+Q(r(t))+" v"+Q(r(o))+": "+Q(r(u)),1)])])]),body:te(({shown:w})=>[w?(h(),S("div",$m,[f("div",null,"It took you "+Q(r(c))+" to beat the game.",1),Mm,Pm,xm,f("div",null,[f("a",{href:r(i),class:"game-over-modal-discord-link"},[Fm,m(" "+Q(r(l)),1)],8,Tm)]),a($n,{title:"Autosave",modelValue:r(d),"onUpdate:modelValue":_[0]||(_[0]=M=>Pt(d)?d.value=M:null)},null,8,["modelValue"])])):j("",!0)]),footer:te(()=>[f("div",{class:"game-over-footer"},[f("button",{onClick:v,class:"button"},"Keep Going"),f("button",{onClick:g,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var Im=oe(Em,[["__scopeId","data-v-4a50ce42"]]);const zl=e=>(Ht("data-v-3de07c06"),e=e(),Jt(),e),Dm=zl(()=>f("div",{class:"nan-modal-header"},[f("h2",null,"NaN value detected!")],-1)),Lm={key:0},Am=zl(()=>f("br",null,null,-1)),Om=["href"],jm=zl(()=>f("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Rm=zl(()=>f("br",null,null,-1)),qm={class:"nan-footer"},Bm=X({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=Ve,l=Xt(D,"autosave"),i=Xt(tt,"hasNaN"),o=z(null),u=b(()=>{var _;return(_=tt.NaNPath)==null?void 0:_.join(".")}),c=b(()=>{var _;return(_=tt.NaNPath)==null?void 0:_.slice(-1)[0]}),p=b(()=>tt.NaNReceiver&&c.value?tt.NaNReceiver[c.value]:null),d=b({get(){return D.devSpeed===0},set(_){D.devSpeed=_?null:0}});function v(){tt.NaNReceiver&&c.value&&(tt.NaNReceiver[c.value]=new s(0),tt.hasNaN=!1)}function g(){tt.NaNReceiver&&c.value&&(tt.NaNReceiver[c.value]=new s(1),tt.hasNaN=!1)}function y(){tt.NaNReceiver&&c.value&&(tt.NaNReceiver[c.value]=new s(NaN),tt.hasNaN=!1)}return(_,w)=>(h(),S(F,null,[a(Dn,Gt({modelValue:r(i),"onUpdate:modelValue":w[4]||(w[4]=M=>Pt(i)?i.value=M:null)},_.$attrs),{header:te(()=>[Dm]),body:te(()=>[f("div",null,[m(' Attempted to assign "'+Q(r(u))+'" to NaN',1),r(p)?(h(),S("span",Lm,Q(" ")+"(previously "+Q(r(be)(r(p)))+")",1)):j("",!0),m(". Auto-saving has been "+Q(r(l)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),Am,f("div",null,[f("a",{href:r(n),class:"nan-modal-discord-link"},[jm,m(" "+Q(r(t)),1)],8,Om)]),Rm,a($n,{title:"Autosave",modelValue:r(l),"onUpdate:modelValue":w[0]||(w[0]=M=>Pt(l)?l.value=M:null)},null,8,["modelValue"]),r(Ve).enablePausing?(h(),B($n,{key:0,title:"Pause game",modelValue:r(d),"onUpdate:modelValue":w[1]||(w[1]=M=>Pt(d)?d.value=M:null)},null,8,["modelValue"])):j("",!0)]),footer:te(()=>[f("div",qm,[f("button",{onClick:w[2]||(w[2]=M=>{var G;return(G=o.value)==null?void 0:G.open()}),class:"button"},"Open Saves Manager"),f("button",{onClick:v,class:"button"},"Set to 0"),f("button",{onClick:g,class:"button"},"Set to 1"),r(p)&&r(s).neq(r(p),0)&&r(s).neq(r(p),1)?(h(),S("button",{key:0,onClick:w[3]||(w[3]=M=>i.value=!1),class:"button"}," Set to previous ")):j("",!0),f("button",{onClick:y,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),a(Ss,{ref_key:"savesManager",ref:o},null,512)],64))}});var Gm=oe(Bm,[["__scopeId","data-v-3de07c06"]]);const Vm={key:0,class:"tpsDisplay"},Um={key:0,class:"low"},zm=X({__name:"TPS",setup(e){const t=b(()=>s.div(tt.lastTenTicks.length,tt.lastTenTicks.reduce((o,u)=>o+u,0))),n=z([]);jt(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const l=b(()=>n.value.reduce((o,u)=>s.max(o,u),0)),i=b(()=>s.sub(t.value,l.value).gt(1));return(o,u)=>r(t).isNan()?j("",!0):(h(),S("div",Vm,[m(" TPS: "+Q(r(pe)(r(t)))+" ",1),a(jl,{name:"fade"},{default:te(()=>[r(i)?(h(),S("span",Um,Q(r(pe)(r(l))),1)):j("",!0)]),_:1})]))}});var Xm=oe(zm,[["__scopeId","data-v-46a3ed5b"]]);var Hm=X({__name:"App",setup(e){const t=Ve.useHeader,n=b(()=>rl[Be.theme].variables),l=Xt(Be,"showTPS"),i=b(()=>fe(N(()=>a(F,null,[za.map(Qe)]))));return(o,u)=>(h(),S(F,null,[f("div",{id:"modal-root",style:Ie(r(n))},null,4),f("div",{class:qe(["app",{useHeader:r(t)}]),style:Ie(r(n))},[r(t)?(h(),B(Cs,{key:0})):j("",!0),a(wm),r(r(l))?(h(),B(Xm,{key:1})):j("",!0),a(Im),a(Gm),(h(),B(De(r(i))))],6)],64))}});var Jm=oe(Hm,[["__scopeId","data-v-7c41425b"]]);function Wm(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:l,onRegistered:i,onRegisterError:o}=e;let u,c;const p=async(d=!0)=>{d&&(u==null||u.addEventListener("controlling",v=>{v.isUpdate&&window.location.reload()})),c&&c.waiting&&await Vs(c.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){u=new Gs("./sw.js",{scope:"./",type:"classic"}),u.addEventListener("activated",d=>{d.isUpdate||l==null||l()});{const d=()=>{n==null||n()};u.addEventListener("waiting",d),u.addEventListener("externalwaiting",d)}u.register({immediate:t}).then(d=>{c=d,i==null||i(d)}).catch(d=>{o==null||o(d)})}return p}function Qm(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:l,onRegistered:i,onRegisterError:o}=e,u=z(!1),c=z(!1);return{updateServiceWorker:Wm({immediate:t,onNeedRefresh(){u.value=!0,n==null||n()},onOfflineReady(){c.value=!0,l==null||l()},onRegistered:i,onRegisterError:o}),offlineReady:c,needRefresh:u}}document.title=Ve.title;window.projInfo=Ve;if(Ve.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await qa();const{globalBus:e,startGameLoop:t}=await Il(()=>Promise.resolve().then(function(){return Ra}),void 0),n=window.vue=Es(Jm);e.emit("setupVue",n),n.mount("#app"),zt(()=>{const l=ol(),{updateServiceWorker:i}=Qm({onNeedRefresh(){l.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){i()}})},onOfflineReady(){l.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(o){o&&setInterval(o.update,60*60*1e3)}})}),t()});
