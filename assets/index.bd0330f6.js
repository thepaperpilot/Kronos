/* empty css                    */import"./vue.0b1ef07e.js";import{Z as y,C as o,q as Ii,t as X,b1 as et,aa as Z,aE as h,a0 as x,a1 as v,aK as Zt,G as $e,aC as Cl,w as St,b2 as Vt,a8 as r,O as F,ao as sa,ay as vi,ar as Bt,aG as Li,A as ot,_ as U,b6 as re,b8 as dn,bs as Nn,aq as Qt,bu as ti,bb as Zi,T as oa,a7 as m,u as Sl,j as Ga,l as Et,bv as yn,aL as qt,$ as B,aN as Me,J as ee,I as qe,aH as ln,aF as an,z as nn,bn as Ua,br as ua,al as Ui,au as kl,H as ca,aJ as Mn,bw as Xa,a6 as Ha,ah as Ja,be as Wa}from"./@vue.a5783f16.js";import{c as da}from"./nanoevents.1080beb7.js";import{L as Ln}from"./lz-string.f2f3b7cf.js";import{Y as Qa}from"./vue-next-select.348eb514.js";import{D as Za}from"./vuedraggable.3773156d.js";import{p as Ka}from"./vue-textarea-autosize.35804eaf.js";import{A as pa,T as Ya,R as er,B as tr,u as nr,E as Vl}from"./@pixi.d7e055ca.js";import{s as ir,u as gi}from"./vue-toastification.e4040407.js";import{v as lr,n as ar}from"./workbox-window.8d14e8b7.js";import"./earcut.b6f90e68.js";import"./sortablejs.a68aa018.js";import"./ismobilejs.5c6954b9.js";import"./eventemitter3.dc5195d7.js";import"./url.832c6d94.js";import"./querystring.ed407679.js";const rr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};rr();const sr="modulepreload",zl={},or="./",Xi=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${or}${i}`,i in zl)return;zl[i]=!0;const a=i.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":sr,a||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),a)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},ur="./projInfo-schema.json",cr="Kronos",dr="A game about flowers, time, and focus",pr="kronos",mr="thepaperpilot",fr="",vr="",gr="0.3",hr="",br=!1,yr=!1,wr=2,_r=!0,Cr="banner.png",Sr="pwa-192x192.png",kr=["main"],Nr=3600,xr=1,$r=!0,Mr="base64";var Xe={$schema:ur,title:cr,description:dr,id:pr,author:mr,discordName:fr,discordLink:vr,versionNumber:gr,versionTitle:hr,allowGoBack:br,defaultShowSmall:yr,defaultDecimalsShown:wr,useHeader:_r,banner:Cr,logo:Sr,initialTabs:kr,maxTickLength:Nr,offlineLimit:xr,enablePausing:$r,exportEncoding:Mr};class Pr{constructor(t){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}get size(){return this.map.size}get(t){const n=this.map.get(t);if(n!==void 0)return n!==this.first&&(n===this.last?(this.last=n.prev,this.last.next=void 0):(n.prev.next=n.next,n.next.prev=n.prev),n.next=this.first,this.first.prev=n,this.first=n),n.value}set(t,n){if(this.maxSize<1)return;if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");const i=new Tr(t,n);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(t,i);this.map.size>this.maxSize;){const a=this.last;this.map.delete(a.key),this.last=a.prev,this.last.next=void 0}}}class Tr{constructor(t,n){this.next=void 0,this.prev=void 0,this.key=t,this.value=n}}const ul=17,Ir=9e15,Er=Math.log10(9e15),Fr=1/9e15,qr=308,Dr=-324,Gl=5,Ar=(1<<10)-1,Lr=function(){const e=[];for(let n=Dr+1;n<=qr;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Wn=[2,Math.E,3,4,5,6,7,8,9,10],Rr=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Or=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let N=function(t){return l.fromValue_noAlloc(t)},ve=function(e,t,n){return l.fromComponents(e,t,n)},_e=function(t,n,i){return l.fromComponents_noNormalize(t,n,i)};const Dn=function(t,n){const i=n+1,a=Math.ceil(Math.log10(Math.abs(t))),s=Math.round(t*Math.pow(10,i-a))*Math.pow(10,a-i);return parseFloat(s.toFixed(Math.max(i-a,0)))},cl=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},jr=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const i=e*e;let a=e;return n=n+1/(12*a),a=a*i,n=n+1/(360*a),a=a*i,n=n+1/(1260*a),a=a*i,n=n+1/(1680*a),a=a*i,n=n+1/(1188*a),a=a*i,n=n+691/(360360*a),a=a*i,n=n+7/(1092*a),a=a*i,n=n+3617/(122400*a),Math.exp(n)/t},ma=.5671432904097838,Ul=function(e,t=1e-10){let n,i;if(!Number.isFinite(e)||e===0)return e;if(e===1)return ma;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let a=0;a<100;++a){if(i=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(i-n)<t*Math.abs(i))return i;n=i}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Xl(e,t=1e-10){let n,i,a,s;if(!Number.isFinite(e.mag)||e.eq(l.dZero))return e;if(e.eq(l.dOne))return l.fromNumber(ma);n=l.ln(e);for(let u=0;u<100;++u){if(i=n.neg().exp(),a=n.sub(e.mul(i)),s=n.sub(a.div(n.add(1).sub(n.add(2).mul(a).div(l.mul(2,n).add(2))))),l.abs(s.sub(n)).lt(l.abs(s).mul(t)))return s;n=s}throw Error(`Iteration failed to converge: ${e.toString()}`)}const b=class{constructor(e){this.sign=0,this.mag=0,this.layer=0,e instanceof b?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Lr(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new b().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new b().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new b().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new b().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new b().fromDecimal(e)}static fromNumber(e){return new b().fromNumber(e)}static fromString(e){return new b().fromString(e)}static fromValue(e){return new b().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof b)return e;if(typeof e=="string"){const t=b.fromStringCache.get(e);return t!==void 0?t:b.fromString(e)}else return typeof e=="number"?b.fromNumber(e):b.dZero}static abs(e){return N(e).abs()}static neg(e){return N(e).neg()}static negate(e){return N(e).neg()}static negated(e){return N(e).neg()}static sign(e){return N(e).sign}static sgn(e){return N(e).sign}static round(e){return N(e).round()}static floor(e){return N(e).floor()}static ceil(e){return N(e).ceil()}static trunc(e){return N(e).trunc()}static add(e,t){return N(e).add(t)}static plus(e,t){return N(e).add(t)}static sub(e,t){return N(e).sub(t)}static subtract(e,t){return N(e).sub(t)}static minus(e,t){return N(e).sub(t)}static mul(e,t){return N(e).mul(t)}static multiply(e,t){return N(e).mul(t)}static times(e,t){return N(e).mul(t)}static div(e,t){return N(e).div(t)}static divide(e,t){return N(e).div(t)}static recip(e){return N(e).recip()}static reciprocal(e){return N(e).recip()}static reciprocate(e){return N(e).reciprocate()}static cmp(e,t){return N(e).cmp(t)}static cmpabs(e,t){return N(e).cmpabs(t)}static compare(e,t){return N(e).cmp(t)}static isNaN(e){return e=N(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=N(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return N(e).eq(t)}static equals(e,t){return N(e).eq(t)}static neq(e,t){return N(e).neq(t)}static notEquals(e,t){return N(e).notEquals(t)}static lt(e,t){return N(e).lt(t)}static lte(e,t){return N(e).lte(t)}static gt(e,t){return N(e).gt(t)}static gte(e,t){return N(e).gte(t)}static max(e,t){return N(e).max(t)}static min(e,t){return N(e).min(t)}static minabs(e,t){return N(e).minabs(t)}static maxabs(e,t){return N(e).maxabs(t)}static clamp(e,t,n){return N(e).clamp(t,n)}static clampMin(e,t){return N(e).clampMin(t)}static clampMax(e,t){return N(e).clampMax(t)}static cmp_tolerance(e,t,n){return N(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return N(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return N(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return N(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return N(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return N(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return N(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return N(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return N(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return N(e).gte_tolerance(t,n)}static pLog10(e){return N(e).pLog10()}static absLog10(e){return N(e).absLog10()}static log10(e){return N(e).log10()}static log(e,t){return N(e).log(t)}static log2(e){return N(e).log2()}static ln(e){return N(e).ln()}static logarithm(e,t){return N(e).logarithm(t)}static pow(e,t){return N(e).pow(t)}static pow10(e){return N(e).pow10()}static pow_base(e,t){return N(e).pow_base(t)}static root(e,t){return N(e).root(t)}static factorial(e,t){return N(e).factorial()}static gamma(e,t){return N(e).gamma()}static lngamma(e,t){return N(e).lngamma()}static exp(e){return N(e).exp()}static sqr(e){return N(e).sqr()}static sqrt(e){return N(e).sqrt()}static cube(e){return N(e).cube()}static cbrt(e){return N(e).cbrt()}static tetrate(e,t=2,n=_e(1,0,1)){return N(e).tetrate(t,n)}static iteratedexp(e,t=2,n=_e(1,0,1)){return N(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return N(e).iteratedlog(t,n)}static layeradd10(e,t){return N(e).layeradd10(t)}static layeradd(e,t,n=10){return N(e).layeradd(t,n)}static slog(e,t=10){return N(e).slog(t)}static lambertw(e){return N(e).lambertw()}static ssqrt(e){return N(e).ssqrt()}static pentate(e,t=2,n=_e(1,0,1)){return N(e).pentate(t,n)}static sin(e){return N(e).sin()}static cos(e){return N(e).cos()}static tan(e){return N(e).tan()}static asin(e){return N(e).asin()}static acos(e){return N(e).acos()}static atan(e){return N(e).atan()}static sinh(e){return N(e).sinh()}static cosh(e){return N(e).cosh()}static tanh(e){return N(e).tanh()}static asinh(e){return N(e).asinh()}static acosh(e){return N(e).acosh()}static atanh(e){return N(e).atanh()}static affordGeometricSeries(e,t,n,i){return this.affordGeometricSeries_core(N(e),N(t),N(n),i)}static sumGeometricSeries(e,t,n,i){return this.sumGeometricSeries_core(e,N(t),N(n),i)}static affordArithmeticSeries(e,t,n,i){return this.affordArithmeticSeries_core(N(e),N(t),N(n),N(i))}static sumArithmeticSeries(e,t,n,i){return this.sumArithmeticSeries_core(N(e),N(t),N(n),N(i))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(N(e),N(t),N(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return _e(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return _e(t,0,1);const n=Math.floor(Math.random()*(e+1));let i=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(i=Math.trunc(i));let a=Math.pow(10,i);return Math.random()>.9&&(a=Math.trunc(a)),ve(t,n,a)}static affordGeometricSeries_core(e,t,n,i){const a=t.mul(n.pow(i));return b.floor(e.div(a).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,i){return t.mul(n.pow(i)).mul(b.sub(1,n.pow(e))).div(b.sub(1,n))}static affordArithmeticSeries_core(e,t,n,i){const s=t.add(i.mul(n)).sub(n.div(2)),u=s.pow(2);return s.neg().add(u.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,i){const a=t.add(i.mul(n));return e.div(2).mul(a.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Fr)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=Ir)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Er&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,n=b.fromStringCache.get(t);if(n!==void 0)return this.fromDecimal(n);e=e.replace(",","");const i=e.split("^^^");if(i.length===2){const C=parseFloat(i[0]),M=parseFloat(i[1]),Y=i[1].split(";");let ae=1;if(Y.length===2&&(ae=parseFloat(Y[1]),isFinite(ae)||(ae=1)),isFinite(C)&&isFinite(M)){const T=b.pentate(C,M,ae);return this.sign=T.sign,this.layer=T.layer,this.mag=T.mag,b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}}const a=e.split("^^");if(a.length===2){const C=parseFloat(a[0]),M=parseFloat(a[1]),Y=a[1].split(";");let ae=1;if(Y.length===2&&(ae=parseFloat(Y[1]),isFinite(ae)||(ae=1)),isFinite(C)&&isFinite(M)){const T=b.tetrate(C,M,ae);return this.sign=T.sign,this.layer=T.layer,this.mag=T.mag,b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}}const s=e.split("^");if(s.length===2){const C=parseFloat(s[0]),M=parseFloat(s[1]);if(isFinite(C)&&isFinite(M)){const Y=b.pow(C,M);return this.sign=Y.sign,this.layer=Y.layer,this.mag=Y.mag,b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}}e=e.trim().toLowerCase();let u,c,d=e.split("pt");if(d.length===2){u=10,c=parseFloat(d[0]),d[1]=d[1].replace("(",""),d[1]=d[1].replace(")","");let C=parseFloat(d[1]);if(isFinite(C)||(C=1),isFinite(u)&&isFinite(c)){const M=b.tetrate(u,c,C);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}}if(d=e.split("p"),d.length===2){u=10,c=parseFloat(d[0]),d[1]=d[1].replace("(",""),d[1]=d[1].replace(")","");let C=parseFloat(d[1]);if(isFinite(C)||(C=1),isFinite(u)&&isFinite(c)){const M=b.tetrate(u,c,C);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}}const p=e.split("e"),f=p.length-1;if(f===0){const C=parseFloat(e);if(isFinite(C))return this.fromNumber(C),b.fromStringCache.size>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}else if(f===1){const C=parseFloat(e);if(isFinite(C)&&C!==0)return this.fromNumber(C),b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}const g=e.split("e^");if(g.length===2){this.sign=1,g[0].charAt(0)=="-"&&(this.sign=-1);let C="";for(let M=0;M<g[1].length;++M){const Y=g[1].charCodeAt(M);if(Y>=43&&Y<=57||Y===101)C+=g[1].charAt(M);else return this.layer=parseFloat(C),this.mag=parseFloat(g[1].substr(M+1)),this.normalize(),b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}}if(f<1)return this.sign=0,this.layer=0,this.mag=0,b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this;const w=parseFloat(p[0]);if(w===0)return this.sign=0,this.layer=0,this.mag=0,b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this;let _=parseFloat(p[p.length-1]);if(f>=2){const C=parseFloat(p[p.length-2]);isFinite(C)&&(_*=Math.sign(C),_+=cl(C))}if(!isFinite(w))this.sign=p[0]==="-"?-1:1,this.layer=f,this.mag=_;else if(f===1)this.sign=Math.sign(w),this.layer=1,this.mag=_+Math.log10(Math.abs(w));else if(this.sign=Math.sign(w),this.layer=f,f===2){const C=b.mul(ve(1,2,_),N(w));return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}else this.mag=_;return this.normalize(),b.fromStringCache.maxSize>=1&&b.fromStringCache.set(t,b.fromDecimal(this)),this}fromValue(e){return e instanceof b?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Dn(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Dn(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Gl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Dn(this.m,e)+"e"+Dn(this.e,e):this.layer===1?Dn(this.m,e)+"e"+Dn(this.e,e):this.layer<=Gl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Dn(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Dn(this.mag,e)}abs(){return _e(this.sign===0?0:1,this.layer,this.mag)}neg(){return _e(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?b.dZero:this.layer===0?ve(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?b.dZero:this.layer===0?ve(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?b.dZero:this.layer===0?ve(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?b.dZero:this.layer===0?ve(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=N(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return _e(0,0,0);let n,i;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(b.cmpabs(this,t)>0?(n=this,i=t):(n=t,i=this),n.layer===0&&i.layer===0)return b.fromNumber(n.sign*n.mag+i.sign*i.mag);const a=n.layer*Math.sign(n.mag),s=i.layer*Math.sign(i.mag);if(a-s>=2)return n;if(a===0&&s===-1){if(Math.abs(i.mag-Math.log10(n.mag))>ul)return n;{const u=Math.pow(10,Math.log10(n.mag)-i.mag),c=i.sign+n.sign*u;return ve(Math.sign(c),1,i.mag+Math.log10(Math.abs(c)))}}if(a===1&&s===0){if(Math.abs(n.mag-Math.log10(i.mag))>ul)return n;{const u=Math.pow(10,n.mag-Math.log10(i.mag)),c=i.sign+n.sign*u;return ve(Math.sign(c),1,Math.log10(i.mag)+Math.log10(Math.abs(c)))}}if(Math.abs(n.mag-i.mag)>ul)return n;{const u=Math.pow(10,n.mag-i.mag),c=i.sign+n.sign*u;return ve(Math.sign(c),1,i.mag+Math.log10(Math.abs(c)))}}plus(e){return this.add(e)}sub(e){return this.add(N(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=N(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return _e(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return _e(this.sign*t.sign,0,1);let n,i;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,i=t):(n=t,i=this),n.layer===0&&i.layer===0)return b.fromNumber(n.sign*i.sign*n.mag*i.mag);if(n.layer>=3||n.layer-i.layer>=2)return ve(n.sign*i.sign,n.layer,n.mag);if(n.layer===1&&i.layer===0)return ve(n.sign*i.sign,1,n.mag+Math.log10(i.mag));if(n.layer===1&&i.layer===1)return ve(n.sign*i.sign,1,n.mag+i.mag);if(n.layer===2&&i.layer===1){const a=ve(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(ve(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return ve(n.sign*i.sign,a.layer+1,a.sign*a.mag)}if(n.layer===2&&i.layer===2){const a=ve(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(ve(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return ve(n.sign*i.sign,a.layer+1,a.sign*a.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=N(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?b.dNaN:this.layer===0?ve(this.sign,0,1/this.mag):ve(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=N(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=N(e),n=this.mag>0?this.layer:-this.layer,i=t.mag>0?t.layer:-t.layer;return n>i?1:n<i?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=N(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=N(e);return this.lt(t)?t:this}min(e){const t=N(e);return this.gt(t)?t:this}maxabs(e){const t=N(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=N(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=N(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=N(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let i=this.mag,a=n.mag;return this.layer>n.layer&&(a=cl(a)),this.layer<n.layer&&(i=cl(i)),Math.abs(i-a)<=t*Math.max(Math.abs(i),Math.abs(a))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=N(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=N(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=N(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=N(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(b.dZero)?b.dZero:this.log10()}absLog10(){return this.sign===0?b.dNaN:this.layer>0?ve(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):ve(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?b.dNaN:this.layer>0?ve(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):ve(this.sign,0,Math.log10(this.mag))}log(e){return e=N(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?b.dNaN:this.layer===0&&e.layer===0?ve(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):b.div(this.log10(),e.log10())}log2(){return this.sign<=0?b.dNaN:this.layer===0?ve(this.sign,0,Math.log2(this.mag)):this.layer===1?ve(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?ve(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):ve(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?b.dNaN:this.layer===0?ve(this.sign,0,Math.log(this.mag)):this.layer===1?ve(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?ve(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):ve(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=N(e),n=this,i=t;if(n.sign===0)return i.eq(0)?_e(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(i.sign===0)return _e(1,0,1);if(i.sign===1&&i.layer===0&&i.mag===1)return n;const a=n.absLog10().mul(i).pow10();return this.sign===-1?Math.abs(i.toNumber()%2)%2===1?a.neg():Math.abs(i.toNumber()%2)%2===0?a:b.dNaN:a}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return b.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return ve(1,0,t);if(e.sign===0)return b.dOne;e=_e(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?ve(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?ve(-e.sign,e.layer+1,-e.mag):b.dOne}pow_base(e){return N(e).pow(this)}root(e){const t=N(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?b.exp(b.mul(this,b.ln(this).sub(1))):b.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(_e(1,0,24)))return b.fromNumber(jr(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let i=e,a=12*i,s=1/a,u=t+s;if(u===t||(t=u,i=i*n,a=360*i,s=1/a,u=t-s,u===t))return b.exp(t);t=u,i=i*n,a=1260*i;let c=1/a;return t=t+c,i=i*n,a=1680*i,c=1/a,t=t-c,b.exp(t)}else return this.layer===1?b.exp(b.mul(this,b.ln(this).sub(1))):b.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?b.dOne:this.layer===0&&this.mag<=709.7?b.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?ve(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?ve(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):ve(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return b.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return ve(1,2,Math.log10(this.mag)-.3010299956639812);{const e=b.div(_e(this.sign,this.layer-1,this.mag),_e(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=_e(1,0,1)){if(e===1)return b.pow(this,t);if(e===0)return new b(t);if(this.eq(b.dOne))return b.dOne;if(this.eq(-1))return b.pow(this,t);if(e===Number.POSITIVE_INFINITY){const a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return b.fromNumber(Math.E);const s=b.ln(this).neg();return s.lambertw().div(s)}else return a>1.444667861009766?b.fromNumber(Number.POSITIVE_INFINITY):b.dNaN}if(this.eq(b.dZero)){let a=Math.abs((e+1)%2);return a>1&&(a=2-a),b.fromNumber(a)}if(e<0)return b.iteratedlog(t,this,-e);t=N(t);const n=e;e=Math.trunc(e);const i=n-e;if(this.gt(b.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let a=0;a<e;++a){const s=t;if(t=this.pow(t),s.eq(t))return t}if(i!=0){const a=this.pow(t);return t.mul(1-i).add(a.mul(i))}return t}i!==0&&(t.eq(b.dOne)?this.gt(10)?t=this.pow(i):(t=b.fromNumber(b.tetrate_critical(this.toNumber(),i)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let a=0;a<e;++a){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return _e(t.sign,t.layer+(e-a-1),t.mag);if(a>1e4)return t}return t}iteratedexp(e=2,t=_e(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return b.tetrate(e,-t,this);e=N(e);let n=b.fromDecimal(this);const i=t;t=Math.trunc(t);const a=i-t;if(n.layer-e.layer>3){const s=Math.min(t,n.layer-e.layer-3);t-=s,n.layer-=s}for(let s=0;s<t;++s){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(s>1e4)return n}return a>0&&a<1&&(e.eq(10)?n=n.layeradd10(-a):n=n.layeradd(-a,e)),n}slog(e=10,t=100){let n=.001,i=!1,a=!1,s=this.slog_internal(e).toNumber();for(let u=1;u<t;++u){const d=new b(e).tetrate(s).gt(this);if(u>1&&a!=d&&(i=!0),a=d,i?n/=2:n*=2,n=Math.abs(n)*(d?-1:1),s+=n,n===0)break}return b.fromNumber(s)}slog_internal(e=10){if(e=N(e),e.lte(b.dZero)||e.eq(b.dOne))return b.dNaN;if(e.lt(b.dOne))return this.eq(b.dOne)?b.dZero:this.eq(b.dZero)?b.dNegOne:b.dNaN;if(this.mag<0||this.eq(b.dZero))return b.dNegOne;let t=0,n=b.fromDecimal(this);if(n.layer-e.layer>3){const i=n.layer-e.layer-3;t+=i,n.layer-=i}for(let i=0;i<100;++i)if(n.lt(b.dZero))n=b.pow(e,n),t-=1;else{if(n.lte(b.dOne))return b.fromNumber(t+b.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=b.log(n,e)}return b.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:b.critical_section(e,t,Or)}static tetrate_critical(e,t){return b.critical_section(e,t,Rr)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let i=0,a=0;for(let u=0;u<Wn.length;++u)if(Wn[u]==e){i=n[u][Math.floor(t)],a=n[u][Math.ceil(t)];break}else if(Wn[u]<e&&Wn[u+1]>e){const c=(e-Wn[u])/(Wn[u+1]-Wn[u]);i=n[u][Math.floor(t)]*(1-c)+n[u+1][Math.floor(t)]*c,a=n[u][Math.ceil(t)]*(1-c)+n[u+1][Math.ceil(t)]*c;break}const s=t-Math.floor(t);return i<=0||a<=0?i*(1-s)+a*s:Math.pow(e,Math.log(i)/Math.log(e)*(1-s)+Math.log(a)/Math.log(e)*s)}layeradd10(e){e=b.fromValue_noAlloc(e).toNumber();const t=b.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let i=0;i<100;++i){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const i=this.slog(t).toNumber()+e;return i>=0?b.tetrate(t,i):Number.isFinite(i)?i>=-1?b.log(b.tetrate(t,i+1),t):b.log(b.log(b.tetrate(t,i+2),t),t):b.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return b.fromNumber(Ul(this.toNumber()));if(this.layer===0)return b.fromNumber(Ul(this.sign*this.mag));if(this.layer===1)return Xl(this);if(this.layer===2)return Xl(this);if(this.layer>=3)return _e(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return _e(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=_e(1,0,1)){t=N(t);const n=e;e=Math.trunc(e);const i=n-e;i!==0&&(t.eq(b.dOne)?(++e,t=b.fromNumber(i)):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let a=0;a<e;++a){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(a>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?b.fromNumber(Math.sin(this.sign*this.mag)):_e(0,0,0)}cos(){return this.mag<0?b.dOne:this.layer===0?b.fromNumber(Math.cos(this.sign*this.mag)):_e(0,0,0)}tan(){return this.mag<0?this:this.layer===0?b.fromNumber(Math.tan(this.sign*this.mag)):_e(0,0,0)}asin(){return this.mag<0?this:this.layer===0?b.fromNumber(Math.asin(this.sign*this.mag)):_e(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?b.fromNumber(Math.acos(this.toNumber())):this.layer===0?b.fromNumber(Math.acos(this.sign*this.mag)):_e(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?b.fromNumber(Math.atan(this.sign*this.mag)):b.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return b.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return b.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?_e(Number.NaN,Number.NaN,Number.NaN):b.ln(this.add(1).div(b.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(b.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let l=b;l.fromStringCache=new Pr(Ar);l.dZero=_e(0,0,0);l.dOne=_e(1,0,1);l.dNegOne=_e(-1,0,1);l.dTwo=_e(1,0,2);l.dTen=_e(1,0,10);l.dNaN=_e(Number.NaN,Number.NaN,Number.NaN);l.dInf=_e(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);l.dNegInf=_e(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);l.dNumberMax=ve(1,0,Number.MAX_VALUE);l.dNumberMin=ve(1,0,Number.MIN_VALUE);N=l.fromValue_noAlloc;ve=l.fromComponents;_e=l.fromComponents_noNormalize;l.fromMantissaExponent;l.fromMantissaExponent_noNormalize;const Br=new l(1);function Ci(e,t,n=!0){let i=l.log10(e).floor(),a=l.div(e,l.pow(10,i));a.toStringWithDecimalPlaces(t)==="10"&&(a=Br,i=i.add(1));const s=i.gte(1e9)?cn(i,Math.max(Math.max(t,3),Xe.defaultDecimalsShown)):i.gte(1e4)?Hi(i,0):i.toStringWithDecimalPlaces(0);return n?a.toStringWithDecimalPlaces(t)+"e"+s:"e"+s}function Hi(e,t){if(e==null)return"NaN";if(e=new l(e),e.mag<.001)return 0 .toFixed(t);const i=e.toStringWithDecimalPlaces(t).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length==1?i[0]:i[0]+"."+i[1]}function fa(e,t){return e==null?"NaN":(e=new l(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),Xe.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const Vr=new l("eeee1000"),zr=new l("e100000"),Hl=new l("e1000"),va=new l(1e9),Gr=new l(1e6),Ur=new l(1e3),Xr=new l(.98),Hr=new l(.001),ga=new l(0);function cn(e,t,n){if(t==null&&(t=Xe.defaultDecimalsShown),n=n!=null?n:Xe.defaultShowSmall,e=new l(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+cn(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(Vr)){const i=e.slog();return i.gte(Gr)?"F"+cn(i.floor()):l.pow(10,i.sub(i.floor())).toStringWithDecimalPlaces(3)+"F"+Hi(i.floor(),0)}else{if(e.gte(zr))return Ci(e,0,!1);if(e.gte(Hl))return Ci(e,0);if(e.gte(va))return Ci(e,t);if(e.gte(Ur))return Hi(e,0);if(e.gte(Hr)||!n)return fa(e,t);if(e.eq(ga))return 0 .toFixed(t)}return e=ba(e),e.lt(Hl)?Ci(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):cn(e,t)+"\u207B\xB9"}function Lt(e){return e=new l(e),e.sign<0?"-"+Lt(e.neg()):e.gte(va)||e.lte(Xr)&&!e.eq(ga)?cn(e):cn(e,0)}function ha(e){return l.lt(e,0)?"-"+ha(l.neg(e)):l.gt(e,2**51)?cn(l.div(e,31536e3))+"y":(e=new l(e).toNumber(),e<60?cn(e)+"s":e<3600?Lt(Math.floor(e/60))+"m "+cn(e%60)+"s":e<86400?Lt(Math.floor(e/3600))+"h "+Lt(Math.floor(e/60)%60)+"m "+Lt(e%60)+"s":e<31536e3?Lt(Math.floor(e/84600)%365)+"d "+Lt(Math.floor(e/3600)%24)+"h "+Lt(Math.floor(e/60)%60)+"m":Lt(Math.floor(e/31536e3))+"y "+Lt(Math.floor(e/84600)%365)+"d "+Lt(Math.floor(e/3600)%24)+"h")}function Jr(e,t,n){e=new l(e);let i=e.toStringWithDecimalPlaces(t);return new l(i).gte(n)&&(i=l.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),i}function Wr(e,t){return cn(e,t,!0)}function ba(e){let t=l.log10(e).ceil();const n=l.div(e,l.pow(10,t));return t=t.neg(),e=new l(10).pow(t).times(n),e}var Qr=Object.freeze(Object.defineProperty({__proto__:null,default:l,exponentialFormat:Ci,commaFormat:Hi,regularFormat:fa,format:cn,formatWhole:Lt,formatTime:ha,toPlaces:Jr,formatSmall:Wr,invertOOM:ba},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Zr,commaFormat:Kr,regularFormat:Yr,format:Oe,formatWhole:ge,formatTime:Vn,toPlaces:es,formatSmall:Ei,invertOOM:ts}=Qr;window.Decimal=l;window.exponentialFormat=Zr;window.commaFormat=Kr;window.regularFormat=Yr;window.format=Oe;window.formatWhole=ge;window.formatTime=Vn;window.toPlaces=es;window.formatSmall=Ei;window.invertOOM=ts;function un(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function gl(e){return typeof e=="function"}var xe=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(xe||{});const Ni=Symbol("DoNotCache");function q(e,t){const n=e[t];gl(n)&&n.length===0&&!n[Ni]?e[t]=y(n.bind(e)):gl(n)&&(e[t]=n.bind(e),e[t][Ni]=!0)}function Ke(e){return gl(e)&&!e[Ni]&&(e=y(e)),e}const nt=Symbol("Component"),Be=Symbol("GatherProps");let ns=0;function mn(e="feature-"){return e+ns++}var De=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(De||{});function ht(e){const t=o(e);return t!==2&&t!==!1}function Pn(e){return o(e)===1}function k(e){return e[Ni]=!0,e}function tt(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}const Qn={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var Nl=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(Nl||{}),hi={classic:Qn,paper:{...Qn,variables:{...Qn.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Qn,variables:{...Qn.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Qn,variables:{...Qn.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const zt=da();"fonts"in document&&(document.fonts.onloadingdone=()=>zt.emit("fontsLoaded"));var is=Object.freeze(Object.defineProperty({__proto__:null,globalBus:zt},Symbol.toStringTag,{value:"Module"}));const ls=Ii({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});var G=window.player=ls;function ya(e){return JSON.stringify(e,(t,n)=>o(n))}function wa(e={}){return Object.assign({id:`${Xe.id}-0`,name:"Default Save",tabs:Xe.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:Xe.id,modVersion:Xe.versionNumber,layers:{}},e)}function tn(e){const t=Ln.compressToUTF16(ya(e!=null?e:G));return localStorage.setItem((e!=null?e:G).id,t),t}async function as(){ss();try{let e=localStorage.getItem(Fe.active);if(e==null){await Kn(pi());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ln.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==Xe.id){await Kn(pi());return}t.id=Fe.active,await Kn(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Kn(pi())}}function pi(){const e=Bi(),t=wa({id:e});return tn(t),Fe.saves.push(e),t}function Bi(){let e,t=0;do e=`${Xe.id}-${t++}`;while(localStorage.getItem(e)!=null);return e}const xl=X(!1);async function Kn(e){console.info("Loading save",e),xl.value=!0;const{layers:t,removeLayer:n,addLayer:i}=await Xi(()=>Promise.resolve().then(function(){return Ps}),void 0),{fixOldSave:a,getInitialLayers:s}=await Xi(()=>Promise.resolve().then(function(){return Xm}),void 0);for(const u in t){const c=t[u];c&&n(c)}s(e).forEach(u=>i(u,e)),e=wa(e),e.offlineProd&&e.time!=null&&e.time&&e.devSpeed!==0&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=Math.min(e.offlineTime+(Date.now()-e.time)/1e3,Xe.offlineLimit*3600)),e.time=Date.now(),e.modVersion!==Xe.versionNumber&&(a(e.modVersion,e),e.modVersion=Xe.versionNumber),Object.assign(G,e),Fe.active=G.id,zt.emit("onLoad")}setInterval(()=>{G.autosave&&tn()},1e3);window.onbeforeunload=()=>{G.autosave&&tn()};window.save=tn;const rs=window.hardReset=async()=>{await Kn(pi())};window.deleteLowerSaves=()=>{const e=Object.values(Fe.saves).indexOf(G.id)+1;Object.values(Fe.saves).slice(e).forEach(t=>localStorage.removeItem(t)),Fe.saves=Fe.saves.slice(0,e)};const xi=Ii({active:"",saves:[],showTPS:!0,theme:Nl.Nordic,unthrottled:!1,alignUnits:!1});et(xi,e=>{const t=Ln.compressToUTF16(JSON.stringify(e));localStorage.setItem(Xe.id,t)},{deep:!0});var Fe=window.settings=xi;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:Nl.Nordic,alignUnits:!1};zt.emit("loadSettings",e),Object.assign(xi,e),rs()};function ss(){try{let e=localStorage.getItem(Xe.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ln.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(xi,t)}zt.emit("loadSettings",xi)}catch{}}const _a=Ii([]);function os(e){_a.push(e)}const us=Ii([]),cs=Ii([]),ds={class:"table"},Ki=Z({__name:"Column",setup(e){const t=y(()=>hi[Fe.theme].mergeAdjacent);return(n,i)=>(h(),x("div",ds,[v("div",{class:$e(["col",{mergeAdjacent:o(t)}])},[Zt(n.$slots,"default")],2)]))}}),ps={class:"table"},$i=Z({__name:"Row",setup(e){const t=y(()=>hi[Fe.theme].mergeAdjacent);return(n,i)=>(h(),x("div",ps,[v("div",{class:$e(["row",{mergeAdjacent:o(t)}])},[Zt(n.$slots,"default")],2)]))}});function Yi(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!sa(e)}function he(e,t="span"){return typeof e=="function"?Z({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),Z({template:e})):Z({render:()=>({})}):e}function Ze(e){if(fn(e))return typeof e=="function"?e():he(e);const t=e[nt];return r(t,e[Be](),null)}function Vi(...e){let t;return r($i,null,Yi(t=e.map(Ze))?t:{default:()=>[t]})}function Mi(...e){let t;return r(Ki,null,Yi(t=e.map(Ze))?t:{default:()=>[t]})}function st(e){if(fn(e))return typeof e=="function"?e():typeof e=="string"?r(F,null,[e]):r(e,null,null);const t=e[nt];return r(t,e[Be](),null)}function hl(...e){let t;return r($i,null,Yi(t=e.map(st))?t:{default:()=>[t]})}function ii(...e){let t;return r(Ki,null,Yi(t=e.map(st))?t:{default:()=>[t]})}function bl(e,t){return e.reduce((n,i)=>r(F,null,[n,t,i]))}function fn(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[Ni]===!0}function Ca(e,t){const n=X(null),i=X(void 0);function a(c){n.value||(n.value=setInterval(u,250)),i.value=c}function s(){n.value&&(clearInterval(n.value),n.value=null)}function u(){t&&t.value?t.value():e&&e.value&&e.value(i.value)}return Cl(s),{start:a,stop:s,handleHolding:u}}function li(e,t){const n=y(()=>e.filter(i=>ht(i.visibility)&&t(i)));return{firstFeature:y(()=>n.value[0]),collapsedContent:k(()=>Mi(...n.value.slice(1))),hasCollapsedContent:y(()=>n.value.length>1)}}function ni(e,t="div"){const n=St();return Vt(()=>{n.value=he(rt(e),t)}),n}function Tn(e,t="div"){const n=St(null);return Vt(()=>{const i=rt(e);n.value=i==""||i==null?null:he(i,t)}),n}function rt(e){return o(o(e))}function j(...e){return e.includes(Object)||e.push(Object),e}function Sa(e){const t=X(!1),n=e[Be].bind(e);return e[Be]=()=>({...n(),onPointerenter:()=>t.value=!0,onPointerleave:()=>t.value=!1}),t}var me=(e,t)=>{const n=e.__vccOpts||e;for(const[i,a]of t)n[i]=a;return n};const ms=Z({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var f;const n=X({}),i=new ResizeObserver(c),a=X(null);vi(()=>{const g=a.value;g!=null&&i.observe(g)});let s=!0,u=X((f=a.value)==null?void 0:f.getBoundingClientRect());function c(){s&&(s=!1,Bt(()=>{var g;u.value=(g=a.value)==null?void 0:g.getBoundingClientRect(),Object.values(n.value).filter(w=>w).forEach(w=>w.rect=w.element.getBoundingClientRect()),t("updateNodes",n.value),s=!0}))}zt.on("fontsLoaded",c);const d={attributes:!1,childList:!0,subtree:!1};Li($l,(g,w)=>{const _=new MutationObserver(()=>p(g));_.observe(w,d),n.value[g]={element:w,observer:_,rect:w.getBoundingClientRect()},c()}),Li(Ml,g=>{var w;(w=n.value[g])==null||w.observer.disconnect(),n.value[g]=void 0,c()}),Li(Pl,n),Li(Tl,u);function p(g){const w=n.value[g];w!=null&&(w.rect=w.element.getBoundingClientRect(),t("updateNodes",n.value))}return(g,w)=>(h(),x(F,null,[Zt(g.$slots,"default",{},void 0,!0),v("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}});var ka=me(ms,[["__scopeId","data-v-2b1dc1bc"]]);const fs=["onPointerdown"],vs={class:"modal-wrapper"},gs={class:"modal-container"},hs={class:"modal-header"},bs=m(" default header "),ys={class:"modal-body"},ws=m(" default body "),_s={class:"modal-footer"},Cs=v("div",{class:"modal-default-flex-grow"},null,-1),zn=Z({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const a=ot(e),s=y(()=>o(a.modelValue)||c.value);function u(){n("update:modelValue",!1)}const c=X(!1),d=X(null),p=y(()=>{var f,g;return(g=(f=d.value)==null?void 0:f.nodes)!=null?g:null});return t({isOpen:s,nodes:p}),(f,g)=>(h(),U(oa,{to:"#modal-root"},[r(Zi,{name:"modal",onBeforeEnter:g[0]||(g[0]=w=>c.value=!0),onAfterLeave:g[1]||(g[1]=w=>c.value=!1)},{default:re(()=>[dn(v("div",Qt({class:"modal-mask",onPointerdown:ti(u,["self"])},f.$attrs),[v("div",vs,[v("div",gs,[v("div",hs,[Zt(f.$slots,"header",{shown:o(s)},()=>[bs])]),v("div",ys,[r(ka,{ref_key:"contextRef",ref:d},{default:re(()=>[Zt(f.$slots,"body",{shown:o(s)},()=>[ws])]),_:3},512)]),v("div",_s,[Zt(f.$slots,"footer",{shown:o(s)},()=>[v("div",{class:"modal-default-footer"},[Cs,v("button",{class:"button modal-default-button",onClick:u}," Close ")])])])])])],16,fs),[[Nn,e.modelValue]])]),_:3})]))}}),An=Symbol("ProxyState");function pt(e,t={}){const n=t;let i=!1;function a(){return i||(Object.assign(n,e(n)),i=!0),n}return new Proxy(n,{get(s,u){if(u===An)return a();const c=a()[u];return c!=null&&typeof c=="object"&&fi in c?c[fi]:c},set(s,u,c){return a()[u]=c,!0},has(s,u){return u===An?!0:Reflect.has(a(),u)},ownKeys(){return Reflect.ownKeys(a())},getOwnPropertyDescriptor(s,u){return i||(Object.assign(n,e(n)),i=!0),Object.getOwnPropertyDescriptor(s,u)}})}var Pt=window.state=Sl({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const jn=Symbol("PersistentState"),mi=Symbol("DefaultValue"),Ji=Symbol("StackTrace"),Wi=Symbol("Deleted"),fi=Symbol("NonPersistent"),Yn=Symbol("SaveDataPath"),yl=Symbol("SkipPersistence");function Ss(){var e,t;return(t=(e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(n=>n.trim()).join(`
`))!=null?t:""}function Jl(e,t){var n;if(l.isNaN(t))throw Pt.hasNaN||(G.autosave=!1,Pt.hasNaN=!0,Pt.NaNPath=e[Yn],Pt.NaNPersistent=e),console.error("Attempted to save NaN value to",(n=e[Yn])==null?void 0:n.join("."),e),new Error("Attempted to set NaN value. See above for details");e[jn].value=t}function H(e,t=!0){const n=Et(e)?e:X(e);Et(e)&&(e=e.value);const i=y({get(){return n.value},set(s){t?Jl(a,s):a[jn].value=s}});i[mi]=e;const a={get value(){return n.value},set value(s){t?Jl(a,s):a[jn].value=s},__v_isRef:!0,[jn]:n,[mi]:e,[Ji]:Ss(),[Wi]:!1,[fi]:i,[Yn]:void 0};return Jt.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",a,`
Created at:
`+a[Ji]):ei[Jt[Jt.length-1]].add(a),a}function ks(e){return e!=null&&typeof e=="object"&&jn in e}function Ut(e){return!(An in e)&&fi in e?e[fi]:new Proxy(e,{get(t,n){if(n!==jn)return n===yl?!0:t[n]},set(t,n,i){return t[n]=i,!0},has(t,n){return n===jn?!1:n==yl?!0:Reflect.has(t,n)}})}function Ns(e){Jt.length===0?console.warn("Deleting a persistent ref outside of a layer. Ignoring...",e):ei[Jt[Jt.length-1]].delete(e),e[Wi]=!0}zt.on("addLayer",(e,t)=>{const n=[],i=(a,s=[])=>{let u=!1;return Object.keys(a).forEach(c=>{let d=a[c];if(d!=null&&typeof d=="object"){if(d[yl]===!0)return;if(An in d&&(d=d[An]),ks(d)){if(u=!0,d[Wi]){console.warn("Deleted persistent ref present in returned object. Ignoring...",d,`
Created at:
`+d[Ji]);return}ei[e.id].delete(d);const p=[e.id,...s,c];d[Yn]!=null&&JSON.stringify(p)!==JSON.stringify(d[Yn])&&console.error(`Persistent ref is being saved to \`${p.join(".")}\` when it's already present at \`${d[Yn].join(".")}\`. This can cause unexpected behavior when loading saves between updates.`,d),d[Yn]=p;const f=s.reduce((w,_)=>(_ in w||(w[_]={}),w[_]),t),g=f[c];f[c]=d[jn],Ga(f)?g!=null?f[c]=g:f[c]=d[mi]:g!=null?f[c].value=g:f[c].value=d[mi]}else!(d instanceof l)&&!Et(d)&&!n.includes(d)&&(typeof d.type=="symbol"&&n.push(d),i(d,[...s,c])&&(yn(d)&&!yn(a)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",An in a?a[An]:a,c):u=!0))}}),u};i(e[An]),ei[e.id].forEach(a=>{a[Wi]||console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,a,`
Created at:
`+a[Ji])}),ei[e.id].clear()});const $l=Symbol("RegisterNode"),Ml=Symbol("UnregisterNode"),Pl=Symbol("Nodes"),Tl=Symbol("Bounds"),Xt=Sl({});window.layers=Xt;const ei={},Jt=[];function In(e,t){return pt(()=>{const n={},i=n.emitter=da();if(n.on=i.on.bind(i),n.emit=i.emit.bind(i),n.nodes=X({}),n.id=e,Jt.push(e),ei[e]=new Set,n.minimized=H(!1,!1),Object.assign(n,t.call(n)),Jt[Jt.length-1]==null||Jt[Jt.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${Jt}
Trying to pop ${n.id}`;Jt.pop(),q(n,"color"),q(n,"display"),q(n,"classes"),q(n,"style"),q(n,"name"),tt(n,"name",n.id),q(n,"minWidth"),tt(n,"minWidth",600),q(n,"minimizable"),tt(n,"minimizable",!0),q(n,"minimizedDisplay");const a=n.style;return n.style=y(()=>{var u,c;let s=o(n.minWidth);return(typeof s=="number"||!Number.isNaN(parseInt(s)))&&(s=s+"px"),[(u=o(a))!=null?u:"",(c=n.minimized)!=null&&c.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:s,flexBasis:s,margin:""}]}),n})}function wn(e,t){if(console.info("Adding layer",e.id),Xt[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,Xt[e.id]);return}tt(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),Xt[e.id]=e,zt.emit("addLayer",e,t.layers[e.id])}function xs(e){return Xt[e]}function Na(e){console.info("Removing layer",e.id),zt.emit("removeLayer",e),Xt[e.id]=void 0}function $s(e){Na(e),wn(e,G)}function Ms(e){const t=X(!1);return{openModal:()=>t.value=!0,modal:k(()=>r(zn,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>r("h2",null,[o(e.name)]),body:o(e.display)}))}}zt.on("update",function(t){Object.values(Xt).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(Xt).forEach(n=>{n==null||n.emit("update",t)}),Object.values(Xt).forEach(n=>{n==null||n.emit("postUpdate",t)})});var Ps=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:$l,UnregisterNodeInjectionKey:Ml,NodesInjectionKey:Pl,BoundsInjectionKey:Tl,layers:Xt,persistentRefs:ei,addingLayers:Jt,createLayer:In,addLayer:wn,getLayer:xs,removeLayer:Na,reloadLayer:$s,setupLayerModal:Ms},Symbol.toStringTag,{value:"Module"}));const Ts=Z({components:{Context:ka},props:{index:{type:Number,required:!0},display:{type:j(Object,String,Function),required:!0},minimizedDisplay:j(Object,String,Function),minimized:{type:Object,required:!0},name:{type:j(String),required:!0},color:j(String),minimizable:j(Boolean),nodes:{type:Object,required:!0}},emits:["setMinimized"],setup(e){const{display:t,index:n,minimized:i,minimizedDisplay:a}=ot(e),s=ni(t),u=Tn(a),c=y(()=>Xe.allowGoBack&&n.value>0&&!rt(i));function d(){G.tabs.splice(o(e.index),1/0)}function p(f){e.nodes.value=f}return{component:s,minimizedComponent:u,showGoBack:c,updateNodes:p,unref:o,goBack:d}}}),Is={key:1};function Es(e,t,n,i,a,s){const u=qt("Context");return h(),x("div",{class:"layer-container",style:qe({"--layer-color":e.unref(e.color)})},[e.showGoBack?(h(),x("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...c)=>e.goBack&&e.goBack(...c))},"\u274C")):B("",!0),e.unref(e.minimized)?(h(),x("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=c=>e.$emit("setMinimized",!1))},[e.minimizedComponent?(h(),U(Me(e.minimizedComponent),{key:0})):(h(),x("div",Is,ee(e.unref(e.name)),1))])):(h(),x("div",{key:2,class:$e(["layer-tab",{showGoBack:e.showGoBack}])},[r(u,{onUpdateNodes:e.updateNodes},{default:re(()=>[(h(),U(Me(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(h(),x("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=c=>e.$emit("setMinimized",!0))}," \u25BC ")):B("",!0)],4)}var Fs=me(Ts,[["render",Es],["__scopeId","data-v-72dd78b1"]]);const xa=e=>(ln("data-v-4b4bda40"),e=e(),an(),e),qs=xa(()=>v("h2",null,"Changelog",-1)),Ds=xa(()=>v("details",{open:""},[v("summary",null,[m("v0.0 Initial Commit - "),v("time",null,"2021-09-04")]),m(" This is the first release :D "),v("ul",null,[v("li",{class:"feature"},"Did everything"),v("li",{class:"fix"},"Had some fun"),v("li",{class:"breaking"},"Removed everything"),v("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),As=Z({__name:"Changelog",setup(e,{expose:t}){const n=X(!1);return t({open(){n.value=!0}}),(i,a)=>(h(),U(zn,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s)},{header:re(()=>[qs]),body:re(()=>[Ds]),_:1},8,["modelValue"]))}});var Ls=me(As,[["__scopeId","data-v-4b4bda40"]]),Rs=Z({props:{element:Object,display:{type:j(Object,String,Function),required:!0},style:j(Object,String,Array),classes:j(Object),direction:j(String),xoffset:j(String),yoffset:j(String),pinned:Object},setup(e){const{element:t,display:n,pinned:i}=ot(e),a=X(!1),s=y(()=>(rt(i)||a.value)&&u.value),u=Tn(n),c=St(he(k(()=>{const f=rt(t);return f==null?"":st(f)})));function d(f){const g=i;f.shiftKey&&g&&(g.value=!g.value,f.stopPropagation(),f.preventDefault())}const p=y(()=>rt(i)&&hi[Fe.theme].showPin);return{Direction:xe,isHovered:a,isShown:s,comp:u,elementComp:c,unref:o,togglePinned:d,showPin:p}}});const Os={key:0,class:"material-icons pinned"};function js(e,t,n,i,a,s){return h(),x("div",{class:$e(["tooltip-container",{shown:e.isShown,...e.unref(e.classes)}]),onMouseenter:t[0]||(t[0]=u=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=u=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...u)=>e.togglePinned&&e.togglePinned(...u))},[Zt(e.$slots,"default",{},void 0,!0),e.elementComp?(h(),U(Me(e.elementComp),{key:0})):B("",!0),r(Zi,{name:"fade"},{default:re(()=>{var u;return[e.isShown?(h(),x("div",{key:0,class:$e(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:qe([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(u=e.unref(e.style))!=null?u:{}])},[e.showPin?(h(),x("span",Os,"push_pin")):B("",!0),e.comp?(h(),U(Me(e.comp),{key:1})):B("",!0)],6)):B("",!0)]}),_:1})],34)}var lt=me(Rs,[["render",js],["__scopeId","data-v-be7a60de"]]);const ai=e=>(ln("data-v-5d3cb6f4"),e=e(),an(),e),Bs={class:"info-modal-header"},Vs=["src","alt"],zs={class:"info-modal-title"},Gs={key:0},Us={key:0},Xs={key:0},Hs=ai(()=>v("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Js=ai(()=>v("br",null,null,-1)),Ws=ai(()=>v("br",null,null,-1)),Qs=["href"],Zs=ai(()=>v("span",{class:"material-icons info-modal-discord"},"discord",-1)),Ks=ai(()=>v("div",null,[v("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link",target:"_blank"},[v("span",{class:"material-icons info-modal-discord"},"discord"),m(" The Paper Pilot Community ")])],-1)),Ys=ai(()=>v("div",null,[v("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[v("span",{class:"material-icons info-modal-discord"},"discord"),m(" The Modding Tree ")])],-1)),eo=ai(()=>v("br",null,null,-1));var to=Z({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:i,logo:a,author:s,discordName:u,discordLink:c,versionNumber:d,versionTitle:p}=Xe,f=ot(n),g=X(!1),w=y(()=>Vn(G.timePlayed)),_=y(()=>he(k(()=>r(F,null,[us.map(Ze)]))));t({open(){g.value=!0}});function C(){var M;(M=o(f.changelog))==null||M.open()}return(M,Y)=>(h(),U(zn,{modelValue:g.value,"onUpdate:modelValue":Y[0]||(Y[0]=ae=>g.value=ae)},{header:re(()=>[v("div",Bs,[o(a)?(h(),x("img",{key:0,class:"info-modal-logo",src:o(a),alt:o(i)},null,8,Vs)):B("",!0),v("div",zs,[v("h2",null,ee(o(i)),1),v("h4",null,[m(" v"+ee(o(d)),1),o(p)?(h(),x("span",Gs,": "+ee(o(p)),1)):B("",!0)])])])]),body:re(({shown:ae})=>[ae?(h(),x("div",Us,[o(s)?(h(),x("div",Xs,"By "+ee(o(s)),1)):B("",!0),Hs,Js,v("div",{class:"link",onClick:C},"Changelog"),Ws,v("div",null,[o(c)?(h(),x("a",{key:0,href:o(c),class:"info-modal-discord-link",target:"_blank"},[Zs,m(" "+ee(o(u)),1)],8,Qs)):B("",!0)]),Ks,Ys,eo,v("div",null,"Time Played: "+ee(o(w)),1),(h(),U(Me(o(_))))])):B("",!0)]),_:1},8,["modelValue"]))}});var no=me(to,[["__scopeId","data-v-5d3cb6f4"]]);const io={class:"field"},lo={key:0,class:"field-title"},Il=Z({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var u;const n=e,i=Tn(nn(n,"title"),"span"),a=X((u=n.options.find(c=>c.value===n.modelValue))!=null?u:null);et(nn(n,"modelValue"),c=>{var d;rt(a)!==c&&(a.value=(d=n.options.find(p=>p.value===c))!=null?d:null)});function s(c){t("update:modelValue",c.value)}return(c,d)=>(h(),x("div",io,[o(i)?(h(),x("span",lo,[(h(),U(Me(o(i))))])):B("",!0),r(o(Qa),{options:e.options,modelValue:a.value,"onUpdate:modelValue":[d[0]||(d[0]=p=>a.value=p),s],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const ao={class:"field"},ro=Z({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,i=y(()=>{var s;return he((s=o(n.title))!=null?s:"<span></span>","span")}),a=y({get(){return!!n.modelValue},set(s){t("update:modelValue",s)}});return(s,u)=>(h(),x("label",ao,[dn(v("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":u[0]||(u[0]=c=>Et(a)?a.value=c:null)},null,512),[[Ua,o(a)]]),(h(),U(Me(o(i))))]))}});var Cn=me(ro,[["__scopeId","data-v-11046116"]]);const so=["onClick"],oo=Z({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=X(!1),i=X(null);function a(){t("click"),i.value&&clearTimeout(i.value),n.value=!1,Bt(()=>{n.value=!0,i.value=setTimeout(()=>n.value=!1,500)})}return(s,u)=>(h(),x("button",{onClick:ti(a,["stop"]),class:$e(["feedback",{activated:n.value,left:e.left}])},[Zt(s.$slots,"default",{},void 0,!0)],10,so))}});var $a=me(oo,[["__scopeId","data-v-01a1b95c"]]);const uo={class:"header"},co=v("h2",null,"Settings",-1),po={class:"option-tabs"},mo={key:0},fo=m("Manually save"),vo={key:1};var go=Z({__name:"Options",setup(e,{expose:t}){const n=X(!1),i=X("behaviour");function a(ue){return ue==i.value}function s(ue){i.value=ue}t({isTab:a,setTab:s,save:tn,open(){n.value=!0}});const u=Object.keys(hi).map(ue=>({label:un(ue),value:ue})),c=y(()=>he(k(()=>r(F,null,[_a.map(Ze)])))),{showTPS:d,theme:p,unthrottled:f,alignUnits:g}=ot(Fe),{autosave:w,offlineProd:_}=ot(G),C=y({get(){return G.devSpeed===0},set(ue){G.devSpeed=ue?0:null}}),M=k(()=>r("span",{class:"option-title"},[m("Unthrottled"),r("desc",null,[m("Allow the game to run as fast as possible. Not battery friendly.")])])),Y=k(()=>r("span",{class:"option-title"},[m("Offline Production"),r(lt,{display:"Save-specific",direction:xe.Right},{default:()=>[m("*")]}),r("desc",null,[m("Simulate production that occurs while the game is closed.")])])),ae=k(()=>r("span",{class:"option-title"},[m("Autosave"),r(lt,{display:"Save-specific",direction:xe.Right},{default:()=>[m("*")]}),r("desc",null,[m("Automatically save the game every second or when the game is closed.")])])),T=k(()=>r("span",{class:"option-title"},[m("Pause game"),r(lt,{display:"Save-specific",direction:xe.Right},{default:()=>[m("*")]}),r("desc",null,[m("Stop everything from moving.")])])),P=k(()=>r("span",{class:"option-title"},[m("Theme"),r("desc",null,[m("How the game looks.")])])),J=k(()=>r("span",{class:"option-title"},[m("Show TPS"),r("desc",null,[m("Show TPS meter at the bottom-left corner of the page.")])])),se=k(()=>r("span",{class:"option-title"},[m("Align modifier units"),r("desc",null,[m("Align numbers to the beginning of the unit in modifier view.")])]));return(ue,V)=>(h(),U(zn,{modelValue:n.value,"onUpdate:modelValue":V[10]||(V[10]=W=>n.value=W)},{header:re(()=>[v("div",uo,[co,v("div",po,[v("button",{class:$e({selected:a("behaviour")}),onClick:V[0]||(V[0]=W=>s("behaviour"))},"Behaviour",2),v("button",{class:$e({selected:a("appearance")}),onClick:V[1]||(V[1]=W=>s("appearance"))},"Appearance",2)])])]),body:re(()=>[a("behaviour")?(h(),x("div",mo,[r(Cn,{title:o(M),modelValue:o(f),"onUpdate:modelValue":V[2]||(V[2]=W=>Et(f)?f.value=W:null)},null,8,["title","modelValue"]),o(Xe).enablePausing?(h(),U(Cn,{key:0,title:o(T),modelValue:o(C),"onUpdate:modelValue":V[3]||(V[3]=W=>Et(C)?C.value=W:null)},null,8,["title","modelValue"])):B("",!0),r(Cn,{title:o(Y),modelValue:o(_),"onUpdate:modelValue":V[4]||(V[4]=W=>Et(_)?_.value=W:null)},null,8,["title","modelValue"]),r(Cn,{title:o(ae),modelValue:o(w),"onUpdate:modelValue":V[5]||(V[5]=W=>Et(w)?w.value=W:null)},null,8,["title","modelValue"]),o(w)?B("",!0):(h(),U($a,{key:1,class:"button save-button",onClick:V[6]||(V[6]=W=>o(tn)())},{default:re(()=>[fo]),_:1}))])):B("",!0),a("appearance")?(h(),x("div",vo,[r(Il,{title:o(P),options:o(u),modelValue:o(p),"onUpdate:modelValue":V[7]||(V[7]=W=>Et(p)?p.value=W:null)},null,8,["title","options","modelValue"]),(h(),U(Me(o(c)))),r(Cn,{title:o(J),modelValue:o(d),"onUpdate:modelValue":V[8]||(V[8]=W=>Et(d)?d.value=W:null)},null,8,["title","modelValue"]),r(Cn,{title:o(se),modelValue:o(g),"onUpdate:modelValue":V[9]||(V[9]=W=>Et(g)?g.value=W:null)},null,8,["title","modelValue"])])):B("",!0)]),_:1},8,["modelValue"]))}});const ho=["onSubmit"],bo={class:"field"},yo={key:0,class:"field-title"},wo=["placeholder"],_o=Z({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,i=Tn(nn(n,"title"),"span"),a=St(null);vi(()=>{var d;(d=a.value)==null||d.focus()});const s=y({get(){var d;return(d=o(n.modelValue))!=null?d:""},set(d){t("update:modelValue",d)}});function u(){t("submit")}function c(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(d,p)=>(h(),x("form",{onSubmit:ti(u,["prevent"])},[v("div",bo,[o(i)?(h(),x("span",yo,[(h(),U(Me(o(i))))])):B("",!0),e.textArea?(h(),U(o(Ka),{key:1,modelValue:o(s),"onUpdate:modelValue":p[0]||(p[0]=f=>Et(s)?s.value=f:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:c,ref_key:"field",ref:a},null,8,["modelValue","placeholder","maxHeight"])):dn((h(),x("input",{key:2,type:"text","onUpdate:modelValue":p[1]||(p[1]=f=>Et(s)?s.value=f:null),placeholder:e.placeholder,class:$e({fullWidth:!e.title}),onBlur:c,ref_key:"field",ref:a},null,42,wo)),[[ua,o(s)]])])],40,ho))}});var Ma=me(_o,[["__scopeId","data-v-90bd4994"]]);const Co=Z({__name:"Node",props:{id:null},setup(e){const n=ot(e),i=Ui($l,()=>{}),a=Ui(Ml,()=>{}),s=St(null),u=y(()=>s.value&&s.value.parentElement);return et([u,n.id],([c,d],[p,f])=>{p&&a(o(f)),c&&i(d,c)}),Cl(()=>a(o(n.id))),(c,d)=>(h(),x("div",{class:"node",ref_key:"node",ref:s},null,512))}});var Gn=me(Co,[["__scopeId","data-v-a48cb382"]]);const So={},ko={class:"notif"};function No(e,t){return h(),x("div",ko,"!")}var xn=me(So,[["render",No],["__scopeId","data-v-66323fd4"]]);const Ne=Z({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(h(),x("div",{style:qe({width:e.width,height:e.height})},null,4))}});pa.registerPlugin(Ya);er.registerPlugin("batch",tr);var xo=Z({props:{style:j(String,Object,Array),classes:j(Object),onInit:{type:Function,required:!0},id:{type:String,required:!0},onContainerResized:Function,onHotReload:Function},setup(e){const t=St(null),n=new ResizeObserver(s),i=St(null);vi(()=>{var c,d;const u=i.value;u!=null&&(n.observe(u),t.value=new pa({resizeTo:u,backgroundAlpha:0}),(c=i.value)==null||c.appendChild(t.value.view),(d=e.onInit)==null||d.call(e,t.value)),s(),e.onHotReload&&Bt(e.onHotReload)}),kl(()=>{var u;(u=t.value)==null||u.destroy()});let a=!0;function s(){a&&(a=!1,Bt(()=>{var u;i.value!=null&&((u=e.onContainerResized)==null||u.call(e,i.value.getBoundingClientRect())),a=!0}))}return zt.on("fontsLoaded",s),{unref:o,resizeListener:i}}});function $o(e,t,n,i,a,s){return h(),x("div",{ref:"resizeListener",class:$e(["resize-listener",e.unref(e.classes)]),style:qe(e.unref(e.style))},null,6)}var Mo=me(xo,[["render",$o],["__scopeId","data-v-48dd302a"]]);const Po=Symbol("Particles");function el(e){return pt(()=>{var a,s;const t=(a=e==null?void 0:e())!=null?a:{};t.id=mn("particles-"),t.type=Po,t[nt]=Mo,t.app=St(null),t.addEmitter=u=>{const c=t;return c.app.value?Promise.resolve(new Vl(c.app.value.stage,u)):new Promise(d=>{n.push({resolve:d,config:u})})};let n=[];function i(u){const c=t;c.app.value=u,n.forEach(({resolve:d,config:p})=>d(new Vl(u.stage,p))),n=[]}return t.onContainerResized=(s=t.onContainerResized)==null?void 0:s.bind(t),t[Be]=function(){const{id:u,style:c,classes:d,onContainerResized:p,onHotReload:f}=this;return{id:u,style:o(c),classes:d,onContainerResized:p,onHotReload:f,onInit:i}},t})}window.upgradeConfig=nr;function pn(e,t="points",n=0,i=void 0){const a=Et(e)?e:H(e);if(a.displayName=t,a.precision=n,a.small=i,!Et(e)){const s=a[fi];s.displayName=t,s.precision=n,s.small=i}return a}function tl(e){const t=H(e.value);return et(e,n=>{xl.value||l.gt(n,t.value)&&(t.value=n)}),t}function To(e){const t=H(e.value);return et(e,(n,i)=>{xl.value||l.gt(n,i)&&(t.value=l.add(t.value,l.sub(n,i)))}),t}new l("10^^8");new l("1e100");function Sn(e,t){const n=t!=null?t:e.value;return l.eq(e.precision,0)?ge(e.small?n:l.floor(n)):Oe(n,e.precision,e.small)}function wi(e){return"displayName"in e?e:o(e)}const Io={key:0},Eo={key:0,class:"mark star"},Fo=["src"],qo=Z({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(h(),x("div",Io,[e.mark===!0?(h(),x("div",Eo)):(h(),x("img",{key:1,class:"mark",src:e.mark},null,8,Fo))])):B("",!0)}});var Fi=me(qo,[["__scopeId","data-v-2207999f"]]);const Pa=l.ln(10);function Si(e){return e}function Do(e,t){if(D(t))return t.invert(l.neg(e));throw new Error("Could not invert due to no input being a variable")}function Ao(e,t){if(D(t))return E.neg(t.getIntegralFormula(e));throw new Error("Could not integrate due to no input being a variable")}function Lo(e){return E.neg(e)}function Ro(e,t,n){if(D(t))return t.invert(l.sub(e,bt(n)));if(D(n))return n.invert(l.sub(e,bt(t)));throw new Error("Could not invert due to no input being a variable")}function Oo(e,t,n){var i,a;if(D(t)){const s=t.getIntegralFormula(e);return E.times(n,(i=t.innermostVariable)!=null?i:0).add(s)}else if(D(n)){const s=n.getIntegralFormula(e);return E.times(t,(a=n.innermostVariable)!=null?a:0).add(s)}throw new Error("Could not integrate due to no input being a variable")}function jo(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.add(i,n)}else if(D(n)){const i=n.getIntegralFormula(e);return E.add(i,t)}throw new Error("Could not integrate due to no input being a variable")}function Bo(e,t,n){if(D(t))return t.invert(l.add(e,bt(n)));if(D(n))return n.invert(l.sub(bt(t),e));throw new Error("Could not invert due to no input being a variable")}function Vo(e,t,n){var i,a;if(D(t)){const s=t.getIntegralFormula(e);return E.sub(s,E.times(n,(i=t.innermostVariable)!=null?i:0))}else if(D(n)){const s=n.getIntegralFormula(e);return E.times(t,(a=n.innermostVariable)!=null?a:0).sub(s)}throw new Error("Could not integrate due to no input being a variable")}function zo(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.sub(i,n)}else if(D(n)){const i=n.getIntegralFormula(e);return E.sub(i,t)}throw new Error("Could not integrate due to no input being a variable")}function Go(e,t,n){if(D(t))return t.invert(l.div(e,bt(n)));if(D(n))return n.invert(l.div(e,bt(t)));throw new Error("Could not invert due to no input being a variable")}function Uo(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.times(i,n)}else if(D(n)){const i=n.getIntegralFormula(e);return E.times(i,t)}throw new Error("Could not integrate due to no input being a variable")}function Xo(e,t,n){if(D(t))return E.div(e,n);if(D(n))return E.div(e,t);throw new Error("Could not apply substitution due to no input being a variable")}function Ho(e,t,n){if(D(t))return t.invert(l.mul(e,bt(n)));if(D(n))return n.invert(l.div(bt(t),e));throw new Error("Could not invert due to no input being a variable")}function Jo(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.div(i,n)}else if(D(n)){const i=n.getIntegralFormula(e);return E.div(t,i)}throw new Error("Could not integrate due to no input being a variable")}function Wo(e,t,n){if(D(t))return E.mul(e,n);if(D(n))return E.mul(e,t);throw new Error("Could not apply substitution due to no input being a variable")}function Qo(e,t){if(D(t))return t.invert(l.recip(e));throw new Error("Could not invert due to no input being a variable")}function Zo(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.ln(n)}throw new Error("Could not integrate due to no input being a variable")}function Ko(e,t){if(D(t))return t.invert(l.pow10(e));throw new Error("Could not invert due to no input being a variable")}function Yo(e){return l.ln(e).sub(1).times(e).div(Pa)}function eu(e,t){if(D(t)){const n=Pa.times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}throw new Error("Could not invert due to no input being a variable")}function tu(e,t){if(D(t))return new E({inputs:[t.getIntegralFormula(e)],evaluate:Yo,invert:eu});throw new Error("Could not integrate due to no input being a variable")}function nu(e,t,n){if(D(t))return t.invert(l.pow(bt(n),e));if(D(n))return n.invert(l.root(bt(t),e));throw new Error("Could not invert due to no input being a variable")}function iu(e,t){return l.ln(e).sub(1).times(e).div(l.ln(t))}function lu(e,t,n){if(D(t)){const i=l.ln(bt(n)).times(e);return t.invert(i.div(i.div(Math.E).lambertw()))}throw new Error("Could not invert due to no input being a variable")}function au(e,t,n){if(D(t))return new E({inputs:[t.getIntegralFormula(e),n],evaluate:iu,invert:lu});throw new Error("Could not integrate due to no input being a variable")}function ru(e,t){if(D(t))return t.invert(l.pow(2,e));throw new Error("Could not invert due to no input being a variable")}function su(e){return l.ln(e).sub(1).times(e).div(l.ln(2))}function ou(e,t){if(D(t)){const n=l.ln(2).times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}throw new Error("Could not invert due to no input being a variable")}function uu(e,t){if(D(t))return new E({inputs:[t.getIntegralFormula(e)],evaluate:su,invert:ou});throw new Error("Could not integrate due to no input being a variable")}function cu(e,t){if(D(t))return t.invert(l.exp(e));throw new Error("Could not invert due to no input being a variable")}function du(e){return l.ln(e).sub(1).times(e)}function pu(e,t){if(D(t))return t.invert(l.div(e,l.div(e,Math.E).lambertw()));throw new Error("Could not invert due to no input being a variable")}function mu(e,t){if(D(t))return new E({inputs:[t.getIntegralFormula(e)],evaluate:du,invert:pu});throw new Error("Could not integrate due to no input being a variable")}function fu(e,t,n){if(D(t))return t.invert(l.root(e,bt(n)));if(D(n))return n.invert(l.ln(e).div(l.ln(bt(t))));throw new Error("Could not invert due to no input being a variable")}function vu(e,t,n){if(D(t)){const i=t.getIntegralFormula(e),a=E.add(n,1);return E.pow(i,a).div(a)}else if(D(n)){const i=n.getIntegralFormula(e);return E.pow(t,i).div(E.ln(t))}throw new Error("Could not integrate due to no input being a variable")}function gu(e,t){if(D(t))return t.invert(l.root(e,10));throw new Error("Could not invert due to no input being a variable")}function hu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.pow10(n).div(E.ln(10))}throw new Error("Could not integrate due to no input being a variable")}function bu(e,t,n){if(D(t))return t.invert(l.ln(e).div(bt(n)));if(D(n))return n.invert(l.root(bt(t),e));throw new Error("Could not invert due to no input being a variable")}function yu(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.pow(n,i).div(E.ln(n))}else if(D(n)){const i=n.getIntegralFormula(e),a=E.add(t,1);return E.pow(i,a).div(a)}throw new Error("Could not integrate due to no input being a variable")}function wu(e,t,n){if(D(t))return t.invert(l.root(e,l.recip(bt(n))));if(D(n))return n.invert(l.ln(bt(t)).div(l.ln(e)));throw new Error("Could not invert due to no input being a variable")}function _u(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.pow(i,E.recip(n).add(1)).times(n).div(E.add(n,1))}throw new Error("Could not integrate due to no input being a variable")}function Cu(e,t){if(D(t))return t.invert(l.ln(e));throw new Error("Could not invert due to no input being a variable")}function Su(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.exp(n)}throw new Error("Could not integrate due to no input being a variable")}function ku(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){const i=l.minabs(t,1e308).toNumber();return l.tetrate(e,i,n)}function Nu(e,t,n,i){if(D(t))return t.invert(l.ssqrt(e));throw new Error("Could not invert due to no input being a variable")}function xu(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){const i=l.minabs(t,1e308).toNumber();return l.iteratedexp(e,i,new l(n))}function $u(e,t,n,i){if(D(t))return t.invert(l.iteratedlog(e,Math.E,l.minabs(1e308,bt(n)).toNumber()));throw new Error("Could not invert due to no input being a variable")}function Mu(e,t=10,n=2){const i=l.minabs(n,1e308).toNumber();return l.iteratedlog(e,t,i)}function Pu(e,t=10){const n=l.minabs(t,1e308).toNumber();return l.slog(e,n)}function Tu(e,t,n){if(D(t))return t.invert(l.tetrate(e,l.minabs(1e308,bt(n)).toNumber()));throw new Error("Could not invert due to no input being a variable")}function Iu(e,t,n){const i=l.minabs(t,1e308).toNumber();return l.layeradd(e,i,n)}function Eu(e,t,n,i){if(D(t))return t.invert(l.layeradd(e,l.minabs(1e308,bt(n)).negate().toNumber()));throw new Error("Could not invert due to no input being a variable")}function Fu(e,t){if(D(t))return t.invert(l.pow(Math.E,e).times(e));throw new Error("Could not invert due to no input being a variable")}function qu(e,t){if(D(t))return t.invert(l.tetrate(e,2));throw new Error("Could not invert due to no input being a variable")}function Du(e,t,n){const i=l.minabs(t,1e308).toNumber();return l.pentate(e,i,n)}function Au(e,t){if(D(t))return t.invert(l.asin(e));throw new Error("Could not invert due to no input being a variable")}function Lu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.cos(n).neg()}throw new Error("Could not integrate due to no input being a variable")}function Ru(e,t){if(D(t))return t.invert(l.acos(e));throw new Error("Could not invert due to no input being a variable")}function Ou(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.sin(n)}throw new Error("Could not integrate due to no input being a variable")}function ju(e,t){if(D(t))return t.invert(l.atan(e));throw new Error("Could not invert due to no input being a variable")}function Bu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.cos(n).ln().neg()}throw new Error("Could not integrate due to no input being a variable")}function Vu(e,t){if(D(t))return t.invert(l.sin(e));throw new Error("Could not invert due to no input being a variable")}function zu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.asin(n).times(n).add(E.sqrt(E.sub(1,E.pow(n,2))))}throw new Error("Could not integrate due to no input being a variable")}function Gu(e,t){if(D(t))return t.invert(l.cos(e));throw new Error("Could not invert due to no input being a variable")}function Uu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.acos(n).times(n).sub(E.sqrt(E.sub(1,E.pow(n,2))))}throw new Error("Could not integrate due to no input being a variable")}function Xu(e,t){if(D(t))return t.invert(l.tan(e));throw new Error("Could not invert due to no input being a variable")}function Hu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.atan(n).times(n).sub(E.ln(E.pow(n,2).add(1)).div(2))}throw new Error("Could not integrate due to no input being a variable")}function Ju(e,t){if(D(t))return t.invert(l.asinh(e));throw new Error("Could not invert due to no input being a variable")}function Wu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.cosh(n)}throw new Error("Could not integrate due to no input being a variable")}function Qu(e,t){if(D(t))return t.invert(l.acosh(e));throw new Error("Could not invert due to no input being a variable")}function Zu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.sinh(n)}throw new Error("Could not integrate due to no input being a variable")}function Ku(e,t){if(D(t))return t.invert(l.atanh(e));throw new Error("Could not invert due to no input being a variable")}function Yu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.cosh(n).ln()}throw new Error("Could not integrate due to no input being a variable")}function ec(e,t){if(D(t))return t.invert(l.sinh(e));throw new Error("Could not invert due to no input being a variable")}function tc(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.asinh(n).times(n).sub(E.pow(n,2).add(1).sqrt())}throw new Error("Could not integrate due to no input being a variable")}function nc(e,t){if(D(t))return t.invert(l.cosh(e));throw new Error("Could not invert due to no input being a variable")}function ic(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.acosh(n).times(n).sub(E.add(n,1).sqrt().times(E.sub(n,1).sqrt()))}throw new Error("Could not integrate due to no input being a variable")}function lc(e,t){if(D(t))return t.invert(l.tanh(e));throw new Error("Could not invert due to no input being a variable")}function ac(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.atanh(n).times(n).add(E.sub(1,E.pow(n,2)).ln().div(2))}throw new Error("Could not integrate due to no input being a variable")}function bi(e){return(t,n)=>new E({inputs:[t,n],evaluate:e,invert:Si})}function D(e){return e instanceof E&&e.hasVariable()}function bt(e,t){return e instanceof E?e.evaluate(t):o(e)}function rc(){return E.pow(this,2).div(2)}function sc(){return this}const S=class{constructor(e){this.negate=this.neg,this.negated=this.neg,this.sgn=this.sign,this.plus=this.add,this.subtract=this.sub,this.minus=this.sub,this.multiply=this.mul,this.times=this.mul,this.divide=this.div,this.divideBy=this.div,this.dividedBy=this.div,this.reciprocal=this.recip,this.reciprocate=this.recip,this.logarithm=this.log;let t;"variable"in e?t=this.setupVariable(e):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:rc,internalIntegrateInner:sc,applySubstitution:Si}}setupConstant({inputs:e}){if(e.length!==1)throw new Error("Evaluate function is required if inputs is not length 1");return{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:n,invert:i,integrate:a,integrateInner:s,applySubstitution:u}=e,c=t.reduce((f,g)=>f+(g instanceof S?g.internalVariables:0),0),d=t.find(f=>f instanceof S&&f.hasVariable()),p=c===1?d==null?void 0:d.innermostVariable:void 0;return{inputs:t,internalEvaluate:n,internalInvert:i,internalIntegrate:a,internalIntegrateInner:s,applySubstitution:u,innermostVariable:p,internalVariables:c}}calculateConstantOfIntegration(){const e=this.getIntegralFormula().evaluate(1),t=l.add(this.evaluate(0),this.evaluate(1)).div(2);return l.sub(t,e)}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t,n,i;return(i=(n=(t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(a=>bt(a,e))))!=null?n:this.hasVariable()?e:null)!=null?i:bt(this.inputs[0])}invert(e){if(this.internalInvert&&this.hasVariable())return this.internalInvert.call(this,e,...this.inputs);if(this.inputs.length===1&&this.hasVariable())return e;throw new Error("Cannot invert non-invertible formula")}evaluateIntegral(e){if(!this.isIntegrable())throw new Error("Cannot evaluate integral of formula without integral");return this.getIntegralFormula().evaluate(e)}invertIntegral(e){if(!this.isIntegrable()||!this.getIntegralFormula().isInvertible())throw new Error("Cannot invert integral of formula without invertible integral");return this.getIntegralFormula().invert(e)}getIntegralFormula(e){if(this.integralFormula!=null&&e==null)return this.integralFormula;if(e==null){if(this.applySubstitution==null){if(e=[],this.internalIntegrate==null)throw new Error("Cannot integrate formula with non-integrable operation");let t=this.internalIntegrate.call(this,e,...this.inputs);e.forEach(n=>t=n(t)),this.integralFormula=t}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else throw new Error("Cannot integrate formula without variable");return this.integralFormula}else{if(this.applySubstitution==null)throw new Error("Cannot have two complex operations in an integrable formula");if(e.push(t=>this.applySubstitution.call(this,t,...this.inputs)),this.internalIntegrateInner)return this.internalIntegrateInner.call(this,e,...this.inputs);if(this.internalIntegrate)return this.internalIntegrate.call(this,e,...this.inputs);if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())return this;throw new Error("Cannot integrate formula without variable")}}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,n)=>t instanceof S&&e.inputs[n]instanceof S?t.equals(e.inputs[n]):!(t instanceof S)&&!(e.inputs[n]instanceof S)&&l.eq(o(t),o(e.inputs[n])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new S({inputs:[e]})}static variable(e){return new S({variable:e})}static step(e,t,n){const i=X(0),a=n(S.variable(i)),s=Ke(t);function u(d){return l.lt(d,o(s))?d:(i.value=l.sub(d,o(s)),l.add(a.evaluate(),o(s)))}function c(d,p){if(D(p))return l.gt(d,o(s))&&(d=l.add(a.invert(l.sub(d,o(s))),o(s))),p.invert(d);throw new Error("Could not invert due to no input being a variable")}return new S({inputs:[e],evaluate:u,invert:a.isInvertible()&&a.hasVariable()?c:void 0})}static if(e,t,n,i){const a=X(0),s=S.variable(a),u=n(s),c=i==null?void 0:i(s),d=Ke(t);function p(g){return o(d)?(a.value=g,u.evaluate()):c?(a.value=g,c.evaluate()):g}function f(g,w){if(!D(w))throw new Error("Could not invert due to no input being a variable");return o(d)?w.invert(u.invert(g)):c?w.invert(c.invert(g)):w.invert(g)}return new S({inputs:[e],evaluate:p,invert:u.isInvertible()&&u.hasVariable()?f:void 0})}static conditional(e,t,n,i){return S.if(e,t,n,i)}static abs(e){return new S({inputs:[e],evaluate:l.abs})}static neg(e){return new S({inputs:[e],evaluate:l.neg,invert:Do,applySubstitution:Lo,integrate:Ao})}static sign(e){return new S({inputs:[e],evaluate:l.sign})}static round(e){return new S({inputs:[e],evaluate:l.round})}static floor(e){return new S({inputs:[e],evaluate:l.floor})}static ceil(e){return new S({inputs:[e],evaluate:l.ceil})}static trunc(e){return new S({inputs:[e],evaluate:l.trunc})}static add(e,t){return new S({inputs:[e,t],evaluate:l.add,invert:Ro,integrate:Oo,integrateInner:jo,applySubstitution:Si})}static sub(e,t){return new S({inputs:[e,t],evaluate:l.sub,invert:Bo,integrate:Vo,integrateInner:zo,applySubstitution:Si})}static mul(e,t){return new S({inputs:[e,t],evaluate:l.mul,invert:Go,integrate:Uo,applySubstitution:Xo})}static div(e,t){return new S({inputs:[e,t],evaluate:l.div,invert:Ho,integrate:Jo,applySubstitution:Wo})}static recip(e){return new S({inputs:[e],evaluate:l.recip,invert:Qo,integrate:Zo})}static clamp(e,t,n){return new S({inputs:[e,t,n],evaluate:l.clamp,invert:Si})}static pLog10(e){return new S({inputs:[e],evaluate:l.pLog10})}static absLog10(e){return new S({inputs:[e],evaluate:l.absLog10})}static log10(e){return new S({inputs:[e],evaluate:l.log10,invert:Ko,integrate:tu})}static log(e,t){return new S({inputs:[e,t],evaluate:l.log,invert:nu,integrate:au})}static log2(e){return new S({inputs:[e],evaluate:l.log2,invert:ru,integrate:uu})}static ln(e){return new S({inputs:[e],evaluate:l.ln,invert:cu,integrate:mu})}static pow(e,t){return new S({inputs:[e,t],evaluate:l.pow,invert:fu,integrate:vu})}static pow10(e){return new S({inputs:[e],evaluate:l.pow10,invert:gu,integrate:hu})}static pow_base(e,t){return new S({inputs:[e,t],evaluate:l.pow_base,invert:bu,integrate:yu})}static root(e,t){return new S({inputs:[e,t],evaluate:l.root,invert:wu,integrate:_u})}static factorial(e){return new S({inputs:[e],evaluate:l.factorial})}static gamma(e){return new S({inputs:[e],evaluate:l.gamma})}static lngamma(e){return new S({inputs:[e],evaluate:l.lngamma})}static exp(e){return new S({inputs:[e],evaluate:l.exp,invert:Cu,integrate:Su})}static sqr(e){return S.pow(e,2)}static sqrt(e){return S.root(e,2)}static cube(e){return S.pow(e,3)}static cbrt(e){return S.root(e,3)}static tetrate(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new S({inputs:[e,t,n],evaluate:ku,invert:Nu})}static iteratedexp(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new S({inputs:[e,t,n],evaluate:xu,invert:$u})}static iteratedlog(e,t=10,n=1){return new S({inputs:[e,t,n],evaluate:Mu})}static slog(e,t=10){return new S({inputs:[e,t],evaluate:Pu,invert:Tu})}static layeradd10(e,t){return new S({inputs:[e,t],evaluate:l.layeradd10})}static layeradd(e,t,n=10){return new S({inputs:[e,t,n],evaluate:Iu,invert:Eu})}static lambertw(e){return new S({inputs:[e],evaluate:l.lambertw,invert:Fu})}static ssqrt(e){return new S({inputs:[e],evaluate:l.ssqrt,invert:qu})}static pentate(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new S({inputs:[e,t,n],evaluate:Du})}static sin(e){return new S({inputs:[e],evaluate:l.sin,invert:Vu,integrate:Lu})}static cos(e){return new S({inputs:[e],evaluate:l.cos,invert:Gu,integrate:Ou})}static tan(e){return new S({inputs:[e],evaluate:l.tan,invert:Xu,integrate:Bu})}static asin(e){return new S({inputs:[e],evaluate:l.asin,invert:Au,integrate:zu})}static acos(e){return new S({inputs:[e],evaluate:l.acos,invert:Ru,integrate:Uu})}static atan(e){return new S({inputs:[e],evaluate:l.atan,invert:ju,integrate:Hu})}static sinh(e){return new S({inputs:[e],evaluate:l.sinh,invert:ec,integrate:Wu})}static cosh(e){return new S({inputs:[e],evaluate:l.cosh,invert:nc,integrate:Zu})}static tanh(e){return new S({inputs:[e],evaluate:l.tanh,invert:lc,integrate:Yu})}static asinh(e){return new S({inputs:[e],evaluate:l.asinh,invert:Ju,integrate:tc})}static acosh(e){return new S({inputs:[e],evaluate:l.acosh,invert:Qu,integrate:ic})}static atanh(e){return new S({inputs:[e],evaluate:l.atanh,invert:Ku,integrate:ac})}step(e,t){return S.step(this,e,t)}if(e,t){return S.if(this,e,t)}conditional(e,t){return S.if(this,e,t)}abs(){return S.abs(this)}neg(){return S.neg(this)}sign(){return S.sign(this)}round(){return S.round(this)}floor(){return S.floor(this)}ceil(){return S.ceil(this)}trunc(){return S.trunc(this)}add(e){return S.add(this,e)}sub(e){return S.sub(this,e)}mul(e){return S.mul(this,e)}div(e){return S.div(this,e)}recip(){return S.recip(this)}max(e){return S.max(this,e)}min(e){return S.min(this,e)}maxabs(e){return S.maxabs(this,e)}minabs(e){return S.minabs(this,e)}clamp(e,t){return S.clamp(this,e,t)}clampMin(e){return S.clampMin(this,e)}clampMax(e){return S.clampMax(this,e)}pLog10(){return S.pLog10(this)}absLog10(){return S.absLog10(this)}log10(){return S.log10(this)}log(e){return S.log(this,e)}log2(){return S.log2(this)}ln(){return S.ln(this)}pow(e){return S.pow(this,e)}pow10(){return S.pow10(this)}pow_base(e){return S.pow_base(this,e)}root(e){return S.root(this,e)}factorial(){return S.factorial(this)}gamma(){return S.gamma(this)}lngamma(){return S.lngamma(this)}exp(){return S.exp(this)}sqr(){return S.pow(this,2)}sqrt(){return S.root(this,2)}cube(){return S.pow(this,3)}cbrt(){return S.root(this,3)}tetrate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return S.tetrate(this,e,t)}iteratedexp(e=2,t=l.fromComponents_noNormalize(1,0,1)){return S.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return S.iteratedlog(this,e,t)}slog(e=10){return S.slog(this,e)}layeradd10(e){return S.layeradd10(this,e)}layeradd(e,t){return S.layeradd(this,e,t)}lambertw(){return S.lambertw(this)}ssqrt(){return S.ssqrt(this)}pentate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return S.pentate(this,e,t)}sin(){return S.sin(this)}cos(){return S.cos(this)}tan(){return S.tan(this)}asin(){return S.asin(this)}acos(){return S.acos(this)}atan(){return S.atan(this)}sinh(){return S.sinh(this)}cosh(){return S.cosh(this)}tanh(){return S.tanh(this)}asinh(){return S.asinh(this)}acosh(){return S.acosh(this)}atanh(){return S.atanh(this)}};let E=S;E.negate=S.neg;E.negated=S.neg;E.sgn=S.sign;E.plus=S.add;E.subtract=S.sub;E.minus=S.sub;E.multiply=S.mul;E.times=S.mul;E.divide=S.div;E.divideBy=S.div;E.dividedBy=S.div;E.reciprocal=S.recip;E.reciprocate=S.recip;E.max=bi(l.max);E.min=bi(l.min);E.minabs=bi(l.minabs);E.maxabs=bi(l.maxabs);E.clampMin=bi(l.clampMin);E.clampMax=bi(l.clampMax);E.logarithm=S.log;function oc(e,t,n=!0,i){const a=Ke(n);return y(()=>{var u,c;let s;if(o(a)){if(!e.isIntegrable()||!e.isIntegralInvertible())throw new Error("Cannot calculate max affordable of formula with non-invertible integral");s=l.floor(e.invertIntegral(l.add(t.value,e.evaluateIntegral()))).sub((u=o(e.innermostVariable))!=null?u:0),i==null&&(i=10)}else{if(!e.isInvertible())throw new Error("Cannot calculate max affordable of non-invertible formula");s=l.floor(e.invert(t.value)),i==null&&(i=0)}if(i>0){s=s.sub(i).clampMin(0);let d=zi(e,s,!0,0);for(;;){const p=e.evaluate(s.add((c=o(e.innermostVariable))!=null?c:0));if(l.add(d,p).lt(t.value))s=s.add(1),d=l.add(d,p);else break}}return s})}function zi(e,t,n=!0,i){var s,u,c;let a=l.add(t,(s=o(e.innermostVariable))!=null?s:0);if(n){const d=a;a=a.sub(i!=null?i:10).clampMin((u=o(e.innermostVariable))!=null?u:0);let p=l.sub(e.evaluateIntegral(a),e.evaluateIntegral());if(d.gt(1e308))return p.add(l.sub(d,a).times(e.evaluate(a)));for(let f=a.toNumber();f<d.toNumber();f++)p=p.add(e.evaluate(f));return p}else{const d=a;a=a.sub(i!=null?i:0).clampMin((c=o(e.innermostVariable))!=null?c:0);let p=e.evaluate(a);if(d.gt(1e308))return l.sub(d,a).add(1).times(p);for(let f=a.toNumber();f<d.toNumber();f++)p=l.add(p,e.evaluate(f));return p}}function Ta(e){return pt(()=>{const t=e();return t.partialDisplay=n=>r("span",{style:o(t.requirementMet)?"":"color: var(--danger)"},[Sn(t.resource,t.cost instanceof E?zi(t.cost,n!=null?n:1,o(t.spendResources)):o(t.cost))," ",t.resource.displayName]),t.display=n=>r("div",null,[o(t.requiresPay)?"Costs: ":"Requires: ",Sn(t.resource,t.cost instanceof E?zi(t.cost,n!=null?n:1,o(t.spendResources)):o(t.cost))," ",t.resource.displayName]),q(t,"visibility"),tt(t,"visibility",De.Visible),q(t,"cost"),q(t,"requiresPay"),tt(t,"requiresPay",!0),q(t,"spendResources"),tt(t,"spendResources",!0),tt(t,"pay",function(n){const i=t.cost instanceof E?zi(t.cost,n!=null?n:1,o(t.spendResources)):o(t.cost);t.resource.value=l.sub(t.resource.value,i).max(0)}),t.canMaximize=t.cost instanceof E&&t.cost.isInvertible(),t.canMaximize?t.requirementMet=oc(t.cost,t.resource,o(t.spendResources)):t.requirementMet=y(()=>t.cost instanceof E?l.gte(t.resource.value,t.cost.evaluate()):l.gte(t.resource.value,o(t.cost))),t})}function El(e){return pt(()=>({requirementMet:y(()=>ht(e.visibility)),visibility:De.None,requiresPay:!1}))}function be(e,t){return pt(()=>({requirementMet:Ke(e),partialDisplay:t==null?void 0:k(()=>st(t)),display:t==null?void 0:k(()=>r(F,null,[m("Req: "),st(t)])),visibility:t==null?De.None:De.Visible,requiresPay:!1}))}function nl(e){if(yn(e))return e.every(nl);const t=o(e.requirementMet);return typeof t=="boolean"?t:l.gt(t,0)}function Ia(e){if(yn(e))return e.map(Ia).reduce(l.min);const t=o(e.requirementMet);return typeof t=="boolean"?t?l.dInf:0:l.gt(t,1)&&o(e.canMaximize)!==!0?1:t}function il(e,t=1){var n,i;if(yn(e)&&(e=e.filter(a=>ht(a.visibility)),e.length===1&&(e=e[0])),yn(e)){e=e.filter(u=>"partialDisplay"in u);const a=e.filter(u=>o(u.requiresPay)),s=e.filter(u=>!o(u.requiresPay));return r(F,null,[a.length>0?r("div",null,[m("Costs:")," ",bl(a.map(u=>u.partialDisplay(t)),r(F,null,[m(", ")]))]):null,s.length>0?r("div",null,[m("Requires:")," ",bl(s.map(u=>u.partialDisplay(t)),r(F,null,[m(", ")]))]):null])}return(i=(n=e.display)==null?void 0:n.call(e))!=null?i:r(F,null,null)}function Ea(e,t=1){var n;yn(e)?e.filter(i=>o(i.requiresPay)).forEach(i=>{var a;return(a=i.pay)==null?void 0:a.call(i,t)}):o(e.requiresPay)&&((n=e.pay)==null||n.call(e,t))}var uc=Z({props:{display:{type:j(String,Object,Function),required:!0},visibility:{type:j(Number,Boolean),required:!0},style:j(String,Object,Array),classes:j(Object),requirements:{type:Object,required:!0},canPurchase:{type:j(Boolean),required:!0},bought:{type:j(Boolean),required:!0},mark:j(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:Gn,MarkNode:Fi},setup(e){const{display:t,requirements:n,bought:i}=ot(e),a=St("");return Vt(()=>{const s=rt(t);if(s==null){a.value="";return}if(fn(s)){a.value=he(s);return}const u=he(s.title||"","h3"),c=he(s.description,"div"),d=he(s.effectDisplay||"");a.value=he(k(()=>r("span",null,[s.title!=null?r("div",null,[r(u,null,null)]):null,r(c,null,null),s.effectDisplay!=null?r("div",null,[m("Currently: "),r(d,null,null)]):null,i.value?null:r(F,null,[r("br",null,null),il(n.value)])])))}),{component:a,unref:o,Visibility:De,isVisible:ht,isHidden:Pn}}});const cc=["disabled"];function dc(e,t,n,i,a,s){var d;const u=qt("MarkNode"),c=qt("Node");return e.isVisible(e.visibility)?(h(),x("button",{key:0,style:qe([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(d=e.unref(e.style))!=null?d:{}]),onClick:t[0]||(t[0]=(...p)=>e.purchase&&e.purchase(...p)),class:$e({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(h(),U(Me(e.unref(e.component)),{key:0})):B("",!0),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],14,cc)):B("",!0)}var pc=me(uc,[["render",dc],["__scopeId","data-v-9be6bac0"]]);const mc=Symbol("Upgrade");function fc(e){const t=H(!1,!1);return pt(()=>{const n=e();n.id=mn("upgrade-"),n.type=mc,n[nt]=pc,n.bought=t,n.canPurchase=y(()=>nl(n.requirements)),n.purchase=function(){var s;const a=n;!o(a.canPurchase)||(Ea(n.requirements),t.value=!0,(s=a.onPurchase)==null||s.call(a))};const i=El(n);return yn(n.requirements)?n.requirements.unshift(i):n.requirements=[i,n.requirements],q(n,"visibility"),tt(n,"visibility",De.Visible),q(n,"classes"),q(n,"style"),q(n,"display"),q(n,"mark"),n[Be]=function(){const{display:a,visibility:s,style:u,classes:c,requirements:d,canPurchase:p,bought:f,mark:g,id:w,purchase:_}=this;return{display:a,visibility:s,style:o(u),classes:c,requirements:d,canPurchase:p,bought:f,mark:g,id:w,purchase:_}},n})}const vc=Z({__name:"Collapsible",props:{collapsed:null,display:null,content:null},setup(e){const t=e,n=ni(nn(t,"display")),i=ni(nn(t,"content"));return(a,s)=>(h(),U(Ki,{class:"collapsible-container"},{default:re(()=>[v("button",{onClick:s[0]||(s[0]=u=>e.collapsed.value=!e.collapsed.value),class:"feature collapsible-toggle"},[(h(),U(Me(o(n))))]),e.collapsed.value?B("",!0):(h(),U(Me(o(i)),{key:0}))]),_:1}))}});var ri=me(vc,[["__scopeId","data-v-a72c16aa"]]),gc=Z({props:{display:{type:j(Object,String,Function),required:!0},visibility:{type:j(Number,Boolean),required:!0},style:j(Object,String,Array),classes:j(Object),onClick:Function,onHold:Function,canClick:{type:j(Boolean),required:!0},small:Boolean,mark:j(Boolean,String),id:{type:String,required:!0}},components:{Node:Gn,MarkNode:Fi},setup(e){const{display:t,onClick:n,onHold:i}=ot(e),a=St("");Vt(()=>{var f;const c=rt(t);if(c==null){a.value="";return}if(fn(c)){a.value=he(c);return}const d=he((f=c.title)!=null?f:"","h3"),p=he(c.description,"div");a.value=he(k(()=>r("span",null,[c.title!=null?r("div",null,[r(d,null,null)]):null,r(p,null,null)])))});const{start:s,stop:u}=Ca(n,i);return{start:s,stop:u,comp:a,Visibility:De,isVisible:ht,isHidden:Pn,unref:o}}});function hc(e,t,n,i,a,s){var d;const u=qt("MarkNode"),c=qt("Node");return e.isVisible(e.visibility)?(h(),x("button",{key:0,style:qe([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(d=e.unref(e.style))!=null?d:[]]),onClick:t[0]||(t[0]=(...p)=>e.onClick&&e.onClick(...p)),onMousedown:t[1]||(t[1]=(...p)=>e.start&&e.start(...p)),onMouseleave:t[2]||(t[2]=(...p)=>e.stop&&e.stop(...p)),onMouseup:t[3]||(t[3]=(...p)=>e.stop&&e.stop(...p)),onTouchstartPassive:t[4]||(t[4]=(...p)=>e.start&&e.start(...p)),onTouchendPassive:t[5]||(t[5]=(...p)=>e.stop&&e.stop(...p)),onTouchcancelPassive:t[6]||(t[6]=(...p)=>e.stop&&e.stop(...p)),class:$e({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(h(),U(Me(e.unref(e.comp)),{key:0})):B("",!0),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],38)):B("",!0)}var ki=me(gc,[["render",hc],["__scopeId","data-v-03ca8bd6"]]);const bc=Symbol("Clickable");function Rn(e){return pt(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=mn("clickable-"),t.type=bc,t[nt]=ki,q(t,"visibility"),tt(t,"visibility",De.Visible),q(t,"canClick"),tt(t,"canClick",!0),q(t,"classes"),q(t,"style"),q(t,"mark"),q(t,"display"),t.onClick){const i=t.onClick.bind(t);t.onClick=function(a){o(t.canClick)!==!1&&i(a)}}if(t.onHold){const i=t.onHold.bind(t);t.onHold=function(){o(t.canClick)!==!1&&i()}}return t[Be]=function(){const{display:i,visibility:a,style:s,classes:u,onClick:c,onHold:d,canClick:p,small:f,mark:g,id:w}=this;return{display:i,visibility:a,style:o(s),classes:u,onClick:c,onHold:d,canClick:p,small:f,mark:g,id:w}},t})}const yc=["x1","y1","x2","y2"],wc=Z({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=ot(e),i=y(()=>{const s=n.startNode.value.rect,u=n.boundingRect.value,c=u?{x:s.x+s.width/2-u.x,y:s.y+s.height/2-u.y}:{x:0,y:0};return n.link.value.offsetStart&&(c.x+=n.link.value.offsetStart.x,c.y+=n.link.value.offsetStart.y),c}),a=y(()=>{const s=n.endNode.value.rect,u=n.boundingRect.value,c=u?{x:s.x+s.width/2-u.x,y:s.y+s.height/2-u.y}:{x:0,y:0};return n.link.value.offsetEnd&&(c.x+=n.link.value.offsetEnd.x,c.y+=n.link.value.offsetEnd.y),c});return(s,u)=>(h(),x("line",Qt({"stroke-width":"15px",stroke:"white"},e.link,{x1:o(i).x,y1:o(i).y,x2:o(a).x,y2:o(a).y}),null,16,yc))}});const _c=Z({__name:"Links",props:{links:null},setup(e){var d;const n=nn(e,"links"),i=X(null),a=Ui(Pl,X({})),s=Ui(Tl,X(void 0)),u=X((d=i.value)==null?void 0:d.getBoundingClientRect());et(s,()=>{var p;return u.value=(p=i.value)==null?void 0:p.getBoundingClientRect()}),vi(()=>{var p;return u.value=(p=i.value)==null?void 0:p.getBoundingClientRect()});const c=y(()=>{var f,g;const p=a.value;return(g=(f=n.value)==null?void 0:f.filter(w=>{var _,C;return((_=p[w.startNode.id])==null?void 0:_.rect)&&((C=p[w.startNode.id])==null?void 0:C.rect)}))!=null?g:[]});return(p,f)=>(h(),x(F,null,[o(c)?(h(),x("svg",ca(Qt({key:0},p.$attrs)),[(h(!0),x(F,null,Mn(o(c),(g,w)=>(h(),U(wc,{key:w,link:g,boundingRect:u.value,startNode:o(a)[g.startNode.id],endNode:o(a)[g.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):B("",!0),v("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var Cc=me(_c,[["__scopeId","data-v-063f6d6b"]]),Sc=Z({props:{nodes:{type:j(Array),required:!0},leftSideNodes:j(Array),rightSideNodes:j(Array),branches:j(Array)},components:{Links:Cc},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:i}=ot(e),a=St();Vt(()=>{const c=rt(t);a.value=he(k(()=>r(F,null,[c.map(d=>r("span",{class:"row tree-row",style:"margin: 50px auto;"},[d.map(st)]))])))});const s=St();Vt(()=>{const c=rt(n);s.value=c?he(k(()=>r("span",{class:"left-side-nodes small"},[c.map(st)]))):""});const u=St();return Vt(()=>{const c=rt(i);u.value=c?he(k(()=>r("span",{class:"side-nodes small"},[c.map(st)]))):""}),{unref:o,nodesComp:a,leftNodesComp:s,rightNodesComp:u}}});function kc(e,t,n,i,a,s){const u=qt("Links");return h(),x(F,null,[(h(),U(Me(e.nodesComp))),e.leftNodesComp?(h(),U(Me(e.leftNodesComp),{key:0})):B("",!0),e.rightNodesComp?(h(),U(Me(e.rightNodesComp),{key:1})):B("",!0),e.branches?(h(),U(u,{key:2,links:e.unref(e.branches)},null,8,["links"])):B("",!0)],64)}var Nc=me(Sc,[["render",kc],["__scopeId","data-v-39ca96d0"]]);const xc=Z({props:{display:j(Object,String,Function),visibility:{type:j(Number,Boolean),required:!0},style:j(String,Object,Array),classes:j(Object),onClick:Function,onHold:Function,color:j(String),glowColor:j(String),canClick:{type:j(Boolean),required:!0},mark:j(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Fi,Node:Gn},setup(e){const{onClick:t,onHold:n,display:i}=ot(e),a=Tn(i),{start:s,stop:u}=Ca(t,n);return{start:s,stop:u,comp:a,unref:o,Visibility:De,isCoercableComponent:fn,isVisible:ht,isHidden:Pn}}});function $c(e,t,n,i,a,s){var d;const u=qt("MarkNode"),c=qt("Node");return e.isVisible(e.visibility)?(h(),x("div",{key:0,style:qe({visibility:e.isHidden(e.visibility)?"hidden":void 0}),class:$e({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...p)=>e.onClick&&e.onClick(...p)),onMousedown:t[1]||(t[1]=(...p)=>e.start&&e.start(...p)),onMouseleave:t[2]||(t[2]=(...p)=>e.stop&&e.stop(...p)),onMouseup:t[3]||(t[3]=(...p)=>e.stop&&e.stop(...p)),onTouchstartPassive:t[4]||(t[4]=(...p)=>e.start&&e.start(...p)),onTouchendPassive:t[5]||(t[5]=(...p)=>e.stop&&e.stop(...p)),onTouchcancelPassive:t[6]||(t[6]=(...p)=>e.stop&&e.stop(...p))},[v("div",{style:qe([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(d=e.unref(e.style))!=null?d:[]])},[(h(),U(Me(e.unref(e.comp))))],4),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],38)):B("",!0)}var Mc=me(xc,[["render",$c],["__scopeId","data-v-4520cd79"]]);const Pc=Symbol("TreeNode"),Tc=Symbol("Tree");function Wl(e){return pt(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=mn("treeNode-"),t.type=Pc,t[nt]=Mc,q(t,"visibility"),tt(t,"visibility",De.Visible),q(t,"canClick"),tt(t,"canClick",!0),q(t,"color"),q(t,"display"),q(t,"glowColor"),q(t,"classes"),q(t,"style"),q(t,"mark"),t.onClick){const i=t.onClick.bind(t);t.onClick=function(a){o(t.canClick)!==!1&&i(a)}}if(t.onHold){const i=t.onHold.bind(t);t.onHold=function(){o(t.canClick)!==!1&&i()}}return t[Be]=function(){const{display:i,visibility:a,style:s,classes:u,onClick:c,onHold:d,color:p,glowColor:f,canClick:g,mark:w,id:_}=this;return{display:i,visibility:a,style:s,classes:u,onClick:c,onHold:d,color:p,glowColor:f,canClick:g,mark:w,id:_}},t})}function Ic(e){return pt(()=>{const t=e();return t.id=mn("tree-"),t.type=Tc,t[nt]=Nc,t.isResetting=X(!1),t.resettingNode=St(null),t.reset=function(n){var a,s;const i=t;i.isResetting.value=!0,i.resettingNode.value=n,(a=i.resetPropagation)==null||a.call(i,i,n),(s=i.onReset)==null||s.call(i,n),i.isResetting.value=!1,i.resettingNode.value=null},t.links=y(()=>{var i;return(i=o(t.branches))!=null?i:[]}),q(t,"visibility"),tt(t,"visibility",De.Visible),q(t,"nodes"),q(t,"leftSideNodes"),q(t,"rightSideNodes"),q(t,"branches"),t[Be]=function(){const{nodes:n,leftSideNodes:i,rightSideNodes:a,branches:s}=this;return{nodes:n,leftSideNodes:i,rightSideNodes:a,branches:s}},t})}function Wt(e){const t=[],n={};let i=!1;function a(){return i||(t.push(...e()),n.base=t.map(c=>Ke(c.base)),n.baseText=t.map(c=>Ke(c.baseText)),n.visible=t.map(c=>Ke(c.visible)),n.title=t.map(c=>Ke(c.title)),n.subtitle=t.map(c=>Ke(c.subtitle)),i=!0),t}const s=H({},!1);return[k(()=>{const c=a();let d=!0;const p=c.map((f,g)=>{var ae,T,P;if(o(n.visible[g])===!1)return null;const w=r("h3",{onClick:()=>s.value[g]=!s.value[g],style:"cursor: pointer"},[r("span",{class:"modifier-toggle"+(o(s.value[g])?" collapsed":"")},[m("\u25BC")]),o(n.title[g]),o(n.subtitle[g])!=null?r("span",{class:"subtitle"},[m(" ("),o(n.subtitle[g]),m(")")]):null]),_=o(s.value[g])?null:r(F,null,[r("div",{class:"modifier-container"},[r("span",{class:"modifier-description"},[st((ae=o(n.baseText[g]))!=null?ae:"Base")]),r("span",{class:"modifier-amount"},[Oe((T=o(n.base[g]))!=null?T:1),f.unit])]),f.modifier.description==null?null:st(o(f.modifier.description))]),C=!d;d=!1;const M=(P=o(n.base[g]))!=null?P:1,Y=f.modifier.apply(M);return r(F,null,[C?r("br",null,null):null,r("div",{style:{"--unit":Fe.alignUnits&&f.unit!=null?"'"+f.unit+"'":""}},[w,r("br",null,null),_,r("hr",null,null),r("div",{class:"modifier-container"},[r("span",{class:"modifier-description"},[m("Total")]),r("span",{class:"modifier-amount",style:(f.smallerIsBetter===!0?l.gt(Y,M!=null?M:1):l.lt(Y,M!=null?M:1))?"color: var(--danger)":""},[Ei(Y),f.unit])])])])});return r(F,null,[p])}),s]}function It(e,t="var(--accent2)"){return r("span",{style:{color:t}},[e])}const Ec=Z({props:{progress:{type:j(String,Object,Number),required:!0},width:{type:j(Number),required:!0},height:{type:j(Number),required:!0},direction:{type:j(String),required:!0},display:j(Object,String,Function),visibility:{type:j(Number,Boolean),required:!0},style:j(Object,String,Array),classes:j(Object),borderStyle:j(Object,String,Array),textStyle:j(Object,String,Array),baseStyle:j(Object,String,Array),fillStyle:j(Object,String,Array),mark:j(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Fi,Node:Gn},setup(e){const{progress:t,width:n,height:i,direction:a,display:s}=ot(e),u=y(()=>{let p=t.value instanceof l?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(p,0),1))*100}),c=y(()=>{const p={width:rt(n)+.5+"px",height:rt(i)+.5+"px"};switch(o(a)){case xe.Up:p.clipPath=`inset(${u.value}% 0% 0% 0%)`,p.width=rt(n)+1+"px";break;case xe.Down:p.clipPath=`inset(0% 0% ${u.value}% 0%)`,p.width=rt(n)+1+"px";break;case xe.Right:p.clipPath=`inset(0% ${u.value}% 0% 0%)`;break;case xe.Left:p.clipPath=`inset(0% 0% 0% ${u.value} + '%)`;break;case xe.Default:p.clipPath="inset(0% 50% 0% 0%)";break}return p}),d=Tn(s);return{normalizedProgress:u,barStyle:c,component:d,unref:o,Visibility:De,isVisible:ht,isHidden:Pn}}});function Fc(e,t,n,i,a,s){var d,p,f,g,w,_,C;const u=qt("MarkNode"),c=qt("Node");return e.isVisible(e.visibility)?(h(),x("div",{key:0,style:qe([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.isHidden(e.visibility)?"hidden":void 0},(d=e.unref(e.style))!=null?d:{}]),class:$e({bar:!0,...e.unref(e.classes)})},[v("div",{class:"overlayTextContainer border",style:qe([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(p=e.unref(e.borderStyle))!=null?p:{}])},[e.component?(h(),x("span",{key:0,class:"overlayText",style:qe(e.unref(e.textStyle))},[(h(),U(Me(e.component)))],4)):B("",!0)],4),v("div",{class:"border",style:qe([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(f=e.unref(e.style))!=null?f:{},(g=e.unref(e.baseStyle))!=null?g:{},(w=e.unref(e.borderStyle))!=null?w:{}])},[v("div",{class:"fill",style:qe([e.barStyle,(_=e.unref(e.style))!=null?_:{},(C=e.unref(e.fillStyle))!=null?C:{}])},null,4)],4),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],6)):B("",!0)}var qc=me(Ec,[["render",Fc],["__scopeId","data-v-515dc183"]]);const Dc=Symbol("Bar");function Gi(e){return pt(()=>{const t=e();return t.id=mn("bar-"),t.type=Dc,t[nt]=qc,q(t,"visibility"),tt(t,"visibility",De.Visible),q(t,"width"),q(t,"height"),q(t,"direction"),q(t,"style"),q(t,"classes"),q(t,"borderStyle"),q(t,"baseStyle"),q(t,"textStyle"),q(t,"fillStyle"),q(t,"progress"),q(t,"display"),q(t,"mark"),t[Be]=function(){const{progress:n,width:i,height:a,direction:s,display:u,visibility:c,style:d,classes:p,borderStyle:f,textStyle:g,baseStyle:w,fillStyle:_,mark:C,id:M}=this;return{progress:n,width:i,height:a,direction:s,display:u,visibility:c,style:o(d),classes:p,borderStyle:f,textStyle:g,baseStyle:w,fillStyle:_,mark:C,id:M}},t})}var Ac=Z({props:{visibility:{type:j(Number,Boolean),required:!0},display:j(Object,String,Function),earned:{type:j(Boolean),required:!0},requirements:j(Object,Array),image:j(String),style:j(String,Object,Array),classes:j(Object),mark:j(Boolean,String),small:j(Boolean),id:{type:String,required:!0}},components:{Node:Gn,MarkNode:Fi},setup(e){const{display:t,requirements:n,earned:i}=ot(e),a=St("");return Vt(()=>{const s=rt(t);if(s==null){a.value="";return}if(fn(s)){a.value=he(s);return}const u=he(s.requirement?s.requirement:k(()=>{var p;return il((p=rt(n))!=null?p:[])}),"h3"),c=he(s.effectDisplay||"","b"),d=rt(i)?he(s.optionsDisplay||"","span"):"";a.value=he(k(()=>r("span",null,[r(u,null,null),s.effectDisplay!=null?r("div",null,[r(c,null,null)]):null,s.optionsDisplay!=null?r("div",{class:"equal-spaced"},[r(d,null,null)]):null])))}),{comp:a,unref:o,Visibility:De,isVisible:ht,isHidden:Pn}}});function Lc(e,t,n,i,a,s){var d;const u=qt("MarkNode"),c=qt("Node");return e.isVisible(e.visibility)?(h(),x("div",{key:0,style:qe([{visibility:e.isHidden(e.visibility)?"hidden":void 0,backgroundImage:e.earned&&e.image&&`url(${e.image})`||""},(d=e.unref(e.style))!=null?d:[]]),class:$e({feature:!0,achievement:!0,locked:!e.unref(e.earned),done:e.unref(e.earned),small:e.unref(e.small),...e.unref(e.classes)})},[e.comp?(h(),U(Me(e.comp),{key:0})):B("",!0),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],6)):B("",!0)}var Rc=me(Ac,[["render",Lc],["__scopeId","data-v-5673325a"]]);zt.on("setupVue",e=>e.use(ir));function Oc(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}function Pi(e,t){const n=Ke(t),i=X(!1);return Bt(()=>{i.value=n.value,et(Sa(e),a=>{a||(i.value=!1)}),et(n,a=>{i.value=a})}),i}const jc=gi(),Bc=Symbol("Achievement");let On;(function(e){e.All="all",e.Configurable="configurable",e.Incomplete="incomplete",e.None="none"})(On||(On={}));function ye(e){const t=H(!1,!1);return pt(()=>{var a;const n=(a=e==null?void 0:e())!=null?a:{};n.id=mn("achievement-"),n.type=Bc,n[nt]=Rc,n.earned=t,n.complete=function(){var u,c;t.value=!0;const s=n;if((u=s.onComplete)==null||u.call(s),s.display!=null&&o(s.showPopups)===!0){const d=o(s.display);let p;fn(d)?p=he(d):d.requirement!=null?p=he(d.requirement):p=il((c=s.requirements)!=null?c:[]),jc.info(r("div",null,[r("h3",null,[m("Achievement earned!")]),r("div",null,[r(p,null,null)])]))}},q(n,"visibility"),tt(n,"visibility",De.Visible);const i=n.visibility;if(n.visibility=Xa(()=>{const s=o(n.display);switch(Fe.msDisplay){default:case On.All:return o(i);case On.Configurable:return o(n.earned)&&!(s!=null&&typeof s=="object"&&"optionsDisplay"in s)?De.None:o(i);case On.Incomplete:return o(n.earned)?De.None:o(i);case On.None:return De.None}}),q(n,"display"),q(n,"mark"),q(n,"small"),q(n,"image"),q(n,"style"),q(n,"classes"),q(n,"showPopups"),tt(n,"showPopups",!0),n[Be]=function(){const{visibility:s,display:u,requirements:c,earned:d,image:p,style:f,classes:g,mark:w,small:_,id:C}=this;return{visibility:s,display:u,requirements:c,earned:d,image:p,style:o(f),classes:g,mark:w,small:_,id:C}},n.requirements){const s=n,u=[El(s),be(()=>!s.earned.value),...yn(n.requirements)?n.requirements:[n.requirements]];Vt(()=>{Fe.active===G.id&&nl(u)&&s.complete()})}return n})}zt.on("loadSettings",e=>{tt(e,"msDisplay",On.All)});const Vc=Object.values(On).map(e=>({label:un(e),value:e}));os(k(()=>r(Il,{title:k(()=>r("span",{class:"option-title"},[m("Show achievements"),r("desc",null,[m("Select which achievements to display based on criterias.")])])),options:Vc,"onUpdate:modelValue":e=>Fe.msDisplay=e,modelValue:Fe.msDisplay},null)));const zc=Z({__name:"Sticky",setup(e){const t=X("0"),n=new ResizeObserver(a),i=St(null);function a(){let s=i.value;if(s==null)return;let u=0;for(;s.previousSibling;){const c=s.previousSibling;c.dataset&&"vSticky"in c.dataset&&(u+=c.offsetHeight),s=c}t.value=u+"px"}return Bt(a),document.fonts.ready.then(a),vi(()=>{var u;const s=(u=i.value)==null?void 0:u.parentElement;s&&n.observe(s)}),(s,u)=>(h(),x("div",{class:"sticky",style:qe({top:t.value}),ref_key:"element",ref:i,"data-v-sticky":""},[Zt(s.$slots,"default",{},void 0,!0)],4))}});var Fl=me(zc,[["__scopeId","data-v-cccac690"]]);const wl=Z({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=y(()=>Sn(t.resource));return(i,a)=>(h(),x("h2",{style:qe({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},ee(o(n)),5))}});const Gc={class:"main-display"},Uc={key:0},Xc={key:1},Hc=m(", "),qi=Z({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=ot(e),i=X(null),a=Tn(n.effectDisplay),s=y(()=>l.lt(n.resource.value,"1e1000"));return(u,c)=>(h(),U(Fl,null,{default:re(()=>{var d,p,f,g;return[v("div",{class:$e(["main-display-container",(d=e.classes)!=null?d:{}]),style:qe([{height:`${((f=(p=i.value)==null?void 0:p.$el.clientHeight)!=null?f:0)+50}px`},(g=e.style)!=null?g:{}])},[v("div",Gc,[o(s)?(h(),x("span",Uc,"You have ")):B("",!0),r(wl,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),m(" "+ee(e.resource.displayName),1),o(a)?(h(),x("span",Xc,[Hc,(h(),U(Me(o(a)),{ref_key:"effectRef",ref:i},null,512))])):B("",!0)])],6)]}),_:1}))}}),Fa=e=>(ln("data-v-71dcf259"),e=e(),an(),e),Jc={class:"spell-tree-container"},Wc=Fa(()=>v("div",{class:"spell-tree"},null,-1)),Qc={style:{display:"none"}},Zc=Fa(()=>v("filter",{id:"skilltreeturbulence"},[v("feTurbulence",{x:"-50vw",y:"-50vh",width:"200vw",height:"200vh",baseFrequency:"0.015",numOctaves:"10",seed:"2"}),v("feDisplacementMap",{in:"SourceGraphic",scale:"10"},[v("animate",{attributeName:"scale",values:"10;50;10",dur:"10s",repeatCount:"indefinite"})])],-1)),Kc=[Zc];var Yc=Z({__name:"SpellTree",props:{spell:null},setup(e){const t=e,n=St("");Vt(()=>{n.value=Ze(t.spell.tree)});const i=Rn(()=>({display:"reset",classes:{"reset-tree":!0},onClick(){Object.values(t.spell.treeNodes).forEach(s=>s.bought.value=!1),t.spell.castingTime.value=0}})),a=Ze(i);return(s,u)=>(h(),x("div",Jc,[Wc,(h(),U(Me(o(n)))),(h(),U(Me(o(a)))),(h(),x("svg",Qc,Kc))]))}});var ed=me(Yc,[["__scopeId","data-v-71dcf259"]]);const td=Z({props:{visibility:{type:j(Number,Boolean),required:!0},display:{type:j(Object,String,Function),required:!0},style:j(String,Object,Array),classes:j(Object),glowColor:j(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:n,glowColor:i,floating:a}=ot(e),s=ni(n),u=y(()=>{const d=rt(i);return d==null||d===""?{}:o(a)?Oc(d):{boxShadow:`0px 9px 5px -6px ${d}`}});function c(){t("selectTab")}return{selectTab:c,component:s,glowColorStyle:u,unref:o,Visibility:De,isVisible:ht,isHidden:Pn}}});function nd(e,t,n,i,a,s){var u;return e.isVisible(e.visibility)?(h(),x("button",{key:0,onClick:t[0]||(t[0]=(...c)=>e.selectTab&&e.selectTab(...c)),class:$e(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:qe([{visibility:e.isHidden(e.visibility)?"hidden":void 0},e.glowColorStyle,(u=e.unref(e.style))!=null?u:{}])},[(h(),U(Me(e.component)))],6)):B("",!0)}var qa=me(td,[["render",nd],["__scopeId","data-v-21427abb"]]);const id=Z({props:{visibility:{type:j(Number,Boolean),required:!0},activeTab:{type:j(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:j(Object),required:!0},style:j(String,Object,Array),classes:j(Object),buttonContainerStyle:j(String,Object,Array),buttonContainerClasses:j(Object)},components:{Sticky:Fl,TabButton:qa},setup(e){const{activeTab:t}=ot(e),n=y(()=>hi[Fe.theme].floatingTabs),i=St("");Vt(()=>{const c=rt(t);if(c==null){i.value="";return}if(fn(c)){i.value=he(c);return}i.value=he(o(c.display))});const a=y(()=>{const c=rt(t);return fn(c)||!c?void 0:o(c.classes)}),s=y(()=>{const c=rt(t);return fn(c)||!c?void 0:o(c.style)});function u(c){const{display:d,style:p,classes:f,glowColor:g,visibility:w}=c;return{display:d,style:o(p),classes:f,glowColor:g,visibility:w}}return{floating:n,tabClasses:a,tabStyle:s,Visibility:De,component:i,gatherButtonProps:u,unref:o,isVisible:ht,isHidden:Pn}}});function ld(e,t,n,i,a,s){var d,p;const u=qt("TabButton"),c=qt("Sticky");return e.isVisible(e.visibility)?(h(),x("div",{key:0,class:$e(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:qe([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(d=e.unref(e.style))!=null?d:[],(p=e.tabStyle)!=null?p:[]])},[r(c,{class:$e(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:qe(e.unref(e.buttonContainerStyle))},{default:re(()=>[v("div",{class:$e(["tab-buttons",{floating:e.floating}])},[(h(!0),x(F,null,Mn(e.unref(e.tabs),(f,g)=>(h(),U(u,Qt({onSelectTab:w=>e.selected.value=g,floating:e.floating,key:g,active:e.unref(f.tab)===e.unref(e.activeTab)},e.gatherButtonProps(f)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(h(),U(Me(e.unref(e.component)),{key:0})):B("",!0)],6)):B("",!0)}var ad=me(id,[["render",ld],["__scopeId","data-v-58dbf83a"]]);const rd=Symbol("TabButton"),sd=Symbol("TabFamily");function $n(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),new Error("Cannot create tab family with 0 tabs");const n=H(Object.keys(e)[0],!1);return pt(()=>{var s;const i=(s=t==null?void 0:t())!=null?s:{};i.id=mn("tabFamily-"),i.type=sd,i[nt]=ad,i.tabs=Object.keys(e).reduce((u,c)=>{const d=e[c]();return d.type=rd,d[nt]=qa,q(d,"visibility"),tt(d,"visibility",De.Visible),q(d,"tab"),q(d,"display"),q(d,"classes"),q(d,"style"),q(d,"glowColor"),u[c]=d,u},{}),i.selected=n,i.activeTab=y(()=>{const u=o(a.tabs);if(n.value in u&&ht(u[n.value].visibility))return o(u[n.value].tab);const c=Object.values(u).find(d=>ht(d.visibility));return c?o(c.tab):null}),q(i,"visibility"),tt(i,"visibility",De.Visible),q(i,"classes"),q(i,"style"),q(i,"buttonContainerClasses"),q(i,"buttonContainerStyle"),i[Be]=function(){const{visibility:u,activeTab:c,selected:d,tabs:p,style:f,classes:g,buttonContainerClasses:w,buttonContainerStyle:_}=this;return{visibility:u,activeTab:c,selected:d,tabs:p,style:o(f),classes:g,buttonContainerClasses:w,buttonContainerStyle:_}};const a=i;return a})}function yt(e){return pt(()=>{const{addend:t,description:n,enabled:i,smallerIsBetter:a}=e(),s=Ke(t),u=Ke(n),c=i==null?void 0:Ke(i);return{apply:d=>l.add(d,o(s)),invert:d=>l.sub(d,o(s)),getFormula:d=>E.add(d,s),enabled:c,description:n==null?void 0:k(()=>r("div",{class:"modifier-container"},[o(u)!=null?r("span",{class:"modifier-description"},[st(o(u))]):null,r("span",{class:"modifier-amount",style:(a===!0?l.gt(o(s),0):l.lt(o(s),0))?"color: var(--danger)":""},[l.gte(o(s),0)?"+":"",Ei(o(s))])]))}})}function A(e){return pt(()=>{const{multiplier:t,description:n,enabled:i,smallerIsBetter:a}=e(),s=Ke(t),u=Ke(n),c=i==null?void 0:Ke(i);return{apply:d=>l.times(d,o(s)),invert:d=>l.div(d,o(s)),getFormula:d=>E.times(d,s),enabled:c,description:n==null?void 0:k(()=>r("div",{class:"modifier-container"},[o(u)!=null?r("span",{class:"modifier-description"},[st(o(u))]):null,r("span",{class:"modifier-amount",style:(a===!0?l.gt(o(s),1):l.lt(o(s),1))?"color: var(--danger)":""},[m("\xD7"),Ei(o(s))])]))}})}function Qi(e){return pt(()=>{const{exponent:t,description:n,enabled:i,supportLowNumbers:a,smallerIsBetter:s}=e(),u=Ke(t),c=Ke(n),d=i==null?void 0:Ke(i);return{apply:p=>{let f=p;return a&&(f=l.add(f,1)),f=l.pow(f,o(u)),a&&(f=l.sub(f,1)),f},invert:p=>{let f=p;return a&&(f=l.add(f,1)),f=l.root(f,o(u)),a&&(f=l.sub(f,1)),f},getFormula:p=>a?E.add(p,1).pow(u).sub(1):E.pow(p,u),enabled:d,description:n==null?void 0:k(()=>r("div",{class:"modifier-container"},[o(c)!=null?r("span",{class:"modifier-description"},[st(o(c)),a?" (+1 effective)":null]):null,r("span",{class:"modifier-amount",style:(s===!0?l.gt(o(u),1):l.lt(o(u),1))?"color: var(--danger)":""},[m("^"),Ei(o(u))])]))}})}function ne(e){return pt(()=>{const t=e();return{apply:n=>t.filter(i=>o(i.enabled)!==!1).reduce((i,a)=>a.apply(i),n),invert:t.every(n=>n.invert!=null)?n=>t.filter(i=>o(i.enabled)!==!1).reduceRight((i,a)=>a.invert(i),n):void 0,getFormula:t.every(n=>n.getFormula!=null)?n=>t.filter(i=>o(i.enabled)!==!1).reduce((i,a)=>a.getFormula(i),n):void 0,enabled:t.some(n=>n.enabled!=null)?y(()=>t.filter(n=>o(n.enabled)!==!1).length>0):void 0,description:t.some(n=>n.description!=null)?k(()=>r(F,null,[t.filter(n=>o(n.enabled)!==!1).map(n=>o(n.description)).filter(n=>n).map(st)])):void 0}})}const od=Z({__name:"Tab",props:{display:null},setup(e){const t=e,{display:n}=ot(t),i=ni(n);return(a,s)=>(h(),U(Me(o(i))))}}),ud=Symbol("Tab");function Bn(e){return pt(()=>{const t=e();return t.id=mn("tab-"),t.type=ud,t[nt]=od,t[Be]=function(){const{display:n}=this;return{display:n}},t})}var si=["Can we skip to the good part?","I have such great expectations for myself","I'm standing on the shoulders of giants","I can feel it's power","I feel you","What other job should I start?","I wonder what comes next","I hope I'm not too late","Will I finish in time? Can I go back?","Sometimes the logic of this world surprises me","This reminds me of something...","Hello, world!","I must keep moving forward, keep progressing","Every task brings me closer to my goal","I'm finding my purpose","I wonder what hidden talents I'll uncover","My actions feel strangely familiar, like d\xE9j\xE0 vu","These tasks seem almost... orchestrated","Every now and then, I sense a pattern","Do coincidences hold hidden meaning?","Sometimes I feel like I'm on a guided path","One step at a time, I'll make it","Are there hidden layers to this world?","Curious connections seem to surround me","I wonder if there's more to this than meets the eye"],cd=["Chalk? I love chalk!","It's all coming together","I'm so close now...","Everything must be so precise","Fortunately I have a penchant for rules","Careful now","The power grows stronger with each ritual","Rituals bring order to chaos","This power is intoxicating","Can I truly control this?","Is this power consuming me?","Addiction to power, a dangerous path","I feel like I'm playing with fire","The rituals have a life of their own","The more I control, the less I'm in control","There's a fine line between mastery and obsession","The power is overwhelming, but I must continue","This energy calls to me, but at what cost?","I'm walking a tightrope of power and control","Each ritual brings me closer to the edge","Ancient forces are at work here","What have I unleashed?","Is this the path to greatness or destruction?","Excellence is not an act, but a habit","Hold fast to dreams"];const dd=Z({__name:"Ritual",setup(e){return(t,n)=>(h(),x("div",null," Ritual goes here "))}}),Ri="rituals",Ti=In(Ri,function(){const e="Performing Rituals",t="#D12626",n=pn(y(()=>0),"active rituals"),i=Un(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"\u238A",randomQuips(){return[...cd,...si]},resource:n,layerID:Ri,modifierInfo:k(()=>st(ut)),visibility:()=>Ve.milestones.jobMilestone.earned.value&&Ft.milestones.jobMilestone.earned.value})),a=H([]),s=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,2)),display:{requirement:`Achieve ${i.name} Level 2`,effectDisplay:'Unlock fourth column of runes and "Ritual of Emolumentum"'}})),u=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,4)),display:{requirement:`Achieve ${i.name} Level 4`,effectDisplay:'Unlock fourth row of runes and "Ritual of Melius"'},visibility:s.earned})),c=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,5)),display:{requirement:`Achieve ${i.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility:u.earned})),d=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,6)),display:{requirement:`Achieve ${i.name} Level 6`,effectDisplay:'Unlock fifth column of runes and "Ritual of Collegium"'},visibility:c.earned})),p=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,8)),display:{requirement:`Achieve ${i.name} Level 8`,effectDisplay:'Unlock fifth row of runes and "Ritual of Celeritas"'},visibility:d.earned})),f=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,10)),display:{requirement:`Achieve ${i.name} Level 10`,effectDisplay:"Unlock Ritual of G\xE9nesis"},visibility:p.earned})),g={fourthColMilestone:s,fourthRowMilestone:u,timeSlotMilestone:c,fifthColMilestone:d,fifthRowMilestone:p,genesisMilestone:f},w=[f,p,d,c,u,s],_=H(!0),C=y(()=>w.filter(L=>L.earned.value===!1)),{firstFeature:M,collapsedContent:Y,hasCollapsedContent:ae}=li(w,L=>L.earned.value),T=y(()=>{let L=3;return u.earned.value&&L++,p.earned.value&&L++,L}),P=y(()=>{let L=3;return s.earned.value&&L++,d.earned.value&&L++,L});function J({name:L,visibility:z}){const de=Ke(z!=null?z:De.Visible);return{name:L,visibility:de,[nt]:dd,[Be]:function(){return{}}}}const se=J({name:"Ritual of Doctrina"}),ue=J({name:"Ritual of Emolumentum",visibility:s.earned}),V=J({name:"Ritual of Melius",visibility:u.earned}),W=J({name:"Ritual of Collegium",visibility:d.earned}),Ae=J({name:"Ritual of Celeritas",visibility:p.earned}),je={doctrina:se,emolumentum:ue,melius:V,collegium:W,celeritas:Ae};y(()=>l.pow(1.1,i.level.value));const we=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===Ri})),Ve.batteries.breeding.timePassing.modifier]),Ye=y(()=>new l(we.apply(1)).toNumber()),le=ne(()=>[Ve.batteries.breeding.xpGain.modifier]),Tt={timePassing:we,jobXpGain:le},[mt,ze]=Wt(()=>[{title:"Time Passing",modifier:we,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:`${i.name} EXP Gain`,modifier:le,base:1}]),ut=$n({general:()=>({display:"General",glowColor(){return ut.activeTab.value===this.tab?t:""},tab:mt,generalTabCollapsed:ze})},()=>({style:`--layer-color: ${t}`}));return this.on("preUpdate",L=>{i.timeLoopActive.value===!1&&G.tabs[1]!==Ri||(L=l.times(L,Ye.value).toNumber())}),{name:e,color:t,minWidth:670,job:i,activeRituals:n,runeRows:T,runeCols:P,selectedRunes:a,rituals:je,modifiers:Tt,milestones:g,collapseMilestones:_,modifierTabs:ut,display:k(()=>{const L=[...C.value];return M.value&&L.push(M.value),r(F,null,[ii(...L,k(()=>dn(r(ri,{collapsed:_,content:Y,display:_.value?"Show other completed milestones":"Hide other completed milestones"},null),[[Nn,o(ae)]]))),r(Ne,null,null)])})}});const pd={width:"300",height:"300",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},md={transform:"translate(50 50)"},fd=["transform"],vd=["transform","fill"],gd=Z({__name:"Atom",props:{speed:null},setup(e){const t=e,n=["#7E7DFF","#7290E8","#89C6FF","#72CEE8","#7DFFF9"],i=X(Math.random()*1e5);let a=null;vi(()=>{a=zt.on("update",c=>{i.value=i.value+t.speed*c/1e3})}),kl(()=>{a&&(a(),a=null)});function s(c){return c<=2?.168:c<=10?.333:c<=28?.5:c<=60?.667:c<=78?.833:1}function u(c){const d=c**2,p=(c%2===0?1:-1)*d,f=i.value+d;return p*f%360}return(c,d)=>(h(),x("svg",pd,[v("g",md,[(h(),x(F,null,Mn(82,p=>v("g",{key:p,transform:`scale(${s(p)})`},[v("path",{d:"M0 0L0 -40A40 40 0 0 1 3.061970113459826 -39.88263204734962",class:"electron",transform:`rotate(${u(p)} 0 0)`,fill:n[p%5]},null,8,vd)],8,fd)),64))])]))}});var dl=me(gd,[["__scopeId","data-v-baafb966"]]);const hd={class:"field"},bd={key:0,class:"field-title"},yd=["min","max"],wd=Z({__name:"Slider",props:{title:null,modelValue:null,min:null,max:null},emits:["update:modelValue"],setup(e,{emit:t}){const i=ot(e),a=y({get(){var s;return String((s=o(i.modelValue))!=null?s:0)},set(s){t("update:modelValue",Number(s))}});return(s,u)=>(h(),x("div",hd,[e.title?(h(),x("span",bd,ee(e.title),1)):B("",!0),r(lt,{display:`${o(a)}`,class:$e({fullWidth:!e.title}),direction:o(xe).Down},{default:re(()=>[dn(v("input",{type:"range","onUpdate:modelValue":u[0]||(u[0]=c=>Et(a)?a.value=c:null),min:e.min,max:e.max},null,8,yd),[[ua,o(a)]])]),_:1},8,["display","class","direction"])]))}});var Da=me(wd,[["__scopeId","data-v-267283ff"]]);const ql=e=>(ln("data-v-02c1c27a"),e=e(),an(),e),_d=ql(()=>v("br",null,null,-1)),Cd=ql(()=>v("defs",null,[v("filter",{id:"glow",x:"-100%",y:"-100%",width:"300%",height:"300%"},[v("feDropShadow",{dx:"0",dy:"0",stdDeviation:3})])],-1)),Sd=["d"],kd={class:"charge-display"},Nd=ql(()=>v("br",null,null,-1)),xd=m("energeia"),$d=Z({__name:"Battery",props:{charge:null,effect:null,effectDescription:null,feedAmount:null,color:null,sumFeedAmounts:null,visibility:null,setFeedAmount:null},setup(e){const t=e,n=20,i=4,a=30,s=0,u=100-s*2,c=100,d=X([]),p=X(3);let f=null,g=()=>{const w=Math.max(3,Math.floor(n*t.feedAmount.value/u));d.value=new Array(w).fill(1).map((_,C)=>{let M=C===0,Y=C===w-1,ae=(t.feedAmount.value-s*2)/(w-1)*C+s;return{x:M||Y?c/2:(c-a)/2+Math.random()*a,y:ae}}),p.value=Math.random()*(5-2)+2,f&&clearTimeout(f),f=setTimeout(g,Math.random()*200+100)};return et(()=>t.feedAmount.value,g,{immediate:!0}),(w,_)=>o(ht)(e.visibility)?(h(),x("div",{key:0,class:"battery-container feature dontMerge",style:qe({visibility:o(Pn)(e.visibility)?"hidden":void 0})},[v("div",null,ee(o(Oe)(o(e.effect)))+"x "+ee(e.effectDescription),1),_d,v("div",{class:"battery",style:qe({borderColor:o(e.color),width:`${c}px`})},[(h(),x("svg",{style:qe({height:`${e.feedAmount.value}%`,borderColor:o(e.color)})},[Cd,v("path",{style:qe([{filter:"url(#glow)"},{opacity:3,strokeWidth:i}]),d:`M${d.value.map(C=>C.x+","+C.y).join(" L")}`},null,12,Sd)],4)),v("div",kd,[m(ee(o(Oe)(e.charge.value)),1),Nd,xd])],4),r(Da,{max:100-o(e.sumFeedAmounts)+o(e.feedAmount),modelValue:o(e.feedAmount),"onUpdate:modelValue":_[0]||(_[0]=C=>e.setFeedAmount(C))},null,8,["max","modelValue"])],4)):B("",!0)}});var Md=me($d,[["__scopeId","data-v-02c1c27a"]]),Pd=["Huh, why is 82 compelling? It doesn't fit the usual patterns...","Atoms? I love atoms!","I can feel the power!","The power kinda tingles","Power!","Energy, the ultimate currency of the universe","I'm tapping into something greater","The fusion of elements creates untold power","The dance of electrons empower me","Energy conversion, the key to progress","Power flows through my fingertips","The energy I wield is boundless","Channeling the strength of the universe","Every surge brings me closer to my goals","I'm a conduit for untamed power","Electricity crackles and sparks my progress","A torrent of energy fuels my journey","Power and potential in every charge","Power lies not in strength, but in persistence","The energy of the mind is the essence of life","Strength does not come from physical capacity","The true sign of intelligence is imagination","Power is not an institution, but a relation","A man's true power lies in his determination","Strive for greatness, but never forget humility"];function Td(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!sa(e)}const Zn="generators",Ve=In(Zn,function(){const e="Harnessing Power",t="#26D1CE",n=pn(0,"energeia"),i=H(0),a=Un(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"\u269B",randomQuips(){return[...Pd,...si]},resource:Ut(n),layerID:Zn,modifierInfo:k(()=>st(ze)),visibility:Se.milestones.jobMilestone.earned})),s=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,2)),display:{requirement:`Achieve ${a.name} Level 2`,effectDisplay:"Unlock multiple generators"}})),u=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,4)),display:{requirement:`Achieve ${a.name} Level 4`,effectDisplay:"Unlock resource gain batteries"},visibility:s.earned})),c=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,5)),display:{requirement:`Achieve ${a.name} Level 5`,effectDisplay:'Unlock buying machines in "Breeding Plants" Job'},visibility:u.earned})),d=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,6)),display:{requirement:`Achieve ${a.name} Level 6`,effectDisplay:"Unlock xp gain batteries"},visibility:c.earned})),p=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,8)),display:{requirement:`Achieve ${a.name} Level 8`,effectDisplay:"Unlock time passing batteries"},visibility:d.earned})),f=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,10)),display:{requirement:`Achieve ${a.name} Level 10`,effectDisplay:'Unlock 1/2 of "Performing Rituals" Job'},visibility:p.earned,onComplete(){Ft.milestones.jobMilestone.earned.value&&wn(Ti,G)}})),g={multiLoopMilestone:s,resourceBatteriesMilestone:u,machinesMilestone:c,xpBatteriesMilestone:d,timeBatteriesMilestone:p,jobMilestone:f},w=[f,p,d,c,u,s],_=H(!0),C=y(()=>w.filter(L=>L.earned.value===!1)),{firstFeature:M,collapsedContent:Y,hasCollapsedContent:ae}=li(w,L=>L.earned.value);function T(L){const z=H(0),de=H(0);return pt(()=>{const fe=L(),ke=y(()=>o(at.jobs[fe.job].color)),wt=fe.visibility!=null?Ke(fe.visibility):De.Visible,kt=y(()=>fe.effectFormula(z.value)),K=ne(()=>[yt(()=>({addend:()=>l.times(n.value,de.value).div(100),description:"Battery charging"})),Qi(()=>({exponent:()=>l.div(de.value,500).add(1),description:"Battery charging bonus",supportLowNumbers:!0})),yt(()=>({addend:()=>l.times(z.value,.1).neg(),description:"Battery discharge"}))]),it=y(()=>K.apply(0)),Le=A(()=>({multiplier:kt,description:un(fe.effectDescription)+" battery",enabled:()=>ht(wt)}));return{charge:z,chargeGain:K,computedChargeGain:it,color:ke,feedAmount:de,effect:kt,effectDescription:fe.effectDescription,modifier:Le,visibility:wt,setFeedAmount:He=>de.value=He,[nt]:Md,[Be]:function(){const{charge:He,effect:Ge,effectDescription:ce,feedAmount:ft,color:_t,visibility:ct,setFeedAmount:$}=this;return{charge:He,effect:Ge,effectDescription:ce,feedAmount:ft,color:_t,visibility:ct,sumFeedAmounts:J,setFeedAmount:$}}}})}const P=Dl.reduce((L,z)=>(L[z]={job:z,resourceGain:T(()=>({job:z,effectDescription:"resource gain",effectFormula:de=>l.div(de,z===Zn?10:100).add(1).log(1.3).add(1).pow(1)})),xpGain:T(()=>({job:z,effectDescription:"xp gain",effectFormula:de=>l.div(de,z===Zn?6:60).add(1).log(1.3).add(1),visibility:d.earned})),timePassing:T(()=>({job:z,effectDescription:"time passing",effectFormula:de=>l.div(de,z===Zn?10:100).add(1).log(10).add(1),visibility:u.earned}))},L),{}),J=y(()=>Object.values(P).reduce((L,z)=>L+z.timePassing.feedAmount.value+z.resourceGain.feedAmount.value+z.xpGain.feedAmount.value,0)),se=y(()=>l.pow(1.1,a.level.value)),ue=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===Zn})),P.generators.timePassing.modifier]),V=y(()=>new l(ue.apply(1)).toNumber()),W=ne(()=>[yt(()=>({addend:i,description:"Allocated time slots"})),yt(()=>({addend:1,description:"Bonus generator",enabled:()=>Ft.job.active.value&&Ft.milestones.bonusGeneratorMilestone.earned.value}))]),Ae=y(()=>W.apply(1)),je=ne(()=>[A(()=>({multiplier:se,description:`${a.name} level (x1.1 each)`})),A(()=>({multiplier:()=>l.pow(Ae.value,2),description:"Allocated time slots",enabled:s.earned})),P.generators.resourceGain.modifier,Ft.plants.energeia.modifier]),we=ne(()=>[P.generators.xpGain.modifier]),Ye={timePassing:ue,timeSlotsGenerating:W,energeiaGain:je,jobXpGain:we},[le,Tt]=Wt(()=>[{title:"Time Passing",modifier:ue,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||p.earned.value},{title:"Generators",modifier:W,base:1},{title:"Energeia Gain",modifier:je,base:1},{title:`${a.name} EXP Gain`,modifier:we,base:1,baseText:"Base (per energeia gained)"}]),mt=["resourceGain","xpGain","timePassing"].map(L=>Wt(()=>Object.values(P).map(z=>({title:un(z.job)+" Battery Charge Gain",modifier:z[L].chargeGain,enabled:()=>ht(z[L].visibility),base:0})))),ze=$n({general:()=>({display:"General",glowColor(){return ze.activeTab.value===this.tab?t:""},tab:le,generalTabCollapsed:Tt}),...mt.reduce((L,[z,de],fe)=>{const ke=["timePassing","resourceGain","xpGain"][fe];return L[ke]=()=>({display:un(ke),glowColor(){return ze.activeTab.value===this.tab?t:""},tab:z,tabCollapsed:de,visibility:[p,u,d][fe].earned}),L},{})},()=>({style:`--layer-color: ${t}`}));this.on("preUpdate",L=>{if(a.timeLoopActive.value===!1&&G.tabs[1]!==Zn)return;L=l.times(L,V.value).toNumber();let z=new l(0);Object.values(P).forEach(fe=>{Object.values(fe).forEach(ke=>{typeof ke!="string"&&(ke.charge.value=l.add(ke.charge.value,l.times(ke.computedChargeGain.value,L)).clampMin(0),z=z.add(ke.feedAmount.value))})}),n.value=l.sub(n.value,l.div(z,100).times(n.value));const de=l.times(je.apply(1),L);n.value=l.add(n.value,de),a.xp.value=l.add(a.xp.value,we.apply(de))});const ut=$n({generation:()=>({display:"Generation",tab:Bn(()=>({display:k(()=>{let L;return r(F,null,[r($i,null,{default:()=>[r(dl,{speed:V.value},null),Ft.milestones.bonusGeneratorMilestone.earned.value?r(dl,{speed:V.value},null):null]}),s.earned.value?r(F,null,[r("div",null,[at.hasTimeSlotAvailable.value?"Click to allocate or deallocate additional time loops to this job":"Free up time slots to allocate additional time loops to this job"]),r($i,null,Td(L=Array(at.hasTimeSlotAvailable.value?i.value+1:i.value).fill(0).map((z,de)=>r(dl,{speed:V.value,width:"100px",height:"100px",style:l.lt(i.value,de+1)?"opacity: 0.25":"",onClick:()=>l.lt(i.value,de+1)?i.value++:i.value--},null)))?L:{default:()=>[L]})]):null])})})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),batteries:()=>({display:"Batteries",tab:Bn(()=>({display:k(()=>r(F,null,[r(Ne,null,null),r("div",null,[m("Allocate a percentage of "),n.displayName,m("/s to feed into each battery.")]),r("div",null,[m("Batteries discharge over time.")]),r(Ne,null,null),bl(Object.values(P).filter(L=>o(at.jobs[L.job].visibility)===De.Visible).map(L=>r(F,null,[r("h2",null,[at.jobs[L.job].name]),Vi(L.resourceGain,L.xpGain,L.timePassing)])),r(Ne,{height:"50px"},null))]))})),visibility:p.earned})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}}));return{name:e,color:t,minWidth:670,energeia:n,extraTimeSlotsAllocated:i,job:a,modifiers:Ye,milestones:g,collapseMilestones:_,batteries:P,modifierTabs:ze,tabs:ut,display:k(()=>{const L=[...C.value];return M.value&&L.push(M.value),r(F,null,[r(qi,{resource:n,color:t},null),ii(...L,k(()=>dn(r(ri,{collapsed:_,content:Y,display:_.value?"Show other completed milestones":"Hide other completed milestones"},null),[[Nn,o(ae)]]))),r(Ne,null,null),p.earned.value?Ze(ut):Ze(ut.activeTab.value)])})}});var Id=["I am the petals of the flower that is my inner soul","I am the stem of the flower that is my inner mind","These flowers are powerful, I can feel it","There is so much power here. I must fulfill their potential","How will I store all these flowers?","Euch; These flowers taste terrible!","It is a mistake to do things too easily","You are my number one priority now","Flowers? I love flowers!","It's the time you have wasted for your rose that makes your rose so important","What is essential is invisible to the eye","The more I collect, the stronger I become","Each bloom is a new beginning","My path is lined with petals","Nature's magic lies within these flowers","A touch of enchantment in every blossom","Every flower whispers secrets of the arcane","These flowers hold the key to untold magic","The beauty of the blooms belies their hidden power","With each flower, I delve deeper into the mystical","Like a wayfarer seeking truth, I gather petals","Chasing blooms as if chasing the wind","Each petal, a fragment of a greater spell","The magic within these flowers fuels my journey"];const Ed=!1,Fd=!0,qd={min:.5,max:2},Dd=.005,Ad=-1,Ld=1e3,Rd=!0,Od={x:0,y:0},jd=[{type:"alpha",config:{alpha:{list:[{time:0,value:1},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:2},{time:1,value:25}]},minMult:2}},{type:"scale",config:{scale:{list:[{time:0,value:.001},{time:1,value:1}]},minMult:.25}},{type:"color",config:{color:{list:[{time:0,value:"#EB428F"},{time:.25,value:"#F545ED"},{time:.5,value:"#B949DE"},{time:.75,value:"#9945F5"},{time:1,value:"#6442EB"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:20,minStart:270,maxStart:300}},{type:"textureRandom",config:{textures:["/Fire.png"]}},{type:"spawnShape",config:{type:"torus",data:{x:0,y:0,radius:75,innerRadius:75,affectRotation:!0}}}];var Ql={emit:Ed,autoUpdate:Fd,lifetime:qd,frequency:Dd,emitterLifetime:Ad,maxParticles:Ld,addAtBack:Rd,pos:Od,behaviors:jd};const Zl=gi(),pl="flowers",Ee=In(pl,function(){const e="Harvesting Flowers",t="#A626D1",n=pn(0,"moly"),i=tl(n),a=Un(e,()=>({color:t,image:"/harvesting.png",imageFocus:{x:"50%",y:"65%"},symbol:"\u2698",randomQuips(){return[...Id,...si]},resource:Ut(n),layerID:pl,modifierInfo:k(()=>st(Hn)),modifierModalAttrs:{class:"flowers-modal"},showNotif:()=>Object.values(ke).some(te=>te.showNotif.value)})),s=y(()=>Object.values(ke).filter(te=>te.active.value).length),u=y(()=>1),c=el(()=>({fullscreen:!1,zIndex:-1,boundingRect:X(null),onContainerResized(te){this.boundingRect.value=te},onHotReload(){Object.values(ke).forEach(te=>{te.particleEffect.value.then(Ot=>Ot.destroy()),te.particleEffect.value=c.addEmitter(te.particleEffectConfig),te.updateParticleEffect(te.active.value)})}})),d=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,2)),display:{requirement:`Achieve ${a.name} Level 2`,effectDisplay:"Double T\xE9chnasma potency and unlock experience for spells"}})),p=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,4)),display:{requirement:`Achieve ${a.name} Level 4`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Theriz\xF3"},visibility:d.earned})),f=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,6)),display:{requirement:`Achieve ${a.name} Level 6`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Pr\u014Dfici\u014D"},visibility:p.earned})),g=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,8)),display:{requirement:`Achieve ${a.name} Level 8`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Schol\u0113"},visibility:f.earned})),w={spellExpMilestone:d,flowerSpellMilestone:p,chargeSpellMilestone:f,expSpellMilestone:g},_=[g,f,p,d],C=H(!0),M=y(()=>_.filter(te=>te.earned.value===!1)),{firstFeature:Y,collapsedContent:ae,hasCollapsedContent:T}=li(_,te=>te.earned.value),P=Wl(()=>({visibility:De.Hidden}));function J(te,Ot,za,Rl,ui,Ol){const hn=Object.keys(ui).reduce((Mt,We)=>{const qn=H(!1);return Mt[We]=Wl(()=>({display:ui[We].display,classes(){return{"spell-node":!0,bought:qn.value}},bought:qn,canClick(){var yi;return!(hn[We].bought.value||l.gte(sl.value,Jn.value)||(yi=ui[We].requirements)!=null&&yi.some(bn=>!hn[bn].bought.value))},onClick(){hn[We].bought.value=!0}})),Mt},{}),rl=H(0),Jn=y(()=>l.clampMin(rl.value,1).log10().floor()),sl=y(()=>Object.values(hn).reduce((Mt,We)=>Mt+(We.bought.value?1:0),0)),jl=y(()=>{const Mt=l.eq(Jn.value,0)?0:l.pow10(Jn.value),We=l.pow10(l.add(Jn.value,1));return l.sub(rl.value,Mt).div(l.sub(We,Mt)).times(100)}),Ai=Rn(()=>({canClick(){return jt.active.value||s.value<u.value},display(){return{title:`<h2>${te}</h2>`,description:k(()=>r(F,null,[r("br",null,null),r("i",null,[Ot]),r("br",null,null),r("br",null,null),r("h3",null,[za]),d.earned.value?r("div",{class:"spell-level"},[r("div",{class:"spell-exp",style:`--exp: ${Oe(jl.value)}%`},null),r("span",null,[m("("),Lt(l.sub(Jn.value,sl.value)),m("/"),Lt(Jn.value),m(")")])]):null,Bl.value?r(xn,null,null):null]))}},classes(){return{spellSelector:!0,activeSpell:jt.active.value,can:o(Ai.canClick)}},onClick(){jt.active.value=!jt.active.value,jt.castingTime.value=0},visibility:Rl})),Bl=Pi(Ai,()=>Ol.some(Mt=>Mt.some(We=>We!==P&&o(hn[We].canClick)))),jt={treeNodes:hn,tree:Ic(()=>({nodes:Ol.map(Mt=>Mt.map(We=>We===P?P:hn[We])),branches:()=>Object.keys(ui).reduce((Mt,We)=>ui[We].requirements?[...Mt,...ui[We].requirements.map(qn=>({startNode:hn[We],endNode:hn[qn],stroke:hn[qn].bought.value?"#B949DE":"var(--locked)","stroke-width":"4px"}))]:Mt,[])})),visibility:Rl,selector:Ai,showNotif:Bl,particleEffectConfig:Ql,active:H(!1),xp:rl,castingTime:H(0),level:Jn,spentPoints:sl,levelProgress:jl,particleEffectWatcher:X(null),particleEffect:X(c.addEmitter(Ql)),async updateParticleEffect(Mt){var qn,yi;const We=await jt.particleEffect.value;(yi=(qn=jt.particleEffectWatcher).value)==null||yi.call(qn),Mt?jt.particleEffectWatcher.value=et([()=>{var bn;return(bn=Ee.nodes.value[Ai.id])==null?void 0:bn.rect},c.boundingRect],async([bn,ol])=>{bn!=null&&ol!=null?(We.cleanup(),We.updateOwnerPos(bn.x+bn.width/2-ol.x,bn.y+bn.height/2-ol.y),We.resetPositionTracking(),We.emit=!0):We.emit=!1},{immediate:!0}):(We.emit=!1,jt.particleEffectWatcher.value=null)}};return et(jt.active,jt.updateParticleEffect),et(jt.level,(Mt,We)=>{Fe.active!==G.id||l.neq(Mt,l.add(We,1))||(jt.notif!=null&&Zl.dismiss(jt.notif),jt.notif=Zl.info(`${te} is now level ${Mt}!`))}),jt}const se=H(0),ue=Gi(()=>({direction:xe.Right,height:20,width:200,fillStyle:()=>`--time: ${(G.time%1e8/10).toLocaleString("fullwide",{useGrouping:!1})}px; --time-deg: ${(G.time%1e8/100).toLocaleString("fullwide",{useGrouping:!1})}deg`,classes:{chargeBar:!0},progress(){return l.div(se.value,Dt.value)},visibility:f.earned})),V=y(()=>l.pow(1.1,a.level.value)),W=y(()=>l.pow(1.25,Object.values(ke).filter(te=>ht(te.visibility.value)).length)),Ae=V,je=V,we=y(()=>l.pow(1.1,le.level.value)),Ye=V,le=J("T\xE9chnasma","Practice using the flowers to perform minor magical tricks.","Gain job exp.",!0,{moreJobXpFlat:{display:"x4 job exp"},moreJobXpPerSpell:{display:k(()=>r("div",null,[m("x1.25 job exp per known spell"),r("br",null,null),m("(x"),Oe(W.value),m(")")])),requirements:["moreJobXpFlat"]},morePotencyPerJobLevel:{display:k(()=>r("div",null,[m("Additional x1.1 all spell potency per job level"),r("br",null,null),m("(x"),Oe(Ae.value),m(")")])),requirements:["moreJobXpFlat"]},moreJobXpPerJobLevel:{display:k(()=>r("div",null,[m("Additional x1.1 job exp per job level"),r("br",null,null),m("(x"),Oe(je.value),m(")")])),requirements:["moreJobXpPerSpell"]},moreJobXpPerSpellLevel:{display:k(()=>r("div",null,[m("Additional x1.1 job exp per T\xE9chnasma level"),r("br",null,null),m("(x"),Oe(we.value),m(")")])),requirements:["moreJobXpPerSpell"]},morePotencyOverTime:{display:"Additional spell potency the longer it's been consecutively casted",requirements:["morePotencyPerJobLevel"]},moreSpellXpPerJobLevel:{display:k(()=>r("div",null,[m("x1.1 all spell exp per job level"),r("br",null,null),m("(x"),Oe(Ye.value),m(")")])),requirements:["morePotencyPerJobLevel"]}},[["moreJobXpFlat"],["moreJobXpPerSpell",P,"morePotencyPerJobLevel"],["moreJobXpPerJobLevel","moreJobXpPerSpellLevel","morePotencyOverTime","moreSpellXpPerJobLevel"]]),Tt=y(()=>Object.values(ke).filter(te=>ht(te.visibility.value)).length*.25),mt=y(()=>l.pow(1.1,L.level.value)),ze=y(()=>l.log10(l.add(n.value,1)).pow(.777).add(1)),ut=r(F,null,[m("log"),r("sub",null,[m("2")]),m("(flowers + 1)"),r("sup",null,[m("0.777")]),m(" + 1")]),L=J("Theriz\xF3","Use the magic of the flowers to harvest themselves. They should make my spells more potent.","Gain flowers.",p.earned,{moreFlowersFlat:{display:"x2 flowers gain"},moreFlowersPerSpell:{display:k(()=>r("div",null,[m("+.25x Theriz\xF3 potency per known spell"),r("br",null,null),m("(+"),Oe(Tt.value),m(")")])),requirements:["moreFlowersFlat"]},moreFlowersPerLevel:{display:k(()=>r("div",null,[m("Additional x1.1 Theriz\xF3 potency per Theriz\xF3 level"),r("br",null,null),m("(x"),Oe(mt.value),m(")")])),requirements:["moreFlowersPerSpell"]},moreJobXpPerFlower:{display:k(()=>r("div",null,[m("Flowers affect job exp"),r("br",null,null),m("(x"),Oe(ze.value),m(")")])),requirements:["moreFlowersFlat"]},moreSpellXpPerFlower:{display:k(()=>r("div",null,[m("Flowers affect all spell exp"),r("br",null,null),m("(x"),Oe(ze.value),m(")")])),requirements:["moreJobXpPerFlower"]},morePotencyPerFlower:{display:k(()=>r("div",null,[m("Flower's affect all spell potency twice"),r("br",null,null),m("(x"),Oe(ze.value),m(")")])),requirements:["moreSpellXpPerFlower"]},passiveFlowerGain:{display:"1% of flower gain when casting other spells",requirements:["moreSpellXpPerFlower"]}},[["moreFlowersPerLevel","moreFlowersPerSpell","moreFlowersFlat"],[P,P,"moreJobXpPerFlower"],[P,"passiveFlowerGain","moreSpellXpPerFlower"],[P,P,"morePotencyPerFlower"]]),z=J("Pr\u014Dfici\u014D","Charge up magic to cast another spell with greater potency.","Charge spell potency.",f.earned,{spellEff:{display:"x1.25 spell potency when discharging"},fasterChargeFlat:{display:"x1.5 faster charging",requirements:["spellEff"]},fasterChargeByLevel:{display:"Additional x1.1 faster charging for each Pr\u014Dfici\u014D level",requirements:["fasterChargeFlat"]},betterChargeMulti:{display:"Charge effect on spells is raised ^1.1",requirements:["fasterChargeByLevel"]},largerChargeFlat:{display:"x1.5 max charge",requirements:["spellEff"]},largerChargeByLevel:{display:"Additional x1.2 max charge for each Pr\u014Dfici\u014D level",requirements:["largerChargeFlat"]},slowerDischargeByLevel:{display:"x1.05 slower discharge for each of that spell's levels",requirements:["largerChargeByLevel"]}},[["spellEff"],["fasterChargeFlat","largerChargeFlat"],["fasterChargeByLevel","largerChargeByLevel"],["betterChargeMulti","slowerDischargeByLevel"]]),de=y(()=>l.div(fe.level.value,10)),fe=J("Schol\u0113","Practice a difficult routine that improves your ability at casting all spells.","Gain spell exp.",g.earned,{moreSpellXp:{display:"All spells gain double exp"},moreXpSpellXp:{display:"T\xE9chnasma spell gains double exp",requirements:["moreSpellXp"]},moreFlowerSpellXp:{display:"Theriz\xF3 spell gains double exp",requirements:["moreSpellXp"]},moreChargeSpellXp:{display:"Pr\u014Dfici\u014D spell gains double exp",requirements:["moreSpellXp"]},moreMassXpSpellXp:{display:"Schol\u0113 spell gains double exp",requirements:["moreSpellXp"]},moreXpPerLevel:{display:k(()=>r("div",null,[m("+.1x other spell exp per level of this spell"),r("br",null,null),m("(+"),Oe(de.value),m(")")])),requirements:["moreSpellXp"]},morePotency:{display:"Double potency of this spell",requirements:["moreSpellXp"]}},[["moreXpSpellXp","moreFlowerSpellXp"],["moreXpPerLevel","moreSpellXp","morePotency"],["moreChargeSpellXp","moreMassXpSpellXp"]]),ke={xpSpell:le,flowerSpell:L,chargeSpell:z,massXpSpell:fe},wt=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===pl})),Ve.batteries.flowers.timePassing.modifier]),kt=y(()=>wt.apply(1)),K=ne(()=>[A(()=>({multiplier:1.25,description:"Pr\u014Dfici\u014D skill (x1.25 when discharging)",enabled:()=>z.treeNodes.spellEff.bought.value&&l.gt(se.value,0)})),Qi(()=>({exponent:1.1,description:"Pr\u014Dfici\u014D skill (flat)",enabled:z.treeNodes.betterChargeMulti.bought}))]),it=y(()=>K.apply(l.log10(l.add(se.value,1)).add(1))),Le=ne(()=>[A(()=>({multiplier:V,description:`${a.name} level (x1.1 each)`})),A(()=>({multiplier:Ae,description:`T\xE9chnasma skill (x1.1 per ${a.name} level)`,enabled:le.treeNodes.morePotencyPerJobLevel.bought})),A(()=>({multiplier:ze,description:k(()=>r(F,null,[m("Flowers Effect ("),ut,m(")")]))})),A(()=>({multiplier:ze,description:"Theriz\xF3 skill (Re-apply flowers effect)",enabled:L.treeNodes.morePotencyPerFlower.bought}))]),He=y(()=>Le.apply(1)),Ge=ne(()=>[A(()=>({multiplier:Ye,description:`T\xE9chnasma skill (x1.1 per ${a.name} level)`,enabled:le.treeNodes.moreSpellXpPerJobLevel.bought})),A(()=>({multiplier:ze,description:k(()=>r(F,null,[m("Theriz\xF3 skill ("),ut,m(")")])),enabled:L.treeNodes.moreSpellXpPerFlower.bought})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreSpellXp.bought}))]),ce=y(()=>Ge.apply(1)),ft=ne(()=>[A(()=>({multiplier:He,description:"All Spell Potency"})),A(()=>({multiplier:2,description:"Spell EXP milestone (flat)",enabled:d.earned})),A(()=>({multiplier:2,description:"Theriz\xF3 milestone (flat)",enabled:p.earned})),A(()=>({multiplier:2,description:"Pr\u014Dfici\u014D milestone (flat)",enabled:f.earned})),A(()=>({multiplier:2,description:"Schol\u0113 milestone (flat)",enabled:g.earned})),A(()=>({multiplier:()=>l.pow(1.1,le.level.value),description:"T\xE9chnasma level (x1.1 each)",enabled:d.earned})),A(()=>({multiplier:()=>l.log2(l.add(le.castingTime.value,1)).div(10).add(1),description:k(()=>r(F,null,[m("T\xE9chnasma skill (log"),r("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:le.treeNodes.morePotencyOverTime.bought})),A(()=>({multiplier:it,description:"Charge Multiplier",enabled:f.earned}))]),_t=y(()=>ft.apply(1)),ct=ne(()=>[yt(()=>({addend:()=>l.div(fe.level.value,10),description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:fe.treeNodes.moreXpPerLevel.bought})),A(()=>({multiplier:ce,description:"All Spell EXP Gain"})),A(()=>({multiplier:_t,description:"T\xE9chnasma potency"})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreXpSpellXp.bought}))]),$=ne(()=>[yt(()=>({addend:_t,description:"T\xE9chnasma potency"})),A(()=>({multiplier:V,description:`${a.name} level (x1.1 each)`})),A(()=>({multiplier:4,description:"T\xE9chnasma skill (flat)",enabled:le.treeNodes.moreJobXpFlat.bought})),A(()=>({multiplier:W,description:"T\xE9chnasma skill (x1.25 per known spell)",enabled:le.treeNodes.moreJobXpPerSpell.bought})),A(()=>({multiplier:je,description:`T\xE9chnasma skill (x1.1 per ${a.name} level)`,enabled:le.treeNodes.moreJobXpPerJobLevel.bought})),A(()=>({multiplier:we,description:"T\xE9chnasma skill (x1.1 per T\xE9chnasma level)",enabled:le.treeNodes.moreJobXpPerSpellLevel.bought})),A(()=>({multiplier:ze,description:k(()=>r(F,null,[m("Flowers Effect ("),ut,m(")")])),enabled:L.treeNodes.moreJobXpPerFlower.bought})),Ve.batteries.study.xpGain.modifier]),R=ne(()=>[A(()=>({multiplier:()=>{var te;return l.pow(1/1.05,(te=le.level.value)!=null?te:0)},description:"Theriz\xF3 skill (/1.05 per T\xE9chnasma level)",enabled:z.treeNodes.slowerDischargeByLevel.bought,smallerIsBetter:!0}))]),O=y(()=>R.apply(Ct.value)),Ce=ne(()=>[yt(()=>({addend:Tt,description:"Theriz\xF3 skill (+.25 per known spell)",enabled:L.treeNodes.moreFlowersPerSpell.bought})),A(()=>({multiplier:He,description:"All Spell Potency"})),A(()=>({multiplier:()=>l.pow(1.1,L.level.value),description:"Theriz\xF3 level (x1.1 each)",enabled:d.earned})),A(()=>({multiplier:()=>l.log2(l.add(L.castingTime.value,1)).div(10).add(1),description:k(()=>r(F,null,[m("T\xE9chnasma skill (log"),r("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:le.treeNodes.morePotencyOverTime.bought})),A(()=>({multiplier:it,description:"Charge Multiplier",enabled:f.earned}))]),ie=y(()=>Ce.apply(1)),Ue=ne(()=>[yt(()=>({addend:de,description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:fe.treeNodes.moreXpPerLevel.bought})),A(()=>({multiplier:ce,description:"All Spell EXP Gain"})),A(()=>({multiplier:ie,description:"Theriz\xF3 potency"})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreFlowerSpellXp.bought}))]),Nt=ne(()=>[yt(()=>({addend:ie,description:"Theriz\xF3 potency"})),A(()=>({multiplier:2,description:"Theriz\xF3 skill (flat)",enabled:L.treeNodes.moreFlowersFlat.bought})),A(()=>({multiplier:mt,description:"Theriz\xF3 skill (x1.1 per Theriz\xF3 level)",enabled:L.treeNodes.moreFlowersPerLevel.bought})),Ve.batteries.study.resourceGain.modifier,Ft.plants.moly.modifier]),gt=y(()=>Nt.apply(0)),Gt=ne(()=>[yt(()=>({addend:.01,description:"Theriz\xF3 skill (flat)",enabled:L.treeNodes.passiveFlowerGain.bought})),A(()=>({multiplier:gt,description:"Flower gain"}))]),Je=ne(()=>[A(()=>({multiplier:()=>{var te;return l.pow(1/1.05,(te=L.level.value)!=null?te:0)},description:"Theriz\xF3 skill (/1.05 per Theriz\xF3 level)",enabled:z.treeNodes.slowerDischargeByLevel.bought,smallerIsBetter:!0}))]),oe=y(()=>Je.apply(Ct.value)),Re=ne(()=>[A(()=>({multiplier:He,description:"All Spell Potency"})),A(()=>({multiplier:()=>l.pow(1.1,z.level.value),description:"Pr\u014Dfici\u014D level (x1.1 each)"})),A(()=>({multiplier:()=>l.log2(l.add(z.castingTime.value,1)).div(10).add(1),description:k(()=>r(F,null,[m("T\xE9chnasma skill (log"),r("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:le.treeNodes.morePotencyOverTime.bought}))]),Pe=y(()=>Re.apply(1)),Q=ne(()=>[yt(()=>({addend:()=>l.div(fe.level.value,10),description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:fe.treeNodes.moreXpPerLevel.bought})),A(()=>({multiplier:ce,description:"All Spell EXP Gain"})),A(()=>({multiplier:Pe,description:"Pr\u014Dfici\u014D potency"})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreChargeSpellXp.bought}))]),vt=ne(()=>[yt(()=>({addend:Pe,description:"Pr\u014Dfici\u014D potency"})),A(()=>({multiplier:1.5,description:"Pr\u014Dfici\u014D skill (flat)",enabled:z.treeNodes.largerChargeFlat.bought})),A(()=>({multiplier:()=>l.pow(1.2,z.level.value),description:"Pr\u014Dfici\u014D skill (x1.2 per Pr\u014Dfici\u014D level)",enabled:z.treeNodes.largerChargeByLevel.bought}))]),Dt=y(()=>vt.apply(0)),sn=ne(()=>[yt(()=>({addend:()=>l.div(Pe.value,10),description:"Pr\u014Dfici\u014D potency (/10)"})),A(()=>({multiplier:1.5,description:"Pr\u014Dfici\u014D skill (flat)",enabled:z.treeNodes.fasterChargeFlat.bought})),A(()=>({multiplier:()=>l.pow(1.1,z.level.value),description:"Pr\u014Dfici\u014D skill (x1.1 per Pr\u014Dfici\u014D level)",enabled:z.treeNodes.fasterChargeFlat.bought}))]),At=y(()=>sn.apply(0)),Kt=ne(()=>[yt(()=>({addend:()=>l.div(Pe.value,10),description:"Pr\u014Dfici\u014D potency (/10)",smallerIsBetter:!0}))]),Ct=y(()=>Kt.apply(0)),vn=ne(()=>[A(()=>({multiplier:He,description:"All Spell Potency"})),A(()=>({multiplier:()=>l.pow(1.1,fe.level.value),description:"Schol\u0113 level (x1.1 each)"})),A(()=>({multiplier:()=>l.log2(l.add(fe.castingTime.value,1)).div(10).add(1),description:k(()=>r(F,null,[m("T\xE9chnasma skill (log"),r("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:le.treeNodes.morePotencyOverTime.bought})),A(()=>({multiplier:it,description:"Charge Multiplier",enabled:f.earned})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.morePotency.bought}))]),Xn=y(()=>vn.apply(1)),Yt=ne(()=>[A(()=>({multiplier:ce,description:"All Spell EXP Gain"})),A(()=>({multiplier:Xn,description:"Schol\u0113 potency"})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreMassXpSpellXp.bought}))]),Ht=ne(()=>[yt(()=>({addend:()=>l.times(Xn.value,1),description:"Schol\u0113 potency"})),Qi(()=>({exponent:.9,description:"(softcapped)"}))]),en=ne(()=>[A(()=>({multiplier:()=>{var te;return l.pow(1/1.05,(te=fe.level.value)!=null?te:0)},description:"Pr\u014Dfici\u014D skill (/1.05 per Schol\u0113 level)",enabled:z.treeNodes.slowerDischargeByLevel.bought,smallerIsBetter:!0}))]),xt=y(()=>en.apply(Ct.value)),_n={timePassing:wt,chargeMult:K,allSpellPotency:Le,allSpellXpGain:Ge,xpSpellPotency:ft,xpSpellXp:ct,jobXpGain:$,jobXpDischargeRate:R,flowerSpellPotency:Ce,flowerSpellXp:Ue,flowerGain:Nt,flowerPassiveGain:Gt,flowerDischargeRate:Je,chargeSpellPotency:Re,chargeSpellXp:Q,chargeCap:vt,chargeRate:sn,baseDischargeRate:Kt,massXpSpellPotency:vn,massXpSpellXp:Yt,massXpGain:Ht,massXpDischargeRate:en},[I,pe]=Wt(()=>[{title:"Time Passing",modifier:wt,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:"Harvesting Flowers EXP Gain",subtitle:"When T\xE9chnasma is active",modifier:$,base:0,unit:"/sec"},{title:"All Spell Potency",modifier:Le},{title:"All Spell EXP Gain",subtitle:"When the spell is active",modifier:Ge,unit:"/sec"},{title:"Flowers Gain",subtitle:"When Theriz\xF3 is active",modifier:Nt,base:0,unit:"/sec",visible:p.earned},{title:"Flowers Gain",subtitle:"When Theriz\xF3 is NOT active",modifier:Gt,base:0,unit:"/sec",visible:()=>p.earned.value&&l.neq(Gt.apply(0),0)}]),[Te,Ie]=Wt(()=>[{title:"T\xE9chnasma Potency",modifier:ft},{title:"T\xE9chnasma EXP Gain",subtitle:"When T\xE9chnasma is active",modifier:ct,unit:"/sec"},{title:"Discharge Rate",subtitle:"When T\xE9chnasma is active",modifier:R,base:Ct,unit:"/sec",visible:f.earned,smallerIsBetter:!0}]),[dt,$t]=Wt(()=>[{title:"Theriz\xF3 Potency",modifier:Ce},{title:"Theriz\xF3 EXP Gain",subtitle:"When Theriz\xF3 is active",modifier:Ue,base:.1,unit:"/sec"},{title:"Discharge Rate",subtitle:"When Theriz\xF3 is active",modifier:Je,base:Ct,unit:"/sec",visible:f.earned,smallerIsBetter:!0}]),[Rt,gn]=Wt(()=>[{title:"Pr\u014Dfici\u014D Potency",modifier:Re},{title:"Pr\u014Dfici\u014D EXP Gain",subtitle:"When Pr\u014Dfici\u014D is active",modifier:Q,base:.01,unit:"/sec"},{title:"Charge Multiplier",subtitle:"When a non-Pr\u014Dfici\u014D spell is active",modifier:K,base:()=>l.log2(l.add(se.value,1)).add(1),unit:"x",baseText:k(()=>r(F,null,[m("Base (log"),r("sub",null,[m("2")]),m("(charge + 1) + 1)")]))},{title:"Charge Rate",subtitle:"When Pr\u014Dfici\u014D is active",modifier:sn,base:0,unit:"/sec"},{title:"Base Discharge Rate",subtitle:"When a non-Pr\u014Dfici\u014D spell is active",modifier:Kt,base:0,unit:"/sec",smallerIsBetter:!0},{title:"Maximum Charge",modifier:vt,base:0}]),[Fn,oi]=Wt(()=>[{title:"Schol\u0113 Potency",modifier:vn},{title:"Schol\u0113 EXP Gain",subtitle:"When Schol\u0113 is active",modifier:Yt,base:.001,unit:"/sec"},{title:"Other Spell EXP Gain Efficiency",subtitle:"When Schol\u0113 is active",modifier:Ht,base:0,unit:"%"},{title:"Discharge Rate",subtitle:"When Schol\u0113 is active",modifier:en,base:Ct,unit:"/sec",visible:f.earned,smallerIsBetter:!0}]),Hn=$n({general:()=>({display:"General",glowColor(){return Hn.activeTab.value===this.tab?t:""},tab:I,generalTabCollapsed:pe}),xpSpell:()=>({display:"T\xE9chnasma",glowColor(){return Hn.activeTab.value===this.tab?t:""},tab:Te,xpSpellTabCollapsed:Ie}),flowerSpell:()=>({display:"Theriz\xF3",visibility:p.earned,glowColor(){return Hn.activeTab.value===this.tab?t:""},tab:dt,flowerSpellTabCollapsed:$t}),chargeSpell:()=>({display:"Pr\u014Dfici\u014D",visibility:f.earned,glowColor(){return Hn.activeTab.value===this.tab?t:""},tab:Rt,chargeSpellTabCollapsed:gn}),massXpSpell:()=>({display:"Schol\u0113",visibility:g.earned,glowColor(){return Hn.activeTab.value===this.tab?t:""},tab:Fn,massXpSpellTabCollapsed:oi})},()=>({style:`--layer-color: ${t}`}));return this.on("update",te=>{if(!!a.active.value){if(te=l.times(te,kt.value).toNumber(),le.active.value&&(a.xp.value=l.add(a.xp.value,l.times($.apply(0),te)),d.earned.value&&(le.xp.value=l.add(le.xp.value,l.times(ct.apply(1),te))),le.castingTime.value+=te,se.value=l.max(l.sub(se.value,l.times(O.value,te)),0)),L.active.value)n.value=l.min(at.chapter.value>1?l.dInf:1e7,l.add(n.value,l.times(Nt.apply(0),te))),d.earned.value&&(L.xp.value=l.add(L.xp.value,l.times(Ue.apply(.1),te))),L.castingTime.value+=te,se.value=l.max(l.sub(se.value,l.times(oe.value,te)),0);else{const Ot=Gt.apply(0);l.neq(Ot,0)&&(n.value=l.min(at.chapter.value>1?l.dInf:1e7,l.add(n.value,l.times(Ot,te))))}if(z.active.value&&(z.xp.value=l.add(z.xp.value,l.times(Q.apply(.01),te)),z.castingTime.value+=te,se.value=l.min(l.add(se.value,l.times(At.value,te)),Dt.value)),fe.active.value){const Ot=l.div(Ht.apply(0),100);le.xp.value=l.add(le.xp.value,l.times(ct.apply(Ot),te)),L.xp.value=l.add(L.xp.value,l.times(Ue.apply(Ot),te)),z.xp.value=l.add(z.xp.value,l.times(Q.apply(Ot),te)),fe.xp.value=l.add(fe.xp.value,l.times(Yt.apply(.001),te)),fe.castingTime.value+=te,se.value=l.max(l.sub(se.value,l.times(xt.value,te)),0)}}}),{name:e,color:t,minWidth:670,flowers:n,bestMoly:i,job:a,spells:ke,modifiers:_n,milestones:w,collapseMilestones:C,chargeAmount:se,modifierTabs:Hn,display:k(()=>{const te=[...M.value];return Y.value&&te.push(Y.value),r(F,null,[dn(r(qi,{resource:n,color:t,effectDisplay:`multiplying spell potency by x${Oe(ze.value)}`},null),[[Nn,p.earned.value]]),ii(...te,k(()=>dn(r(ri,{collapsed:C,content:ae,display:C.value?"Show other completed milestones":"Hide other completed milestones"},null),[[Nn,o(T)]]))),r(Ne,null,null),r("div",{style:"position: relative; z-index: 1"},[m("You can cast "),Lt(u.value),m(" spell"),u.value===1?"":"s",m(" at a time")]),hl(...Object.values(ke).map(Ot=>Ot.selector)),f.earned.value?r($i,{style:"margin-top: 40px !important; margin-bottom: -20px;"},{default:()=>[st(ue),r("span",{style:"margin-left: 10px"},[Oe(it.value),m("x")])]}):null,d.earned.value?Object.values(ke).filter(Ot=>Ot.active.value).map(Ot=>r(ed,{spell:Ot},null)):null,st(c)])})}}),Bd={},Vd={style:{"white-space":"nowrap","font-size":"larger","font-family":"initial"}},zd=m(" \u230A\xA0"),Gd=m("\xA0\u230B ");function Ud(e,t){return h(),x("span",Vd,[zd,Zt(e.$slots,"default"),Gd])}var Kl=me(Bd,[["render",Ud]]);const Xd={},Hd={style:{"white-space":"nowrap"}},Jd=v("span",{style:{"font-size":"larger","font-family":"initial"}},"\u221A",-1),Wd={style:{display:"inline-block","border-top":"1px solid","padding-left":"0.2em"}};function Qd(e,t){return h(),x("span",Hd,[Jd,v("div",Wd,[Zt(e.$slots,"default")])])}var Zd=me(Xd,[["render",Qd]]);const Yl={gold:"\u2609",silver:"\u263D",mercury:"\u263F",copper:"\u2640",iron:"\u2642",tin:"\u2643",lead:"\u2644"},Kd=["leo","virgo","libra","scorpio","capricorn","pisces"],Yd=["aries","taurus","gemini","cancer","sagittarius","aquarius"],Oi={aries:"fire",taurus:"earth",gemini:"air",cancer:"water",leo:"fire",virgo:"earth",libra:"air",scorpio:"water",sagittarius:"fire",capricorn:"earth",aquarius:"air",pisces:"water"},ep=Symbol("Card");function on(e){const t=H(0),n=H(0);return pt(()=>{const i=e();i.id=mn("card-"),i.type=ep,i[nt]=ki,i.amount=t,i.level=n,i.startingAmount&&(t[mi]=t.value=i.startingAmount),i.display=k(()=>{var _;const f=i,g=he(typeof f.description=="function"?f.description(o(f.level)):o(f.description),"h3"),w=he((_=o(f.formula))!=null?_:"");return r(F,null,[r(g,null,null),r("div",{class:"metal"},[Yl[f.metal]]),f.formula?r("div",{class:"formula"},[r(w,null,null)]):null])});const a=he(i.display),s=ki,u=k(()=>{var _;const f=i,g=he(typeof f.description=="function"?f.description(l.add(o(f.level),1)):o(f.description),"h3"),w=he((_=o(f.formula))!=null?_:"");return r(F,null,[r(g,null,null),r("div",{class:"metal"},[Yl[f.metal]]),f.formula?r("div",{class:"formula"},[r(w,null,null)]):null])});i.renderForUpgrade=f=>r(s,Qt({id:`${i.id}-upg-${f}`},i[Be](),{display:f?u:a,class:"big",canClick:!1}),null),i.renderForDeck={[nt]:s,[Be]:()=>({id:`${i.id}-deck`,...i[Be](),display:k(()=>r(F,null,[r(a,null,null),r("div",{class:"badge amount"},[i.amount.value]),i.showNotif.value?r(xn,{style:"left: 20px; top: -20px"},null):null])),onClick:i.onSelect})};const c=k(()=>r(F,null,[r(a,null,null),i.amount.value===0?r("div",{class:"badge new"},[m("NEW!")]):null]));i.renderForShop=k(()=>{const f=i;return f.price==null?r(s,Qt({id:`${i.id}-shop`},f[Be](),{class:{shop:!0,hidden:!0},canClick:!1}),null):r(s,Qt({id:`${i.id}-shop`},f[Be](),{class:{shop:!0},display:c,canClick:!1}),null)});const d=X(!0);let p=-1;return i.renderForPlay=f=>{const g=i,w=ki;return f.value!==p&&(d.value=!1,requestAnimationFrame(()=>d.value=!0),p=f.value),r(w,Qt({id:`${i.id}-play`},g[Be](),{class:{big:!0,playing:!0,flipping:d.value},canClick:!1}),null)},q(i,"description"),tt(i,"actions",{}),q(i,"formula"),i.showNotif=Pi(i.renderForDeck,i.shouldNotify.bind(i)),i[Be]=function(){const{id:f,display:g,sign:w}=this;return{id:f,display:g,visibility:De.Visible,classes:{card:!0,dontMerge:!0,solar:Kd.includes(w),lunar:Yd.includes(w)},canClick:!0}},i})}function Aa(e,t){return q(t,"display"),q(t,"classes"),q(t,"style"),q(t,"direction"),tt(t,"direction",xe.Up),q(t,"xoffset"),q(t,"yoffset"),t.pinnable&&(t.pinned=H(!1,!1)),Bt(()=>{t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1,Ns(t.pinned)):e.pinned=t.pinned);const n=e[nt];e[nt]=lt;const i=e[Be].bind(e);e[Be]=function(){const{display:s,classes:u,style:c,direction:d,xoffset:p,yoffset:f,pinned:g}=this;return{element:{[nt]:n,[Be]:i},display:s,classes:u,style:o(c),direction:d,xoffset:p,yoffset:f,pinned:g}}.bind(t)}),t}const tp=Symbol("Repeatable");function La(e){const t=H(0);return pt(()=>{var d;const n=e();n.id=mn("repeatable-"),n.type=tp,n[nt]=ki,n.amount=t,n.amount[mi]=(d=n.initialAmount)!=null?d:0;const i={requirementMet:y(()=>l.sub(o(n.limit),n.amount.value)),requiresPay:!1,visibility:De.None},a=El(n);yn(n.requirements)?(n.requirements.unshift(a),n.requirements.push(i)):n.requirements=[a,n.requirements,i],n.maxed=y(()=>l.gte(n.amount.value,o(n.limit))),q(n,"classes");const s=n.classes;n.classes=y(()=>{const p=o(s)||{};return n.maxed.value&&(p.bought=!0),p}),n.amountToIncrease=y(()=>o(n.maximize)?Ia(n.requirements):1),n.canClick=y(()=>nl(n.requirements));const u=n.onClick;n.onClick=function(p){const f=n;!o(f.canClick)||(Ea(n.requirements,o(n.amountToIncrease)),f.amount.value=l.add(f.amount.value,1),u==null||u(p))},q(n,"display");const c=n.display;return n.display=k(()=>{var f,g,w;const p=o(c);if(fn(p)){const _=he(p);return r(_,null,null)}if(p!=null){const _=n,C=he((f=p.title)!=null?f:"","h3"),M=he((g=p.description)!=null?g:""),Y=he((w=p.effectDisplay)!=null?w:"");return r("span",null,[p.title==null?null:r("div",null,[r(C,null,null)]),p.description==null?null:r(M,null,null),p.showAmount===!1?null:r("div",null,[r("br",null,null),o(_.limit)===l.dInf?r(F,null,[m("Amount: "),ge(_.amount.value)]):r(F,null,[m("Amount: "),ge(_.amount.value),m(" /")," ",ge(o(_.limit))])]),p.effectDisplay==null?null:r("div",null,[r("br",null,null),m("Currently: "),r(Y,null,null)]),_.maxed.value?null:r("div",null,[r("br",null,null),il(_.requirements,o(n.amountToIncrease))])])}return""}),q(n,"visibility"),tt(n,"visibility",De.Visible),q(n,"limit"),tt(n,"limit",l.dInf),q(n,"style"),q(n,"mark"),q(n,"small"),q(n,"maximize"),n[Be]=function(){const{display:p,visibility:f,style:g,classes:w,onClick:_,canClick:C,small:M,mark:Y,id:ae}=this;return{display:p,visibility:f,style:o(g),classes:w,onClick:_,canClick:C,small:M,mark:Y,id:ae}},n})}const np=!1,ip=!0,lp={min:2,max:1.8},ap=.1,rp=-1,sp=1e3,op=!0,up={x:.5,y:.5},cp=[{type:"alpha",config:{alpha:{list:[{time:0,value:0},{time:.2,value:.4},{time:1,value:0}]}}},{type:"moveSpeedStatic",config:{min:10,max:10}},{type:"scale",config:{scale:{list:[{time:0,value:.5},{time:1,value:.1}]},minMult:1}},{type:"rotationStatic",config:{min:0,max:360}},{type:"blendMode",config:{blendMode:"screen"}},{type:"textureRandom",config:{textures:["/smokeparticle.png","/particle.png"]}},{type:"spawnShape",config:{type:"torus",data:{x:0,y:12.5,radius:25,innerRadius:0,affectRotation:!1}}}];var ea={emit:np,autoUpdate:ip,lifetime:lp,frequency:ap,emitterLifetime:rp,maxParticles:sp,addAtBack:op,pos:up,behaviors:cp},dp=["Now we're cooking","Alchemy's always been more of a philosophical experience for me","Transform!","The elements transform you just as much as you transform them","You cannot step twice into the same stream","Sometimes I wonder if there may be dozens of elements","Could I mix two elements to create something new? No, that wouldn't make sense","There is no intelligence where there is no need of change","But what good is time without change?","Elements? I love elements!","What doesn't challenge you, doesn't change you","Change is the only constant","Flowers and elements, a potent combination","Alchemy unveils the power hidden within","Turning the ordinary into the extraordinary","Every transformation brings new insights","From flowers to elements, the journey continues","These processes are a delicate balance","Unlocking the potential hidden in every bloom","Everything flows and nothing abides; everything gives way and nothing stays fixed","Change is the law of life","In the midst of change, we find purpose","Embrace change, explore new paths","Where flowers bloom, so does hope","Unlocking potential, one transformation at a time"];const pp=y(()=>at.chapter.value>1);function ji(e,t){return Object.assign({},ea,{behaviors:[...ea.behaviors,{type:"color",config:{color:{list:[{time:0,value:e},{time:1,value:t}]}}}]})}const ml="distill",Qe=In(ml,function(){const e="Purifying Flowers",t="#267BD1",n=pn(0,"essentia"),i=tl(n),a=y(()=>Object.values(je).some(K=>{var it;return o((it=K.showNotif)==null?void 0:it.value)})),s=Un(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"25%",y:"60%"},symbol:"\u{1F76D}",randomQuips(){return[...dp,...si]},resource:Ut(n),layerID:ml,modifierInfo:k(()=>st(kt)),visibility:pp,showNotif:a})),u=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,2)),display:{requirement:`Achieve ${s.name} Level 2`,effectDisplay:"Unlock Water"}})),c=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,4)),display:{requirement:`Achieve ${s.name} Level 4`,effectDisplay:"Unlock Principles"},visibility:u.earned})),d=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,5)),display:{requirement:`Achieve ${s.name} Level 5`,effectDisplay:'Unlock "Studying" Job'},visibility:c.earned,onComplete(){wn(kn,G)}})),p=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,6)),display:{requirement:`Achieve ${s.name} Level 6`,effectDisplay:"Unlock Air"},visibility:d.earned})),f=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,8)),display:{requirement:`Achieve ${s.name} Level 8`,effectDisplay:"Unlock Fire"},visibility:p.earned})),g=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,10)),display:{requirement:`Achieve ${s.name} Level 10`,effectDisplay:'Unlock "Measuring" Job'},visibility:f.earned,onComplete(){wn(Se,G)}})),w={waterMilestone:u,principlesMilestone:c,studyMilestone:d,airMilestone:p,fireMilestone:f,experimentsMilestone:g},_=[g,f,p,d,c,u],C=H(!0),M=y(()=>_.filter(K=>K.earned.value===!1)),{firstFeature:Y,collapsedContent:ae,hasCollapsedContent:T}=li(_,K=>K.earned.value),P=el(()=>({fullscreen:!1,zIndex:-1,boundingRect:X(void 0),onContainerResized(K){this.boundingRect.value=K},onHotReload(){Object.values(je).forEach(K=>K.refreshParticleEffect())}})),J=y(()=>l.pow(1.1,s.level.value));function se(K,it,Le=""){const He=H(0),Ge=pn(0,K+" essence",2);let ce=[];const[ft,_t]=Wt(()=>ce);let ct=null,$=null;const R=ne(()=>[yt(()=>({addend:()=>{var O;return l.times((O=ct==null?void 0:ct.amount.value)!=null?O:0,5)},description:k(()=>r(F,null,[un(Le),m(" effect (5 x "),Le,m(" amount)")]))}))]);return Le&&(ct=La(()=>{const O=Ta(()=>({resource:Ut(Ge),cost:E.variable(ct.amount).pow_base(10)}));return{display:k(()=>r("div",null,[m("Prepare "),Le,m(" to gain a portion of "),K,m(" whenever the above instrument is active"),r("br",null,null),m("("),ge(R.apply(0)),m("%)"),r("br",null,null),r("br",null,null),m("Cost:")," ",Sn(Ge,o(O.cost.evaluate()))," ",Ge.displayName,$!=null&&$.value?r(xn,{style:"top: -25px"},null):null])),visibility:c.earned,requirements:O}}),$=Pi(ct,ct.canClick)),pt(()=>{const O=Object.assign({principle:"",prevElement:null,visible:!0},it()),Ce=Ke(O.visible),ie=ne(()=>[]),Ue=y(()=>ie.apply(l.times(Ee.flowers.value,He.value).div(100).floor())),Nt=ne(()=>[A(()=>({multiplier:()=>l.div(He.value,100)})),A(()=>({multiplier:J,description:`${s.name} level (x1.1 each)`})),Ve.batteries.distill.resourceGain.modifier,...O.modifiers()]),gt=y(()=>{var Pe,Q;return l.add(Nt.apply(l.gt(Ue.value,0)?l.div(Ue.value,100).ceil().log(10):0),l.times((Q=(Pe=O.prevElement)==null?void 0:Pe.actualGain.value)!=null?Q:0,R.apply(0)).div(100))});ce=[{title:"Flowers Loss",modifier:ie,base:()=>l.times(Ee.flowers.value,He.value).div(100).floor(),baseText:k(()=>r(F,null,[m("Base (\u230Aflowers x conversion amount\u230B)")])),unit:"/sec"},{title:`${un(K)} Essence Gain`,subtitle:"When cost is non-zero",modifier:Nt,base:()=>l.gt(Ue.value,0)?l.div(Ue.value,100).ceil().log(10):0,baseText:k(()=>r(F,null,[m("Base (log"),r("sub",null,[m("10")]),m("(flowers loss))")])),unit:"/sec"}],ct&&O.prevElement&&ce.push({title:`${un(K)} Essence Gain`,subtitle:`% of ${un(O.prevElement.name)} essence gain`,modifier:R,base:0,unit:"%"});const Gt=k(()=>o(Ce)?r("div",{class:"element-display",style:"color: "+O.color},[r(lt,{display:un(K)},{default:()=>[r("div",{class:"element-logo"},[O.symbol,r(Gn,{id:K},null)])]}),r("div",{class:"element-amount"},[ge(Ge.value)])]):""),Je=X(P.addEmitter(O.particlesConfig)),oe=async([Pe,Q,vt])=>{const Dt=await Je.value;Dt.emit=Pe&&Q!=null&&vt!=null,Pe&&Q&&vt&&!Dt.destroyed&&(Dt.cleanup(),Dt.updateOwnerPos(Q.x+Q.width/2-vt.x,Q.y+Q.height/2-vt.y),Dt.resetPositionTracking())},Re=()=>{Je.value.then(Pe=>Pe.destroy()).then(()=>Je.value=P.addEmitter(O.particlesConfig)).then(()=>{var Pe;return oe([l.gt(gt.value,0),(Pe=Qe.nodes.value[K])==null?void 0:Pe.rect,P.boundingRect.value])})};return Bt(()=>et([()=>l.gt(gt.value,0),()=>{var Pe;return(Pe=Qe.nodes.value[K])==null?void 0:Pe.rect},P.boundingRect],oe)),{name:K,...O,resource:Ge,conversionAmount:He,cost:ie,computedCost:Ue,gain:Nt,actualGain:gt,tab:ft,tabCollapsed:_t,display:Gt,showNotif:$,visible:Ce,principleClickable:ct,particlesEmitter:Je,refreshParticleEffect:Re}})}const ue=se("earth",()=>({symbol:"\u{1F703}",color:"green",particlesConfig:ji("#B6FF0D","#59E80C"),modifiers:()=>[Ft.plants.earthEssence.modifier]})),V=se("water",()=>({symbol:"\u{1F704}",color:"blue",particlesConfig:ji("#0D8CFF","#0C46E8"),modifiers:()=>[Ft.plants.waterEssence.modifier],prevElement:Ut(ue),visible:u.earned}),"salt"),W=se("air",()=>({symbol:"\u{1F701}",color:"yellow",particlesConfig:ji("#FFCE0D","#E8D20C"),modifiers:()=>[Ft.plants.airEssence.modifier],prevElement:Ut(V),visible:p.earned}),"mercury"),Ae=se("fire",()=>({symbol:"\u{1F702}",color:"red",particlesConfig:ji("#FF530D","#E82C0C"),modifiers:()=>[Ft.plants.fireEssence.modifier],prevElement:Ut(W),visible:f.earned}),"sulfur"),je={earth:ue,water:V,air:W,fire:Ae};function we(K,it,Le){const He=k(()=>o(K.visible)?r("div",null,[r("div",{class:{instrument:!0,principled:K.principleClickable&&ht(K.principleClickable.visibility)},style:`--progress: ${K.conversionAmount.value/100}; --foreground: ${K.color}`},[r("div",{style:"width: 100%; display: flex"},[r("span",{class:"instrument-logo"},[Le]),r("span",{class:"instrument-details"},[r("div",null,[un(it)]),r("div",null,[m("-"),Sn(Ee.flowers,K.computedCost.value)," ",Ee.flowers.displayName,m("/sec")]),r("div",null,[m("+"),Sn(K.resource,K.actualGain.value)," ",K.resource.displayName,m("/sec")]),r(Da,{max:Object.values(ze).filter(Ge=>Ge.name!==it).reduce((Ge,ce)=>Ge-ce.element.conversionAmount.value,100),modelValue:K.conversionAmount.value,"onUpdate:modelValue":Ge=>K.conversionAmount.value=Ge},null)])])]),K.principleClickable?st(K.principleClickable):null]):"");return{name:it,symbol:Le,element:Ut(K),display:He}}const Ye=we(ue,"alembic","\u{1F76A}"),le=we(V,"retort","\u{1F76D}"),Tt=we(W,"crucible","\u{1F767}"),mt=we(Ae,"bainMarie","\u{1F76B}"),ze={retort:le,alembic:Ye,crucible:Tt,bainMarie:mt},ut=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===ml})),Ve.batteries.distill.timePassing.modifier]),L=y(()=>ut.apply(1)),z=ne(()=>[A(()=>({multiplier:()=>l.max(1,ue.resource.value),description:"Earth Essence"})),A(()=>({multiplier:()=>l.max(1,V.resource.value),description:"Water Essence"})),A(()=>({multiplier:()=>l.max(1,W.resource.value),description:"Air Essence"})),A(()=>({multiplier:()=>l.max(1,Ae.resource.value),description:"Fire Essence"})),Ve.batteries.distill.xpGain.modifier]),de=ne(()=>[yt(()=>({addend:ue.computedCost,description:"Alembic"})),yt(()=>({addend:V.computedCost,description:"Retort"})),yt(()=>({addend:W.computedCost,description:"Crucible"})),yt(()=>({addend:Ae.computedCost,description:"Bain-Marie"}))]),fe={timePassing:ut,jobXp:z,totalFlowerLoss:de},[ke,wt]=Wt(()=>[{title:"Time Passing",modifier:ut,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:"Essentia",subtitle:`Also ${s.name} EXP Amount`,modifier:z,base:1},{title:"Flowers Loss",modifier:de,base:0,unit:"/sec"}]),kt=$n({general:()=>({display:"General",glowColor(){return kt.activeTab.value===this.tab?t:""},tab:ke,generalTabCollapsed:wt}),...Object.entries(je).reduce((K,[it,Le])=>({...K,[it]:()=>({display:un(Le.name),glowColor(){return kt.activeTab.value===this.tab?t:""},tab:Le.tab,tabCollapsed:Le.tabCollapsed})}),{})});return this.on("preUpdate",K=>{if(n.value=Object.values(je).reduce((Le,He)=>Le.times(l.max(1,He.resource.value)),new l(1)),l.gt(n.value,s.xp.value)&&(s.xp.value=n.value),!s.active.value)return;K=l.times(K,L.value).toNumber();const it=de.apply(0);Object.values(je).forEach(Le=>{Le.resource.value=l.add(Le.resource.value,l.times(Le.actualGain.value,K))}),Ee.flowers.value=l.sub(Ee.flowers.value,it).max(0)}),{name:e,color:t,minWidth:670,essentia:n,bestEssentia:i,elements:je,instruments:ze,job:s,milestones:w,modifiers:fe,modifierTabs:kt,collapseMilestones:C,display:k(()=>{const K=[...M.value];return Y.value&&K.push(Y.value),r(F,null,[r(qi,{resource:n,color:t},null),ii(...K,k(()=>dn(r(ri,{collapsed:C,content:ae,display:C.value?"Show other completed milestones":"Hide other completed milestones"},null),[[Nn,o(T)]]))),hl(ue.display,V.display,W.display,Ae.display),r(Ne,null,null),hl(Ye.display,le.display,Tt.display,mt.display),Ze(P)])})}});var mp=["I've always had an affinity for lead","When I'm near lead I feel in my element","Sometimes I wonder if there may be more planets","I have to believe in the heart of the cards","My deck has no bad cards","Honestly, cards are pretty abstract","Cards? I love cards!","Is this world governed more by logic or chance?","Each flower holds a secret","In every bloom, there's a story waiting to unfold","Uncovering nature's mysteries, one card at a time","The elements guide my every move","Knowledge, like a river, constantly flows","The art of discovery lies within the cards","Every revelation brings me closer to mastery","A world of wonder, waiting to be deciphered","In the cards, the key to understanding","Comprehending the intricate dance of elements","The wisdom of ages, in the palm of my hand","The only true wisdom is in knowing you know nothing","The roots of education are bitter, but the fruit is sweet","Education is the kindling of a flame, not the filling of a vessel","All learning has an emotional base","Knowledge is power","Wonder is the beginning of wisdom"];const fp={min:.5,max:1},vp=[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],gp=.001,hp=.1,bp=100,yp=!0,wp={x:0,y:0},_p=!1,Cp=[{type:"alpha",config:{alpha:{list:[{time:0,value:.74},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:700},{time:1,value:0}]},minMult:1}},{type:"scale",config:{scale:{list:[{time:0,value:5},{time:1,value:1.2}]},minMult:1}},{type:"color",config:{color:{list:[{time:0,value:"#ffdfa0"},{time:1,value:"#100f0c"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:200,minStart:0,maxStart:360}},{type:"textureRandom",config:{textures:["/particle.png"]}},{type:"spawnShape",config:{type:"rect",data:{x:-300,y:-125,w:600,h:250}}}];var Sp={lifetime:fp,ease:vp,frequency:gp,emitterLifetime:hp,maxParticles:bp,addAtBack:yp,pos:wp,emit:_p,behaviors:Cp};const ci=gi(),fl="study",kn=In(fl,function(){const e="Studying",t="#D16726",n=pn(0,"properties"),i=pn(0,"insights"),a=tl(i),s=H(0),u=H(0),c=y(()=>f.earned.value&&Object.values(Q).some(I=>I.showNotif.value)),d=Un(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"25%",y:"20%"},symbol:"\u{1F56E}",randomQuips(){return[...mp,...si]},resource:Ut(n),layerID:fl,modifierInfo:k(()=>st(it)),visibility:Qe.milestones.studyMilestone.earned,showNotif:c})),p=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,2)),display:{requirement:`Achieve ${d.name} Level 2`,effectDisplay:"Unlock drawing cards manually"}})),f=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,4)),display:{requirement:`Achieve ${d.name} Level 4`,effectDisplay:"Unlock purchasing and selling cards"},visibility:p.earned})),g=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,5)),display:{requirement:`Achieve ${d.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility:f.earned})),w=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,6)),display:{requirement:`Achieve ${d.name} Level 6`,effectDisplay:"Unlock optimizations"},visibility:g.earned})),_=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,8)),display:{requirement:`Achieve ${d.name} Level 8`,effectDisplay:"Unlock upgrading cards"},visibility:w.earned})),C=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,10)),display:{requirement:`Achieve ${d.name} Level 10`,effectDisplay:'Unlock "Breeding Plants" Job'},visibility:_.earned,onComplete(){wn(Ft,G)}})),M={manualMilestone:p,shopMilestone:f,timeSlotMilestone:g,optimizationsMilestone:w,upgradingMilestone:_,jobMilestone:C},Y=[C,_,w,g,f,p],ae=H(!0),T=y(()=>Y.filter(I=>I.earned.value===!1)),{firstFeature:P,collapsedContent:J,hasCollapsedContent:se}=li(Y,I=>I.earned.value),ue=y(()=>w.earned.value?l.pow(1.1,l.max(Ee.bestMoly.value,1).log10().floor()):1);let V=null;Bt(()=>et(()=>ge(l.times(ue.value,100).sub(100)),I=>{Fe.active===G.id&&(V!=null&&ci.dismiss(V),V=ci.info(r(F,null,[r("h3",null,[m("Experience Optimized!")]),r("div",null,[m("Experience optimization is now "),I,m("%")])])))}));const W=Gi(()=>({direction:xe.Right,width:500,height:25,progress:()=>l.sub(1,l.add(Ee.bestMoly.value,1).log10().ceil().sub(l.max(Ee.bestMoly.value,1).log10())),display:k(()=>r(F,null,[Oe(Ee.bestMoly.value),m(" best moly")])),borderStyle:{borderColor:Ee.color,color:"#FFF"},fillStyle:{backgroundColor:Ee.color}})),Ae=y(()=>w.earned.value?l.pow(1.1,l.max(Qe.bestEssentia.value,1).log10().floor()):1);let je=null;Bt(()=>et(()=>ge(l.times(Ae.value,100).sub(100)),I=>{Fe.active===G.id&&(je!=null&&ci.dismiss(je),je=ci.info(r(F,null,[r("h3",null,[d.name,m(" Optimized!")]),r("div",null,[d.name,m(" optimization is now "),I,m("%")])])))}));const we=Gi(()=>({direction:xe.Right,width:500,height:25,progress:()=>l.sub(1,l.add(Qe.bestEssentia.value,1).log10().ceil().sub(l.max(Qe.bestEssentia.value,1).log10())),display:k(()=>r(F,null,[Oe(Qe.bestEssentia.value),m(" best essentia")])),borderStyle:{borderColor:Qe.color,color:"#FFF"},fillStyle:{backgroundColor:Qe.color}})),Ye=y(()=>w.earned.value?l.pow(1.1,l.max(a.value,1).log10().floor()):1);let le=null;Bt(()=>et(()=>ge(l.times(Ye.value,100).sub(100)),I=>{Fe.active===G.id&&(le!=null&&ci.dismiss(le),le=ci.info(r(F,null,[r("h3",null,[m("Draw Time Optimized!")]),r("div",null,[m("Draw time optimization is now "),I,m("%")])])))}));const Tt=Gi(()=>({direction:xe.Right,width:500,height:25,progress:()=>l.sub(1,l.add(a.value,1).log10().ceil().sub(l.max(a.value,1).log10())),display:k(()=>r(F,null,[Oe(a.value),m(" best insights")])),borderStyle:{borderColor:t,color:"#FFF"},fillStyle:{backgroundColor:t}})),mt=y(()=>l.pow(1.1,d.level.value)),ze=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===fl})),Ve.batteries.study.timePassing.modifier]),ut=y(()=>ze.apply(1)),L=ne(()=>[A(()=>({multiplier:mt,description:`${d.name} level (x1.1 each)`})),A(()=>({multiplier:Ae,description:`${d.name} optimization`,enabled:w.earned})),Ve.batteries.study.resourceGain.modifier,Ft.plants.properties.modifier]),z=y(()=>L.apply(10)),de=ne(()=>[A(()=>({multiplier:()=>l.times(.01,u.value).add(1),description:"Drawn cards (+.01x each)"})),A(()=>({multiplier:ue,description:"Experience optimization",enabled:w.earned})),Ve.batteries.study.xpGain.modifier]),fe=ne(()=>[A(()=>({multiplier:()=>l.div(1,Ye.value),description:"Draw speed optimization",enabled:w.earned,smallerIsBetter:!0})),A(()=>({multiplier:.5,description:"Faster draw card",enabled:()=>gt.value>0,smallerIsBetter:!0}))]),ke=y(()=>fe.apply(10)),wt=ne(()=>[A(()=>({multiplier:.5,description:"Manual bonus",smallerIsBetter:!0}))]),kt=y(()=>wt.apply(ke.value)),K={timePassing:ze,propertiesGain:L,jobXpGain:de,drawTime:fe,manualDrawTime:wt},[it,Le]=Wt(()=>[{title:"Time Passing",modifier:ze,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:"Properties Gain",modifier:L,base:10},{title:`${d.name} EXP Gain`,modifier:de,base:1,baseText:"Base (per property gained)"},{title:"Automatic Card Draw",modifier:fe,base:10,unit:"s",smallerIsBetter:!0},{title:"Manual Card Draw",modifier:wt,base:ke,unit:"s",smallerIsBetter:!0}]),He=el(()=>({fullscreen:!1,zIndex:-1,boundingRect:X(null),onContainerResized(I){this.boundingRect.value=I}})),Ge=y(()=>Object.values(Q).reduce((I,pe)=>I+pe.amount.value,0)),ce=H(""),ft=H(["","",""]),_t=H("nothing"),ct=X(0),$=on(()=>({description:"Do nothing.",metal:"mercury",sign:"gemini",startingAmount:4,onSelect:()=>ce.value="nothing",shouldNotify:function(){return xt(this)}})),R=on(()=>({description:I=>k(()=>r("h3",null,[m("Record")," ",It(ge(l.times(z.value,l.add(I,1))))," ",m("properties and job exp.")])),metal:"gold",sign:"leo",actions:{onPlay:I=>{const pe=l.times(z.value,l.add(I,1));n.value=l.add(n.value,pe),d.xp.value=l.add(d.xp.value,de.apply(pe))}},formula:k(()=>It("properties gain x level")),price:1,startingAmount:4,onSelect:()=>ce.value="gainPoints",shouldNotify:function(){return xt(this)}})),O=on(()=>({description:I=>k(()=>r("h3",null,[m("Record")," ",It(ge(l.times(z.value,l.add(I,1)).times(10).pow(1.2)))," ",m("properties and job exp. Destroy this card.")])),metal:"tin",sign:"sagittarius",actions:{onPlay:(I,pe)=>{const Te=l.times(z.value,l.add(I,1)).times(10).pow(1.2);n.value=l.add(n.value,Te),d.xp.value=l.add(d.xp.value,de.apply(Te)),pe||(O.amount.value=Math.max(O.amount.value-1,0),O.amount.value<=0&&ce.value==="gainBigPoints"&&(ce.value=""))}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[m("(properties gain x 10 x level)"),r("sup",null,[m("1.2")])])),price:8,onSelect:()=>ce.value="gainBigPoints",shouldNotify:function(){return xt(this)}})),Ce=on(()=>({description:I=>l.eq(I,0)?k(()=>r("h3",null,[m("Gain "),It("1"),m(" key insight.")])):k(()=>r("h3",null,[m("Gain "),It(ge(l.add(I,1))),m(" key insights.")])),metal:"copper",sign:"libra",actions:{onPlay:I=>{i.value=l.add(i.value,I).add(1)}},formula:k(()=>It("level")),price:0,startingAmount:2,onSelect:()=>ce.value="gainInsight",shouldNotify:function(){return xt(this)}})),ie=on(()=>({description:I=>k(()=>r("h3",null,[m("Use the size of your deck to gain")," ",It(ge(l.times(Ge.value,l.add(I,1))))," ",m("key insights.")])),metal:"silver",sign:"cancer",actions:{onPlay:I=>{const pe=l.times(Ge.value,l.add(I,1));i.value=l.add(i.value,pe)}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[m("cards x level")])),price:13,onSelect:()=>ce.value="gainBigInsight",shouldNotify:function(){return xt(this)}})),Ue=on(()=>({description:I=>l.eq(I,0)?"Play the next card an extra time (does not stack)":k(()=>r("h3",null,[m("Play the next card an extra time, with")," ",It(Oe(l.div(I,4))),m(" bonus levels (does not stack)")])),metal:"iron",sign:"scorpio",actions:{onNextCardPlay:I=>{const pe=I.actions.onPlay;return pe&&pe(l.add(I.level.value,l.div(Ue.level.value,4)),!0),u.value++,!0}},formula:k(()=>It("(level - 1) / 4")),price:32,onSelect:()=>ce.value="playTwice",shouldNotify:function(){return xt(this)}})),Nt=on(()=>({description:I=>k(()=>r("h3",null,[m("Gain xp equal to "),It(Oe(l.div(l.add(I,1),10),1)),m("x times your number of properties.")])),metal:"tin",sign:"pisces",actions:{onPlay:I=>{d.xp.value=l.add(d.xp.value,de.apply(l.add(I,1).div(10).times(n.value)))}},formula:k(()=>It("properties x level / 10")),price:25,onSelect:()=>ce.value="gainXp",shouldNotify:function(){return xt(this)}})),gt=H(0),Gt=on(()=>({description:I=>k(()=>r("h3",null,[m("Drawing cards is 2x faster for the next")," ",It(ge(l.times(_l.value,l.add(I,1))))," ",m("seconds (doesn't stack)")])),metal:"mercury",sign:"virgo",actions:{onPlay:I=>gt.value=l.times(_l.value,l.add(I,1)).toNumber()},formula:k(()=>It("number of jobs x level")),price:48,onSelect:()=>ce.value="fasterDraws",shouldNotify:function(){return xt(this)}})),Je=on(()=>({description:I=>k(()=>r("h3",null,[m("Gain")," ",It(ge(Object.values(at.jobs).reduce((pe,Te)=>pe.add(Te.level.value),new l(0)).sqrt().floor().times(l.add(I,1))))," ",m("of a random elemental essence")])),metal:"iron",sign:"aries",actions:{onPlay:I=>{const pe=Object.values(Qe.elements).filter(Ie=>o(Ie.visible)),Te=pe[Math.floor(Math.random()*pe.length)];Te.resource.value=l.add(Te.resource.value,at.sumJobLevels.value.times(l.add(I,1).sqrt().floor()))}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[r(Kl,null,{default:()=>[r(Zd,null,{default:()=>[m("sum job levels")]})]})," ",m("x level")])),price:16,onSelect:()=>ce.value="gainElementalEssence",shouldNotify:function(){return xt(this)}})),oe=on(()=>({description:I=>k(()=>r("h3",null,[m("Gain")," ",It(ge(l.times(Object.values(at.jobs).reduce((pe,Te)=>pe.add(Te.level.value),new l(0)),l.add(I,1)).floor()))," ",m("key insights")])),metal:"lead",sign:"capricorn",actions:{onPlay:I=>{const pe=l.times(Object.values(at.jobs).reduce((Te,Ie)=>Te.add(Ie.level.value),new l(0)),l.add(I,1)).floor();i.value=l.add(i.value,pe)}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[m("sum job levels x level")])),price:14,onSelect:()=>ce.value="gainInsightFromJobs",shouldNotify:function(){return xt(this)}})),Re=on(()=>({description:I=>k(()=>r("h3",null,[m("Gain "),It(ge(l.add(I,1).times(5))),m("s of moly production")])),metal:"lead",sign:"aquarius",actions:{onPlay:I=>{Ee.flowers.value=l.add(Ee.flowers.value,l.times(Ee.modifiers.flowerGain.apply(0),l.add(1,I).times(5)))}},formula:k(()=>It("5 x level")),price:9,onSelect:()=>ce.value="gainMolyFromEssentia",shouldNotify:function(){return xt(this)}})),Pe=on(()=>({description:I=>k(()=>r("h3",null,[m("Convert half your moly into")," ",It(ge(l.div(Ee.flowers.value,2).max(1).ln().floor().times(l.add(1,I)).times(z.value)))," ",m("properties and job exp")])),metal:"copper",sign:"taurus",actions:{onPlay:I=>{const pe=l.div(Ee.flowers.value,2).max(1).ln().floor().times(l.add(1,I)).times(z.value);Ee.flowers.value=l.div(Ee.flowers.value,2).floor(),n.value=l.add(n.value,pe),d.xp.value=l.add(d.xp.value,de.apply(pe))}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[m("properties gain x "),r(Kl,null,{default:()=>[m("ln(spent moly)")]}),m(" x level")])),price:8,onSelect:()=>ce.value="gainPropertiesFromFlowers",shouldNotify:function(){return xt(this)}})),Q={nothing:$,gainPoints:R,gainBigPoints:O,gainInsight:Ce,gainBigInsight:ie,playTwice:Ue,gainXp:Nt,fasterDraws:Gt,gainElementalEssence:Je,gainInsightFromJobs:oe,gainMolyFromEssentia:Re,gainPropertiesFromFlowers:Pe},vt=y(()=>{if(ce.value in Q){const I=Q[ce.value];return new l(10).pow(l.add(I.level.value,2))}return 0}),Dt=Rn(()=>({display:{title:"+1 Level",description:k(()=>{if(ce.value in Q){const I=Q[ce.value];return r(F,null,[m("Current level: "),ge(l.add(I.level.value,1)),r("br",null,null),ce.value==="nothing"?r("span",null,[m("Max level!")]):r("span",null,[m("Cost: "),Oe(vt.value),m(" "),i.displayName])])}return""})},canClick(){return ce.value!=="nothing"&&ce.value in Q&&l.gte(i.value,vt.value)},onClick(){if(ce.value in Q){const I=Q[ce.value];i.value=l.sub(i.value,vt.value),I.level.value=l.add(I.level.value,1)}},style:{height:"120px",alignSelf:"center"}})),sn=y(()=>l.gte(s.value,kt.value)),At=Rn(()=>({display:{title:"Draw",description:k(()=>r(F,null,[r("div",null,[m("Focus harder in order to discover the next card faster.")]),sn.value?r("div",null,[m("Available Now!")]):r("div",null,[m("Available in")," ",Vn(l.sub(kt.value,s.value))])]))},canClick:sn,onClick:en,style:{minHeight:"50px",width:"200px"}})),Kt=H(0),Ct=y(()=>l.pow(2,Kt.value).times(100)),vn=Rn(()=>({display:{title:"Purge card",description:k(()=>r(F,null,[m("Remove card from deck"),r("br",null,null),m("Cost: "),Oe(Ct.value),m(" "),i.displayName]))},canClick(){return l.gte(i.value,Ct.value)},async onClick(){var I;if(ce.value in Q){const pe=Q[ce.value];i.value=l.sub(i.value,Ct.value),Kt.value++,pe.amount.value--;const Te=He.boundingRect.value,Ie=(I=kn.nodes.value.deck)==null?void 0:I.rect;Te&&Ie&&(await Bt(),He.addEmitter(Sp).then(dt=>{dt.updateOwnerPos(Ie.x+Ie.width/2-Te.x,Ie.y+Ie.height/2-Te.y),dt.playOnceAndDestroy()})),pe.amount.value<=0&&(ce.value="")}},style:{"--layer-color":"var(--danger)",minHeight:"50px",width:"200px"}})),Xn=new Array(3).fill(0).map((I,pe)=>{const Te=Rn(()=>({display:{title:"Purchase Card",description:k(()=>{const Ie=ft.value[pe];if(Ie==="")return r(F,null,[m("Out of Stock!"),r("div",{class:"element-cost"},null)]);const dt=Q[Ie],$t=Oi[dt.sign];return r(F,null,[ge(dt.price),m(" "),$t,m(" essence"),r("div",{class:"element-cost",style:{color:Qe.elements[$t].color}},[Qe.elements[$t].symbol])])})},canClick(){const Ie=ft.value[pe];if(Ie==="")return!1;const dt=Q[Ie],$t=Oi[dt.sign],Rt=Qe.elements[$t].resource;return l.gte(Rt.value,dt.price)},onClick(){const Ie=ft.value[pe];if(Ie==="")return!1;const dt=Q[Ie],$t=Oi[dt.sign],Rt=Qe.elements[$t].resource;dt.amount.value+=1,Rt.value=l.sub(Rt.value,dt.price),ft.value[pe]=""},style:{width:"165px",margin:"20px 7.5px",minHeight:"50px",paddingLeft:"55px",borderTopLeftRadius:"25px",borderBottomLeftRadius:"25px"}}));return Aa(Te,{display:k(()=>{const Ie=ft.value[pe];if(Ie==="")return r(F,null,null);const dt=Q[Ie],$t=Oi[dt.sign],Rt=Qe.elements[$t].resource;return r(F,null,[m("You have "),Sn(Rt),m(" "),Rt.displayName])}),direction:xe.Down}),Te}),Yt=H(0),Ht=y(()=>7);function en(){var Te,Ie,dt,$t,Rt;s.value=0,ct.value++,Yt.value++,u.value++;const I=_t.value;let pe=Math.floor(Math.random()*Ge.value);if(_t.value=Object.keys(Q).find(gn=>pe<=Q[gn].amount.value?!0:(pe-=Q[gn].amount.value,!1)),((dt=(Ie=(Te=Q[I].actions).onNextCardPlay)==null?void 0:Ie.call(Te,Q[_t.value],!1))==null||dt)&&((Rt=($t=Q[_t.value].actions).onPlay)==null||Rt.call($t,Q[_t.value].level.value,!1)),Yt.value>=Ht.value){Yt.value=0;const gn=Object.keys(Q).filter(Fn=>"price"in Q[Fn]);ft.value=new Array(3).fill(0).map(()=>gn[Math.floor(Math.random()*gn.length)])}}function xt(I){return f.earned.value&&I.amount.value>0&&l.gte(i.value,new l(10).pow(l.add(I.level.value,2)))}this.on("preUpdate",I=>{!d.active.value||(I=l.times(I,ut.value).toNumber(),s.value+=I,gt.value=Math.max(0,gt.value-I),l.gte(s.value,ke.value)&&en())});const _n=$n({play:()=>({display:"Play",tab:Bn(()=>({display:k(()=>r(F,null,[r(Ne,null,null),Q[_t.value].renderForPlay(ct),r(Ne,null,null),p.earned.value?Vi(At):null,r(Ne,null,null),f.earned.value?r("div",null,[m("Shop will refresh in")," ",Ht.value-Yt.value,m(" draws")]):null,r("div",null,[m("Card will be drawn automatically in")," ",Vn(l.sub(ke.value,s.value))])]))})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),deck:()=>({display:k(()=>r("span",{style:"position: relative;"},[m("Cards"),c.value?r(xn,{style:"left: -15px; top: -10px"},null):null])),tab:Bn(()=>({display:k(()=>{const I=Object.values(Q).filter(Te=>Te.amount.value>0),pe=Math.ceil(I.length/5);return r(F,null,[r(Ne,null,null),f.earned.value?r(F,null,[r("h2",null,[m("Shop")]),r(Ne,null,null),ft.value.map(Te=>Te===""?Q.nothing.renderForShop():Q[Te].renderForShop()),Vi(...Xn),r("div",null,[m("Shop will refresh in")," ",Ht.value-Yt.value," ",m("draws")]),r(Ne,{height:"50px"},null)]):null,r("h2",null,[m("Deck")]),r(Ne,null,null),r("div",{class:"cardDeck-container"},[r(Gn,{id:"deck"},null),...new Array(pe).fill(0).map((Te,Ie)=>Vi(...I.slice(Ie*Math.ceil(I.length/pe),(Ie+1)*Math.ceil(I.length/pe)).map(dt=>dt.renderForDeck)))]),r(Ne,null,null),ce.value?r(F,null,[_.earned.value?r("div",{style:"display: flex; justify-content: center;"},[Q[ce.value].renderForUpgrade(!1),r("div",{style:"display: flex; flex-direction: column; color: var(--layer-color); font-size: xxx-large; margin-left: -30px; margin-right: -30px"},[r("span",{style:"margin-bottom: 20px"},[m(">>>")]),Ze(Dt),r("span",{style:"margin-top: 20px"},[m(">>>")])]),Q[ce.value].renderForUpgrade(!0)]):Q[ce.value].renderForUpgrade(!1),f.earned.value?Ze(vn):null]):null])})}))}),optimizations:()=>({display:"Optimizations",visibility:w.earned,tab:Bn(()=>({display:k(()=>r(F,null,[r(Ne,null,null),r("h2",null,[m("Experience Optimization")]),r("div",{style:"margin: 20px"},[m("The magnitude of your best moly amount has allowed you to optimize your exp gain by")," ",ge(l.times(ue.value,100).sub(100)),m("%."),r("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),Ze(W),r(Ne,{height:"50px"},null),r("h2",null,[d.name,m(" Optimization")]),r("div",{style:"margin: 20px"},[m("The magnitude of your best essentia amount has allowed you to optimize your properties gain by")," ",ge(l.times(Ae.value,100).sub(100)),m("%."),r("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),Ze(we),r(Ne,{height:"50px"},null),r("h2",null,[m("Draw Speed Optimization")]),r("div",{style:"margin: 20px"},[m("The magnitude of your best insights amount has allowed you to optimize your drawing speed by")," ",ge(l.times(Ye.value,100).sub(100)),m("%."),r("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),Ze(Tt)]))}))})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}}));return{name:e,color:t,minWidth:670,properties:n,insights:i,bestInsights:a,timeDrawing:s,job:d,cards:Q,modifiers:K,milestones:M,collapseMilestones:ae,generalTabCollapsed:Le,tabs:_n,selectedCard:ce,drawnCard:_t,soldCards:Kt,cardShop:ft,cardsDrawnToShop:Yt,fasterDrawTime:gt,totalCardsDrawn:u,display:k(()=>{const I=[...T.value];return P.value&&I.push(P.value),r(F,null,[r(Fl,null,{default:()=>[r("div",{style:"height: 50px; line-height: 50px; margin-bottom: 20px"},[m("You have "),r(wl,{resource:n,color:t},null),m(" properties studied and "),r(wl,{resource:i,color:"darkcyan"},null),m(" key insights")])]}),ii(...I,k(()=>dn(r(ri,{collapsed:ae,content:J,display:ae.value?"Show other completed milestones":"Hide other completed milestones"},null),[[Nn,o(se)]]))),r(Ne,null,null),Ze(_n),Ze(He)])})}});const kp={class:"applied-time-selectors-container"},Np=["onClick"],xp={key:0,class:"applied-time-symbol"},$p={key:1,class:"applied-time-symbol material-icons"},Mp={class:"applied-time-effect"},Pp=Z({__name:"AppliedTimeSelectors",props:{jobs:null,selectedJob:null,effect:null},emits:["selectJob"],setup(e,{emit:t}){const n=e,{jobs:i,selectedJob:a,effect:s}=ot(n),u=y(()=>Object.keys(i.value).filter(d=>ht(i.value[d].visibility)).reduce((d,p)=>({...d,[p]:i.value[p]}),{})),c=y(()=>Math.PI*2/Object.keys(u.value).length);return(d,p)=>(h(),x("div",kp,[(h(!0),x(F,null,Mn(o(u),(f,g,w)=>(h(),x("div",{key:g,class:$e(["feature can dontMerge applied-time-selector",o(a)===g?"selected":""]),style:qe({backgroundColor:o(f.color),top:`${Math.sin(w*o(c)+o(G).time/1e4)*200+300}px`,left:`${Math.cos(w*o(c)+o(G).time/1e4)*200+300}px`}),onClick:_=>t("selectJob",g)},[o(f.symbol).length<=2?(h(),x("div",xp,ee(f.symbol),1)):(h(),x("span",$p,ee(f.symbol),1))],14,Np))),128)),v("div",Mp,ee(o(Oe)(o(s)))+"x",1)]))}});var Tp=me(Pp,[["__scopeId","data-v-0bbe577e"]]);const Ip={key:1,class:"grain complete"},Ep=Z({__name:"Grain",props:{index:null,chippingProgress:null,chippingIndex:null},setup(e){const t=e,{index:n,chippingProgress:i,chippingIndex:a}=ot(t);return(s,u)=>o(a)<o(n)?(h(),x("div",{key:0,class:$e(["grain not-started",{}])})):(h(),x("div",Ip,[o(a)===o(n)?(h(),x("div",{key:0,class:"grain",style:qe({clipPath:`polygon(0 0, 100% 0, 100% ${(1-o(i))*100}%, 0 ${(1-o(i))*100}%)`})},null,4)):B("",!0)]))}});var ta=me(Ep,[["__scopeId","data-v-63857638"]]);const Fp=e=>(ln("data-v-e8dadcb2"),e=e(),an(),e),qp={class:"single-grain-label"},Dp={style:{display:"none"}},Ap={id:"grain-filter"},Lp=["seed"],Rp=Fp(()=>v("feDisplacementMap",{in:"SourceGraphic",scale:"20"},null,-1)),Op=Z({__name:"Grains",props:{baseGrains:null,chippingProgress:null},setup(e){const t=e,{baseGrains:n,chippingProgress:i}=ot(t),a=y(()=>l.pow(2,new l(n.value).log2().floor()).round().toNumber()),s=y(()=>l.pow(2,new l(a.value).log2().div(2).floor()).round().toNumber()),u=y(()=>l.div(a.value,s.value).round().toNumber()),c=y(()=>l.sub(n.value,a.value).add(1).round().toNumber());return(d,p)=>(h(),x(F,null,[o(l).lt(o(n),1024)?(h(),x("div",{key:0,class:"grains-container",style:qe({gridTemplateColumns:`repeat(${o(u)}, 1fr)`,columnGap:o(u)===o(s)?"var(--feature-margin)":`calc(var(--feature-margin) + ${150/(o(u)-1)}px)`,maxWidth:o(u)===o(s)?"300px":"600px"})},[(h(!0),x(F,null,Mn(o(a),f=>(h(),U(ta,{key:f,index:f,chippingProgress:o(i),chippingIndex:o(c)},null,8,["index","chippingProgress","chippingIndex"]))),128))],4)):(h(),x(F,{key:1},[r(ta,{index:0,chippingProgress:o(i),chippingIndex:0,class:"single-grain"},null,8,["chippingProgress"]),v("div",qp,ee(o(ge)(o(c)))+"/"+ee(o(ge)(o(a))),1)],64)),(h(),x("svg",Dp,[v("filter",Ap,[v("feTurbulence",{x:"0",y:"0",width:"700px",height:"700px",baseFrequency:"0.005",numOctaves:"10",seed:o(l).lt(o(n),1024)?o(a):new o(l)(o(n)).toNumber()},null,8,Lp),Rp])]))],64))}});var jp=me(Op,[["__scopeId","data-v-e8dadcb2"]]);const Ra=e=>(ln("data-v-93b37faa"),e=e(),an(),e),Bp=Ra(()=>v("clipPath",{id:"glass-mask"},[v("path",{d:"M204 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175C103 254.699 -38 300 10 350H204C252 300 111 254.699 111 175C111 95.3005 252 50 204 -2.82683e-05Z",fill:"black"})],-1)),Vp={id:"sand-top-mask"},zp=["transform"],Gp={id:"sand-bottom-mask"},Up=["transform"],Xp={id:"flipping-mask"},Hp=["transform"],Jp=Ha('<g id="sand" transform="translate(42, 20)" clip-path="url(#glass-mask)" data-v-93b37faa><g clip-path="url(#flipping-mask)" data-v-93b37faa><path id="sand-top" d="M204 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175V350H111V175C111 95.3005 252 50 204 -2.82683e-05Z" fill="white" clip-path="url(#sand-top-mask)" data-v-93b37faa></path></g><rect id="sand-bottom" width="300" height="390" fill="white" clip-path="url(#sand-bottom-mask)" data-v-93b37faa></rect></g><path id="glass" transform="translate(38, 20)" d="M212 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175C103 254.699 -38 300 10 350H212C260 300 119 254.699 119 175C119 95.3005 260 50 212 -2.82683e-05Z" fill="#0003" data-v-93b37faa></path><path id="frame" fill-rule="evenodd" clip-rule="evenodd" d="M300 0H0V20H300V0ZM300 370H0V390H300V370Z" fill="#9E9169" data-v-93b37faa></path><path id="sides" transform="translate(15, 20)" d="M20 0H0V350H20V0ZM270 0H250V350H270V0Z" fill="#817654" data-v-93b37faa></path>',4),Wp={key:1,class:"remainingGrains"},Qp={key:2,class:"flip-request"},Zp=m(" Press to "),Kp=Ra(()=>v("br",null,null,-1)),Yp=m(" flip "),em=[Zp,Kp,Yp],tm={class:"fallenGrains"},nm=Z({__name:"Hourglass",props:{totalGrains:null,grainsFallen:null,flippingProgress:null,showHourglassNotif:{type:Boolean}},emits:["flip"],setup(e,{emit:t}){return(n,i)=>(h(),x("div",{class:$e(["hourglass-container",{flipping:e.flippingProgress<1}]),onClick:i[0]||(i[0]=a=>t("flip"))},[e.showHourglassNotif?(h(),U(xn,{key:0})):B("",!0),(h(),x("svg",{width:"240",height:"312",viewBox:"0 0 300 390",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:qe({transform:`rotateZ(${(1-e.flippingProgress)*180}deg)`})},[v("defs",null,[Bp,v("clipPath",Vp,[v("path",{d:"M149.25 19.5C89.9195 19.5 0.5 0.5 0.5 0.5V390H299.5V0.5C299.5 0.5 208.581 19.5 149.25 19.5Z",transform:e.flippingProgress<1?`translate(0, ${-40+e.flippingProgress*40})`:`translate(0, ${o(l).div(e.grainsFallen,e.totalGrains).sqr().times(190).toNumber()})`,fill:"black"},null,8,zp)]),v("clipPath",Gp,[v("path",{d:"M148.75 0C89.4195 0 0 19 0 19V389.5H299V19C299 19 208.081 0 148.75 0Z",transform:`translate(-40, ${o(l).sub(350,o(l).div(e.grainsFallen,e.totalGrains).sqr().times(150)).toNumber()})`,fill:"black"},null,8,Up)]),v("clipPath",Xp,[v("path",{d:"M150.25 389.5C209.581 389.5 300 370.5 300 370.5L300 3.05176e-05L1.87924e-05 4.37817e-06L-1.35978e-05 370.5C-1.35978e-05 370.5 90.9194 389.5 150.25 389.5Z",fill:"black",transform:`translate(0, ${Math.max(e.flippingProgress,.5)*420-445})`},null,8,Hp)])]),Jp],4)),o(l).sub(e.totalGrains,e.grainsFallen).gt(0)?(h(),x("div",Wp,ee(o(ge)(o(l).sub(e.totalGrains,e.grainsFallen))),1)):(h(),x("div",Qp,em)),v("div",tm,ee(o(ge)(e.grainsFallen)),1)],2))}});var im=me(nm,[["__scopeId","data-v-93b37faa"]]),lm=["Time? I love time!","I don't like sand. It's coarse and rough and irritating - and it gets everywhere","Those who make the worst use of their time are the first to complain of its brevity","Oh, how the time has flown","Time is an illusion","Time does not pass, it continues","This, too, shall pass","The hourglass mesmerizes me","Each grain split makes my measurements more precise","Wait!","Capturing time, one grain at a time","Turning stones into sands of time","Time waits for no one","Sand and time, forever intertwined","Patience is the companion of wisdom","Time is the most valuable resource","As the sands shift, so do I","Tempus fugit","Carpe diem","Time is the most valuable thing a man can spend","Time crumbles things; everything grows old","We live, not as we wish to, but as we can","The only way to measure time is by living it","Time discovers truth","The two most powerful warriors are patience and time"];const na=gi(),ia={additive:"+",multiplicative:"x",exponential:"^"},am={additive:(e,t)=>()=>l.times(o(e),t.value),multiplicative:(e,t)=>()=>l.pow(o(e),t.value),exponential:(e,t)=>()=>l.tetrate(o(e),new l(t.value).toNumber())},vl="experiments",Se=In(vl,function(){const e="Measuring",t="#D1C926",n=pn(0,"potentia"),i=H(1),a=H(0),s=H(1),u=H(0),c=H("experiments"),d=y(()=>g.earned.value?Object.values(we).some(oe=>oe.showNotif.value)?!0:_.earned.value?!!Object.values(ze).some(oe=>oe.showNotif.value):!1:!1),p=Un(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"85%",y:"60%"},symbol:"\u29D6",randomQuips(){return[...lm,...si]},resource:Ut(n),layerID:vl,modifierInfo:k(()=>st(ie)),visibility:Qe.milestones.experimentsMilestone.earned,showNotif:()=>Je.value||d.value})),f=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,2)),display:{requirement:`Achieve ${p.name} Level 2`,effectDisplay:"Unlock grinding grains"}})),g=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,4)),display:{requirement:`Achieve ${p.name} Level 4`,effectDisplay:"Unlock potentials"},visibility:f.earned})),w=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,5)),display:{requirement:`Achieve ${p.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility:g.earned})),_=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,6)),display:{requirement:`Achieve ${p.name} Level 6`,effectDisplay:"Unlock advanced potentials"},visibility:w.earned})),C=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,8)),display:{requirement:`Achieve ${p.name} Level 8`,effectDisplay:"Unlock applied time"},visibility:_.earned})),M=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,10)),display:{requirement:`Achieve ${p.name} Level 10`,effectDisplay:'Unlock "Harnessing Power" Job'},visibility:C.earned,onComplete(){wn(Ve,G)}})),Y={chippingMilestone:f,potentialsMilestone:g,timeSlotMilestone:w,advancedPotentialsMilestone:_,appliedTimeMilestone:C,jobMilestone:M},ae=[M,C,_,w,g,f],T=H(!0),P=y(()=>ae.filter(oe=>oe.earned.value===!1)),{firstFeature:J,collapsedContent:se,hasCollapsedContent:ue}=li(ae,oe=>oe.earned.value);function V({name:oe,precision:Re,effectRatio:Pe,xpReqRatio:Q,baseBoostCost:vt,boostCostRatio:Dt,boostCostResource:sn,modifierType:At,isAdvanced:Kt}){const Ct=Ke(Pe),vn=Ke(Q),Xn=Ke(vt),Yt=Ke(Dt),Ht=Ke(sn),en=H(0),xt=H(0),_n=y(()=>l.pow(o(vn),en.value).times(100)),I=am[At!=null?At:"multiplicative"](Ct,en);let pe;At==="exponential"?pe=Qi(()=>({exponent:I,description:oe+" potential",enabled:Kt?_.earned:g.earned,smallerIsBetter:l.lt(o(Ct),1)})):At==="additive"?pe=yt(()=>({addend:I,description:oe+" potential",enabled:Kt?_.earned:g.earned,smallerIsBetter:l.lt(o(Ct),1)})):pe=A(()=>({multiplier:I,description:oe+" potential",enabled:Kt?_.earned:g.earned,smallerIsBetter:l.lt(o(Ct),1)}));const Te=H(0),Ie=y(()=>l.times(o(Xn),l.pow(o(Yt),Te.value))),dt=y(()=>l.gte(wi(Ht).value,Ie.value)),$t=Rn(()=>({display:k(()=>r(F,null,[m("x2 boost for"),r("br",null,null),Lt(Ie.value),r("br",null,null),wi(Ht).displayName,gn.value?r(xn,{style:"top: -15px"},null):null])),canClick:dt,onClick(){const Fn=wi(Ht);Fn.value=l.sub(Fn.value,Ie.value),Te.value++}}));Aa($t,{display:k(()=>r(F,null,[m("You have "),Sn(wi(Ht))," ",wi(Ht).displayName]))});let Rt=null;et(en,()=>{Fe.active===G.id&&(Rt!=null&&na.dismiss(Rt),Rt=na.info(r(F,null,[r("h3",null,[m("Potential increased!")]),r("div",null,[ia[At!=null?At:"multiplicative"],Oe(o(Ct),Re!=null?Re:2),m(" "),oe])])))});const gn=Pi($t,dt);return{level:en,xp:xt,xpRequired:_n,effect:I,modifier:pe,boosts:Te,cost:Ie,clickable:$t,showNotif:gn,effectRatio:Ct,xpReqRatio:vn,baseBoostCost:Xn,boostCostRatio:Yt,boostCostResource:Ht,update(Fn){let oi=l.add(xt.value,l.pow(2,Te.value).times(_t.apply(Fn)));for(;l.gte(oi,_n.value);)oi=oi.sub(_n.value),en.value++;xt.value=oi.toNumber()},display:k(()=>r("div",{class:"potential feature dontMerge"},[Ze($t),r("div",{class:"potential-details"},[m("Lv "),Lt(en.value),m(" "),oe,m(" ("),ia[At!=null?At:"multiplicative"],Oe(o(Ct),Re!=null?Re:2),m(" each)")]),r("div",{class:"potential-xp"},[r("div",{class:"potential-xp-fill",style:{width:`${l.div(xt.value,_n.value).times(100).toNumber()}%`}},null)])]))}}const W=V({name:"Grinding duration",effectRatio:.9,precision:1,xpReqRatio:1.3,baseBoostCost:100,boostCostRatio:2,boostCostResource:Ut(n)}),Ae=V({name:"Potentia gain",effectRatio:1.05,xpReqRatio:1.08,baseBoostCost:100,boostCostRatio:10,boostCostResource:Ut(n)}),je=V({name:"Grains fall speed",effectRatio:1.025,precision:3,xpReqRatio:1.1,baseBoostCost:100,boostCostRatio:4,boostCostResource:Ut(n)}),we={grindingSpeedPotential:W,potentiaGainPotential:Ae,fallSpeedPotential:je},Ye=V({name:"Potentials speed",effectRatio:1.1,precision:1,xpReqRatio:1.5,baseBoostCost:1e4,boostCostRatio:10,boostCostResource:Ut(n),isAdvanced:!0}),le=V({name:"Bonus grains",effectRatio:1.05,xpReqRatio:2,baseBoostCost:100,boostCostRatio:1.25,boostCostResource:()=>Object.values(Qe.elements)[le.boosts.value%4].resource,isAdvanced:!0}),Tt=V({name:"Job EXP gain",effectRatio:1.1,precision:1,xpReqRatio:1.25,baseBoostCost:1e6,boostCostRatio:8,boostCostResource:Ee.flowers,isAdvanced:!0}),mt=V({name:"Passive grinding",effectRatio:1,precision:0,xpReqRatio:1.2,baseBoostCost:1e3,boostCostRatio:5,boostCostResource:kn.insights,modifierType:"additive",isAdvanced:!0}),ze={potentialsSpeedPotential:Ye,effectiveGrainsPotential:le,jobXPPotential:Tt,passiveGrindingPotential:mt},ut=y(()=>l.pow(1.1,p.level.value)),L=y(()=>new l(i.value).log2().floor()),z=y(()=>l.pow(1.1,p.level.value)),de=ne(()=>[A(()=>({multiplier:z,description:"Applied time",enabled:()=>p.active.value&&C.earned.value&&c.value===vl})),Ve.batteries.experiments.timePassing.modifier]),fe=y(()=>de.apply(1)),ke=ne(()=>[Tt.modifier,Ve.batteries.experiments.xpGain.modifier]),wt=ne(()=>[le.modifier]),kt=y(()=>wt.apply(i.value)),K=ne(()=>[A(()=>({multiplier:()=>l.pow(1.1,L.value),description:"Grain size (x1.1 each split)",enabled:f.earned})),je.modifier]),it=y(()=>K.apply(1)),Le=ne(()=>[A(()=>({multiplier:()=>l.pow(2,L.value),description:"Grain size (x2 each split)",smallerIsBetter:!0})),W.modifier]),He=y(()=>Le.apply(1)),Ge=ne(()=>[mt.modifier]),ce=y(()=>Ge.apply(0)),ft=ne(()=>[A(()=>({multiplier:ut,description:`${p.name} level (x1.1 each)`})),Ae.modifier,Ve.batteries.experiments.resourceGain.modifier,Ft.plants.potentia.modifier]),_t=ne(()=>[Ye.modifier]),ct={timePassing:de,jobXpGain:ke,totalGrains:wt,grainsFallRate:K,chippingDuration:Le,potentiaGain:ft,potentialsSpeed:_t,passiveGrinding:Ge},[$,R]=Wt(()=>[{title:"Time Passing",modifier:de,base:1,visible:()=>C.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:`${p.name} EXP Gain`,modifier:ke,base:1},{title:"Potentia Gain",modifier:ft,base:1},{title:"Potentials speed",modifier:_t,base:1,visible:_.earned}]),[O,Ce]=Wt(()=>[{title:"Total Grains",modifier:wt,base:i},{title:"Grains Fall Speed",modifier:K,base:1,unit:"/s"},{title:"Grinding duration",modifier:Le,base:1,unit:"s",visible:f.earned,smallerIsBetter:!0},{title:"Passive grinding",modifier:Ge,base:0,unit:"%",visible:_.earned}]),ie=$n({general:()=>({display:"General",glowColor(){return ie.activeTab.value===this.tab?t:""},tab:$,generalTabCollapsed:R}),grains:()=>({display:"Grains",glowColor(){return ie.activeTab.value===this.tab?t:""},tab:O,grainsTabCollapsed:Ce})},()=>({style:`--layer-color: ${t}`})),Ue=Rn(()=>({display:{title:"Grind",description:"Hover to grind grains apart, to create new grains"}})),Nt=Sa(Ue);this.on("preUpdate",oe=>{if(!!p.active.value){if(oe=l.times(oe,fe.value).toNumber(),g.earned.value&&Object.values(we).forEach(Re=>Re.update(oe)),_.earned.value&&(Object.values(ze).forEach(Re=>Re.update(oe)),u.value=l.add(u.value,l.times(oe,ce.value).div(100)).toNumber()),l.lt(s.value,1))s.value=l.add(s.value,oe).min(1).toNumber();else if(l.lt(a.value,kt.value)){const Re=l.add(a.value,l.times(it.value,oe)).min(kt.value),Pe=ft.apply(l.sub(Re,a.value));n.value=l.add(n.value,Pe),p.xp.value=l.add(p.xp.value,ke.apply(Pe)),a.value=Re}for(Nt.value&&(u.value=u.value+oe);l.gt(u.value,He.value);){const Re=l.div(u.value,He.value).floor().min(new l(2).pow(new l(i.value).add(1).log2().floor().add(1)).sub(i.value));u.value=u.value-Re.times(He.value).toNumber(),i.value=l.add(i.value,Re)}}});const gt=$n({grains:()=>({display:"Grains",tab:Bn(()=>({display:k(()=>r(F,null,[r(Ne,null,null),r(jp,{baseGrains:i.value,chippingProgress:l.div(u.value,He.value).toNumber()},null),r(Ne,null,null),Ze(Ue)]))})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),potentials:()=>({display:k(()=>r("span",{style:"position: relative;"},[m("Potentials"),d.value?r(xn,{style:"left: -15px; top: -10px"},null):null])),tab:Bn(()=>({display:k(()=>r(F,null,[r(Ne,null,null),r("h2",null,[m("Basic Potentials")]),r(Ne,null,null),Mi(...Object.values(we).map(oe=>oe.display)),_.earned.value?r(F,null,[r(Ne,null,null),r("h2",null,[m("Advanced Potentials")]),r(Ne,null,null),Mi(...Object.values(ze).map(oe=>oe.display))]):null]))})),visibility:g.earned}),appliedTime:()=>({display:"Applied Time",tab:Bn(()=>({display:k(()=>r(F,null,[r(Ne,null,null),r("div",null,[m("Focus your potential towards speeding up an entire job's time loop."),r("br",null,null),m("Strength increases with "),p.name,m(" level.")]),r(Ne,null,null),r(Tp,{effect:z.value,jobs:at.jobs,selectedJob:c.value,onSelectJob:oe=>c.value=oe},null)]))})),visibility:C.earned})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}})),Gt={[nt]:im,[Be]:()=>({totalGrains:kt.value,grainsFallen:a.value,flippingProgress:s.value,onFlip:()=>{s.value=s.value>=1?0:s.value,a.value=0},showHourglassNotif:Je.value})},Je=Pi(Gt,()=>l.sub(kt.value,a.value).lte(0));return{name:e,color:t,minWidth:670,potentia:n,baseTotalGrains:i,grainsFallen:a,flippingProgress:s,chippingProgress:u,basicPotentials:we,advancedPotentials:ze,job:p,selectedJob:c,modifiers:ct,milestones:Y,collapseMilestones:T,modifierTabs:ie,tabs:gt,appliedTimeEffect:z,display:k(()=>{const oe=[...P.value];return J.value&&oe.push(J.value),r(F,null,[r(qi,{resource:n,color:t},null),ii(...oe,k(()=>dn(r(ri,{collapsed:T,content:se,display:T.value?"Show other completed milestones":"Hide other completed milestones"},null),[[Nn,o(ue)]]))),r(Ne,null,null),Ze(Gt),r(Ne,{height:"50px"},null),f.earned.value?Ze(gt):null])})}});var rm=["Seeds? I love seeds!","They can still be improved, I'm sure of it","Together we'll both grow to our full potentials","Progress moves ever forward, generation by generation","Grow!","They require meticulous care","Growth is a never-ending process","The perfect bloom is within reach","A garden of endless possibilities awaits","Delicate petals hold the key to advancement","Every flower has its own unique charm","Patience and care will yield beauty","The diversity of nature, in my hands","Each new generation holds untapped potential","The future blooms in these delicate seeds","New traits emerge from clever combinations","Fusing strengths to create something greater","Nature does nothing uselessly","Change begets growth","The earth laughs in flowers","Nature is the best teacher","Necessity is the mother of invention","The future is in the seeds we sow today","Progress is the child of time","The best way to predict the future is to create it"];const sm={key:2,class:"analyzed"};var di=Z({__name:"SeedSlot",props:{selected:{type:Boolean},seed:null,onClick:null},setup(e){const t=e,n=Tn(y(()=>k(()=>t.seed==="none"?"":st(Ft.plants[t.seed.type].seed)))),i=he(k(()=>t.seed==="none"||!t.seed.analyzed?"":r(F,null,[m("Speed: "),ge(t.seed.speed),r("br",null,null),m("Harvest Size: "),ge(t.seed.harvest),r("br",null,null),m("Mutability: "),ge(t.seed.mutability)])));return(a,s)=>(h(),x("div",{class:$e(["seed feature can",{selected:e.selected}]),onClick:s[0]||(s[0]=u=>e.onClick(e.seed))},[e.seed!=="none"&&e.seed.analyzed?(h(),U(lt,{key:0,display:o(i)},{default:re(()=>[o(n)?(h(),U(Me(o(n)),{key:0})):B("",!0),Zt(a.$slots,"default")]),_:3},8,["display"])):(h(),x(F,{key:1},[o(n)?(h(),U(Me(o(n)),{key:0})):B("",!0),Zt(a.$slots,"default")],64)),e.seed!=="none"&&e.seed.analyzed?(h(),x("div",sm,"*")):B("",!0)],2))}});const om={class:"inputs"},um=v("path",{d:"M4 29C15.1929 16.5 26.3858 4 54 4C109.228 4 98.7715 54 154 54C181.614 54 192.807 41.5 204 29",stroke:"grey","stroke-width":"7","stroke-linecap":"round"},null,-1),cm=Z({__name:"Machine",props:{index:null,numInputs:null,inputs:null,timer:null,poweredUp:{type:Boolean},canPowerUp:null,duration:null,outputDisplay:null,setInput:null},emits:["setPoweredUp"],setup(e,{emit:t}){const n=e,i=St();Vt(()=>{i.value=he(n.outputDisplay(n.inputs,n.index))});const a=y(()=>n.numInputs!==n.inputs.filter(s=>s!=null&&s!=="none").length);return(s,u)=>(h(),x("div",{class:$e(["machine feature",{poweredUp:e.poweredUp,canPowerUp:!e.poweredUp&&o(e.canPowerUp)}])},[v("div",om,[(h(!0),x(F,null,Mn(e.numInputs,c=>{var d;return h(),U(di,{key:c-1,seed:(d=e.inputs[c-1])!=null?d:"none",onClick:()=>e.setInput(e.index,c-1)},null,8,["seed","onClick"])}),128))]),(h(),x("svg",{width:"208",height:"58",viewBox:"0 0 208 58",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:u[0]||(u[0]=c=>t("setPoweredUp"))},[um,v("path",{d:"M4 29C15.1929 16.5 26.3858 4 54 4C109.228 4 98.7715 54 154 54C181.614 54 192.807 41.5 204 29",stroke:"black","stroke-width":"7","stroke-linecap":"round",class:"progress",style:qe({strokeDashoffset:`calc(var(--dash-length) * ${o(l).sub(.33,o(l).div(e.timer,e.duration(e.inputs)).times(1.33)).toNumber()})`})},null,4)])),o(i)?(h(),U(Me(o(i)),{key:0})):B("",!0),o(a)?(h(),U(xn,{key:1})):B("",!0)],2))}});const dm={key:0},pm=v("span",{class:"toggle"},"\u25BC",-1),mm=Z({__name:"MachineType",props:{id:null,name:null,enabled:null,numInputs:null,inputs:null,timers:null,collapsed:null,machines:null,poweredUpMachine:null,canPowerUp:null,duration:null,outputDisplay:null,setInput:null,setPoweredUpMachine:null},setup(e){return(t,n)=>o(e.enabled)?(h(),x("div",dm,[v("h2",{onClick:n[0]||(n[0]=i=>e.collapsed.value=!e.collapsed.value),class:$e(["breeding-collapsible",{collapsed:e.collapsed.value}])},[pm,m(ee(e.name),1)],2),e.collapsed.value?B("",!0):(h(),U(Ki,{key:0},{default:re(()=>[(h(!0),x(F,null,Mn(new o(l)(e.machines.amount.value).toNumber(),i=>{var a,s;return h(),U(cm,{key:i-1,index:i-1,numInputs:e.numInputs,inputs:(a=o(e.inputs)[i-1])!=null?a:[],timer:(s=o(e.timers)[i-1])!=null?s:0,duration:e.duration,outputDisplay:e.outputDisplay,setInput:e.setInput,canPowerUp:e.canPowerUp,poweredUp:e.poweredUpMachine.value.type===e.id&&i-1===e.poweredUpMachine.value.index,onSetPoweredUp:()=>e.setPoweredUpMachine(i-1)},null,8,["index","numInputs","inputs","timer","duration","outputDisplay","setInput","canPowerUp","poweredUp","onSetPoweredUp"])}),128)),(h(),U(Me(e.machines[o(nt)]),ca(Ja(e.machines[o(Be)]())),null,16))]),_:1}))])):B("",!0)}});const fm={class:"plant feature"},vm={class:"plant-symbol"},gm={class:"plant-details"},hm=v("div",{style:{"flex-grow":"1"}},null,-1),bm=v("h3",null,"Consume",-1),ym=v("br",null,null,-1),wm={key:0},_m=Z({__name:"Plant",props:{name:null,symbol:null,color:null,effectDescription:null,amount:null,consumedTimeRemaining:null,multiplier:null,consume:null},setup(e){const t=e,n=y(()=>`${Oe(l.add(t.amount.value,1).log10().add(1))}x ${t.effectDescription} for ${Vn(l.pow(t.amount.value,2).add(1).log2())}`);return(i,a)=>(h(),x("div",fm,[v("div",{class:"plant-info",style:qe({color:e.color})},[v("span",vm,ee(e.symbol),1),v("div",gm,[v("span",null,ee(e.name),1),v("span",null,"Stored: "+ee(o(ge)(o(e.amount))),1)]),hm,v("button",{class:"button",onClick:a[0]||(a[0]=(...s)=>e.consume&&e.consume(...s))},[bm,ym,m(ee(o(n)),1)])],4),o(l).gt(o(e.consumedTimeRemaining),0)?(h(),x("div",wm," Current bonus: "+ee(o(Oe)(o(e.multiplier)))+"x "+ee(e.effectDescription)+" for "+ee(o(Vn)(o(e.consumedTimeRemaining))),1)):B("",!0)]))}}),_i="breeding",Ft=In(_i,function(){const e="Breeding Plants",t="#51D126",n=pn(0,"mutagens"),i=H([{type:"moly",analyzed:!1,speed:1,mutability:1,harvest:1}]),a=H("none"),s=H("none"),u=H({type:"none",index:-1}),c=H(!1),d=H(!1),p=Un(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"emoji_nature",randomQuips(){return[...rm,...si]},resource:n,layerID:_i,modifierInfo:k(()=>st(ft)),visibility:kn.milestones.jobMilestone.earned,showNotif:()=>Object.values(wt).some($=>o($.machines.canClick)||i.value.length!==0&&$.inputs.value.some(R=>$.numInputs!==R.filter(O=>O!==null&&O!=="none").length))})),f=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,2)),display:{requirement:`Achieve ${p.name} Level 2`,effectDisplay:"Unlock breeding and analyzing machines"}})),g=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,4)),display:{requirement:`Achieve ${p.name} Level 4`,effectDisplay:"Unlock powering up machines"},visibility:f.earned})),w=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,5)),display:{requirement:`Achieve ${p.name} Level 5`,effectDisplay:'Unlock bonus generator in "Harnessing Power" job'},visibility:g.earned})),_=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,6)),display:{requirement:`Achieve ${p.name} Level 6`,effectDisplay:"Unlock recycling machine"},visibility:w.earned})),C=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,8)),display:{requirement:`Achieve ${p.name} Level 8`,effectDisplay:"Unlock mutating machine"},visibility:_.earned})),M=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,10)),display:{requirement:`Achieve ${p.name} Level 10`,effectDisplay:'Unlock 1/2 of "Performing Rituals" Job'},visibility:C.earned,onComplete(){Ve.milestones.jobMilestone.earned.value&&wn(Ti,G)}})),Y={breedingAnalyzingMilestone:f,powerupMilestone:g,bonusGeneratorMilestone:w,recyclingMilestone:_,mutatingMilestone:C,jobMilestone:M},ae=[M,C,_,w,g,f],T=H(!0),P=y(()=>ae.filter($=>$.earned.value===!1)),{firstFeature:J,collapsedContent:se,hasCollapsedContent:ue}=li(ae,$=>$.earned.value);function V($){const R=H(0),O=H(0),Ce=H(0),ie=H(!1);return pt(()=>{const Ue=$(),Nt=y(()=>l.add(O.value,1).log10().add(1));return{...Ue,amount:R,consumedAmount:O,consumedTimeRemaining:Ce,discovered:ie,multiplier:Nt,modifier:A(()=>({multiplier:Nt,description:`${Ue.name} consumption`,enabled:()=>Ce.value>0})),consume:function(){O.value=R.value,Ce.value=l.pow(R.value,2).add(1).log2().toNumber(),R.value=0,ie.value=!0},seed:{[nt]:he(`\u{1F331}<sub><span class="material-icons" style="color: ${Ue.color}">${Ue.symbol}</span></sub>`),[Be]:()=>({})},[nt]:_m,[Be]:function(){const{name:gt,symbol:Gt,color:Je,effectDescription:oe,amount:Re,consumedTimeRemaining:Pe,multiplier:Q,consume:vt}=this;return{name:gt,symbol:Gt,color:Je,effectDescription:oe,amount:Re,consumedTimeRemaining:Pe,multiplier:Q,consume:vt}}}})}const W={moly:V(()=>({name:"Tempus Largitatis",symbol:Ee.job.symbol,color:Ee.job.color,effectDescription:"Moly gain"})),earthEssence:V(()=>({name:"Terra Lupulus",symbol:Qe.elements.earth.symbol,color:Qe.elements.earth.color,effectDescription:"Earth essence gain"})),waterEssence:V(()=>({name:"Aqua Lupulus",symbol:Qe.elements.water.symbol,color:Qe.elements.water.color,effectDescription:"Water essence gain"})),airEssence:V(()=>({name:"Aer Lupulus",symbol:Qe.elements.air.symbol,color:Qe.elements.air.color,effectDescription:"Air essence gain"})),fireEssence:V(()=>({name:"Ignis Lupulus",symbol:Qe.elements.fire.symbol,color:Qe.elements.fire.color,effectDescription:"Fire essence gain"})),properties:V(()=>({name:"Discipulo Scriptor",symbol:kn.job.symbol,color:kn.job.color,effectDescription:"Properties gain"})),potentia:V(()=>({name:"Glarea Fovea",symbol:Se.job.symbol,color:Se.job.color,effectDescription:"Potentia gain"})),energeia:V(()=>({name:"Vis Salutarias",symbol:Ve.job.symbol,color:Ve.job.color,effectDescription:"Energeia gain"}))};function Ae($,R,O){const Ce=H([]),ie=H([]),Ue=H(!1),Nt=La(()=>({initialValue:1,visibility:Ve.milestones.machinesMilestone.earned,requirements:Ta(()=>({cost:E.variable(Nt.amount).pow_base(R),resource:Ve.energeia})),display:{description:`Additional ${$.slice(0,-1)}`,showAmount:!1},style:{width:"600px",minHeight:"unset"}}));return pt(()=>{const gt=O(),Gt=Ke(gt.enabled);return et(Nt.amount,Je=>{for(;l.lt(Ce.value.length,Je);)Ce.value.push([]);for(;l.lt(ie.value.length,Je);)ie.value.push(0)}),{...gt,name:$,priceRatio:R,enabled:Gt,inputs:Ce,timers:ie,collapsed:Ue,machines:Nt,setInput:function(Je,oe){var Q,vt,Dt;const Re=(vt=(Q=Ce.value[Je])==null?void 0:Q[oe])!=null?vt:"none";Re!=="none"&&i.value.push(Re);const Pe=(Dt=Ce.value[Je])!=null?Dt:[];Pe[oe]=a.value,Ce.value[Je]=Pe,i.value=i.value.filter(sn=>sn!==a.value),a.value="none"},duration:function(Je){const oe=Je.filter(Q=>Q!=="none");if(oe.length===0)return 1/0;const Re=oe.map(Q=>Q.speed).reduce((Q,vt)=>Q+vt)/oe.length,Pe=l.times(gt.baseDuration,l.pow(.99,l.sqrt(Re)));return new l(gt.durationModifier.apply(Pe)).toNumber()},setPoweredUpMachine(Je){kt(gt.id,Je)},[nt]:mm,[Be]:function(){const{id:Je,name:oe,enabled:Re,numInputs:Pe,inputs:Q,timers:vt,collapsed:Dt,machines:sn,duration:At,outputDisplay:Kt,setInput:Ct,setPoweredUpMachine:vn}=this;return{id:Je,name:oe,enabled:Re,numInputs:Pe,inputs:Q,timers:vt,collapsed:Dt,machines:sn,poweredUpMachine:u,canPowerUp:g.earned,duration:At,outputDisplay:Kt,setInput:Ct,setPoweredUpMachine:vn}}}})}const je=Ae("Growing Machines",50,()=>({id:"growMachines",enabled:!0,numInputs:1,baseDuration:100,durationModifier:ne(()=>[]),isRunning:$=>Object.keys($).length===1&&$[0]!=="none",onActivate:$=>{if(Object.keys($).length===0||$[0]==="none")return;W[$[0].type].amount.value=l.add(W[$[0].type].amount.value,$[0].harvest);const R=$[0].mutability;n.value=l.add(n.value,R),p.xp.value=l.add(p.xp.value,Ge.apply(R))},outputDisplay:$=>k(()=>Object.keys($).length===0||$[0]==="none"?r("div",null,[r("div",{style:"font-size: xx-large"},[m("?")]),r("div",null,[m("+1 mutations")])]):r("div",null,[r("div",{style:{fontSize:"xx-large",color:W[$[0].type].color}},[ge(W[$[0].type].amount.value)," ",W[$[0].type].symbol]),r("div",null,[m("+ "),n.displayName])]))})),we=H([]);function Ye($){return l.times($.speed,$.harvest).pow(2).div($.mutability).ceil()}function le($,R){return l.max(1,l.add($,l.sqrt(R).times(Math.random()-.4).ceil())).toNumber()}const Tt=Ae("Breeding Machines",80,()=>({id:"breedingMachines",enabled:f.earned,numInputs:1,baseDuration:600,durationModifier:ne(()=>[]),isRunning:($,R)=>{var O;return((O=we.value[R])!=null?O:"none")==="none"&&Object.keys($).length===1&&$[0]!=="none"&&l.gte(n.value,Ye($[0]))},onActivate:($,R)=>{if(Object.keys($).length!==1||$[0]==="none"||we.value[R]!=null&&we.value[R]!=="none")return;n.value=l.sub(n.value,Ye($[0]));let{speed:O,harvest:Ce,mutability:ie}=$[0],Ue=$[0].type;l.sub(1,l.add(ie,1).log(1e6).pow(1.3).add(1).recip()).toNumber()>Math.random()&&(Ue=Object.keys(W)[Math.floor(Math.random()*Object.keys(W).length)],O=Math.sqrt(O),Ce=Math.sqrt(Ce),ie=Math.sqrt(ie)),O=le(O,ie),Ce=le(Ce,ie),ie=le(ie,ie),we.value[R]={type:Ue,speed:O,harvest:Ce,mutability:ie,analyzed:!1}},outputDisplay:($,R)=>k(()=>{var O;return r("div",null,[r(di,{seed:(O=we.value[R])!=null?O:"none",onClick:Ce=>{const ie=we.value[R];Ce!=="none"&&ie!=null&&ie!=="none"&&(i.value.push(ie),we.value[R]="none")}},null),Tt.isRunning($,R)?r("div",null,[m("-"),ge(Ye($[0]))," ",n.displayName]):null])})})),mt=H([]);function ze($){return l.times($.speed,$.harvest).times($.mutability).ceil()}const ut=Ae("Analyzing Machines",100,()=>({id:"analyzingMachines",enabled:f.earned,numInputs:1,baseDuration:1200,durationModifier:ne(()=>[]),isRunning:($,R)=>{var O;return((O=mt.value[R])!=null?O:"none")==="none"&&Object.keys($).length===1&&$[0]!=="none"&&$[0].analyzed===!1&&l.gte(Ee.flowers.value,ze($[0]))},onActivate:($,R)=>{Object.keys($).length!==1||$[0]==="none"||$[0].analyzed||mt.value[R]!=null&&mt.value[R]!=="none"||(Ee.flowers.value=l.sub(Ee.flowers.value,ze($[0])),mt.value[R]={...$[0],analyzed:!0},ut.inputs.value[R]=[])},outputDisplay:($,R)=>k(()=>{var O;return r("div",null,[r(di,{seed:(O=mt.value[R])!=null?O:"none",onClick:Ce=>{const ie=mt.value[R];Ce!=="none"&&ie!=null&&ie!=="none"&&(i.value.push(ie),mt.value[R]="none")}},null),ut.isRunning($,R)?r("div",null,[m("-"),ge(ze($[0]))," ",Ee.flowers.displayName]):null])})}));function L($){return l.times($.speed,$.harvest).times($.mutability).ceil()}const z=Ae("Recycling Machines",90,()=>({id:"recyclingMachines",enabled:_.earned,numInputs:1,baseDuration:900,durationModifier:ne(()=>[]),isRunning:$=>Object.keys($).length===1&&$[0]!=="none",onActivate:($,R)=>{if(Object.keys($).length!==1||$[0]==="none")return;const O=L($[0]);n.value=l.add(n.value,O),p.xp.value=l.add(p.xp.value,Ge.apply(O.times(10))),z.inputs.value[R]=[]},outputDisplay:($,R)=>k(()=>r("div",null,[z.isRunning($,R)&&$[0].analyzed?r("div",null,[m("+"),ge(L($[0]))," ",n.displayName,r("br",null,null),m("x10 exp gained")]):r("div",null,[m("+ "),n.displayName,r("br",null,null),m("x10 exp gained")])]))})),de=H([]);function fe($){return l.times($.mutability,2).pow(2).ceil()}const ke=Ae("Mutating Machines",150,()=>({id:"mutatingMachines",enabled:C.earned,numInputs:1,baseDuration:1800,durationModifier:ne(()=>[]),isRunning:($,R)=>{var O;return((O=de.value[R])!=null?O:"none")==="none"&&Object.keys($).length===1&&$[0]!=="none"&&l.gte(n.value,fe($[0]))},onActivate:($,R)=>{Object.keys($).length!==1||$[0]==="none"||de.value[R]!=null&&de.value[R]!=="none"||(n.value=l.sub(n.value,fe($[0])),de.value[R]={...$[0],mutability:$[0].mutability*2},ke.inputs.value[R]=[])},outputDisplay:($,R)=>k(()=>{var O;return r("div",null,[r(di,{seed:(O=de.value[R])!=null?O:"none",onClick:Ce=>{const ie=de.value[R];Ce!=="none"&&ie!=null&&ie!=="none"&&(i.value.push(ie),de.value[R]="none")}},null),ke.isRunning($,R)?r("div",null,[m("-"),ge(fe($[0])),m(" "),n.displayName]):null])})})),wt={growMachines:je,breedingMachines:Tt,analyzingMachines:ut,recyclingMachines:z,mutatingMachines:ke};function kt($,R){u.value={type:$,index:R}}const K=y(()=>l.pow(1.1,p.level.value)),it=y(()=>Object.values(W).filter($=>$.discovered.value).length),Le=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===_i})),A(()=>({multiplier:()=>l.pow(1.1,it.value),description:"Unique plants eaten (x1.1 each)"})),A(()=>({multiplier:K,description:`${p.name} level (x1.1 each)`})),Ve.batteries.breeding.timePassing.modifier]),He=y(()=>new l(Le.apply(1)).toNumber()),Ge=ne(()=>[Ve.batteries.breeding.xpGain.modifier,A(()=>({multiplier:K,description:`${p.name} level (x1.1 each)`}))]),ce={timePassing:Le,jobXpGain:Ge},[ft,_t]=Wt(()=>[{title:"Time Passing",modifier:Le,base:1},{title:`${p.name} EXP Gain`,modifier:Ge,base:1}]),ct=$n({general:()=>({display:"General",glowColor(){return ct.activeTab.value===this.tab?t:""},tab:ft,generalTabCollapsed:_t})},()=>({style:`--layer-color: ${t}`}));return this.on("preUpdate",$=>{p.timeLoopActive.value===!1&&G.tabs[1]!==_i||($=l.times($,He.value).toNumber(),Object.values(wt).forEach(R=>{var Ce;const O=R.timers.value;for(let ie=0;l.lt(ie,R.machines.amount.value);ie++){const Ue=(Ce=R.inputs.value[ie])!=null?Ce:[];R.isRunning(Ue,ie)?(O[ie]+=u.value.type===R.id&&u.value.index===ie?$*2:$,l.gte(O[ie],R.duration(Ue))&&(R.onActivate(R.inputs.value[ie],ie),O[ie]=0)):O[ie]=0}R.timers.value=O}))}),zt.on("update",($,R)=>{p.timeLoopActive.value===!1&&G.tabs[1]!==_i||Object.values(W).forEach(O=>{O.consumedTimeRemaining.value!==0&&(O.consumedTimeRemaining.value=Math.max(0,O.consumedTimeRemaining.value-R))})}),{name:e,color:t,minWidth:670,job:p,modifiers:ce,milestones:Y,collapseMilestones:T,modifierTabs:ct,machines:wt,seeds:i,selectedSeed:a,recycling:s,plants:W,breedingOutputs:we,analyzingOutputs:mt,mutatingOutputs:de,poweredUpMachine:u,plantsCollapsed:c,seedsCollapsed:d,display:k(()=>{const $=[...P.value];J.value&&$.push(J.value);const R=Object.keys(W).filter(O=>W[O].discovered.value||l.gt(W[O].amount.value,0));return r(F,null,[r(qi,{resource:n,color:t},null),ii(...$,k(()=>dn(r(ri,{collapsed:T,content:se,display:T.value?"Show other completed milestones":"Hide other completed milestones"},null),[[Nn,o(ue)]]))),r(Ne,null,null),g.earned.value?r(F,null,[r("div",null,[m("Select a machine by clicking on its progress bar to make it work 2x faster")]),r(Ne,null,null)]):null,Ze(je),Ze(Tt),Ze(ut),Ze(z),Ze(ke),R.length>0?r(F,null,[r(Ne,null,null),r("h2",{class:{"breeding-collapsible":!0,collapsed:c.value},onClick:()=>c.value=!c.value},[r("span",{class:"toggle"},[m("\u25BC")]),m("Plants")]),c.value?null:Mi(...R.map(O=>W[O]))]):null,r(Ne,null,null),r("h2",{class:{"breeding-collapsible":!0,collapsed:d.value},onClick:()=>d.value=!d.value},[r("span",{class:"toggle"},[m("\u25BC")]),m("Seeds")]),d.value?null:r("div",{style:"width: 600px"},[i.value.map(O=>r(di,{seed:O,selected:a.value===O,onClick:()=>{a.value=a.value===O?"none":O}},null)),r("hr",null,null),r("div",{style:"display: flex; align-items: center; text-align: left"},[r(di,{seed:s.value,onClick:()=>{a.value==="none"?s.value!=="none"&&(i.value.push(s.value),s.value="none"):(s.value=a.value,i.value=i.value.filter(O=>O!==a.value),a.value="none")}},{default:()=>[s.value==="none"?r("div",{class:"material-icons",style:"font-size: xxx-large; color: var(--outline); position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: -1;"},[m("delete")]):null]}),r("span",{style:"margin-left: 10px"},[m("Click here to trash your selected seed, or restore your most recently trashed seed.")])])])])})}}),Cm={min:.5,max:1},Sm=[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],km=.001,Nm=.1,xm=100,$m=!0,Mm={x:0,y:0},Pm=!1,Tm=[{type:"alpha",config:{alpha:{list:[{time:0,value:.74},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:700},{time:1,value:0}]},minMult:1}},{type:"scale",config:{scale:{list:[{time:0,value:5},{time:1,value:1.2}]},minMult:1}},{type:"color",config:{color:{list:[{time:0,value:"#ffdfa0"},{time:1,value:"#100f0c"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:200,minStart:0,maxStart:360}},{type:"textureRandom",config:{textures:["/particle.png"]}},{type:"spawnShape",config:{type:"rect",data:{x:0,y:0,w:200,h:100}}}];var la={lifetime:Cm,ease:Sm,frequency:km,emitterLifetime:Nm,maxParticles:xm,addAtBack:$m,pos:Mm,emit:Pm,behaviors:Tm};const Oa=e=>(ln("data-v-22f08ee0"),e=e(),an(),e),Im={class:"modal-mask",style:{"z-index":"10","background-color":"var(--raised-background)",top:"50px"}},Em={class:"cutscene-positioner"},Fm={class:"modal-container cutscene-container"},qm=Oa(()=>v("div",{class:"paper-background"},null,-1)),Dm={class:"content"},Am={key:0,class:"caption"},Lm={style:{display:"none"}},Rm={id:"wavy2"},Om=["seed"],jm=Oa(()=>v("feDisplacementMap",{in:"SourceGraphic",scale:"20"},null,-1)),Bm=Z({__name:"Cutscene",props:{stage:null,caption:null},emits:["next"],setup(e,{emit:t}){const n=e,i=nn(n,"stage"),a=nn(n,"caption"),s=X(1);et([i,a],()=>s.value++);const u=ni(i),c=Tn(a);return(d,p)=>(h(),U(oa,{to:"#modal-root"},[r(Zi,{name:"cutscene-modal"},{default:re(()=>[v("div",Im,[v("div",Em,[v("div",Fm,[qm,v("div",Dm,[(h(),U(Me(o(u)))),o(c)?(h(),x("div",Am,[(h(),U(Me(o(c))))])):B("",!0)]),v("button",{onClick:p[0]||(p[0]=f=>t("next")),class:"button next"},"Next")]),(h(),x("svg",Lm,[v("filter",Rm,[v("feTurbulence",{x:"-50vw",y:"-50vh",width:"200vw",height:"200vh",baseFrequency:"0.015",numOctaves:"10",seed:s.value},null,8,Om),jm])]))])])]),_:1})]))}});var Vm=me(Bm,[["__scopeId","data-v-22f08ee0"]]);const aa=gi(),Dl=["flowers","distill","study","experiments","generators","breeding","rituals"],zm="main",at=In(zm,function(){const e=H(0),t=Ut({flowers:Ee.job,distill:Qe.job,study:kn.job,experiments:Se.job,generators:Ve.job,breeding:Ft.job,rituals:Ti.job}),n=y(()=>{let C=0;return e.value>1&&(C=1,kn.milestones.timeSlotMilestone.earned.value&&C++,Se.milestones.timeSlotMilestone.earned.value&&C++,Ti.milestones.timeSlotMilestone.earned.value&&C++),C}),i=y(()=>Object.values(t).filter(C=>C.timeLoopActive.value).length+Ve.extraTimeSlotsAllocated.value),a=y(()=>n.value>i.value),s=H([0,0,0,0,0]);Object.values(t).forEach(C=>{let M=0;et(C.rawLevel,(Y,ae)=>{var T;if(!(Fe.active!==G.id||l.neq(Y,l.add(ae,1)))&&(C.notif!=null&&aa.dismiss(C.notif),C.notif=aa.info(`${C.name} is now level ${Y}!`),Date.now()-M>500)){const P=(T=at.nodes.value[C.id])==null?void 0:T.rect,J=f.boundingRect.value;if(P&&J){M=Date.now();const se=Object.assign({},la,{behaviors:[...la.behaviors.slice(0,-1),{type:"spawnShape",config:{type:"rect",data:{x:P.x-J.x,y:P.y-J.y,w:P.width,h:P.height}}}]});f.addEmitter(se).then(ue=>ue.playOnceAndDestroy())}}})});const u=pn(y(()=>Object.values(t).reduce((C,M)=>C.add(M.level.value),new l(0))),"Sum of all job levels"),c=To(u),d=tl(u),p=fc(()=>({display:{title:"<h1>Close the time loop</h1>",description:"<br/><i>The flowers are collected, and I have just enough. It's time to get started.</i>"},requirements:[],style:`width: 150px; height: 150px; --layer-color: ${Ee.color}`,visibility:()=>e.value==1&&l.gte(Ee.flowers.value,1e7)})),f=el(()=>({boundingRect:X(null),onContainerResized(C){this.boundingRect.value=C},style:"z-index: -1"})),g=X(null);Vt(()=>{if(Fe.active===G.id){if(e.value===0){g.value={pages:[{stage:k(()=>r("img",{style:"max-width: 100%; flex-grow: 1",src:"https://upload.wikimedia.org/wikipedia/commons/7/71/Serpiente_alquimica.jpg"},null))},{stage:k(()=>r("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"Test"},{stage:k(()=>r("div",{style:"display: flex"},[r("img",{style:"max-width: 100%; flex-grow: 1; margin-right: -20%",src:"https://dummyimage.com/386x320/000/fff.png"},null),r("img",{style:"max-width: 100%; flex-grow: 1; margin-left: -20%",src:"https://dummyimage.com/386x320/000/fff.png"},null)])),caption:"Other test"}],page:0,onFinished(){e.value=1,wn(Ee,G)}};return}else if(e.value===1&&p.bought.value){g.value={pages:[{stage:k(()=>r("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"I can wrap this field in a time loop and reset it whenever the field is empty. If I take the flowers out of the loop before hand I will have a perfectly sustainable source of moly."},{stage:k(()=>r("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"Now my focus will be transforming the flowers, and determining how best to utilize their power. I'll start by distilling the flowers into their component elements."}],page:0,onFinished(){e.value=2,wn(Qe,G)}};return}g.value=null}});const w=y(()=>e.value===1?r("h2",null,[m("Current Goal: Harvest all the moly"),r("br",null,null),m("("),ge(l.sub(1e7,Ee.flowers.value).clampMin(0))," ",m("remaining)")]):e.value==2?r("h2",null,[m("Current Goal: Perform Ritual of G\xE9nesis")]):r(F,null,null)),_=Un("???",()=>({color:"black",image:"https://dummyimage.com/720x320/000/fff.png",imageFocus:{x:"50%",y:"50%"},layerID:"unknown",symbol:"",loopable:!1,visibility:()=>Ve.milestones.jobMilestone.earned.value!==Ft.milestones.jobMilestone.earned.value?De.Visible:De.None,classes:{broken:!0},open:()=>{}}));return{name:"Jobs",chapter:e,timeSlots:n,hasTimeSlotAvailable:a,resetTimes:s,closeTimeLoop:p,activeCutscene:g,classes:{nigredo:!0},jobs:t,partialJob:_,sumJobLevels:u,bestJobLevelsSum:d,totalJobLevelsSum:c,display:k(()=>g.value?r(Vm,{stage:g.value.pages[g.value.page].stage,caption:g.value.pages[g.value.page].caption,onNext:()=>{var C,M;g.value&&(g.value.page==g.value.pages.length-1?(M=(C=g.value).onFinished)==null||M.call(C):g.value.page++)}},null):r(F,null,[G.devSpeed===0?r("div",null,[m("Game Paused")]):null,G.devSpeed!=null&&G.devSpeed!==1?r("div",null,[m("Dev Speed: "),Oe(G.devSpeed),m("x")]):null,G.offlineTime!=null?r("div",null,[m("Offline Time: "),Vn(G.offlineTime)]):null,G.devSpeed!=null||G.offlineTime!=null?r(Ne,null,null):null,o(w),r(Ne,null,null),l.gt(n.value,0)?r("div",null,[n.value-i.value,m(" Time Slot"),n.value-i.value===1?"":"s",m(" Available")]):null,Mi(...Object.values(t),_),Ze(p),Ze(f)]))}});zt.on("update",e=>{at.chapter.value>-1&&at.activeCutscene.value!=null&&(at.resetTimes.value[at.chapter.value-1]+=e)});const _l=y(()=>Dl.filter(e=>ht(at.jobs[e].visibility)).length),Gm=e=>{var n,i,a,s,u,c,d,p,f,g,w,_,C,M,Y,ae,T,P,J,se,ue,V,W,Ae,je,we,Ye;const t=(a=(i=(n=e.layers)==null?void 0:n.main)==null?void 0:i.chapter)!=null?a:0;if(t===0)return[at];if(t===1)return[at,Ee];if(t===2){const le=[at,Ee,Qe];return((d=(c=(u=(s=e.layers)==null?void 0:s.distill)==null?void 0:u.milestones)==null?void 0:c.studyMilestone)==null?void 0:d.earned)===!0&&le.push(kn),((w=(g=(f=(p=e.layers)==null?void 0:p.distill)==null?void 0:f.milestones)==null?void 0:g.experimentsMilestone)==null?void 0:w.earned)===!0&&le.push(Se),((Y=(M=(C=(_=e.layers)==null?void 0:_.experiments)==null?void 0:C.milestones)==null?void 0:M.jobMilestone)==null?void 0:Y.earned)===!0&&le.push(Ve),((J=(P=(T=(ae=e.layers)==null?void 0:ae.study)==null?void 0:T.milestones)==null?void 0:P.jobMilestone)==null?void 0:J.earned)===!0&&le.push(Ft),((W=(V=(ue=(se=e.layers)==null?void 0:se.generators)==null?void 0:ue.milestones)==null?void 0:V.jobMilestone)==null?void 0:W.earned)===!0&&((Ye=(we=(je=(Ae=e.layers)==null?void 0:Ae.breeding)==null?void 0:je.milestones)==null?void 0:we.jobMilestone)==null?void 0:Ye.earned)===!0&&le.push(Ti),le}throw`Chapter ${t} not supported`},ja=y(()=>!1);function Um(e,t){}var Xm=Object.freeze(Object.defineProperty({__proto__:null,jobKeys:Dl,main:at,numJobs:_l,getInitialLayers:Gm,hasWon:ja,fixOldSave:Um},Symbol.toStringTag,{value:"Module"}));const Hm={class:"modifier-info-toggle"},Jm=Z({__name:"ModifierInfo",props:{display:null,name:null},setup(e){const n=nn(e,"display"),i=X(!1),a=St();let s=null;return et(i,u=>{s==null||s(),u?s=Vt(()=>{a.value=he(rt(n))}):s=null}),kl(()=>s==null?void 0:s()),(u,c)=>(h(),x(F,null,[r(lt,{direction:o(xe).Left,display:"Open Modifiers",xoffset:"10px"},{default:re(()=>[v("div",Hm,[v("button",{onClick:c[0]||(c[0]=ti(d=>i.value=!0,["stop"]))},"?")])]),_:1},8,["direction"]),r(zn,Qt({modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=d=>i.value=d),class:"modifiers-modal"},u.$attrs),{header:re(()=>[v("h2",null,ee(e.name)+" Modifiers",1)]),body:re(({shown:d})=>[d?(h(),U(Me(o(a)),{key:0})):B("",!0)]),_:1},16,["modelValue"])],64))}});var Wm=me(Jm,[["__scopeId","data-v-19951ae7"]]),Qm=Z({props:{visibility:{type:j(Number),required:!0},style:j(String,Object,Array),classes:j(Object),xp:{type:Object,required:!0},level:{type:Object,required:!0},levelProgress:{type:Object,required:!0},timeLoopActive:{type:Object,required:!0},name:{type:String,required:!0},color:{type:j(String),required:!0},image:{type:j(String),required:!0},imageFocus:{type:j(Object),required:!0},resource:[Object,Array],layerID:{type:String,required:!0},currentQuip:{type:Object,required:!0},randomQuips:{type:j(Array)},modifierInfo:j(String,Object,Function),id:{type:String,required:!0},modifierModalAttrs:Object,showNotif:j(Boolean),loopable:j(Boolean),open:{type:Function,required:!0}},components:{Node:Gn,ModifierInfo:Wm,Tooltip:lt,Notif:xn},setup(e){const{layerID:t,currentQuip:n,randomQuips:i,resource:a}=ot(e),s=y(()=>G.tabs[1]==t.value),u=y(()=>at.chapter.value>1),c=at.hasTimeSlotAvailable;let d;Vt(()=>{var w;clearInterval(d);const g=(w=rt(i))!=null?w:[];n.value?d=setTimeout(()=>{n.value=null},15e3):d=setTimeout(()=>{n.value=g[Math.floor(Math.random()*g.length)]},Math.random()*15e3+15e3)}),Cl(()=>clearInterval(d));const p=X(!1);et(s,()=>{p.value=!0,setTimeout(()=>p.value=!1,250)});const f=y(()=>{if("displayName"in a)return[a];const g=o(a);return Array.isArray(g)?g:[]});return{selected:s,animating:p,finishedFirstChapter:u,hasTimeSlotAvailable:c,formatWhole:ge,unref:o,displayResource:Sn,resourceArray:f,Visibility:De,Direction:xe,isVisible:ht,isHidden:Pn}}});const ll=e=>(ln("data-v-244765c3"),e=e(),an(),e),Zm=["src"],Km={class:"job-contents"},Ym={class:"job-resource"},ef=ll(()=>v("br",null,null,-1)),tf=ll(()=>v("br",null,null,-1)),nf={class:"job-title"},lf={style:{"margin-bottom":"0"}},af=ll(()=>v("span",{style:{"flex-grow":"1"}},null,-1)),rf={key:0,class:"job-quip"},sf=ll(()=>v("div",{class:"job-clipping-container"},[v("div",{class:"job-progress-container"},[v("div",{class:"job-progress"})])],-1)),of=["disabled"];function uf(e,t,n,i,a,s){var f,g;const u=qt("ModifierInfo"),c=qt("Tooltip"),d=qt("Node"),p=qt("Notif");return e.isVisible(e.visibility)?(h(),x("span",{key:0,style:qe([{visibility:e.isHidden(e.visibility)?"hidden":void 0,"--posx":e.unref(e.imageFocus).x,"--posy":e.unref(e.imageFocus).y,"--progress":`${(1-e.unref(e.levelProgress))*100}%`,"--foreground":e.unref(e.color)},(f=e.unref(e.style))!=null?f:{}]),class:$e(["feature dontMerge job",[{selected:e.selected,active:e.selected||e.unref(e.timeLoopActive),animating:e.animating},(g=e.unref(e.classes))!=null?g:{}]]),onClick:t[1]||(t[1]=(...w)=>e.open&&e.open(...w))},[v("img",{src:e.unref(e.image)},null,8,Zm),v("div",Km,[(h(!0),x(F,null,Mn(e.resourceArray,(w,_)=>(h(),x(F,{key:_},[v("div",Ym,[m(ee(e.displayResource(w))+" "+ee(w.displayName),1),ef]),tf],64))),128)),v("div",nf,[v("h2",null,ee(e.name),1),v("span",lf,"Lv. "+ee(e.formatWhole(e.level.value)),1),af,e.modifierInfo?(h(),U(u,Qt({key:0,display:e.modifierInfo,name:e.name},e.modifierModalAttrs),null,16,["display","name"])):B("",!0)])]),e.selected&&e.unref(e.currentQuip)?(h(),x("div",rf,'"'+ee(e.unref(e.currentQuip))+'"',1)):B("",!0),sf,e.unref(e.loopable)!==!1?(h(),U(c,{key:1,direction:e.Direction.Left,display:"Toggle Time Loop",class:"job-loop-toggle"},{default:re(()=>[e.finishedFirstChapter?(h(),x("button",{key:0,class:$e(["material-icons",{active:e.unref(e.timeLoopActive)}]),onClick:t[0]||(t[0]=ti(w=>e.timeLoopActive.value=!e.unref(e.timeLoopActive),["stop"])),disabled:!e.hasTimeSlotAvailable&&!e.unref(e.timeLoopActive)}," all_inclusive ",10,of)):B("",!0)]),_:1},8,["direction"])):B("",!0),r(d,{id:e.id},null,8,["id"]),e.unref(e.showNotif)?(h(),U(p,{key:2})):B("",!0)],6)):B("",!0)}var cf=me(Qm,[["render",uf],["__scopeId","data-v-244765c3"]]);const df=Symbol("Job"),Al=.7643;function Un(e,t){const n=pn(0,e+" XP"),i=H(!1);return pt(()=>{const a=t();return a.id=mn("job-"),a.type=df,a[nt]=cf,a.name=e,a.xp=n,a.timeLoopActive=i,a.rawLevel=y(()=>{const s=a;if(l.eq(s.xp.value,0))return 1;let u=l.clampMin(s.xp.value,1).log10().add(1);return u.gt(25)&&(u=u.sub(25).pow(Al).add(25)),u.floor()}),a.level=pn(y(()=>a.rawLevel.value),a.name+" Levels"),a.levelProgress=y(()=>{const s=a,u=s.rawLevel.value,c=ra(u),d=ra(l.add(u,1));let p;return l.lt(u,25)?p=l.sub(s.xp.value,c).div(l.sub(d,c)).toNumber():p=l.log10(s.xp.value).sub(l.log10(c)).div(l.log10(d).sub(l.log10(c))).toNumber(),p}),a.active=y(()=>ht(a.visibility)&&(a.timeLoopActive.value||G.tabs[1]===a.layerID)),a.currentQuip=X(null),tt(a,"open",function(){G.tabs.splice(1,1,a.layerID)}),a.setQuip=function(s){const u=a;if(u.currentQuip.value!=null){u.currentQuip.value=null,Bt(u.setQuip);return}if(s!=null)u.currentQuip.value=s;else if(o(u.randomQuips)){const c=o(u.randomQuips);u.currentQuip.value=c[Math.floor(Math.random()*c.length)]}},q(a,"visibility"),tt(a,"visibility",De.Visible),q(a,"classes"),q(a,"style"),q(a,"color"),q(a,"image"),q(a,"imageFocus"),q(a,"randomQuips"),q(a,"modifierInfo"),q(a,"showNotif"),q(a,"loopable"),a[Be]=function(){const{id:s,xp:u,level:c,levelProgress:d,timeLoopActive:p,name:f,visibility:g,color:w,image:_,imageFocus:C,resource:M,layerID:Y,classes:ae,style:T,currentQuip:P,randomQuips:J,modifierInfo:se,modifierModalAttrs:ue,showNotif:V,loopable:W,open:Ae}=this;return{id:s,xp:u,level:c,levelProgress:d,timeLoopActive:p,name:f,visibility:g,color:w,image:_,imageFocus:C,resource:M,layerID:Y,classes:ae,style:o(T),currentQuip:P,randomQuips:J,modifierInfo:se,modifierModalAttrs:ue,showNotif:V,loopable:W,open:Ae}},a})}function ra(e){return l.eq(e,1)?0:(l.gt(e,25)&&(e=l.sub(e,25).pow(1/Al).add(25)),l.sub(e,1).pow10())}const pf={key:0},mf=["onClick","disabled"],ff={key:0},vf=["onClick"],gf=Z({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const i=ot(e),a=X(!1);et(a,c=>{t("confirmingChanged",c)});function s(){if(o(i.skipConfirm)){t("click");return}a.value&&t("click"),a.value=!a.value}function u(){a.value=!1}return(c,d)=>(h(),x("span",{class:$e(["container",{confirming:a.value}])},[a.value?(h(),x("span",pf,"Are you sure?")):B("",!0),v("button",{onClick:ti(s,["stop"]),class:"button danger",disabled:e.disabled},[a.value?(h(),x("span",ff,"Yes")):Zt(c.$slots,"default",{key:1},void 0,!0)],8,mf),a.value?(h(),x("button",{key:1,class:"button",onClick:ti(u,["stop"])},"No",8,vf)):B("",!0)],2))}});var hf=me(gf,[["__scopeId","data-v-2f8ef34c"]]);const En=e=>(ln("data-v-7a38a5a2"),e=e(),an(),e),bf=En(()=>v("div",{class:"handle material-icons"},"drag_handle",-1)),yf={key:0,class:"actions"},wf=En(()=>v("span",{class:"material-icons"},"content_paste",-1)),_f=En(()=>v("span",{class:"material-icons"},"content_copy",-1)),Cf=En(()=>v("span",{class:"material-icons"},"edit",-1)),Sf=En(()=>v("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),kf={key:1,class:"actions"},Nf=En(()=>v("span",{class:"material-icons"},"check",-1)),xf=En(()=>v("span",{class:"material-icons"},"close",-1)),$f={key:2,class:"details"},Mf={class:"save-version"},Pf=En(()=>v("br",null,null,-1)),Tf={key:0},If={key:1},Ef={key:3,class:"details"},Ff={key:4,class:"details error"},qf=En(()=>v("br",null,null,-1)),Df=Z({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:i}=ot(n),a=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),s=X(!1),u=X(!1),c=X("");et(s,()=>{var w;return c.value=(w=i.value.name)!=null?w:""});const d=y(()=>i.value!=null&&i.value.id===G.id),p=y(()=>{var w;return d.value?G.time:(w=i.value!=null&&i.value.time)!=null?w:0}),f=ni(y(()=>{var _,C,M,Y,ae,T,P,J,se,ue,V,W,Ae;const w=(Y=(M=(C=(_=i.value)==null?void 0:_.layers)==null?void 0:C.main)==null?void 0:M.chapter)!=null?Y:0;if(w==0)return"Just started";if(w==1){const je=(J=(P=(T=(ae=i.value)==null?void 0:ae.layers)==null?void 0:T.flowers)==null?void 0:P.flowers)!=null?J:0;return`Chapter 1; ${ge(je)} flowers`}else if(w==2){const je=(Ae=Object.values((W=(V=(ue=(se=i.value)==null?void 0:se.layers)==null?void 0:ue.main)==null?void 0:V.jobs)!=null?W:{}).reduce((we,Ye)=>{if(Ye.xp==null)return we;if(l.eq(Ye.xp,0))return we.add(1);let le=l.clampMin(Ye.xp,1).log10().add(1);return le.gt(25)&&(le=le.sub(25).pow(Al).add(25)),le.floor().add(we)},new l(0)))!=null?Ae:new l(0);return`Chapter 2; ${ge(je)} total job levels`}else return`Chapter ${w}`}));function g(){t("editName",c.value),s.value=!1}return(w,_)=>(h(),x("div",{class:$e(["save",{active:o(d)}])},[bf,s.value?(h(),x("div",kf,[v("button",{onClick:g,class:"button"},[r(lt,{display:"Save",direction:o(xe).Left,class:"info"},{default:re(()=>[Nf]),_:1},8,["direction"])]),v("button",{onClick:_[5]||(_[5]=C=>s.value=!s.value),class:"button"},[r(lt,{display:"Cancel",direction:o(xe).Left,class:"info"},{default:re(()=>[xf]),_:1},8,["direction"])])])):(h(),x("div",yf,[o(i).error==null&&!u.value?(h(),U($a,{key:0,onClick:_[0]||(_[0]=C=>t("export")),class:"button",left:""},{default:re(()=>[r(lt,{display:"Export",direction:o(xe).Left,class:"info"},{default:re(()=>[wf]),_:1},8,["direction"])]),_:1})):B("",!0),o(i).error==null&&!u.value?(h(),x("button",{key:1,onClick:_[1]||(_[1]=C=>t("duplicate")),class:"button"},[r(lt,{display:"Duplicate",direction:o(xe).Left,class:"info"},{default:re(()=>[_f]),_:1},8,["direction"])])):B("",!0),o(i).error==null&&!u.value?(h(),x("button",{key:2,onClick:_[2]||(_[2]=C=>s.value=!s.value),class:"button"},[r(lt,{display:"Edit Name",direction:o(xe).Left,class:"info"},{default:re(()=>[Cf]),_:1},8,["direction"])])):B("",!0),r(hf,{disabled:o(d),onClick:_[3]||(_[3]=C=>t("delete")),onConfirmingChanged:_[4]||(_[4]=C=>u.value=C)},{default:re(()=>[r(lt,{display:"Delete",direction:o(xe).Left,class:"info"},{default:re(()=>[Sf]),_:1},8,["direction"])]),_:1},8,["disabled"])])),o(i).error==null&&!s.value?(h(),x("div",$f,[v("button",{class:"button open",onClick:_[6]||(_[6]=C=>t("open"))},[v("h3",null,ee(o(i).name),1)]),v("span",Mf,"v"+ee(o(i).modVersion),1),Pf,o(p)?(h(),x("div",Tf,"Last played "+ee(o(a).format(o(p))),1)):B("",!0),o(f)?(h(),x("div",If,[(h(),U(Me(o(f))))])):B("",!0)])):o(i).error==null&&s.value?(h(),x("div",Ef,[r(Ma,{modelValue:c.value,"onUpdate:modelValue":_[7]||(_[7]=C=>c.value=C),class:"editname",onSubmit:g},null,8,["modelValue"])])):(h(),x("div",Ff,[m(" Error: Failed to load save with id "+ee(o(i).id),1),qf,m(ee(o(i).error),1)]))],2))}});var Af=me(Df,[["__scopeId","data-v-7a38a5a2"]]);const Ll=e=>(ln("data-v-2a4275be"),e=e(),an(),e),Lf=Ll(()=>v("h2",null,"Saves Manager",-1)),Rf={class:"modal-footer"},Of={class:"field"},jf=Ll(()=>v("span",{class:"field-title"},"Create Save",-1)),Bf={class:"field-buttons"},Vf={class:"footer"},zf=Ll(()=>v("div",{style:{"flex-grow":"1"}},null,-1)),Gf=Z({__name:"SavesManager",setup(e,{expose:t}){const n=X(!1),i=X(null);t({open(){n.value=!0}});const a=X(!1),s=X(""),u=X(null);et(s,T=>{T?Bt(()=>{try{if(T[0]!=="{")if(T[0]==="e")T=decodeURIComponent(escape(atob(T)));else if(T[0]==="\u1BE1")T=Ln.decompressFromUTF16(T);else{console.warn("Unable to determine preset encoding",T),a.value=!0;return}const P=JSON.parse(T);if(typeof P!="object"){a.value=!0;return}const J=Bi();P.id=J,tn(P),s.value="",a.value=!1,Fe.saves.push(J)}catch{a.value=!0}}):a.value=!1});let c={},d=X(Object.keys(c).reduce((T,P)=>(T.push({label:P.split("/").slice(-1)[0].slice(0,-4),value:c[P]}),T),[]));const p=Sl({});function f(T){if(p[T]==null){let P=localStorage.getItem(T);if(P==null)p[T]={error:"Save doesn't exist in localStorage",id:T};else if(P==="dW5kZWZpbmVk")p[T]={error:"Save is undefined",id:T};else try{if(P[0]!=="{")if(P[0]==="e")P=decodeURIComponent(escape(atob(P)));else if(P[0]==="\u1BE1")P=Ln.decompressFromUTF16(P);else return console.warn("Unable to determine preset encoding",P),a.value=!0,p[T]={error:"Unable to determine preset encoding",id:T},p[T];p[T]={...JSON.parse(P),id:T}}catch(J){p[T]={error:J,id:T},console.warn(`SavesManager: Failed to load info about save with id ${T}:
${J}
${P}`)}}return p[T]}et(n,T=>{T&&Object.keys(p).forEach(P=>delete p[P])});const g=y(()=>Fe.saves.reduce((T,P)=>(T[P]=f(P),T),{}));function w(T){let P;switch(G.id===T?P=ya(G):P=JSON.stringify(g.value[T]),Xe.exportEncoding){default:console.warn(`Unknown save encoding: ${Xe.exportEncoding}. Defaulting to lz`);case"lz":P=Ln.compressToUTF16(P);break;case"base64":P=btoa(unescape(encodeURIComponent(P)));break;case"plain":break}const J=document.createElement("textarea");J.value=P,document.body.appendChild(J),J.select(),J.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(J)}function _(T){G.id===T&&tn();const P={...g.value[T],id:Bi()};tn(P),Fe.saves.push(P.id)}function C(T){Fe.saves=Fe.saves.filter(P=>P!==T),localStorage.removeItem(T),p[T]=void 0}function M(T){g.value[G.id].time=G.time,tn(),p[G.id]=void 0,Kn(g.value[T]),p[T]=void 0}function Y(T){if(u.value=T,Bt(()=>{u.value=null}),T[0]!=="{")if(T[0]==="e")T=decodeURIComponent(escape(atob(T)));else if(T[0]==="\u1BE1")T=Ln.decompressFromUTF16(T);else{console.warn("Unable to determine preset encoding",T);return}const P=JSON.parse(T);P.id=Bi(),tn(P),Fe.saves.push(P.id),M(P.id)}function ae(T,P){const J=g.value[T];J!=null&&(J.name=P,G.id===T?(G.name=P,tn()):(tn(J),p[T]=void 0))}return(T,P)=>(h(),U(zn,{modelValue:n.value,"onUpdate:modelValue":P[4]||(P[4]=J=>n.value=J),ref_key:"modal",ref:i},{header:re(()=>[Lf]),body:re(({shown:J})=>[J?(h(),U(o(Za),{key:0,list:o(Fe).saves,handle:".handle",itemKey:se=>se},{item:re(({element:se})=>[r(Af,{save:o(g)[se],onOpen:ue=>M(se),onExport:ue=>w(se),onEditName:ue=>ae(se,ue),onDuplicate:ue=>_(se),onDelete:ue=>C(se)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):B("",!0)]),footer:re(()=>[v("div",Rf,[r(Ma,{modelValue:s.value,"onUpdate:modelValue":P[0]||(P[0]=J=>s.value=J),title:"Import Save",placeholder:"Paste your save here!",class:$e({importingFailed:a.value})},null,8,["modelValue","class"]),v("div",Of,[jf,v("div",Bf,[v("button",{class:"button",onClick:P[1]||(P[1]=J=>M(o(pi)().id))},"New Game"),Object.keys(o(d)).length>0?(h(),U(Il,{key:0,options:o(d),modelValue:u.value,"onUpdate:modelValue":P[2]||(P[2]=J=>Y(J)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):B("",!0)])]),v("div",Vf,[zf,v("button",{class:"button modal-default-button",onClick:P[3]||(P[3]=J=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var Ba=me(Gf,[["__scopeId","data-v-2a4275be"]]);const rn=e=>(ln("data-v-2ba32660"),e=e(),an(),e),Uf=["src","alt"],Xf={key:1,class:"title"},Hf=rn(()=>v("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Jf={class:"discord"},Wf={class:"discord-links"},Qf={key:0},Zf=["href"],Kf=rn(()=>v("li",null,[v("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Yf=rn(()=>v("li",null,[v("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),ev={href:"https://forums.moddingtree.com/",target:"_blank"},tv=rn(()=>v("span",{class:"material-icons"},"forum",-1)),nv=rn(()=>v("span",{class:"material-icons"},"info",-1)),iv=rn(()=>v("span",{class:"material-icons"},"library_books",-1)),lv=rn(()=>v("span",{class:"material-icons"},"settings",-1)),av=rn(()=>v("span",{class:"material-icons"},"library_books",-1)),rv=rn(()=>v("span",{class:"material-icons"},"settings",-1)),sv=rn(()=>v("span",{class:"material-icons"},"info",-1)),ov={href:"https://forums.moddingtree.com/",target:"_blank"},uv=rn(()=>v("span",{class:"material-icons"},"forum",-1)),cv={class:"discord"},dv={class:"discord-links"},pv={key:0},mv=["href"],fv=rn(()=>v("li",null,[v("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),vv=rn(()=>v("li",null,[v("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),gv=Z({__name:"Nav",setup(e){const t=X(null),n=X(null),i=X(null),a=X(null),{useHeader:s,banner:u,title:c,discordName:d,discordLink:p,versionNumber:f}=Xe;function g(){window.open(p,"mywindow")}return(w,_)=>(h(),x(F,null,[o(s)?(h(),x("div",Qt({key:0,class:"nav"},w.$attrs),[o(u)?(h(),x("img",{key:0,src:o(u),class:"banner",alt:o(c),style:{"margin-left":"10px"}},null,8,Uf)):(h(),x("div",Xf,ee(o(c)),1)),v("div",{onClick:_[0]||(_[0]=C=>{var M;return(M=a.value)==null?void 0:M.open()}),class:"version-container"},[r(lt,{display:"Changelog",direction:o(xe).Down,class:"version"},{default:re(()=>[v("span",null,"v"+ee(o(f)),1)]),_:1},8,["direction"])]),Hf,v("div",Jf,[v("span",{onClick:g,class:"material-icons"},"discord"),v("ul",Wf,[o(p)?(h(),x("li",Qf,[v("a",{href:o(p),target:"_blank"},ee(o(d)),9,Zf)])):B("",!0),Kf,Yf])]),v("div",null,[v("a",ev,[r(lt,{display:"Forums",direction:o(xe).Down,yoffset:"5px"},{default:re(()=>[tv]),_:1},8,["direction"])])]),v("div",{onClick:_[1]||(_[1]=C=>{var M;return(M=t.value)==null?void 0:M.open()})},[r(lt,{display:"Info",direction:o(xe).Down,class:"info"},{default:re(()=>[nv]),_:1},8,["direction"])]),v("div",{onClick:_[2]||(_[2]=C=>{var M;return(M=n.value)==null?void 0:M.open()})},[r(lt,{display:"Saves",direction:o(xe).Down,xoffset:"-20px"},{default:re(()=>[iv]),_:1},8,["direction"])]),v("div",{onClick:_[3]||(_[3]=C=>{var M;return(M=i.value)==null?void 0:M.open()})},[r(lt,{display:"Settings",direction:o(xe).Down,xoffset:"-66px"},{default:re(()=>[lv]),_:1},8,["direction"])])],16)):(h(),x("div",Qt({key:1,class:"overlay-nav"},w.$attrs),[v("div",{onClick:_[4]||(_[4]=C=>{var M;return(M=a.value)==null?void 0:M.open()}),class:"version-container"},[r(lt,{display:"Changelog",direction:o(xe).Right,xoffset:"25%",class:"version"},{default:re(()=>[v("span",null,"v"+ee(o(f)),1)]),_:1},8,["direction"])]),v("div",{onClick:_[5]||(_[5]=C=>{var M;return(M=n.value)==null?void 0:M.open()})},[r(lt,{display:"Saves",direction:o(xe).Right},{default:re(()=>[av]),_:1},8,["direction"])]),v("div",{onClick:_[6]||(_[6]=C=>{var M;return(M=i.value)==null?void 0:M.open()})},[r(lt,{display:"Settings",direction:o(xe).Right},{default:re(()=>[rv]),_:1},8,["direction"])]),v("div",{onClick:_[7]||(_[7]=C=>{var M;return(M=t.value)==null?void 0:M.open()})},[r(lt,{display:"Info",direction:o(xe).Right},{default:re(()=>[sv]),_:1},8,["direction"])]),v("div",null,[v("a",ov,[r(lt,{display:"Forums",direction:o(xe).Right,xoffset:"7px"},{default:re(()=>[uv]),_:1},8,["direction"])])]),v("div",cv,[v("span",{onClick:g,class:"material-icons"},"discord"),v("ul",dv,[o(p)?(h(),x("li",pv,[v("a",{href:o(p),target:"_blank"},ee(o(d)),9,mv)])):B("",!0),fv,vv])])],16)),r(no,{ref_key:"info",ref:t,changelog:a.value},null,8,["changelog"]),r(Ba,{ref_key:"savesManager",ref:n},null,512),r(go,{ref_key:"options",ref:i},null,512),r(Ls,{ref_key:"changelog",ref:a},null,512)],64))}});var Va=me(gv,[["__scopeId","data-v-2ba32660"]]);const hv={class:"inner-tab"},bv=Z({__name:"Game",setup(e){const t=nn(G,"tabs"),n=y(()=>Object.keys(Xt)),i=Xe.useHeader;function a(s){const{display:u,minimized:c,name:d,color:p,minimizable:f,nodes:g,minimizedDisplay:w}=s;return{display:u,minimized:c,name:d,color:p,minimizable:f,nodes:g,minimizedDisplay:w}}return(s,u)=>(h(),x("div",{class:$e(["tabs-container",{useHeader:o(i)}])},[(h(!0),x(F,null,Mn(o(t),(c,d)=>{var p,f;return h(),x("div",{key:d,class:$e(["tab",o((p=o(Xt)[c])==null?void 0:p.classes)]),style:qe(o((f=o(Xt)[c])==null?void 0:f.style))},[d===0&&!o(i)?(h(),U(Va,{key:0})):B("",!0),v("div",hv,[o(n).includes(c)?(h(),U(Fs,Qt({key:0},a(o(Xt)[c]),{index:d,onSetMinimized:g=>o(Xt)[c].minimized.value=g}),null,16,["index","onSetMinimized"])):(h(),U(Me(c),{key:1,index:d},null,8,["index"]))])],6)}),128))],2))}});var yv=me(bv,[["__scopeId","data-v-dcd207b4"]]);const Di=e=>(ln("data-v-4a50ce42"),e=e(),an(),e),wv={class:"game-over-modal-header"},_v=["src","alt"],Cv={class:"game-over-modal-title"},Sv=Di(()=>v("h2",null,"Congratulations!",-1)),kv={key:0},Nv=Di(()=>v("br",null,null,-1)),xv=Di(()=>v("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),$v=Di(()=>v("br",null,null,-1)),Mv=["href"],Pv=Di(()=>v("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),Tv=Z({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:i,discordLink:a,versionNumber:s,versionTitle:u}=Xe,c=y(()=>Vn(G.timePlayed)),d=y(()=>ja.value&&!G.keepGoing),p=nn(G,"autosave");function f(){G.keepGoing=!0}function g(){Kn(pi())}return(w,_)=>(h(),U(zn,{"model-value":o(d)},{header:re(()=>[v("div",wv,[o(n)?(h(),x("img",{key:0,class:"game-over-modal-logo",src:o(n),alt:o(t)},null,8,_v)):B("",!0),v("div",Cv,[Sv,v("h4",null,"You've beaten "+ee(o(t))+" v"+ee(o(s))+": "+ee(o(u)),1)])])]),body:re(({shown:C})=>[C?(h(),x("div",kv,[v("div",null,"It took you "+ee(o(c))+" to beat the game.",1),Nv,xv,$v,v("div",null,[v("a",{href:o(a),class:"game-over-modal-discord-link"},[Pv,m(" "+ee(o(i)),1)],8,Mv)]),r(Cn,{title:"Autosave",modelValue:o(p),"onUpdate:modelValue":_[0]||(_[0]=M=>Et(p)?p.value=M:null)},null,8,["modelValue"])])):B("",!0)]),footer:re(()=>[v("div",{class:"game-over-footer"},[v("button",{onClick:f,class:"button"},"Keep Going"),v("button",{onClick:g,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var Iv=me(Tv,[["__scopeId","data-v-4a50ce42"]]);const al=e=>(ln("data-v-336bf74f"),e=e(),an(),e),Ev=al(()=>v("div",{class:"nan-modal-header"},[v("h2",null,"NaN value detected!")],-1)),Fv={key:0},qv=al(()=>v("br",null,null,-1)),Dv=["href"],Av=al(()=>v("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Lv=al(()=>v("br",null,null,-1)),Rv={class:"nan-footer"},Ov=Z({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=Xe,i=X(!0),a=X(!0),s=nn(Pt,"hasNaN"),u=X(null);et(s,w=>{w?(i.value=G.autosave,a.value=G.devSpeed===0):(G.autosave=i.value,G.devSpeed=a.value?0:null)});const c=y(()=>{var w;return(w=Pt.NaNPath)==null?void 0:w.join(".")}),d=y(()=>Pt.NaNPersistent!=null?Pt.NaNPersistent.value:null);function p(){Pt.NaNPersistent!=null&&(Pt.NaNPersistent.value=new l(0),Pt.hasNaN=!1)}function f(){Pt.NaNPersistent&&(Pt.NaNPersistent.value=new l(1),Pt.hasNaN=!1)}function g(){Pt.NaNPersistent&&(Pt.NaNPersistent.value=new l(NaN),Pt.hasNaN=!1)}return(w,_)=>(h(),x(F,null,[r(zn,Qt({modelValue:o(s),"onUpdate:modelValue":_[4]||(_[4]=C=>Et(s)?s.value=C:null)},w.$attrs),{header:re(()=>[Ev]),body:re(()=>[v("div",null,[m(' Attempted to assign "'+ee(o(c))+'" to NaN',1),o(d)?(h(),x("span",Fv,ee(" ")+"(previously "+ee(o(Oe)(o(d)))+")",1)):B("",!0),m(". Auto-saving has been "+ee(i.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),qv,v("div",null,[v("a",{href:o(n)||"https://discord.gg/WzejVAx",class:"nan-modal-discord-link"},[Av,m(" "+ee(o(t)||"The Paper Pilot Community"),1)],8,Dv)]),Lv,r(Cn,{title:"Autosave",modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=C=>i.value=C)},null,8,["modelValue"]),o(Xe).enablePausing?(h(),U(Cn,{key:0,title:"Pause game",modelValue:a.value,"onUpdate:modelValue":_[1]||(_[1]=C=>a.value=C)},null,8,["modelValue"])):B("",!0)]),footer:re(()=>[v("div",Rv,[v("button",{onClick:_[2]||(_[2]=C=>{var M;return(M=u.value)==null?void 0:M.open()}),class:"button"},"Open Saves Manager"),v("button",{onClick:p,class:"button"},"Set to 0"),v("button",{onClick:f,class:"button"},"Set to 1"),o(d)&&o(l).neq(o(d),0)&&o(l).neq(o(d),1)?(h(),x("button",{key:0,onClick:_[3]||(_[3]=C=>s.value=!1),class:"button"}," Set to previous ")):B("",!0),v("button",{onClick:g,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),r(Ba,{ref_key:"savesManager",ref:u},null,512)],64))}});var jv=me(Ov,[["__scopeId","data-v-336bf74f"]]);const Bv={key:0,class:"tpsDisplay"},Vv={key:0,class:"low"},zv=Z({__name:"TPS",setup(e){const t=y(()=>l.div(Pt.lastTenTicks.length,Pt.lastTenTicks.reduce((s,u)=>s+u,0))),n=X([]);Vt(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const i=y(()=>n.value.reduce((s,u)=>l.max(s,u),0)),a=y(()=>l.sub(t.value,i.value).gt(1));return(s,u)=>o(t).isNan()?B("",!0):(h(),x("div",Bv,[m(" TPS: "+ee(o(ge)(o(t)))+" ",1),r(Zi,{name:"fade"},{default:re(()=>[o(a)?(h(),x("span",Vv,ee(o(ge)(o(i))),1)):B("",!0)]),_:1})]))}});var Gv=me(zv,[["__scopeId","data-v-46a3ed5b"]]);var Uv=Z({__name:"App",setup(e){const t=Xe.useHeader,n=y(()=>hi[Fe.theme].variables),i=nn(Fe,"showTPS"),a=y(()=>he(k(()=>r(F,null,[cs.map(Ze)]))));return(s,u)=>(h(),x(F,null,[v("div",{id:"modal-root",style:qe(o(n))},null,4),v("div",{class:$e(["app",{useHeader:o(t)}]),style:qe(o(n))},[o(t)?(h(),U(Va,{key:0})):B("",!0),r(yv),o(o(i))?(h(),U(Gv,{key:1})):B("",!0),r(Iv),r(jv),(h(),U(Me(o(a))))],6)],64))}});var Xv=me(Uv,[["__scopeId","data-v-41d15e5e"]]);function Hv(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisterError:s}=e;let u,c;const d=async(p=!0)=>{p&&(u==null||u.addEventListener("controlling",f=>{f.isUpdate&&window.location.reload()})),c&&c.waiting&&await ar(c.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){u=new lr("./sw.js",{scope:"./",type:"classic"}),u.addEventListener("activated",p=>{p.isUpdate||i==null||i()});{const p=()=>{n==null||n()};u.addEventListener("waiting",p),u.addEventListener("externalwaiting",p)}u.register({immediate:t}).then(p=>{c=p,a==null||a(p)}).catch(p=>{s==null||s(p)})}return d}function Jv(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisterError:s}=e,u=X(!1),c=X(!1);return{updateServiceWorker:Hv({immediate:t,onNeedRefresh(){u.value=!0,n==null||n()},onOfflineReady(){c.value=!0,i==null||i()},onRegistered:a,onRegisterError:s}),offlineReady:c,needRefresh:u}}document.title=Xe.title;window.projInfo=Xe;if(Xe.id==="")throw new Error("Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await as();const{globalBus:e}=await Xi(()=>Promise.resolve().then(function(){return is}),void 0),{startGameLoop:t}=await Xi(()=>import("./gameLoop.9c3d8ef4.js"),["assets/gameLoop.9c3d8ef4.js","assets/@fontsource.f66d05e7.css","assets/vue.0b1ef07e.js","assets/earcut.b6f90e68.js","assets/@vue.a5783f16.js","assets/nanoevents.1080beb7.js","assets/lz-string.f2f3b7cf.js","assets/vue-next-select.348eb514.js","assets/vue-next-select.9e6f4164.css","assets/vuedraggable.3773156d.js","assets/sortablejs.a68aa018.js","assets/vue-textarea-autosize.35804eaf.js","assets/@pixi.d7e055ca.js","assets/ismobilejs.5c6954b9.js","assets/eventemitter3.dc5195d7.js","assets/url.832c6d94.js","assets/querystring.ed407679.js","assets/vue-toastification.e4040407.js","assets/vue-toastification.4b5f8ac8.css","assets/workbox-window.8d14e8b7.js"]),n=window.vue=Wa(Xv);e.emit("setupVue",n),n.mount("#app"),Bt(()=>{const i=gi(),{updateServiceWorker:a}=Jv({onNeedRefresh(){i.info("New content available, click here to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){a()}})},onOfflineReady(){i.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(s){s&&setInterval(()=>s.update(),60*60*1e3)}})}),t()});export{l as D,Xi as _,Pt as a,Xe as b,Xm as c,zt as g,xl as l,G as p,Fe as s};
