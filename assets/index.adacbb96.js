/* empty css                    */import"./vue.0b1ef07e.js";import{Z as w,C as o,q as Ii,t as X,b1 as et,aa as Z,aE as h,a0 as x,a1 as g,aK as Zt,G as Me,aC as Cl,w as kt,b2 as zt,a8 as r,O as F,ao as ra,ay as vi,ar as Vt,aG as Li,A as ot,_ as U,b6 as re,b8 as dn,bs as $n,aq as Qt,bu as ni,bb as Zi,T as oa,a7 as m,u as Sl,j as Ga,l as qt,bv as wn,aL as At,$ as B,aN as Pe,J as ee,I as Ae,aH as an,aF as sn,z as ln,bn as Ua,br as ua,al as Ui,au as kl,H as ca,aJ as Tn,bw as Xa,a6 as Ha,ah as Ja,be as Wa}from"./@vue.a5783f16.js";import{c as da}from"./nanoevents.1080beb7.js";import{L as On}from"./lz-string.f2f3b7cf.js";import{Y as Qa}from"./vue-next-select.348eb514.js";import{D as Za}from"./vuedraggable.3773156d.js";import{p as Ka}from"./vue-textarea-autosize.35804eaf.js";import{A as pa,T as Ya,R as es,B as ts,u as ns,E as Vl}from"./@pixi.d7e055ca.js";import{s as is,u as gi}from"./vue-toastification.e4040407.js";import{v as ls,n as as}from"./workbox-window.8d14e8b7.js";import"./earcut.b6f90e68.js";import"./sortablejs.a68aa018.js";import"./ismobilejs.5c6954b9.js";import"./eventemitter3.dc5195d7.js";import"./url.832c6d94.js";import"./querystring.ed407679.js";const ss=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};ss();const rs="modulepreload",zl={},os="./",Xi=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${os}${i}`,i in zl)return;zl[i]=!0;const a=i.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":rs,a||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),a)return new Promise((c,p)=>{u.addEventListener("load",c),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},us="./projInfo-schema.json",cs="Kronos",ds="A game about flowers, time, and focus",ps="kronos",ms="thepaperpilot",fs="",vs="",gs="0.3",hs="",bs=!1,ys=!1,ws=2,_s=!0,Cs="banner.png",Ss="pwa-192x192.png",ks=["main"],Ns=3600,xs=1,$s=!0,Ms="base64";var Ue={$schema:us,title:cs,description:ds,id:ps,author:ms,discordName:fs,discordLink:vs,versionNumber:gs,versionTitle:hs,allowGoBack:bs,defaultShowSmall:ys,defaultDecimalsShown:ws,useHeader:_s,banner:Cs,logo:Ss,initialTabs:ks,maxTickLength:Ns,offlineLimit:xs,enablePausing:$s,exportEncoding:Ms};class Ps{constructor(t){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}get size(){return this.map.size}get(t){const n=this.map.get(t);if(n!==void 0)return n!==this.first&&(n===this.last?(this.last=n.prev,this.last.next=void 0):(n.prev.next=n.next,n.next.prev=n.prev),n.next=this.first,this.first.prev=n,this.first=n),n.value}set(t,n){if(this.maxSize<1)return;if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");const i=new Ts(t,n);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(t,i);this.map.size>this.maxSize;){const a=this.last;this.map.delete(a.key),this.last=a.prev,this.last.next=void 0}}}class Ts{constructor(t,n){this.next=void 0,this.prev=void 0,this.key=t,this.value=n}}const ul=17,Is=9e15,Es=Math.log10(9e15),Fs=1/9e15,qs=308,Ds=-324,Gl=5,As=(1<<10)-1,Ls=function(){const e=[];for(let n=Ds+1;n<=qs;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Qn=[2,Math.E,3,4,5,6,7,8,9,10],Rs=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Os=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let N=function(t){return l.fromValue_noAlloc(t)},ve=function(e,t,n){return l.fromComponents(e,t,n)},Ce=function(t,n,i){return l.fromComponents_noNormalize(t,n,i)};const Ln=function(t,n){const i=n+1,a=Math.ceil(Math.log10(Math.abs(t))),s=Math.round(t*Math.pow(10,i-a))*Math.pow(10,a-i);return parseFloat(s.toFixed(Math.max(i-a,0)))},cl=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},js=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const i=e*e;let a=e;return n=n+1/(12*a),a=a*i,n=n+1/(360*a),a=a*i,n=n+1/(1260*a),a=a*i,n=n+1/(1680*a),a=a*i,n=n+1/(1188*a),a=a*i,n=n+691/(360360*a),a=a*i,n=n+7/(1092*a),a=a*i,n=n+3617/(122400*a),Math.exp(n)/t},ma=.5671432904097838,Ul=function(e,t=1e-10){let n,i;if(!Number.isFinite(e)||e===0)return e;if(e===1)return ma;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let a=0;a<100;++a){if(i=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(i-n)<t*Math.abs(i))return i;n=i}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Xl(e,t=1e-10){let n,i,a,s;if(!Number.isFinite(e.mag)||e.eq(l.dZero))return e;if(e.eq(l.dOne))return l.fromNumber(ma);n=l.ln(e);for(let u=0;u<100;++u){if(i=n.neg().exp(),a=n.sub(e.mul(i)),s=n.sub(a.div(n.add(1).sub(n.add(2).mul(a).div(l.mul(2,n).add(2))))),l.abs(s.sub(n)).lt(l.abs(s).mul(t)))return s;n=s}throw Error(`Iteration failed to converge: ${e.toString()}`)}const y=class{constructor(e){this.sign=0,this.mag=0,this.layer=0,e instanceof y?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Ls(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new y().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new y().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new y().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new y().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new y().fromDecimal(e)}static fromNumber(e){return new y().fromNumber(e)}static fromString(e){return new y().fromString(e)}static fromValue(e){return new y().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof y)return e;if(typeof e=="string"){const t=y.fromStringCache.get(e);return t!==void 0?t:y.fromString(e)}else return typeof e=="number"?y.fromNumber(e):y.dZero}static abs(e){return N(e).abs()}static neg(e){return N(e).neg()}static negate(e){return N(e).neg()}static negated(e){return N(e).neg()}static sign(e){return N(e).sign}static sgn(e){return N(e).sign}static round(e){return N(e).round()}static floor(e){return N(e).floor()}static ceil(e){return N(e).ceil()}static trunc(e){return N(e).trunc()}static add(e,t){return N(e).add(t)}static plus(e,t){return N(e).add(t)}static sub(e,t){return N(e).sub(t)}static subtract(e,t){return N(e).sub(t)}static minus(e,t){return N(e).sub(t)}static mul(e,t){return N(e).mul(t)}static multiply(e,t){return N(e).mul(t)}static times(e,t){return N(e).mul(t)}static div(e,t){return N(e).div(t)}static divide(e,t){return N(e).div(t)}static recip(e){return N(e).recip()}static reciprocal(e){return N(e).recip()}static reciprocate(e){return N(e).reciprocate()}static cmp(e,t){return N(e).cmp(t)}static cmpabs(e,t){return N(e).cmpabs(t)}static compare(e,t){return N(e).cmp(t)}static isNaN(e){return e=N(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=N(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return N(e).eq(t)}static equals(e,t){return N(e).eq(t)}static neq(e,t){return N(e).neq(t)}static notEquals(e,t){return N(e).notEquals(t)}static lt(e,t){return N(e).lt(t)}static lte(e,t){return N(e).lte(t)}static gt(e,t){return N(e).gt(t)}static gte(e,t){return N(e).gte(t)}static max(e,t){return N(e).max(t)}static min(e,t){return N(e).min(t)}static minabs(e,t){return N(e).minabs(t)}static maxabs(e,t){return N(e).maxabs(t)}static clamp(e,t,n){return N(e).clamp(t,n)}static clampMin(e,t){return N(e).clampMin(t)}static clampMax(e,t){return N(e).clampMax(t)}static cmp_tolerance(e,t,n){return N(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return N(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return N(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return N(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return N(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return N(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return N(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return N(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return N(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return N(e).gte_tolerance(t,n)}static pLog10(e){return N(e).pLog10()}static absLog10(e){return N(e).absLog10()}static log10(e){return N(e).log10()}static log(e,t){return N(e).log(t)}static log2(e){return N(e).log2()}static ln(e){return N(e).ln()}static logarithm(e,t){return N(e).logarithm(t)}static pow(e,t){return N(e).pow(t)}static pow10(e){return N(e).pow10()}static pow_base(e,t){return N(e).pow_base(t)}static root(e,t){return N(e).root(t)}static factorial(e,t){return N(e).factorial()}static gamma(e,t){return N(e).gamma()}static lngamma(e,t){return N(e).lngamma()}static exp(e){return N(e).exp()}static sqr(e){return N(e).sqr()}static sqrt(e){return N(e).sqrt()}static cube(e){return N(e).cube()}static cbrt(e){return N(e).cbrt()}static tetrate(e,t=2,n=Ce(1,0,1)){return N(e).tetrate(t,n)}static iteratedexp(e,t=2,n=Ce(1,0,1)){return N(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return N(e).iteratedlog(t,n)}static layeradd10(e,t){return N(e).layeradd10(t)}static layeradd(e,t,n=10){return N(e).layeradd(t,n)}static slog(e,t=10){return N(e).slog(t)}static lambertw(e){return N(e).lambertw()}static ssqrt(e){return N(e).ssqrt()}static pentate(e,t=2,n=Ce(1,0,1)){return N(e).pentate(t,n)}static sin(e){return N(e).sin()}static cos(e){return N(e).cos()}static tan(e){return N(e).tan()}static asin(e){return N(e).asin()}static acos(e){return N(e).acos()}static atan(e){return N(e).atan()}static sinh(e){return N(e).sinh()}static cosh(e){return N(e).cosh()}static tanh(e){return N(e).tanh()}static asinh(e){return N(e).asinh()}static acosh(e){return N(e).acosh()}static atanh(e){return N(e).atanh()}static affordGeometricSeries(e,t,n,i){return this.affordGeometricSeries_core(N(e),N(t),N(n),i)}static sumGeometricSeries(e,t,n,i){return this.sumGeometricSeries_core(e,N(t),N(n),i)}static affordArithmeticSeries(e,t,n,i){return this.affordArithmeticSeries_core(N(e),N(t),N(n),N(i))}static sumArithmeticSeries(e,t,n,i){return this.sumArithmeticSeries_core(N(e),N(t),N(n),N(i))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(N(e),N(t),N(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return Ce(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return Ce(t,0,1);const n=Math.floor(Math.random()*(e+1));let i=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(i=Math.trunc(i));let a=Math.pow(10,i);return Math.random()>.9&&(a=Math.trunc(a)),ve(t,n,a)}static affordGeometricSeries_core(e,t,n,i){const a=t.mul(n.pow(i));return y.floor(e.div(a).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,i){return t.mul(n.pow(i)).mul(y.sub(1,n.pow(e))).div(y.sub(1,n))}static affordArithmeticSeries_core(e,t,n,i){const s=t.add(i.mul(n)).sub(n.div(2)),u=s.pow(2);return s.neg().add(u.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,i){const a=t.add(i.mul(n));return e.div(2).mul(a.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Fs)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=Is)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Es&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,n=y.fromStringCache.get(t);if(n!==void 0)return this.fromDecimal(n);e=e.replace(",","");const i=e.split("^^^");if(i.length===2){const b=parseFloat(i[0]),M=parseFloat(i[1]),Q=i[1].split(";");let ie=1;if(Q.length===2&&(ie=parseFloat(Q[1]),isFinite(ie)||(ie=1)),isFinite(b)&&isFinite(M)){const P=y.pentate(b,M,ie);return this.sign=P.sign,this.layer=P.layer,this.mag=P.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}}const a=e.split("^^");if(a.length===2){const b=parseFloat(a[0]),M=parseFloat(a[1]),Q=a[1].split(";");let ie=1;if(Q.length===2&&(ie=parseFloat(Q[1]),isFinite(ie)||(ie=1)),isFinite(b)&&isFinite(M)){const P=y.tetrate(b,M,ie);return this.sign=P.sign,this.layer=P.layer,this.mag=P.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}}const s=e.split("^");if(s.length===2){const b=parseFloat(s[0]),M=parseFloat(s[1]);if(isFinite(b)&&isFinite(M)){const Q=y.pow(b,M);return this.sign=Q.sign,this.layer=Q.layer,this.mag=Q.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}}e=e.trim().toLowerCase();let u,c,p=e.split("pt");if(p.length===2){u=10,c=parseFloat(p[0]),p[1]=p[1].replace("(",""),p[1]=p[1].replace(")","");let b=parseFloat(p[1]);if(isFinite(b)||(b=1),isFinite(u)&&isFinite(c)){const M=y.tetrate(u,c,b);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}}if(p=e.split("p"),p.length===2){u=10,c=parseFloat(p[0]),p[1]=p[1].replace("(",""),p[1]=p[1].replace(")","");let b=parseFloat(p[1]);if(isFinite(b)||(b=1),isFinite(u)&&isFinite(c)){const M=y.tetrate(u,c,b);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}}const d=e.split("e"),v=d.length-1;if(v===0){const b=parseFloat(e);if(isFinite(b))return this.fromNumber(b),y.fromStringCache.size>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}else if(v===1){const b=parseFloat(e);if(isFinite(b)&&b!==0)return this.fromNumber(b),y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}const f=e.split("e^");if(f.length===2){this.sign=1,f[0].charAt(0)=="-"&&(this.sign=-1);let b="";for(let M=0;M<f[1].length;++M){const Q=f[1].charCodeAt(M);if(Q>=43&&Q<=57||Q===101)b+=f[1].charAt(M);else return this.layer=parseFloat(b),this.mag=parseFloat(f[1].substr(M+1)),this.normalize(),y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}}if(v<1)return this.sign=0,this.layer=0,this.mag=0,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this;const _=parseFloat(d[0]);if(_===0)return this.sign=0,this.layer=0,this.mag=0,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this;let C=parseFloat(d[d.length-1]);if(v>=2){const b=parseFloat(d[d.length-2]);isFinite(b)&&(C*=Math.sign(b),C+=cl(b))}if(!isFinite(_))this.sign=d[0]==="-"?-1:1,this.layer=v,this.mag=C;else if(v===1)this.sign=Math.sign(_),this.layer=1,this.mag=C+Math.log10(Math.abs(_));else if(this.sign=Math.sign(_),this.layer=v,v===2){const b=y.mul(ve(1,2,C),N(_));return this.sign=b.sign,this.layer=b.layer,this.mag=b.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}else this.mag=C;return this.normalize(),y.fromStringCache.maxSize>=1&&y.fromStringCache.set(t,y.fromDecimal(this)),this}fromValue(e){return e instanceof y?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Ln(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Ln(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Gl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Ln(this.m,e)+"e"+Ln(this.e,e):this.layer===1?Ln(this.m,e)+"e"+Ln(this.e,e):this.layer<=Gl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Ln(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Ln(this.mag,e)}abs(){return Ce(this.sign===0?0:1,this.layer,this.mag)}neg(){return Ce(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?y.dZero:this.layer===0?ve(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?y.dZero:this.layer===0?ve(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?y.dZero:this.layer===0?ve(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?y.dZero:this.layer===0?ve(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=N(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return Ce(0,0,0);let n,i;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(y.cmpabs(this,t)>0?(n=this,i=t):(n=t,i=this),n.layer===0&&i.layer===0)return y.fromNumber(n.sign*n.mag+i.sign*i.mag);const a=n.layer*Math.sign(n.mag),s=i.layer*Math.sign(i.mag);if(a-s>=2)return n;if(a===0&&s===-1){if(Math.abs(i.mag-Math.log10(n.mag))>ul)return n;{const u=Math.pow(10,Math.log10(n.mag)-i.mag),c=i.sign+n.sign*u;return ve(Math.sign(c),1,i.mag+Math.log10(Math.abs(c)))}}if(a===1&&s===0){if(Math.abs(n.mag-Math.log10(i.mag))>ul)return n;{const u=Math.pow(10,n.mag-Math.log10(i.mag)),c=i.sign+n.sign*u;return ve(Math.sign(c),1,Math.log10(i.mag)+Math.log10(Math.abs(c)))}}if(Math.abs(n.mag-i.mag)>ul)return n;{const u=Math.pow(10,n.mag-i.mag),c=i.sign+n.sign*u;return ve(Math.sign(c),1,i.mag+Math.log10(Math.abs(c)))}}plus(e){return this.add(e)}sub(e){return this.add(N(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=N(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return Ce(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return Ce(this.sign*t.sign,0,1);let n,i;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,i=t):(n=t,i=this),n.layer===0&&i.layer===0)return y.fromNumber(n.sign*i.sign*n.mag*i.mag);if(n.layer>=3||n.layer-i.layer>=2)return ve(n.sign*i.sign,n.layer,n.mag);if(n.layer===1&&i.layer===0)return ve(n.sign*i.sign,1,n.mag+Math.log10(i.mag));if(n.layer===1&&i.layer===1)return ve(n.sign*i.sign,1,n.mag+i.mag);if(n.layer===2&&i.layer===1){const a=ve(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(ve(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return ve(n.sign*i.sign,a.layer+1,a.sign*a.mag)}if(n.layer===2&&i.layer===2){const a=ve(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(ve(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return ve(n.sign*i.sign,a.layer+1,a.sign*a.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=N(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?y.dNaN:this.layer===0?ve(this.sign,0,1/this.mag):ve(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=N(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=N(e),n=this.mag>0?this.layer:-this.layer,i=t.mag>0?t.layer:-t.layer;return n>i?1:n<i?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=N(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=N(e);return this.lt(t)?t:this}min(e){const t=N(e);return this.gt(t)?t:this}maxabs(e){const t=N(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=N(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=N(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=N(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let i=this.mag,a=n.mag;return this.layer>n.layer&&(a=cl(a)),this.layer<n.layer&&(i=cl(i)),Math.abs(i-a)<=t*Math.max(Math.abs(i),Math.abs(a))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=N(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=N(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=N(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=N(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(y.dZero)?y.dZero:this.log10()}absLog10(){return this.sign===0?y.dNaN:this.layer>0?ve(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):ve(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?y.dNaN:this.layer>0?ve(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):ve(this.sign,0,Math.log10(this.mag))}log(e){return e=N(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?y.dNaN:this.layer===0&&e.layer===0?ve(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):y.div(this.log10(),e.log10())}log2(){return this.sign<=0?y.dNaN:this.layer===0?ve(this.sign,0,Math.log2(this.mag)):this.layer===1?ve(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?ve(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):ve(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?y.dNaN:this.layer===0?ve(this.sign,0,Math.log(this.mag)):this.layer===1?ve(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?ve(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):ve(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=N(e),n=this,i=t;if(n.sign===0)return i.eq(0)?Ce(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(i.sign===0)return Ce(1,0,1);if(i.sign===1&&i.layer===0&&i.mag===1)return n;const a=n.absLog10().mul(i).pow10();return this.sign===-1?Math.abs(i.toNumber()%2)%2===1?a.neg():Math.abs(i.toNumber()%2)%2===0?a:y.dNaN:a}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return y.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return ve(1,0,t);if(e.sign===0)return y.dOne;e=Ce(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?ve(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?ve(-e.sign,e.layer+1,-e.mag):y.dOne}pow_base(e){return N(e).pow(this)}root(e){const t=N(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?y.exp(y.mul(this,y.ln(this).sub(1))):y.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(Ce(1,0,24)))return y.fromNumber(js(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let i=e,a=12*i,s=1/a,u=t+s;if(u===t||(t=u,i=i*n,a=360*i,s=1/a,u=t-s,u===t))return y.exp(t);t=u,i=i*n,a=1260*i;let c=1/a;return t=t+c,i=i*n,a=1680*i,c=1/a,t=t-c,y.exp(t)}else return this.layer===1?y.exp(y.mul(this,y.ln(this).sub(1))):y.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?y.dOne:this.layer===0&&this.mag<=709.7?y.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?ve(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?ve(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):ve(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return y.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return ve(1,2,Math.log10(this.mag)-.3010299956639812);{const e=y.div(Ce(this.sign,this.layer-1,this.mag),Ce(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=Ce(1,0,1)){if(e===1)return y.pow(this,t);if(e===0)return new y(t);if(this.eq(y.dOne))return y.dOne;if(this.eq(-1))return y.pow(this,t);if(e===Number.POSITIVE_INFINITY){const a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return y.fromNumber(Math.E);const s=y.ln(this).neg();return s.lambertw().div(s)}else return a>1.444667861009766?y.fromNumber(Number.POSITIVE_INFINITY):y.dNaN}if(this.eq(y.dZero)){let a=Math.abs((e+1)%2);return a>1&&(a=2-a),y.fromNumber(a)}if(e<0)return y.iteratedlog(t,this,-e);t=N(t);const n=e;e=Math.trunc(e);const i=n-e;if(this.gt(y.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let a=0;a<e;++a){const s=t;if(t=this.pow(t),s.eq(t))return t}if(i!=0){const a=this.pow(t);return t.mul(1-i).add(a.mul(i))}return t}i!==0&&(t.eq(y.dOne)?this.gt(10)?t=this.pow(i):(t=y.fromNumber(y.tetrate_critical(this.toNumber(),i)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let a=0;a<e;++a){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return Ce(t.sign,t.layer+(e-a-1),t.mag);if(a>1e4)return t}return t}iteratedexp(e=2,t=Ce(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return y.tetrate(e,-t,this);e=N(e);let n=y.fromDecimal(this);const i=t;t=Math.trunc(t);const a=i-t;if(n.layer-e.layer>3){const s=Math.min(t,n.layer-e.layer-3);t-=s,n.layer-=s}for(let s=0;s<t;++s){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(s>1e4)return n}return a>0&&a<1&&(e.eq(10)?n=n.layeradd10(-a):n=n.layeradd(-a,e)),n}slog(e=10,t=100){let n=.001,i=!1,a=!1,s=this.slog_internal(e).toNumber();for(let u=1;u<t;++u){const p=new y(e).tetrate(s).gt(this);if(u>1&&a!=p&&(i=!0),a=p,i?n/=2:n*=2,n=Math.abs(n)*(p?-1:1),s+=n,n===0)break}return y.fromNumber(s)}slog_internal(e=10){if(e=N(e),e.lte(y.dZero)||e.eq(y.dOne))return y.dNaN;if(e.lt(y.dOne))return this.eq(y.dOne)?y.dZero:this.eq(y.dZero)?y.dNegOne:y.dNaN;if(this.mag<0||this.eq(y.dZero))return y.dNegOne;let t=0,n=y.fromDecimal(this);if(n.layer-e.layer>3){const i=n.layer-e.layer-3;t+=i,n.layer-=i}for(let i=0;i<100;++i)if(n.lt(y.dZero))n=y.pow(e,n),t-=1;else{if(n.lte(y.dOne))return y.fromNumber(t+y.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=y.log(n,e)}return y.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:y.critical_section(e,t,Os)}static tetrate_critical(e,t){return y.critical_section(e,t,Rs)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let i=0,a=0;for(let u=0;u<Qn.length;++u)if(Qn[u]==e){i=n[u][Math.floor(t)],a=n[u][Math.ceil(t)];break}else if(Qn[u]<e&&Qn[u+1]>e){const c=(e-Qn[u])/(Qn[u+1]-Qn[u]);i=n[u][Math.floor(t)]*(1-c)+n[u+1][Math.floor(t)]*c,a=n[u][Math.ceil(t)]*(1-c)+n[u+1][Math.ceil(t)]*c;break}const s=t-Math.floor(t);return i<=0||a<=0?i*(1-s)+a*s:Math.pow(e,Math.log(i)/Math.log(e)*(1-s)+Math.log(a)/Math.log(e)*s)}layeradd10(e){e=y.fromValue_noAlloc(e).toNumber();const t=y.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let i=0;i<100;++i){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const i=this.slog(t).toNumber()+e;return i>=0?y.tetrate(t,i):Number.isFinite(i)?i>=-1?y.log(y.tetrate(t,i+1),t):y.log(y.log(y.tetrate(t,i+2),t),t):y.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return y.fromNumber(Ul(this.toNumber()));if(this.layer===0)return y.fromNumber(Ul(this.sign*this.mag));if(this.layer===1)return Xl(this);if(this.layer===2)return Xl(this);if(this.layer>=3)return Ce(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return Ce(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=Ce(1,0,1)){t=N(t);const n=e;e=Math.trunc(e);const i=n-e;i!==0&&(t.eq(y.dOne)?(++e,t=y.fromNumber(i)):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let a=0;a<e;++a){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(a>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?y.fromNumber(Math.sin(this.sign*this.mag)):Ce(0,0,0)}cos(){return this.mag<0?y.dOne:this.layer===0?y.fromNumber(Math.cos(this.sign*this.mag)):Ce(0,0,0)}tan(){return this.mag<0?this:this.layer===0?y.fromNumber(Math.tan(this.sign*this.mag)):Ce(0,0,0)}asin(){return this.mag<0?this:this.layer===0?y.fromNumber(Math.asin(this.sign*this.mag)):Ce(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?y.fromNumber(Math.acos(this.toNumber())):this.layer===0?y.fromNumber(Math.acos(this.sign*this.mag)):Ce(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?y.fromNumber(Math.atan(this.sign*this.mag)):y.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return y.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return y.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?Ce(Number.NaN,Number.NaN,Number.NaN):y.ln(this.add(1).div(y.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(y.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let l=y;l.fromStringCache=new Ps(As);l.dZero=Ce(0,0,0);l.dOne=Ce(1,0,1);l.dNegOne=Ce(-1,0,1);l.dTwo=Ce(1,0,2);l.dTen=Ce(1,0,10);l.dNaN=Ce(Number.NaN,Number.NaN,Number.NaN);l.dInf=Ce(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);l.dNegInf=Ce(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);l.dNumberMax=ve(1,0,Number.MAX_VALUE);l.dNumberMin=ve(1,0,Number.MIN_VALUE);N=l.fromValue_noAlloc;ve=l.fromComponents;Ce=l.fromComponents_noNormalize;l.fromMantissaExponent;l.fromMantissaExponent_noNormalize;const Bs=new l(1);function Ci(e,t,n=!0){let i=l.log10(e).floor(),a=l.div(e,l.pow(10,i));a.toStringWithDecimalPlaces(t)==="10"&&(a=Bs,i=i.add(1));const s=i.gte(1e9)?cn(i,Math.max(Math.max(t,3),Ue.defaultDecimalsShown)):i.gte(1e4)?Hi(i,0):i.toStringWithDecimalPlaces(0);return n?a.toStringWithDecimalPlaces(t)+"e"+s:"e"+s}function Hi(e,t){if(e==null)return"NaN";if(e=new l(e),e.mag<.001)return 0 .toFixed(t);const i=e.toStringWithDecimalPlaces(t).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length==1?i[0]:i[0]+"."+i[1]}function fa(e,t){return e==null?"NaN":(e=new l(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),Ue.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const Vs=new l("eeee1000"),zs=new l("e100000"),Hl=new l("e1000"),va=new l(1e9),Gs=new l(1e6),Us=new l(1e3),Xs=new l(.98),Hs=new l(.001),ga=new l(0);function cn(e,t,n){if(t==null&&(t=Ue.defaultDecimalsShown),n=n!=null?n:Ue.defaultShowSmall,e=new l(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+cn(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(Vs)){const i=e.slog();return i.gte(Gs)?"F"+cn(i.floor()):l.pow(10,i.sub(i.floor())).toStringWithDecimalPlaces(3)+"F"+Hi(i.floor(),0)}else{if(e.gte(zs))return Ci(e,0,!1);if(e.gte(Hl))return Ci(e,0);if(e.gte(va))return Ci(e,t);if(e.gte(Us))return Hi(e,0);if(e.gte(Hs)||!n)return fa(e,t);if(e.eq(ga))return 0 .toFixed(t)}return e=ba(e),e.lt(Hl)?Ci(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):cn(e,t)+"\u207B\xB9"}function Rt(e){return e=new l(e),e.sign<0?"-"+Rt(e.neg()):e.gte(va)||e.lte(Xs)&&!e.eq(ga)?cn(e):cn(e,0)}function ha(e){return l.lt(e,0)?"-"+ha(l.neg(e)):l.gt(e,2**51)?cn(l.div(e,31536e3))+"y":(e=new l(e).toNumber(),e<60?cn(e)+"s":e<3600?Rt(Math.floor(e/60))+"m "+cn(e%60)+"s":e<86400?Rt(Math.floor(e/3600))+"h "+Rt(Math.floor(e/60)%60)+"m "+Rt(e%60)+"s":e<31536e3?Rt(Math.floor(e/84600)%365)+"d "+Rt(Math.floor(e/3600)%24)+"h "+Rt(Math.floor(e/60)%60)+"m":Rt(Math.floor(e/31536e3))+"y "+Rt(Math.floor(e/84600)%365)+"d "+Rt(Math.floor(e/3600)%24)+"h")}function Js(e,t,n){e=new l(e);let i=e.toStringWithDecimalPlaces(t);return new l(i).gte(n)&&(i=l.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),i}function Ws(e,t){return cn(e,t,!0)}function ba(e){let t=l.log10(e).ceil();const n=l.div(e,l.pow(10,t));return t=t.neg(),e=new l(10).pow(t).times(n),e}var Qs=Object.freeze(Object.defineProperty({__proto__:null,default:l,exponentialFormat:Ci,commaFormat:Hi,regularFormat:fa,format:cn,formatWhole:Rt,formatTime:ha,toPlaces:Js,formatSmall:Ws,invertOOM:ba},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Zs,commaFormat:Ks,regularFormat:Ys,format:je,formatWhole:ge,formatTime:Gn,toPlaces:er,formatSmall:Ei,invertOOM:tr}=Qs;window.Decimal=l;window.exponentialFormat=Zs;window.commaFormat=Ks;window.regularFormat=Ys;window.format=je;window.formatWhole=ge;window.formatTime=Gn;window.toPlaces=er;window.formatSmall=Ei;window.invertOOM=tr;function un(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function gl(e){return typeof e=="function"}var $e=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))($e||{});const Ni=Symbol("DoNotCache");function q(e,t){const n=e[t];gl(n)&&n.length===0&&!n[Ni]?e[t]=w(n.bind(e)):gl(n)&&(e[t]=n.bind(e),e[t][Ni]=!0)}function Qe(e){return gl(e)&&!e[Ni]&&(e=w(e)),e}const nt=Symbol("Component"),Be=Symbol("GatherProps");let nr=0;function mn(e="feature-"){return e+nr++}var Le=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(Le||{});function gt(e){const t=o(e);return t!==2&&t!==!1}function In(e){return o(e)===1}function k(e){return e[Ni]=!0,e}function tt(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}const Zn={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var Nl=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(Nl||{}),hi={classic:Zn,paper:{...Zn,variables:{...Zn.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Zn,variables:{...Zn.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Zn,variables:{...Zn.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const Gt=da();"fonts"in document&&(document.fonts.onloadingdone=()=>Gt.emit("fontsLoaded"));var ir=Object.freeze(Object.defineProperty({__proto__:null,globalBus:Gt},Symbol.toStringTag,{value:"Module"}));const lr=Ii({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});var G=window.player=lr;function ya(e){return JSON.stringify(e,(t,n)=>o(n))}function wa(e={}){return Object.assign({id:`${Ue.id}-0`,name:"Default Save",tabs:Ue.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:Ue.id,modVersion:Ue.versionNumber,layers:{}},e)}function nn(e){const t=On.compressToUTF16(ya(e!=null?e:G));return localStorage.setItem((e!=null?e:G).id,t),t}async function ar(){rr();try{let e=localStorage.getItem(De.active);if(e==null){await Yn(mi());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=On.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==Ue.id){await Yn(mi());return}t.id=De.active,await Yn(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Yn(mi())}}function mi(){const e=Bi(),t=wa({id:e});return nn(t),De.saves.push(e),t}function Bi(){let e,t=0;do e=`${Ue.id}-${t++}`;while(localStorage.getItem(e)!=null);return e}const xl=X(!1);async function Yn(e){console.info("Loading save",e),xl.value=!0;const{layers:t,removeLayer:n,addLayer:i}=await Xi(()=>Promise.resolve().then(function(){return Pr}),void 0),{fixOldSave:a,getInitialLayers:s}=await Xi(()=>Promise.resolve().then(function(){return Xm}),void 0);for(const u in t){const c=t[u];c&&n(c)}s(e).forEach(u=>i(u,e)),e=wa(e),e.offlineProd&&e.time!=null&&e.time&&e.devSpeed!==0&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=Math.min(e.offlineTime+(Date.now()-e.time)/1e3,Ue.offlineLimit*3600)),e.time=Date.now(),e.modVersion!==Ue.versionNumber&&(a(e.modVersion,e),e.modVersion=Ue.versionNumber),Object.assign(G,e),De.active=G.id,Gt.emit("onLoad")}setInterval(()=>{G.autosave&&nn()},1e3);window.onbeforeunload=()=>{G.autosave&&nn()};window.save=nn;const sr=window.hardReset=async()=>{await Yn(mi())};window.deleteLowerSaves=()=>{const e=Object.values(De.saves).indexOf(G.id)+1;Object.values(De.saves).slice(e).forEach(t=>localStorage.removeItem(t)),De.saves=De.saves.slice(0,e)};const xi=Ii({active:"",saves:[],showTPS:!0,theme:Nl.Nordic,unthrottled:!1,alignUnits:!1});et(xi,e=>{const t=On.compressToUTF16(JSON.stringify(e));localStorage.setItem(Ue.id,t)},{deep:!0});var De=window.settings=xi;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:Nl.Nordic,alignUnits:!1};Gt.emit("loadSettings",e),Object.assign(xi,e),sr()};function rr(){try{let e=localStorage.getItem(Ue.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=On.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(xi,t)}Gt.emit("loadSettings",xi)}catch{}}const _a=Ii([]);function or(e){_a.push(e)}const ur=Ii([]),cr=Ii([]),dr={class:"table"},Ki=Z({__name:"Column",setup(e){const t=w(()=>hi[De.theme].mergeAdjacent);return(n,i)=>(h(),x("div",dr,[g("div",{class:Me(["col",{mergeAdjacent:o(t)}])},[Zt(n.$slots,"default")],2)]))}}),pr={class:"table"},$i=Z({__name:"Row",setup(e){const t=w(()=>hi[De.theme].mergeAdjacent);return(n,i)=>(h(),x("div",pr,[g("div",{class:Me(["row",{mergeAdjacent:o(t)}])},[Zt(n.$slots,"default")],2)]))}});function Yi(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ra(e)}function he(e,t="span"){return typeof e=="function"?Z({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),Z({template:e})):Z({render:()=>({})}):e}function We(e){if(fn(e))return typeof e=="function"?e():he(e);const t=e[nt];return r(t,e[Be](),null)}function Vi(...e){let t;return r($i,null,Yi(t=e.map(We))?t:{default:()=>[t]})}function Mi(...e){let t;return r(Ki,null,Yi(t=e.map(We))?t:{default:()=>[t]})}function rt(e){if(fn(e))return typeof e=="function"?e():typeof e=="string"?r(F,null,[e]):r(e,null,null);const t=e[nt];return r(t,e[Be](),null)}function hl(...e){let t;return r($i,null,Yi(t=e.map(rt))?t:{default:()=>[t]})}function li(...e){let t;return r(Ki,null,Yi(t=e.map(rt))?t:{default:()=>[t]})}function bl(e,t){return e.reduce((n,i)=>r(F,null,[n,t,i]))}function fn(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[Ni]===!0}function Ca(e,t){const n=X(null),i=X(void 0);function a(c){n.value||(n.value=setInterval(u,250)),i.value=c}function s(){n.value&&(clearInterval(n.value),n.value=null)}function u(){t&&t.value?t.value():e&&e.value&&e.value(i.value)}return Cl(s),{start:a,stop:s,handleHolding:u}}function ai(e,t){const n=w(()=>e.filter(i=>gt(i.visibility)&&t(i)));return{firstFeature:w(()=>n.value[0]),collapsedContent:k(()=>Mi(...n.value.slice(1))),hasCollapsedContent:w(()=>n.value.length>1)}}function ii(e,t="div"){const n=kt();return zt(()=>{n.value=he(st(e),t)}),n}function En(e,t="div"){const n=kt(null);return zt(()=>{const i=st(e);n.value=i==""||i==null?null:he(i,t)}),n}function st(e){return o(o(e))}function j(...e){return e.includes(Object)||e.push(Object),e}function Sa(e){const t=X(!1),n=e[Be].bind(e);return e[Be]=()=>({...n(),onPointerenter:()=>t.value=!0,onPointerleave:()=>t.value=!1}),t}var me=(e,t)=>{const n=e.__vccOpts||e;for(const[i,a]of t)n[i]=a;return n};const mr=Z({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var v;const n=X({}),i=new ResizeObserver(c),a=X(null);vi(()=>{const f=a.value;f!=null&&i.observe(f)});let s=!0,u=X((v=a.value)==null?void 0:v.getBoundingClientRect());function c(){s&&(s=!1,Vt(()=>{var f;u.value=(f=a.value)==null?void 0:f.getBoundingClientRect(),Object.values(n.value).filter(_=>_).forEach(_=>_.rect=_.element.getBoundingClientRect()),t("updateNodes",n.value),s=!0}))}Gt.on("fontsLoaded",c);const p={attributes:!1,childList:!0,subtree:!1};Li($l,(f,_)=>{const C=new MutationObserver(()=>d(f));C.observe(_,p),n.value[f]={element:_,observer:C,rect:_.getBoundingClientRect()},c()}),Li(Ml,f=>{var _;(_=n.value[f])==null||_.observer.disconnect(),n.value[f]=void 0,c()}),Li(Pl,n),Li(Tl,u);function d(f){const _=n.value[f];_!=null&&(_.rect=_.element.getBoundingClientRect(),t("updateNodes",n.value))}return(f,_)=>(h(),x(F,null,[Zt(f.$slots,"default",{},void 0,!0),g("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}});var ka=me(mr,[["__scopeId","data-v-2b1dc1bc"]]);const fr=["onPointerdown"],vr={class:"modal-wrapper"},gr={class:"modal-container"},hr={class:"modal-header"},br=m(" default header "),yr={class:"modal-body"},wr=m(" default body "),_r={class:"modal-footer"},Cr=g("div",{class:"modal-default-flex-grow"},null,-1),Un=Z({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const a=ot(e),s=w(()=>o(a.modelValue)||c.value);function u(){n("update:modelValue",!1)}const c=X(!1),p=X(null),d=w(()=>{var v,f;return(f=(v=p.value)==null?void 0:v.nodes)!=null?f:null});return t({isOpen:s,nodes:d}),(v,f)=>(h(),U(oa,{to:"#modal-root"},[r(Zi,{name:"modal",onBeforeEnter:f[0]||(f[0]=_=>c.value=!0),onAfterLeave:f[1]||(f[1]=_=>c.value=!1)},{default:re(()=>[dn(g("div",Qt({class:"modal-mask",onPointerdown:ni(u,["self"])},v.$attrs),[g("div",vr,[g("div",gr,[g("div",hr,[Zt(v.$slots,"header",{shown:o(s)},()=>[br])]),g("div",yr,[r(ka,{ref_key:"contextRef",ref:p},{default:re(()=>[Zt(v.$slots,"body",{shown:o(s)},()=>[wr])]),_:3},512)]),g("div",_r,[Zt(v.$slots,"footer",{shown:o(s)},()=>[g("div",{class:"modal-default-footer"},[Cr,g("button",{class:"button modal-default-button",onClick:u}," Close ")])])])])])],16,fr),[[$n,e.modelValue]])]),_:3})]))}}),Rn=Symbol("ProxyState");function dt(e,t={}){const n=t;let i=!1;function a(){return i||(Object.assign(n,e.call(n,n)),i=!0),n}return new Proxy(n,{get(s,u){if(u===Rn)return a();const c=a()[u];return c!=null&&typeof c=="object"&&yn in c?c[yn]:c},set(s,u,c){return a()[u]=c,!0},has(s,u){return u===Rn?!0:Reflect.has(a(),u)},ownKeys(){return Reflect.ownKeys(a())},getOwnPropertyDescriptor(s,u){return i||(Object.assign(n,e.call(n,n)),i=!0),Object.getOwnPropertyDescriptor(s,u)}})}var It=window.state=Sl({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const Vn=Symbol("PersistentState"),fi=Symbol("DefaultValue"),Ji=Symbol("StackTrace"),Wi=Symbol("Deleted"),yn=Symbol("NonPersistent"),ei=Symbol("SaveDataPath"),yl=Symbol("SkipPersistence");function Sr(){var e,t;return(t=(e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(n=>n.trim()).join(`
`))!=null?t:""}function Jl(e,t){var n;if(l.isNaN(t))throw It.hasNaN||(G.autosave=!1,It.hasNaN=!0,It.NaNPath=e[ei],It.NaNPersistent=e),console.error("Attempted to save NaN value to",(n=e[ei])==null?void 0:n.join("."),e),new Error("Attempted to set NaN value. See above for details");e[Vn].value=t}function H(e,t=!0){const n=qt(e)?e:X(e);qt(e)&&(e=e.value);const i=w({get(){return n.value},set(s){t?Jl(a,s):a[Vn].value=s}});i[fi]=e;const a={get value(){return n.value},set value(s){t?Jl(a,s):a[Vn].value=s},__v_isRef:!0,[Vn]:n,[fi]:e,[Ji]:Sr(),[Wi]:!1,[yn]:i,[ei]:void 0};return Jt.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",a,`
Created at:
`+a[Ji]):ti[Jt[Jt.length-1]].add(a),a}function kr(e){return e!=null&&typeof e=="object"&&Vn in e}function Ut(e){return!(Rn in e)&&yn in e?e[yn]:new Proxy(e,{get(t,n){if(n!==Vn)return n===yl?!0:t[n]},set(t,n,i){return t[n]=i,!0},has(t,n){return n===Vn?!1:n==yl?!0:Reflect.has(t,n)}})}function Nr(e){Jt.length===0?console.warn("Deleting a persistent ref outside of a layer. Ignoring...",e):ti[Jt[Jt.length-1]].delete(e),e[Wi]=!0}Gt.on("addLayer",(e,t)=>{const n=[],i=(a,s=[])=>{let u=!1;return Object.keys(a).forEach(c=>{let p=a[c];if(p!=null&&typeof p=="object"){if(p[yl]===!0)return;if(Rn in p&&(p=p[Rn]),kr(p)){if(u=!0,p[Wi]){console.warn("Deleted persistent ref present in returned object. Ignoring...",p,`
Created at:
`+p[Ji]);return}ti[e.id].delete(p);const d=[e.id,...s,c];p[ei]!=null&&JSON.stringify(d)!==JSON.stringify(p[ei])&&console.error(`Persistent ref is being saved to \`${d.join(".")}\` when it's already present at \`${p[ei].join(".")}\`. This can cause unexpected behavior when loading saves between updates.`,p),p[ei]=d;const v=s.reduce((_,C)=>(C in _||(_[C]={}),_[C]),t),f=v[c];v[c]=p[Vn],Ga(v)?f!=null?v[c]=f:v[c]=p[fi]:f!=null?v[c].value=f:v[c].value=p[fi]}else!(p instanceof l)&&!qt(p)&&!n.includes(p)&&(typeof p.type=="symbol"&&n.push(p),i(p,[...s,c])&&(wn(p)&&!wn(a)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",Rn in a?a[Rn]:a,c):u=!0))}}),u};i(e[Rn]),ti[e.id].forEach(a=>{a[Wi]||console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,a,`
Created at:
`+a[Ji])}),ti[e.id].clear()});const $l=Symbol("RegisterNode"),Ml=Symbol("UnregisterNode"),Pl=Symbol("Nodes"),Tl=Symbol("Bounds"),Xt=Sl({});window.layers=Xt;const ti={},Jt=[];function Fn(e,t){return dt(()=>{const n={},i=n.emitter=da();if(n.on=i.on.bind(i),n.emit=i.emit.bind(i),n.nodes=X({}),n.id=e,Jt.push(e),ti[e]=new Set,n.minimized=H(!1,!1),Object.assign(n,t.call(n,n)),Jt[Jt.length-1]==null||Jt[Jt.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${Jt}
Trying to pop ${n.id}`;Jt.pop(),q(n,"color"),q(n,"display"),q(n,"classes"),q(n,"style"),q(n,"name"),tt(n,"name",n.id),q(n,"minWidth"),tt(n,"minWidth",600),q(n,"minimizable"),tt(n,"minimizable",!0),q(n,"minimizedDisplay");const a=n.style;return n.style=w(()=>{var u,c;let s=o(n.minWidth);return(typeof s=="number"||!Number.isNaN(parseInt(s)))&&(s=s+"px"),[(u=o(a))!=null?u:"",(c=n.minimized)!=null&&c.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:s,flexBasis:s,margin:""}]}),n})}function _n(e,t){if(console.info("Adding layer",e.id),Xt[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,Xt[e.id]);return}tt(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),Xt[e.id]=e,Gt.emit("addLayer",e,t.layers[e.id])}function xr(e){return Xt[e]}function Na(e){console.info("Removing layer",e.id),Gt.emit("removeLayer",e),Xt[e.id]=void 0}function $r(e){Na(e),_n(e,G)}function Mr(e){const t=X(!1);return{openModal:()=>t.value=!0,modal:k(()=>r(Un,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>r("h2",null,[o(e.name)]),body:o(e.display)}))}}Gt.on("update",function(t){Object.values(Xt).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(Xt).forEach(n=>{n==null||n.emit("update",t)}),Object.values(Xt).forEach(n=>{n==null||n.emit("postUpdate",t)})});var Pr=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:$l,UnregisterNodeInjectionKey:Ml,NodesInjectionKey:Pl,BoundsInjectionKey:Tl,layers:Xt,persistentRefs:ti,addingLayers:Jt,createLayer:Fn,addLayer:_n,getLayer:xr,removeLayer:Na,reloadLayer:$r,setupLayerModal:Mr},Symbol.toStringTag,{value:"Module"}));const Tr=Z({components:{Context:ka},props:{index:{type:Number,required:!0},display:{type:j(Object,String,Function),required:!0},minimizedDisplay:j(Object,String,Function),minimized:{type:Object,required:!0},name:{type:j(String),required:!0},color:j(String),minimizable:j(Boolean),nodes:{type:Object,required:!0}},emits:["setMinimized"],setup(e){const{display:t,index:n,minimized:i,minimizedDisplay:a}=ot(e),s=ii(t),u=En(a),c=w(()=>Ue.allowGoBack&&n.value>0&&!st(i));function p(){G.tabs.splice(o(e.index),1/0)}function d(v){e.nodes.value=v}return{component:s,minimizedComponent:u,showGoBack:c,updateNodes:d,unref:o,goBack:p}}}),Ir={key:1};function Er(e,t,n,i,a,s){const u=At("Context");return h(),x("div",{class:"layer-container",style:Ae({"--layer-color":e.unref(e.color)})},[e.showGoBack?(h(),x("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...c)=>e.goBack&&e.goBack(...c))},"\u274C")):B("",!0),e.unref(e.minimized)?(h(),x("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=c=>e.$emit("setMinimized",!1))},[e.minimizedComponent?(h(),U(Pe(e.minimizedComponent),{key:0})):(h(),x("div",Ir,ee(e.unref(e.name)),1))])):(h(),x("div",{key:2,class:Me(["layer-tab",{showGoBack:e.showGoBack}])},[r(u,{onUpdateNodes:e.updateNodes},{default:re(()=>[(h(),U(Pe(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(h(),x("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=c=>e.$emit("setMinimized",!0))}," \u25BC ")):B("",!0)],4)}var Fr=me(Tr,[["render",Er],["__scopeId","data-v-72dd78b1"]]);const xa=e=>(an("data-v-4b4bda40"),e=e(),sn(),e),qr=xa(()=>g("h2",null,"Changelog",-1)),Dr=xa(()=>g("details",{open:""},[g("summary",null,[m("v0.0 Initial Commit - "),g("time",null,"2021-09-04")]),m(" This is the first release :D "),g("ul",null,[g("li",{class:"feature"},"Did everything"),g("li",{class:"fix"},"Had some fun"),g("li",{class:"breaking"},"Removed everything"),g("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),Ar=Z({__name:"Changelog",setup(e,{expose:t}){const n=X(!1);return t({open(){n.value=!0}}),(i,a)=>(h(),U(Un,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s)},{header:re(()=>[qr]),body:re(()=>[Dr]),_:1},8,["modelValue"]))}});var Lr=me(Ar,[["__scopeId","data-v-4b4bda40"]]),Rr=Z({props:{element:Object,display:{type:j(Object,String,Function),required:!0},style:j(Object,String,Array),classes:j(Object),direction:j(String),xoffset:j(String),yoffset:j(String),pinned:Object},setup(e){const{element:t,display:n,pinned:i}=ot(e),a=X(!1),s=w(()=>(st(i)||a.value)&&u.value),u=En(n),c=kt(he(k(()=>{const v=st(t);return v==null?"":rt(v)})));function p(v){const f=i;v.shiftKey&&f&&(f.value=!f.value,v.stopPropagation(),v.preventDefault())}const d=w(()=>st(i)&&hi[De.theme].showPin);return{Direction:$e,isHovered:a,isShown:s,comp:u,elementComp:c,unref:o,togglePinned:p,showPin:d}}});const Or={key:0,class:"material-icons pinned"};function jr(e,t,n,i,a,s){return h(),x("div",{class:Me(["tooltip-container",{shown:e.isShown,...e.unref(e.classes)}]),onMouseenter:t[0]||(t[0]=u=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=u=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...u)=>e.togglePinned&&e.togglePinned(...u))},[Zt(e.$slots,"default",{},void 0,!0),e.elementComp?(h(),U(Pe(e.elementComp),{key:0})):B("",!0),r(Zi,{name:"fade"},{default:re(()=>{var u;return[e.isShown?(h(),x("div",{key:0,class:Me(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:Ae([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(u=e.unref(e.style))!=null?u:{}])},[e.showPin?(h(),x("span",Or,"push_pin")):B("",!0),e.comp?(h(),U(Pe(e.comp),{key:1})):B("",!0)],6)):B("",!0)]}),_:1})],34)}var lt=me(Rr,[["render",jr],["__scopeId","data-v-be7a60de"]]);const si=e=>(an("data-v-5d3cb6f4"),e=e(),sn(),e),Br={class:"info-modal-header"},Vr=["src","alt"],zr={class:"info-modal-title"},Gr={key:0},Ur={key:0},Xr={key:0},Hr=si(()=>g("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Jr=si(()=>g("br",null,null,-1)),Wr=si(()=>g("br",null,null,-1)),Qr=["href"],Zr=si(()=>g("span",{class:"material-icons info-modal-discord"},"discord",-1)),Kr=si(()=>g("div",null,[g("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link",target:"_blank"},[g("span",{class:"material-icons info-modal-discord"},"discord"),m(" The Paper Pilot Community ")])],-1)),Yr=si(()=>g("div",null,[g("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[g("span",{class:"material-icons info-modal-discord"},"discord"),m(" The Modding Tree ")])],-1)),eo=si(()=>g("br",null,null,-1));var to=Z({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:i,logo:a,author:s,discordName:u,discordLink:c,versionNumber:p,versionTitle:d}=Ue,v=ot(n),f=X(!1),_=w(()=>Gn(G.timePlayed)),C=w(()=>he(k(()=>r(F,null,[ur.map(We)]))));t({open(){f.value=!0}});function b(){var M;(M=o(v.changelog))==null||M.open()}return(M,Q)=>(h(),U(Un,{modelValue:f.value,"onUpdate:modelValue":Q[0]||(Q[0]=ie=>f.value=ie)},{header:re(()=>[g("div",Br,[o(a)?(h(),x("img",{key:0,class:"info-modal-logo",src:o(a),alt:o(i)},null,8,Vr)):B("",!0),g("div",zr,[g("h2",null,ee(o(i)),1),g("h4",null,[m(" v"+ee(o(p)),1),o(d)?(h(),x("span",Gr,": "+ee(o(d)),1)):B("",!0)])])])]),body:re(({shown:ie})=>[ie?(h(),x("div",Ur,[o(s)?(h(),x("div",Xr,"By "+ee(o(s)),1)):B("",!0),Hr,Jr,g("div",{class:"link",onClick:b},"Changelog"),Wr,g("div",null,[o(c)?(h(),x("a",{key:0,href:o(c),class:"info-modal-discord-link",target:"_blank"},[Zr,m(" "+ee(o(u)),1)],8,Qr)):B("",!0)]),Kr,Yr,eo,g("div",null,"Time Played: "+ee(o(_)),1),(h(),U(Pe(o(C))))])):B("",!0)]),_:1},8,["modelValue"]))}});var no=me(to,[["__scopeId","data-v-5d3cb6f4"]]);const io={class:"field"},lo={key:0,class:"field-title"},Il=Z({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var u;const n=e,i=En(ln(n,"title"),"span"),a=X((u=n.options.find(c=>c.value===n.modelValue))!=null?u:null);et(ln(n,"modelValue"),c=>{var p;st(a)!==c&&(a.value=(p=n.options.find(d=>d.value===c))!=null?p:null)});function s(c){t("update:modelValue",c.value)}return(c,p)=>(h(),x("div",io,[o(i)?(h(),x("span",lo,[(h(),U(Pe(o(i))))])):B("",!0),r(o(Qa),{options:e.options,modelValue:a.value,"onUpdate:modelValue":[p[0]||(p[0]=d=>a.value=d),s],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const ao={class:"field"},so=Z({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,i=w(()=>{var s;return he((s=o(n.title))!=null?s:"<span></span>","span")}),a=w({get(){return!!n.modelValue},set(s){t("update:modelValue",s)}});return(s,u)=>(h(),x("label",ao,[dn(g("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":u[0]||(u[0]=c=>qt(a)?a.value=c:null)},null,512),[[Ua,o(a)]]),(h(),U(Pe(o(i))))]))}});var kn=me(so,[["__scopeId","data-v-11046116"]]);const ro=["onClick"],oo=Z({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=X(!1),i=X(null);function a(){t("click"),i.value&&clearTimeout(i.value),n.value=!1,Vt(()=>{n.value=!0,i.value=setTimeout(()=>n.value=!1,500)})}return(s,u)=>(h(),x("button",{onClick:ni(a,["stop"]),class:Me(["feedback",{activated:n.value,left:e.left}])},[Zt(s.$slots,"default",{},void 0,!0)],10,ro))}});var $a=me(oo,[["__scopeId","data-v-01a1b95c"]]);const uo={class:"header"},co=g("h2",null,"Settings",-1),po={class:"option-tabs"},mo={key:0},fo=m("Manually save"),vo={key:1};var go=Z({__name:"Options",setup(e,{expose:t}){const n=X(!1),i=X("behaviour");function a(ue){return ue==i.value}function s(ue){i.value=ue}t({isTab:a,setTab:s,save:nn,open(){n.value=!0}});const u=Object.keys(hi).map(ue=>({label:un(ue),value:ue})),c=w(()=>he(k(()=>r(F,null,[_a.map(We)])))),{showTPS:p,theme:d,unthrottled:v,alignUnits:f}=ot(De),{autosave:_,offlineProd:C}=ot(G),b=w({get(){return G.devSpeed===0},set(ue){G.devSpeed=ue?0:null}}),M=k(()=>r("span",{class:"option-title"},[m("Unthrottled"),r("desc",null,[m("Allow the game to run as fast as possible. Not battery friendly.")])])),Q=k(()=>r("span",{class:"option-title"},[m("Offline Production"),r(lt,{display:"Save-specific",direction:$e.Right},{default:()=>[m("*")]}),r("desc",null,[m("Simulate production that occurs while the game is closed.")])])),ie=k(()=>r("span",{class:"option-title"},[m("Autosave"),r(lt,{display:"Save-specific",direction:$e.Right},{default:()=>[m("*")]}),r("desc",null,[m("Automatically save the game every second or when the game is closed.")])])),P=k(()=>r("span",{class:"option-title"},[m("Pause game"),r(lt,{display:"Save-specific",direction:$e.Right},{default:()=>[m("*")]}),r("desc",null,[m("Stop everything from moving.")])])),T=k(()=>r("span",{class:"option-title"},[m("Theme"),r("desc",null,[m("How the game looks.")])])),J=k(()=>r("span",{class:"option-title"},[m("Show TPS"),r("desc",null,[m("Show TPS meter at the bottom-left corner of the page.")])])),oe=k(()=>r("span",{class:"option-title"},[m("Align modifier units"),r("desc",null,[m("Align numbers to the beginning of the unit in modifier view.")])]));return(ue,V)=>(h(),U(Un,{modelValue:n.value,"onUpdate:modelValue":V[10]||(V[10]=W=>n.value=W)},{header:re(()=>[g("div",uo,[co,g("div",po,[g("button",{class:Me({selected:a("behaviour")}),onClick:V[0]||(V[0]=W=>s("behaviour"))},"Behaviour",2),g("button",{class:Me({selected:a("appearance")}),onClick:V[1]||(V[1]=W=>s("appearance"))},"Appearance",2)])])]),body:re(()=>[a("behaviour")?(h(),x("div",mo,[r(kn,{title:o(M),modelValue:o(v),"onUpdate:modelValue":V[2]||(V[2]=W=>qt(v)?v.value=W:null)},null,8,["title","modelValue"]),o(Ue).enablePausing?(h(),U(kn,{key:0,title:o(P),modelValue:o(b),"onUpdate:modelValue":V[3]||(V[3]=W=>qt(b)?b.value=W:null)},null,8,["title","modelValue"])):B("",!0),r(kn,{title:o(Q),modelValue:o(C),"onUpdate:modelValue":V[4]||(V[4]=W=>qt(C)?C.value=W:null)},null,8,["title","modelValue"]),r(kn,{title:o(ie),modelValue:o(_),"onUpdate:modelValue":V[5]||(V[5]=W=>qt(_)?_.value=W:null)},null,8,["title","modelValue"]),o(_)?B("",!0):(h(),U($a,{key:1,class:"button save-button",onClick:V[6]||(V[6]=W=>o(nn)())},{default:re(()=>[fo]),_:1}))])):B("",!0),a("appearance")?(h(),x("div",vo,[r(Il,{title:o(T),options:o(u),modelValue:o(d),"onUpdate:modelValue":V[7]||(V[7]=W=>qt(d)?d.value=W:null)},null,8,["title","options","modelValue"]),(h(),U(Pe(o(c)))),r(kn,{title:o(J),modelValue:o(p),"onUpdate:modelValue":V[8]||(V[8]=W=>qt(p)?p.value=W:null)},null,8,["title","modelValue"]),r(kn,{title:o(oe),modelValue:o(f),"onUpdate:modelValue":V[9]||(V[9]=W=>qt(f)?f.value=W:null)},null,8,["title","modelValue"])])):B("",!0)]),_:1},8,["modelValue"]))}});const ho=["onSubmit"],bo={class:"field"},yo={key:0,class:"field-title"},wo=["placeholder"],_o=Z({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,i=En(ln(n,"title"),"span"),a=kt(null);vi(()=>{var p;(p=a.value)==null||p.focus()});const s=w({get(){var p;return(p=o(n.modelValue))!=null?p:""},set(p){t("update:modelValue",p)}});function u(){t("submit")}function c(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(p,d)=>(h(),x("form",{onSubmit:ni(u,["prevent"])},[g("div",bo,[o(i)?(h(),x("span",yo,[(h(),U(Pe(o(i))))])):B("",!0),e.textArea?(h(),U(o(Ka),{key:1,modelValue:o(s),"onUpdate:modelValue":d[0]||(d[0]=v=>qt(s)?s.value=v:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:c,ref_key:"field",ref:a},null,8,["modelValue","placeholder","maxHeight"])):dn((h(),x("input",{key:2,type:"text","onUpdate:modelValue":d[1]||(d[1]=v=>qt(s)?s.value=v:null),placeholder:e.placeholder,class:Me({fullWidth:!e.title}),onBlur:c,ref_key:"field",ref:a},null,42,wo)),[[ua,o(s)]])])],40,ho))}});var Ma=me(_o,[["__scopeId","data-v-90bd4994"]]);const Co=Z({__name:"Node",props:{id:null},setup(e){const n=ot(e),i=Ui($l,()=>{}),a=Ui(Ml,()=>{}),s=kt(null),u=w(()=>s.value&&s.value.parentElement);return et([u,n.id],([c,p],[d,v])=>{d&&a(o(v)),c&&i(p,c)}),Cl(()=>a(o(n.id))),(c,p)=>(h(),x("div",{class:"node",ref_key:"node",ref:s},null,512))}});var Xn=me(Co,[["__scopeId","data-v-a48cb382"]]);const So={},ko={class:"notif"};function No(e,t){return h(),x("div",ko,"!")}var Mn=me(So,[["render",No],["__scopeId","data-v-66323fd4"]]);const xe=Z({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(h(),x("div",{style:Ae({width:e.width,height:e.height})},null,4))}});pa.registerPlugin(Ya);es.registerPlugin("batch",ts);var xo=Z({props:{style:j(String,Object,Array),classes:j(Object),onInit:{type:Function,required:!0},id:{type:String,required:!0},onContainerResized:Function,onHotReload:Function},setup(e){const t=kt(null),n=new ResizeObserver(s),i=kt(null);vi(()=>{var c,p;const u=i.value;u!=null&&(n.observe(u),t.value=new pa({resizeTo:u,backgroundAlpha:0}),(c=i.value)==null||c.appendChild(t.value.view),(p=e.onInit)==null||p.call(e,t.value)),s(),e.onHotReload&&Vt(e.onHotReload)}),kl(()=>{var u;(u=t.value)==null||u.destroy()});let a=!0;function s(){a&&(a=!1,Vt(()=>{var u;i.value!=null&&((u=e.onContainerResized)==null||u.call(e,i.value.getBoundingClientRect())),a=!0}))}return Gt.on("fontsLoaded",s),{unref:o,resizeListener:i}}});function $o(e,t,n,i,a,s){return h(),x("div",{ref:"resizeListener",class:Me(["resize-listener",e.unref(e.classes)]),style:Ae(e.unref(e.style))},null,6)}var Mo=me(xo,[["render",$o],["__scopeId","data-v-48dd302a"]]);const Po=Symbol("Particles");function el(e){return dt(t=>{var s,u;const n=(s=e==null?void 0:e.call(t,t))!=null?s:{};n.id=mn("particles-"),n.type=Po,n[nt]=Mo,n.app=kt(null),n.addEmitter=c=>{const p=n;return p.app.value?Promise.resolve(new Vl(p.app.value.stage,c)):new Promise(d=>{i.push({resolve:d,config:c})})};let i=[];function a(c){const p=n;p.app.value=c,i.forEach(({resolve:d,config:v})=>d(new Vl(c.stage,v))),i=[]}return n.onContainerResized=(u=n.onContainerResized)==null?void 0:u.bind(n),n[Be]=function(){const{id:c,style:p,classes:d,onContainerResized:v,onHotReload:f}=this;return{id:c,style:o(p),classes:d,onContainerResized:v,onHotReload:f,onInit:a}},n})}window.upgradeConfig=ns;function pn(e,t="points",n=0,i=void 0){const a=qt(e)?e:H(e);if(a.displayName=t,a.precision=n,a.small=i,!qt(e)){const s=a[yn];s.displayName=t,s.precision=n,s.small=i}return a}function tl(e){const t=H(e.value);return et(e,n=>{xl.value||l.gt(n,t.value)&&(t.value=n)}),t}function To(e){const t=H(e.value);return et(e,(n,i)=>{xl.value||l.gt(n,i)&&(t.value=l.add(t.value,l.sub(n,i)))}),t}new l("10^^8");new l("1e100");function Nn(e,t){const n=t!=null?t:e.value;return l.eq(e.precision,0)?ge(e.small?n:l.floor(n)):je(n,e.precision,e.small)}function wi(e){return"displayName"in e?e:o(e)}const Io={key:0},Eo={key:0,class:"mark star"},Fo=["src"],qo=Z({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(h(),x("div",Io,[e.mark===!0?(h(),x("div",Eo)):(h(),x("img",{key:1,class:"mark",src:e.mark},null,8,Fo))])):B("",!0)}});var Fi=me(qo,[["__scopeId","data-v-2207999f"]]);const Pa=l.ln(10);function Si(e){return e}function Do(e,t){if(D(t))return t.invert(l.neg(e));throw new Error("Could not invert due to no input being a variable")}function Ao(e,t){if(D(t))return E.neg(t.getIntegralFormula(e));throw new Error("Could not integrate due to no input being a variable")}function Lo(e){return E.neg(e)}function Ro(e,t,n){if(D(t))return t.invert(l.sub(e,ht(n)));if(D(n))return n.invert(l.sub(e,ht(t)));throw new Error("Could not invert due to no input being a variable")}function Oo(e,t,n){var i,a;if(D(t)){const s=t.getIntegralFormula(e);return E.times(n,(i=t.innermostVariable)!=null?i:0).add(s)}else if(D(n)){const s=n.getIntegralFormula(e);return E.times(t,(a=n.innermostVariable)!=null?a:0).add(s)}throw new Error("Could not integrate due to no input being a variable")}function jo(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.add(i,n)}else if(D(n)){const i=n.getIntegralFormula(e);return E.add(i,t)}throw new Error("Could not integrate due to no input being a variable")}function Bo(e,t,n){if(D(t))return t.invert(l.add(e,ht(n)));if(D(n))return n.invert(l.sub(ht(t),e));throw new Error("Could not invert due to no input being a variable")}function Vo(e,t,n){var i,a;if(D(t)){const s=t.getIntegralFormula(e);return E.sub(s,E.times(n,(i=t.innermostVariable)!=null?i:0))}else if(D(n)){const s=n.getIntegralFormula(e);return E.times(t,(a=n.innermostVariable)!=null?a:0).sub(s)}throw new Error("Could not integrate due to no input being a variable")}function zo(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.sub(i,n)}else if(D(n)){const i=n.getIntegralFormula(e);return E.sub(i,t)}throw new Error("Could not integrate due to no input being a variable")}function Go(e,t,n){if(D(t))return t.invert(l.div(e,ht(n)));if(D(n))return n.invert(l.div(e,ht(t)));throw new Error("Could not invert due to no input being a variable")}function Uo(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.times(i,n)}else if(D(n)){const i=n.getIntegralFormula(e);return E.times(i,t)}throw new Error("Could not integrate due to no input being a variable")}function Xo(e,t,n){if(D(t))return E.div(e,n);if(D(n))return E.div(e,t);throw new Error("Could not apply substitution due to no input being a variable")}function Ho(e,t,n){if(D(t))return t.invert(l.mul(e,ht(n)));if(D(n))return n.invert(l.div(ht(t),e));throw new Error("Could not invert due to no input being a variable")}function Jo(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.div(i,n)}else if(D(n)){const i=n.getIntegralFormula(e);return E.div(t,i)}throw new Error("Could not integrate due to no input being a variable")}function Wo(e,t,n){if(D(t))return E.mul(e,n);if(D(n))return E.mul(e,t);throw new Error("Could not apply substitution due to no input being a variable")}function Qo(e,t){if(D(t))return t.invert(l.recip(e));throw new Error("Could not invert due to no input being a variable")}function Zo(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.ln(n)}throw new Error("Could not integrate due to no input being a variable")}function Ko(e,t){if(D(t))return t.invert(l.pow10(e));throw new Error("Could not invert due to no input being a variable")}function Yo(e){return l.ln(e).sub(1).times(e).div(Pa)}function eu(e,t){if(D(t)){const n=Pa.times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}throw new Error("Could not invert due to no input being a variable")}function tu(e,t){if(D(t))return new E({inputs:[t.getIntegralFormula(e)],evaluate:Yo,invert:eu});throw new Error("Could not integrate due to no input being a variable")}function nu(e,t,n){if(D(t))return t.invert(l.pow(ht(n),e));if(D(n))return n.invert(l.root(ht(t),e));throw new Error("Could not invert due to no input being a variable")}function iu(e,t){return l.ln(e).sub(1).times(e).div(l.ln(t))}function lu(e,t,n){if(D(t)){const i=l.ln(ht(n)).times(e);return t.invert(i.div(i.div(Math.E).lambertw()))}throw new Error("Could not invert due to no input being a variable")}function au(e,t,n){if(D(t))return new E({inputs:[t.getIntegralFormula(e),n],evaluate:iu,invert:lu});throw new Error("Could not integrate due to no input being a variable")}function su(e,t){if(D(t))return t.invert(l.pow(2,e));throw new Error("Could not invert due to no input being a variable")}function ru(e){return l.ln(e).sub(1).times(e).div(l.ln(2))}function ou(e,t){if(D(t)){const n=l.ln(2).times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}throw new Error("Could not invert due to no input being a variable")}function uu(e,t){if(D(t))return new E({inputs:[t.getIntegralFormula(e)],evaluate:ru,invert:ou});throw new Error("Could not integrate due to no input being a variable")}function cu(e,t){if(D(t))return t.invert(l.exp(e));throw new Error("Could not invert due to no input being a variable")}function du(e){return l.ln(e).sub(1).times(e)}function pu(e,t){if(D(t))return t.invert(l.div(e,l.div(e,Math.E).lambertw()));throw new Error("Could not invert due to no input being a variable")}function mu(e,t){if(D(t))return new E({inputs:[t.getIntegralFormula(e)],evaluate:du,invert:pu});throw new Error("Could not integrate due to no input being a variable")}function fu(e,t,n){if(D(t))return t.invert(l.root(e,ht(n)));if(D(n))return n.invert(l.ln(e).div(l.ln(ht(t))));throw new Error("Could not invert due to no input being a variable")}function vu(e,t,n){if(D(t)){const i=t.getIntegralFormula(e),a=E.add(n,1);return E.pow(i,a).div(a)}else if(D(n)){const i=n.getIntegralFormula(e);return E.pow(t,i).div(E.ln(t))}throw new Error("Could not integrate due to no input being a variable")}function gu(e,t){if(D(t))return t.invert(l.root(e,10));throw new Error("Could not invert due to no input being a variable")}function hu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.pow10(n).div(E.ln(10))}throw new Error("Could not integrate due to no input being a variable")}function bu(e,t,n){if(D(t))return t.invert(l.ln(e).div(ht(n)));if(D(n))return n.invert(l.root(ht(t),e));throw new Error("Could not invert due to no input being a variable")}function yu(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.pow(n,i).div(E.ln(n))}else if(D(n)){const i=n.getIntegralFormula(e),a=E.add(t,1);return E.pow(i,a).div(a)}throw new Error("Could not integrate due to no input being a variable")}function wu(e,t,n){if(D(t))return t.invert(l.root(e,l.recip(ht(n))));if(D(n))return n.invert(l.ln(ht(t)).div(l.ln(e)));throw new Error("Could not invert due to no input being a variable")}function _u(e,t,n){if(D(t)){const i=t.getIntegralFormula(e);return E.pow(i,E.recip(n).add(1)).times(n).div(E.add(n,1))}throw new Error("Could not integrate due to no input being a variable")}function Cu(e,t){if(D(t))return t.invert(l.ln(e));throw new Error("Could not invert due to no input being a variable")}function Su(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.exp(n)}throw new Error("Could not integrate due to no input being a variable")}function ku(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){const i=l.minabs(t,1e308).toNumber();return l.tetrate(e,i,n)}function Nu(e,t,n,i){if(D(t))return t.invert(l.ssqrt(e));throw new Error("Could not invert due to no input being a variable")}function xu(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){const i=l.minabs(t,1e308).toNumber();return l.iteratedexp(e,i,new l(n))}function $u(e,t,n,i){if(D(t))return t.invert(l.iteratedlog(e,Math.E,l.minabs(1e308,ht(n)).toNumber()));throw new Error("Could not invert due to no input being a variable")}function Mu(e,t=10,n=2){const i=l.minabs(n,1e308).toNumber();return l.iteratedlog(e,t,i)}function Pu(e,t=10){const n=l.minabs(t,1e308).toNumber();return l.slog(e,n)}function Tu(e,t,n){if(D(t))return t.invert(l.tetrate(e,l.minabs(1e308,ht(n)).toNumber()));throw new Error("Could not invert due to no input being a variable")}function Iu(e,t,n){const i=l.minabs(t,1e308).toNumber();return l.layeradd(e,i,n)}function Eu(e,t,n,i){if(D(t))return t.invert(l.layeradd(e,l.minabs(1e308,ht(n)).negate().toNumber()));throw new Error("Could not invert due to no input being a variable")}function Fu(e,t){if(D(t))return t.invert(l.pow(Math.E,e).times(e));throw new Error("Could not invert due to no input being a variable")}function qu(e,t){if(D(t))return t.invert(l.tetrate(e,2));throw new Error("Could not invert due to no input being a variable")}function Du(e,t,n){const i=l.minabs(t,1e308).toNumber();return l.pentate(e,i,n)}function Au(e,t){if(D(t))return t.invert(l.asin(e));throw new Error("Could not invert due to no input being a variable")}function Lu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.cos(n).neg()}throw new Error("Could not integrate due to no input being a variable")}function Ru(e,t){if(D(t))return t.invert(l.acos(e));throw new Error("Could not invert due to no input being a variable")}function Ou(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.sin(n)}throw new Error("Could not integrate due to no input being a variable")}function ju(e,t){if(D(t))return t.invert(l.atan(e));throw new Error("Could not invert due to no input being a variable")}function Bu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.cos(n).ln().neg()}throw new Error("Could not integrate due to no input being a variable")}function Vu(e,t){if(D(t))return t.invert(l.sin(e));throw new Error("Could not invert due to no input being a variable")}function zu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.asin(n).times(n).add(E.sqrt(E.sub(1,E.pow(n,2))))}throw new Error("Could not integrate due to no input being a variable")}function Gu(e,t){if(D(t))return t.invert(l.cos(e));throw new Error("Could not invert due to no input being a variable")}function Uu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.acos(n).times(n).sub(E.sqrt(E.sub(1,E.pow(n,2))))}throw new Error("Could not integrate due to no input being a variable")}function Xu(e,t){if(D(t))return t.invert(l.tan(e));throw new Error("Could not invert due to no input being a variable")}function Hu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.atan(n).times(n).sub(E.ln(E.pow(n,2).add(1)).div(2))}throw new Error("Could not integrate due to no input being a variable")}function Ju(e,t){if(D(t))return t.invert(l.asinh(e));throw new Error("Could not invert due to no input being a variable")}function Wu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.cosh(n)}throw new Error("Could not integrate due to no input being a variable")}function Qu(e,t){if(D(t))return t.invert(l.acosh(e));throw new Error("Could not invert due to no input being a variable")}function Zu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.sinh(n)}throw new Error("Could not integrate due to no input being a variable")}function Ku(e,t){if(D(t))return t.invert(l.atanh(e));throw new Error("Could not invert due to no input being a variable")}function Yu(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.cosh(n).ln()}throw new Error("Could not integrate due to no input being a variable")}function ec(e,t){if(D(t))return t.invert(l.sinh(e));throw new Error("Could not invert due to no input being a variable")}function tc(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.asinh(n).times(n).sub(E.pow(n,2).add(1).sqrt())}throw new Error("Could not integrate due to no input being a variable")}function nc(e,t){if(D(t))return t.invert(l.cosh(e));throw new Error("Could not invert due to no input being a variable")}function ic(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.acosh(n).times(n).sub(E.add(n,1).sqrt().times(E.sub(n,1).sqrt()))}throw new Error("Could not integrate due to no input being a variable")}function lc(e,t){if(D(t))return t.invert(l.tanh(e));throw new Error("Could not invert due to no input being a variable")}function ac(e,t){if(D(t)){const n=t.getIntegralFormula(e);return E.atanh(n).times(n).add(E.sub(1,E.pow(n,2)).ln().div(2))}throw new Error("Could not integrate due to no input being a variable")}function bi(e){return(t,n)=>new E({inputs:[t,n],evaluate:e,invert:Si})}function D(e){return e instanceof E&&e.hasVariable()}function ht(e,t){return e instanceof E?e.evaluate(t):o(e)}function sc(){return E.pow(this,2).div(2)}function rc(){return this}const S=class{constructor(e){this.negate=this.neg,this.negated=this.neg,this.sgn=this.sign,this.plus=this.add,this.subtract=this.sub,this.minus=this.sub,this.multiply=this.mul,this.times=this.mul,this.divide=this.div,this.divideBy=this.div,this.dividedBy=this.div,this.reciprocal=this.recip,this.reciprocate=this.recip,this.logarithm=this.log;let t;"inputs"in e&&(e.inputs=e.inputs.map(n=>typeof n=="object"&&yn in n?n[yn]:n)),"variable"in e?(typeof e.variable=="object"&&yn in e.variable&&(e.variable=e.variable[yn]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:sc,internalIntegrateInner:rc,applySubstitution:Si}}setupConstant({inputs:e}){if(e.length!==1)throw new Error("Evaluate function is required if inputs is not length 1");return{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:n,invert:i,integrate:a,integrateInner:s,applySubstitution:u}=e,c=t.reduce((v,f)=>v+(f instanceof S?f.internalVariables:0),0),p=t.find(v=>v instanceof S&&v.hasVariable()),d=c===1?p==null?void 0:p.innermostVariable:void 0;return{inputs:t,internalEvaluate:n,internalInvert:i,internalIntegrate:a,internalIntegrateInner:s,applySubstitution:u,innermostVariable:d,internalVariables:c}}calculateConstantOfIntegration(){const e=this.getIntegralFormula().evaluate(1),t=l.add(this.evaluate(0),this.evaluate(1)).div(2);return l.sub(t,e)}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t,n,i;return(i=(n=(t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(a=>ht(a,e))))!=null?n:this.hasVariable()?e:null)!=null?i:ht(this.inputs[0])}invert(e){if(this.internalInvert&&this.hasVariable())return this.internalInvert.call(this,e,...this.inputs);if(this.inputs.length===1&&this.hasVariable())return e;throw new Error("Cannot invert non-invertible formula")}evaluateIntegral(e){if(!this.isIntegrable())throw new Error("Cannot evaluate integral of formula without integral");return this.getIntegralFormula().evaluate(e)}invertIntegral(e){if(!this.isIntegrable()||!this.getIntegralFormula().isInvertible())throw new Error("Cannot invert integral of formula without invertible integral");return this.getIntegralFormula().invert(e)}getIntegralFormula(e){if(this.integralFormula!=null&&e==null)return this.integralFormula;if(e==null){if(this.applySubstitution==null){if(e=[],this.internalIntegrate==null)throw new Error("Cannot integrate formula with non-integrable operation");let t=this.internalIntegrate.call(this,e,...this.inputs);e.forEach(n=>t=n(t)),this.integralFormula=t}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else throw new Error("Cannot integrate formula without variable");return this.integralFormula}else{if(this.applySubstitution==null)throw new Error("Cannot have two complex operations in an integrable formula");if(e.push(t=>this.applySubstitution.call(this,t,...this.inputs)),this.internalIntegrateInner)return this.internalIntegrateInner.call(this,e,...this.inputs);if(this.internalIntegrate)return this.internalIntegrate.call(this,e,...this.inputs);if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())return this;throw new Error("Cannot integrate formula without variable")}}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,n)=>t instanceof S&&e.inputs[n]instanceof S?t.equals(e.inputs[n]):!(t instanceof S)&&!(e.inputs[n]instanceof S)&&l.eq(o(t),o(e.inputs[n])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new S({inputs:[e]})}static variable(e){return new S({variable:e})}static step(e,t,n){const i=X(0),a=n(S.variable(i)),s=Qe(t);function u(p){return l.lt(p,o(s))?p:(i.value=l.sub(p,o(s)),l.add(a.evaluate(),o(s)))}function c(p,d){if(D(d))return l.gt(p,o(s))&&(p=l.add(a.invert(l.sub(p,o(s))),o(s))),d.invert(p);throw new Error("Could not invert due to no input being a variable")}return new S({inputs:[e],evaluate:u,invert:a.isInvertible()&&a.hasVariable()?c:void 0})}static if(e,t,n,i){const a=X(0),s=S.variable(a),u=n(s),c=i==null?void 0:i(s),p=Qe(t);function d(f){return o(p)?(a.value=f,u.evaluate()):c?(a.value=f,c.evaluate()):f}function v(f,_){if(!D(_))throw new Error("Could not invert due to no input being a variable");return o(p)?_.invert(u.invert(f)):c?_.invert(c.invert(f)):_.invert(f)}return new S({inputs:[e],evaluate:d,invert:u.isInvertible()&&u.hasVariable()?v:void 0})}static conditional(e,t,n,i){return S.if(e,t,n,i)}static abs(e){return new S({inputs:[e],evaluate:l.abs})}static neg(e){return new S({inputs:[e],evaluate:l.neg,invert:Do,applySubstitution:Lo,integrate:Ao})}static sign(e){return new S({inputs:[e],evaluate:l.sign})}static round(e){return new S({inputs:[e],evaluate:l.round})}static floor(e){return new S({inputs:[e],evaluate:l.floor})}static ceil(e){return new S({inputs:[e],evaluate:l.ceil})}static trunc(e){return new S({inputs:[e],evaluate:l.trunc})}static add(e,t){return new S({inputs:[e,t],evaluate:l.add,invert:Ro,integrate:Oo,integrateInner:jo,applySubstitution:Si})}static sub(e,t){return new S({inputs:[e,t],evaluate:l.sub,invert:Bo,integrate:Vo,integrateInner:zo,applySubstitution:Si})}static mul(e,t){return new S({inputs:[e,t],evaluate:l.mul,invert:Go,integrate:Uo,applySubstitution:Xo})}static div(e,t){return new S({inputs:[e,t],evaluate:l.div,invert:Ho,integrate:Jo,applySubstitution:Wo})}static recip(e){return new S({inputs:[e],evaluate:l.recip,invert:Qo,integrate:Zo})}static clamp(e,t,n){return new S({inputs:[e,t,n],evaluate:l.clamp,invert:Si})}static pLog10(e){return new S({inputs:[e],evaluate:l.pLog10})}static absLog10(e){return new S({inputs:[e],evaluate:l.absLog10})}static log10(e){return new S({inputs:[e],evaluate:l.log10,invert:Ko,integrate:tu})}static log(e,t){return new S({inputs:[e,t],evaluate:l.log,invert:nu,integrate:au})}static log2(e){return new S({inputs:[e],evaluate:l.log2,invert:su,integrate:uu})}static ln(e){return new S({inputs:[e],evaluate:l.ln,invert:cu,integrate:mu})}static pow(e,t){return new S({inputs:[e,t],evaluate:l.pow,invert:fu,integrate:vu})}static pow10(e){return new S({inputs:[e],evaluate:l.pow10,invert:gu,integrate:hu})}static pow_base(e,t){return new S({inputs:[e,t],evaluate:l.pow_base,invert:bu,integrate:yu})}static root(e,t){return new S({inputs:[e,t],evaluate:l.root,invert:wu,integrate:_u})}static factorial(e){return new S({inputs:[e],evaluate:l.factorial})}static gamma(e){return new S({inputs:[e],evaluate:l.gamma})}static lngamma(e){return new S({inputs:[e],evaluate:l.lngamma})}static exp(e){return new S({inputs:[e],evaluate:l.exp,invert:Cu,integrate:Su})}static sqr(e){return S.pow(e,2)}static sqrt(e){return S.root(e,2)}static cube(e){return S.pow(e,3)}static cbrt(e){return S.root(e,3)}static tetrate(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new S({inputs:[e,t,n],evaluate:ku,invert:Nu})}static iteratedexp(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new S({inputs:[e,t,n],evaluate:xu,invert:$u})}static iteratedlog(e,t=10,n=1){return new S({inputs:[e,t,n],evaluate:Mu})}static slog(e,t=10){return new S({inputs:[e,t],evaluate:Pu,invert:Tu})}static layeradd10(e,t){return new S({inputs:[e,t],evaluate:l.layeradd10})}static layeradd(e,t,n=10){return new S({inputs:[e,t,n],evaluate:Iu,invert:Eu})}static lambertw(e){return new S({inputs:[e],evaluate:l.lambertw,invert:Fu})}static ssqrt(e){return new S({inputs:[e],evaluate:l.ssqrt,invert:qu})}static pentate(e,t=2,n=l.fromComponents_noNormalize(1,0,1)){return new S({inputs:[e,t,n],evaluate:Du})}static sin(e){return new S({inputs:[e],evaluate:l.sin,invert:Vu,integrate:Lu})}static cos(e){return new S({inputs:[e],evaluate:l.cos,invert:Gu,integrate:Ou})}static tan(e){return new S({inputs:[e],evaluate:l.tan,invert:Xu,integrate:Bu})}static asin(e){return new S({inputs:[e],evaluate:l.asin,invert:Au,integrate:zu})}static acos(e){return new S({inputs:[e],evaluate:l.acos,invert:Ru,integrate:Uu})}static atan(e){return new S({inputs:[e],evaluate:l.atan,invert:ju,integrate:Hu})}static sinh(e){return new S({inputs:[e],evaluate:l.sinh,invert:ec,integrate:Wu})}static cosh(e){return new S({inputs:[e],evaluate:l.cosh,invert:nc,integrate:Zu})}static tanh(e){return new S({inputs:[e],evaluate:l.tanh,invert:lc,integrate:Yu})}static asinh(e){return new S({inputs:[e],evaluate:l.asinh,invert:Ju,integrate:tc})}static acosh(e){return new S({inputs:[e],evaluate:l.acosh,invert:Qu,integrate:ic})}static atanh(e){return new S({inputs:[e],evaluate:l.atanh,invert:Ku,integrate:ac})}step(e,t){return S.step(this,e,t)}if(e,t){return S.if(this,e,t)}conditional(e,t){return S.if(this,e,t)}abs(){return S.abs(this)}neg(){return S.neg(this)}sign(){return S.sign(this)}round(){return S.round(this)}floor(){return S.floor(this)}ceil(){return S.ceil(this)}trunc(){return S.trunc(this)}add(e){return S.add(this,e)}sub(e){return S.sub(this,e)}mul(e){return S.mul(this,e)}div(e){return S.div(this,e)}recip(){return S.recip(this)}max(e){return S.max(this,e)}min(e){return S.min(this,e)}maxabs(e){return S.maxabs(this,e)}minabs(e){return S.minabs(this,e)}clamp(e,t){return S.clamp(this,e,t)}clampMin(e){return S.clampMin(this,e)}clampMax(e){return S.clampMax(this,e)}pLog10(){return S.pLog10(this)}absLog10(){return S.absLog10(this)}log10(){return S.log10(this)}log(e){return S.log(this,e)}log2(){return S.log2(this)}ln(){return S.ln(this)}pow(e){return S.pow(this,e)}pow10(){return S.pow10(this)}pow_base(e){return S.pow_base(this,e)}root(e){return S.root(this,e)}factorial(){return S.factorial(this)}gamma(){return S.gamma(this)}lngamma(){return S.lngamma(this)}exp(){return S.exp(this)}sqr(){return S.pow(this,2)}sqrt(){return S.root(this,2)}cube(){return S.pow(this,3)}cbrt(){return S.root(this,3)}tetrate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return S.tetrate(this,e,t)}iteratedexp(e=2,t=l.fromComponents_noNormalize(1,0,1)){return S.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return S.iteratedlog(this,e,t)}slog(e=10){return S.slog(this,e)}layeradd10(e){return S.layeradd10(this,e)}layeradd(e,t){return S.layeradd(this,e,t)}lambertw(){return S.lambertw(this)}ssqrt(){return S.ssqrt(this)}pentate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return S.pentate(this,e,t)}sin(){return S.sin(this)}cos(){return S.cos(this)}tan(){return S.tan(this)}asin(){return S.asin(this)}acos(){return S.acos(this)}atan(){return S.atan(this)}sinh(){return S.sinh(this)}cosh(){return S.cosh(this)}tanh(){return S.tanh(this)}asinh(){return S.asinh(this)}acosh(){return S.acosh(this)}atanh(){return S.atanh(this)}};let E=S;E.negate=S.neg;E.negated=S.neg;E.sgn=S.sign;E.plus=S.add;E.subtract=S.sub;E.minus=S.sub;E.multiply=S.mul;E.times=S.mul;E.divide=S.div;E.divideBy=S.div;E.dividedBy=S.div;E.reciprocal=S.recip;E.reciprocate=S.recip;E.max=bi(l.max);E.min=bi(l.min);E.minabs=bi(l.minabs);E.maxabs=bi(l.maxabs);E.clampMin=bi(l.clampMin);E.clampMax=bi(l.clampMax);E.logarithm=S.log;function oc(e,t,n=!0,i){const a=Qe(n);return w(()=>{var u,c;let s;if(o(a)){if(!e.isIntegrable()||!e.isIntegralInvertible())throw new Error("Cannot calculate max affordable of formula with non-invertible integral");s=l.floor(e.invertIntegral(l.add(t.value,e.evaluateIntegral()))).sub((u=o(e.innermostVariable))!=null?u:0),i==null&&(i=10)}else{if(!e.isInvertible())throw new Error("Cannot calculate max affordable of non-invertible formula");s=l.floor(e.invert(t.value)),i==null&&(i=0)}if(i>0){s=s.sub(i).clampMin(0);let p=zi(e,s,!0,0);for(;;){const d=e.evaluate(s.add((c=o(e.innermostVariable))!=null?c:0));if(l.add(p,d).lt(t.value))s=s.add(1),p=l.add(p,d);else break}}return s})}function zi(e,t,n=!0,i){var s,u,c;let a=l.add(t,(s=o(e.innermostVariable))!=null?s:0);if(n){const p=a;a=a.sub(i!=null?i:10).clampMin((u=o(e.innermostVariable))!=null?u:0);let d=l.sub(e.evaluateIntegral(a),e.evaluateIntegral());if(p.gt(1e308))return d.add(l.sub(p,a).times(e.evaluate(a)));for(let v=a.toNumber();v<p.toNumber();v++)d=d.add(e.evaluate(v));return d}else{const p=a;a=a.sub(i!=null?i:0).clampMin((c=o(e.innermostVariable))!=null?c:0);let d=e.evaluate(a);if(p.gt(1e308))return l.sub(p,a).add(1).times(d);for(let v=a.toNumber();v<p.toNumber();v++)d=l.add(d,e.evaluate(v));return d}}function Ta(e){return dt(t=>{const n=e.call(t,t);return n.partialDisplay=i=>r("span",{style:o(n.requirementMet)?"":"color: var(--danger)"},[Nn(n.resource,n.cost instanceof E?zi(n.cost,i!=null?i:1,o(n.spendResources)):o(n.cost))," ",n.resource.displayName]),n.display=i=>r("div",null,[o(n.requiresPay)?"Costs: ":"Requires: ",Nn(n.resource,n.cost instanceof E?zi(n.cost,i!=null?i:1,o(n.spendResources)):o(n.cost))," ",n.resource.displayName]),q(n,"visibility"),tt(n,"visibility",Le.Visible),q(n,"cost"),q(n,"requiresPay"),tt(n,"requiresPay",!0),q(n,"spendResources"),tt(n,"spendResources",!0),tt(n,"pay",function(i){const a=n.cost instanceof E?zi(n.cost,i!=null?i:1,o(n.spendResources)):o(n.cost);n.resource.value=l.sub(n.resource.value,a).max(0)}),n.canMaximize=n.cost instanceof E&&n.cost.isInvertible(),n.canMaximize?n.requirementMet=oc(n.cost,n.resource,o(n.spendResources)):n.requirementMet=w(()=>n.cost instanceof E?l.gte(n.resource.value,n.cost.evaluate()):l.gte(n.resource.value,o(n.cost))),n})}function El(e){return dt(()=>({requirementMet:w(()=>gt(e.visibility)),visibility:Le.None,requiresPay:!1}))}function be(e,t){return dt(()=>({requirementMet:Qe(e),partialDisplay:t==null?void 0:k(()=>rt(t)),display:t==null?void 0:k(()=>r(F,null,[m("Req: "),rt(t)])),visibility:t==null?Le.None:Le.Visible,requiresPay:!1}))}function nl(e){if(wn(e))return e.every(nl);const t=o(e.requirementMet);return typeof t=="boolean"?t:l.gt(t,0)}function Ia(e){if(wn(e))return e.map(Ia).reduce(l.min);const t=o(e.requirementMet);return typeof t=="boolean"?t?l.dInf:0:l.gt(t,1)&&o(e.canMaximize)!==!0?1:t}function il(e,t=1){var n,i;if(wn(e)&&(e=e.filter(a=>gt(a.visibility)),e.length===1&&(e=e[0])),wn(e)){e=e.filter(u=>"partialDisplay"in u);const a=e.filter(u=>o(u.requiresPay)),s=e.filter(u=>!o(u.requiresPay));return r(F,null,[a.length>0?r("div",null,[m("Costs:")," ",bl(a.map(u=>u.partialDisplay(t)),r(F,null,[m(", ")]))]):null,s.length>0?r("div",null,[m("Requires:")," ",bl(s.map(u=>u.partialDisplay(t)),r(F,null,[m(", ")]))]):null])}return(i=(n=e.display)==null?void 0:n.call(e))!=null?i:r(F,null,null)}function Ea(e,t=1){var n;wn(e)?e.filter(i=>o(i.requiresPay)).forEach(i=>{var a;return(a=i.pay)==null?void 0:a.call(i,t)}):o(e.requiresPay)&&((n=e.pay)==null||n.call(e,t))}var uc=Z({props:{display:{type:j(String,Object,Function),required:!0},visibility:{type:j(Number,Boolean),required:!0},style:j(String,Object,Array),classes:j(Object),requirements:{type:Object,required:!0},canPurchase:{type:j(Boolean),required:!0},bought:{type:j(Boolean),required:!0},mark:j(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:Xn,MarkNode:Fi},setup(e){const{display:t,requirements:n,bought:i}=ot(e),a=kt("");return zt(()=>{const s=st(t);if(s==null){a.value="";return}if(fn(s)){a.value=he(s);return}const u=he(s.title||"","h3"),c=he(s.description,"div"),p=he(s.effectDisplay||"");a.value=he(k(()=>r("span",null,[s.title!=null?r("div",null,[r(u,null,null)]):null,r(c,null,null),s.effectDisplay!=null?r("div",null,[m("Currently: "),r(p,null,null)]):null,i.value?null:r(F,null,[r("br",null,null),il(n.value)])])))}),{component:a,unref:o,Visibility:Le,isVisible:gt,isHidden:In}}});const cc=["disabled"];function dc(e,t,n,i,a,s){var p;const u=At("MarkNode"),c=At("Node");return e.isVisible(e.visibility)?(h(),x("button",{key:0,style:Ae([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(p=e.unref(e.style))!=null?p:{}]),onClick:t[0]||(t[0]=(...d)=>e.purchase&&e.purchase(...d)),class:Me({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(h(),U(Pe(e.unref(e.component)),{key:0})):B("",!0),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],14,cc)):B("",!0)}var pc=me(uc,[["render",dc],["__scopeId","data-v-9be6bac0"]]);const mc=Symbol("Upgrade");function fc(e){const t=H(!1,!1);return dt(n=>{const i=e.call(n,n);i.id=mn("upgrade-"),i.type=mc,i[nt]=pc,i.bought=t,i.canPurchase=w(()=>nl(i.requirements)),i.purchase=function(){var u;const s=i;!o(s.canPurchase)||(Ea(i.requirements),t.value=!0,(u=s.onPurchase)==null||u.call(s))};const a=El(i);return wn(i.requirements)?i.requirements.unshift(a):i.requirements=[a,i.requirements],q(i,"visibility"),tt(i,"visibility",Le.Visible),q(i,"classes"),q(i,"style"),q(i,"display"),q(i,"mark"),i[Be]=function(){const{display:s,visibility:u,style:c,classes:p,requirements:d,canPurchase:v,bought:f,mark:_,id:C,purchase:b}=this;return{display:s,visibility:u,style:o(c),classes:p,requirements:d,canPurchase:v,bought:f,mark:_,id:C,purchase:b}},i})}const vc=Z({__name:"Collapsible",props:{collapsed:null,display:null,content:null},setup(e){const t=e,n=ii(ln(t,"display")),i=ii(ln(t,"content"));return(a,s)=>(h(),U(Ki,{class:"collapsible-container"},{default:re(()=>[g("button",{onClick:s[0]||(s[0]=u=>e.collapsed.value=!e.collapsed.value),class:"feature collapsible-toggle"},[(h(),U(Pe(o(n))))]),e.collapsed.value?B("",!0):(h(),U(Pe(o(i)),{key:0}))]),_:1}))}});var ri=me(vc,[["__scopeId","data-v-a72c16aa"]]),gc=Z({props:{display:{type:j(Object,String,Function),required:!0},visibility:{type:j(Number,Boolean),required:!0},style:j(Object,String,Array),classes:j(Object),onClick:Function,onHold:Function,canClick:{type:j(Boolean),required:!0},small:Boolean,mark:j(Boolean,String),id:{type:String,required:!0}},components:{Node:Xn,MarkNode:Fi},setup(e){const{display:t,onClick:n,onHold:i}=ot(e),a=kt("");zt(()=>{var v;const c=st(t);if(c==null){a.value="";return}if(fn(c)){a.value=he(c);return}const p=he((v=c.title)!=null?v:"","h3"),d=he(c.description,"div");a.value=he(k(()=>r("span",null,[c.title!=null?r("div",null,[r(p,null,null)]):null,r(d,null,null)])))});const{start:s,stop:u}=Ca(n,i);return{start:s,stop:u,comp:a,Visibility:Le,isVisible:gt,isHidden:In,unref:o}}});function hc(e,t,n,i,a,s){var p;const u=At("MarkNode"),c=At("Node");return e.isVisible(e.visibility)?(h(),x("button",{key:0,style:Ae([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(p=e.unref(e.style))!=null?p:[]]),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d)),class:Me({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(h(),U(Pe(e.unref(e.comp)),{key:0})):B("",!0),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],38)):B("",!0)}var ki=me(gc,[["render",hc],["__scopeId","data-v-03ca8bd6"]]);const bc=Symbol("Clickable");function jn(e){return dt(t=>{var i;const n=(i=e==null?void 0:e.call(t,t))!=null?i:{};if(n.id=mn("clickable-"),n.type=bc,n[nt]=ki,q(n,"visibility"),tt(n,"visibility",Le.Visible),q(n,"canClick"),tt(n,"canClick",!0),q(n,"classes"),q(n,"style"),q(n,"mark"),q(n,"display"),n.onClick){const a=n.onClick.bind(n);n.onClick=function(s){o(n.canClick)!==!1&&a(s)}}if(n.onHold){const a=n.onHold.bind(n);n.onHold=function(){o(n.canClick)!==!1&&a()}}return n[Be]=function(){const{display:a,visibility:s,style:u,classes:c,onClick:p,onHold:d,canClick:v,small:f,mark:_,id:C}=this;return{display:a,visibility:s,style:o(u),classes:c,onClick:p,onHold:d,canClick:v,small:f,mark:_,id:C}},n})}const yc=["x1","y1","x2","y2"],wc=Z({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=ot(e),i=w(()=>{const s=n.startNode.value.rect,u=n.boundingRect.value,c=u?{x:s.x+s.width/2-u.x,y:s.y+s.height/2-u.y}:{x:0,y:0};return n.link.value.offsetStart&&(c.x+=n.link.value.offsetStart.x,c.y+=n.link.value.offsetStart.y),c}),a=w(()=>{const s=n.endNode.value.rect,u=n.boundingRect.value,c=u?{x:s.x+s.width/2-u.x,y:s.y+s.height/2-u.y}:{x:0,y:0};return n.link.value.offsetEnd&&(c.x+=n.link.value.offsetEnd.x,c.y+=n.link.value.offsetEnd.y),c});return(s,u)=>(h(),x("line",Qt({"stroke-width":"15px",stroke:"white"},e.link,{x1:o(i).x,y1:o(i).y,x2:o(a).x,y2:o(a).y}),null,16,yc))}});const _c=Z({__name:"Links",props:{links:null},setup(e){var p;const n=ln(e,"links"),i=X(null),a=Ui(Pl,X({})),s=Ui(Tl,X(void 0)),u=X((p=i.value)==null?void 0:p.getBoundingClientRect());et(s,()=>{var d;return u.value=(d=i.value)==null?void 0:d.getBoundingClientRect()}),vi(()=>{var d;return u.value=(d=i.value)==null?void 0:d.getBoundingClientRect()});const c=w(()=>{var v,f;const d=a.value;return(f=(v=n.value)==null?void 0:v.filter(_=>{var C,b;return((C=d[_.startNode.id])==null?void 0:C.rect)&&((b=d[_.startNode.id])==null?void 0:b.rect)}))!=null?f:[]});return(d,v)=>(h(),x(F,null,[o(c)?(h(),x("svg",ca(Qt({key:0},d.$attrs)),[(h(!0),x(F,null,Tn(o(c),(f,_)=>(h(),U(wc,{key:_,link:f,boundingRect:u.value,startNode:o(a)[f.startNode.id],endNode:o(a)[f.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):B("",!0),g("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var Cc=me(_c,[["__scopeId","data-v-063f6d6b"]]),Sc=Z({props:{nodes:{type:j(Array),required:!0},leftSideNodes:j(Array),rightSideNodes:j(Array),branches:j(Array)},components:{Links:Cc},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:i}=ot(e),a=kt();zt(()=>{const c=st(t);a.value=he(k(()=>r(F,null,[c.map(p=>r("span",{class:"row tree-row",style:"margin: 50px auto;"},[p.map(rt)]))])))});const s=kt();zt(()=>{const c=st(n);s.value=c?he(k(()=>r("span",{class:"left-side-nodes small"},[c.map(rt)]))):""});const u=kt();return zt(()=>{const c=st(i);u.value=c?he(k(()=>r("span",{class:"side-nodes small"},[c.map(rt)]))):""}),{unref:o,nodesComp:a,leftNodesComp:s,rightNodesComp:u}}});function kc(e,t,n,i,a,s){const u=At("Links");return h(),x(F,null,[(h(),U(Pe(e.nodesComp))),e.leftNodesComp?(h(),U(Pe(e.leftNodesComp),{key:0})):B("",!0),e.rightNodesComp?(h(),U(Pe(e.rightNodesComp),{key:1})):B("",!0),e.branches?(h(),U(u,{key:2,links:e.unref(e.branches)},null,8,["links"])):B("",!0)],64)}var Nc=me(Sc,[["render",kc],["__scopeId","data-v-39ca96d0"]]);const xc=Z({props:{display:j(Object,String,Function),visibility:{type:j(Number,Boolean),required:!0},style:j(String,Object,Array),classes:j(Object),onClick:Function,onHold:Function,color:j(String),glowColor:j(String),canClick:{type:j(Boolean),required:!0},mark:j(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Fi,Node:Xn},setup(e){const{onClick:t,onHold:n,display:i}=ot(e),a=En(i),{start:s,stop:u}=Ca(t,n);return{start:s,stop:u,comp:a,unref:o,Visibility:Le,isCoercableComponent:fn,isVisible:gt,isHidden:In}}});function $c(e,t,n,i,a,s){var p;const u=At("MarkNode"),c=At("Node");return e.isVisible(e.visibility)?(h(),x("div",{key:0,style:Ae({visibility:e.isHidden(e.visibility)?"hidden":void 0}),class:Me({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d))},[g("div",{style:Ae([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(p=e.unref(e.style))!=null?p:[]])},[(h(),U(Pe(e.unref(e.comp))))],4),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],38)):B("",!0)}var Mc=me(xc,[["render",$c],["__scopeId","data-v-4520cd79"]]);const Pc=Symbol("TreeNode"),Tc=Symbol("Tree");function Wl(e){return dt(t=>{var i;const n=(i=e==null?void 0:e.call(t,t))!=null?i:{};if(n.id=mn("treeNode-"),n.type=Pc,n[nt]=Mc,q(n,"visibility"),tt(n,"visibility",Le.Visible),q(n,"canClick"),tt(n,"canClick",!0),q(n,"color"),q(n,"display"),q(n,"glowColor"),q(n,"classes"),q(n,"style"),q(n,"mark"),n.onClick){const a=n.onClick.bind(n);n.onClick=function(s){o(n.canClick)!==!1&&a(s)}}if(n.onHold){const a=n.onHold.bind(n);n.onHold=function(){o(n.canClick)!==!1&&a()}}return n[Be]=function(){const{display:a,visibility:s,style:u,classes:c,onClick:p,onHold:d,color:v,glowColor:f,canClick:_,mark:C,id:b}=this;return{display:a,visibility:s,style:u,classes:c,onClick:p,onHold:d,color:v,glowColor:f,canClick:_,mark:C,id:b}},n})}function Ic(e){return dt(t=>{const n=e.call(t,t);return n.id=mn("tree-"),n.type=Tc,n[nt]=Nc,n.isResetting=X(!1),n.resettingNode=kt(null),n.reset=function(i){var s,u;const a=n;a.isResetting.value=!0,a.resettingNode.value=i,(s=a.resetPropagation)==null||s.call(a,a,i),(u=a.onReset)==null||u.call(a,i),a.isResetting.value=!1,a.resettingNode.value=null},n.links=w(()=>{var a;return(a=o(n.branches))!=null?a:[]}),q(n,"visibility"),tt(n,"visibility",Le.Visible),q(n,"nodes"),q(n,"leftSideNodes"),q(n,"rightSideNodes"),q(n,"branches"),n[Be]=function(){const{nodes:i,leftSideNodes:a,rightSideNodes:s,branches:u}=this;return{nodes:i,leftSideNodes:a,rightSideNodes:s,branches:u}},n})}function Wt(e){const t=[],n={};let i=!1;function a(){return i||(t.push(...e()),n.base=t.map(c=>Qe(c.base)),n.baseText=t.map(c=>Qe(c.baseText)),n.visible=t.map(c=>Qe(c.visible)),n.title=t.map(c=>Qe(c.title)),n.subtitle=t.map(c=>Qe(c.subtitle)),i=!0),t}const s=H({},!1);return[k(()=>{const c=a();let p=!0;const d=c.map((v,f)=>{var ie,P,T;if(o(n.visible[f])===!1)return null;const _=r("h3",{onClick:()=>s.value[f]=!s.value[f],style:"cursor: pointer"},[r("span",{class:"modifier-toggle"+(o(s.value[f])?" collapsed":"")},[m("\u25BC")]),o(n.title[f]),o(n.subtitle[f])!=null?r("span",{class:"subtitle"},[m(" ("),o(n.subtitle[f]),m(")")]):null]),C=o(s.value[f])?null:r(F,null,[r("div",{class:"modifier-container"},[r("span",{class:"modifier-description"},[rt((ie=o(n.baseText[f]))!=null?ie:"Base")]),r("span",{class:"modifier-amount"},[je((P=o(n.base[f]))!=null?P:1),v.unit])]),v.modifier.description==null?null:rt(o(v.modifier.description))]),b=!p;p=!1;const M=(T=o(n.base[f]))!=null?T:1,Q=v.modifier.apply(M);return r(F,null,[b?r("br",null,null):null,r("div",{style:{"--unit":De.alignUnits&&v.unit!=null?"'"+v.unit+"'":""}},[_,r("br",null,null),C,r("hr",null,null),r("div",{class:"modifier-container"},[r("span",{class:"modifier-description"},[m("Total")]),r("span",{class:"modifier-amount",style:(v.smallerIsBetter===!0?l.gt(Q,M!=null?M:1):l.lt(Q,M!=null?M:1))?"color: var(--danger)":""},[Ei(Q),v.unit])])])])});return r(F,null,[d])}),s]}function Ft(e,t="var(--accent2)"){return r("span",{style:{color:t}},[e])}const Ec=Z({props:{progress:{type:j(String,Object,Number),required:!0},width:{type:j(Number),required:!0},height:{type:j(Number),required:!0},direction:{type:j(String),required:!0},display:j(Object,String,Function),visibility:{type:j(Number,Boolean),required:!0},style:j(Object,String,Array),classes:j(Object),borderStyle:j(Object,String,Array),textStyle:j(Object,String,Array),baseStyle:j(Object,String,Array),fillStyle:j(Object,String,Array),mark:j(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Fi,Node:Xn},setup(e){const{progress:t,width:n,height:i,direction:a,display:s}=ot(e),u=w(()=>{let d=t.value instanceof l?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(d,0),1))*100}),c=w(()=>{const d={width:st(n)+.5+"px",height:st(i)+.5+"px"};switch(o(a)){case $e.Up:d.clipPath=`inset(${u.value}% 0% 0% 0%)`,d.width=st(n)+1+"px";break;case $e.Down:d.clipPath=`inset(0% 0% ${u.value}% 0%)`,d.width=st(n)+1+"px";break;case $e.Right:d.clipPath=`inset(0% ${u.value}% 0% 0%)`;break;case $e.Left:d.clipPath=`inset(0% 0% 0% ${u.value} + '%)`;break;case $e.Default:d.clipPath="inset(0% 50% 0% 0%)";break}return d}),p=En(s);return{normalizedProgress:u,barStyle:c,component:p,unref:o,Visibility:Le,isVisible:gt,isHidden:In}}});function Fc(e,t,n,i,a,s){var p,d,v,f,_,C,b;const u=At("MarkNode"),c=At("Node");return e.isVisible(e.visibility)?(h(),x("div",{key:0,style:Ae([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.isHidden(e.visibility)?"hidden":void 0},(p=e.unref(e.style))!=null?p:{}]),class:Me({bar:!0,...e.unref(e.classes)})},[g("div",{class:"overlayTextContainer border",style:Ae([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(d=e.unref(e.borderStyle))!=null?d:{}])},[e.component?(h(),x("span",{key:0,class:"overlayText",style:Ae(e.unref(e.textStyle))},[(h(),U(Pe(e.component)))],4)):B("",!0)],4),g("div",{class:"border",style:Ae([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(v=e.unref(e.style))!=null?v:{},(f=e.unref(e.baseStyle))!=null?f:{},(_=e.unref(e.borderStyle))!=null?_:{}])},[g("div",{class:"fill",style:Ae([e.barStyle,(C=e.unref(e.style))!=null?C:{},(b=e.unref(e.fillStyle))!=null?b:{}])},null,4)],4),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],6)):B("",!0)}var qc=me(Ec,[["render",Fc],["__scopeId","data-v-515dc183"]]);const Dc=Symbol("Bar");function Gi(e){return dt(t=>{const n=e.call(t,t);return n.id=mn("bar-"),n.type=Dc,n[nt]=qc,q(n,"visibility"),tt(n,"visibility",Le.Visible),q(n,"width"),q(n,"height"),q(n,"direction"),q(n,"style"),q(n,"classes"),q(n,"borderStyle"),q(n,"baseStyle"),q(n,"textStyle"),q(n,"fillStyle"),q(n,"progress"),q(n,"display"),q(n,"mark"),n[Be]=function(){const{progress:i,width:a,height:s,direction:u,display:c,visibility:p,style:d,classes:v,borderStyle:f,textStyle:_,baseStyle:C,fillStyle:b,mark:M,id:Q}=this;return{progress:i,width:a,height:s,direction:u,display:c,visibility:p,style:o(d),classes:v,borderStyle:f,textStyle:_,baseStyle:C,fillStyle:b,mark:M,id:Q}},n})}var Ac=Z({props:{visibility:{type:j(Number,Boolean),required:!0},display:j(Object,String,Function),earned:{type:j(Boolean),required:!0},requirements:j(Object,Array),image:j(String),style:j(String,Object,Array),classes:j(Object),mark:j(Boolean,String),small:j(Boolean),id:{type:String,required:!0}},components:{Node:Xn,MarkNode:Fi},setup(e){const{display:t,requirements:n,earned:i}=ot(e),a=kt("");return zt(()=>{const s=st(t);if(s==null){a.value="";return}if(fn(s)){a.value=he(s);return}const u=he(s.requirement?s.requirement:k(()=>{var d;return il((d=st(n))!=null?d:[])}),"h3"),c=he(s.effectDisplay||"","b"),p=st(i)?he(s.optionsDisplay||"","span"):"";a.value=he(k(()=>r("span",null,[r(u,null,null),s.effectDisplay!=null?r("div",null,[r(c,null,null)]):null,s.optionsDisplay!=null?r("div",{class:"equal-spaced"},[r(p,null,null)]):null])))}),{comp:a,unref:o,Visibility:Le,isVisible:gt,isHidden:In}}});function Lc(e,t,n,i,a,s){var p;const u=At("MarkNode"),c=At("Node");return e.isVisible(e.visibility)?(h(),x("div",{key:0,style:Ae([{visibility:e.isHidden(e.visibility)?"hidden":void 0,backgroundImage:e.earned&&e.image&&`url(${e.image})`||""},(p=e.unref(e.style))!=null?p:[]]),class:Me({feature:!0,achievement:!0,locked:!e.unref(e.earned),done:e.unref(e.earned),small:e.unref(e.small),...e.unref(e.classes)})},[e.comp?(h(),U(Pe(e.comp),{key:0})):B("",!0),r(u,{mark:e.unref(e.mark)},null,8,["mark"]),r(c,{id:e.id},null,8,["id"])],6)):B("",!0)}var Rc=me(Ac,[["render",Lc],["__scopeId","data-v-5673325a"]]);Gt.on("setupVue",e=>e.use(is));function Oc(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}function Pi(e,t){const n=Qe(t),i=X(!1);return Vt(()=>{i.value=n.value,et(Sa(e),a=>{a||(i.value=!1)}),et(n,a=>{i.value=a})}),i}const jc=gi(),Bc=Symbol("Achievement");let Bn;(function(e){e.All="all",e.Configurable="configurable",e.Incomplete="incomplete",e.None="none"})(Bn||(Bn={}));function ye(e){const t=H(!1,!1);return dt(n=>{var s;const i=(s=e==null?void 0:e.call(n,n))!=null?s:{};i.id=mn("achievement-"),i.type=Bc,i[nt]=Rc,i.earned=t,i.complete=function(){var c,p;t.value=!0;const u=i;if((c=u.onComplete)==null||c.call(u),u.display!=null&&o(u.showPopups)===!0){const d=o(u.display);let v;fn(d)?v=he(d):d.requirement!=null?v=he(d.requirement):v=il((p=u.requirements)!=null?p:[]),jc.info(r("div",null,[r("h3",null,[m("Achievement earned!")]),r("div",null,[r(v,null,null)])]))}},q(i,"visibility"),tt(i,"visibility",Le.Visible);const a=i.visibility;if(i.visibility=Xa(()=>{const u=o(i.display);switch(De.msDisplay){default:case Bn.All:return o(a);case Bn.Configurable:return o(i.earned)&&!(u!=null&&typeof u=="object"&&"optionsDisplay"in u)?Le.None:o(a);case Bn.Incomplete:return o(i.earned)?Le.None:o(a);case Bn.None:return Le.None}}),q(i,"display"),q(i,"mark"),q(i,"small"),q(i,"image"),q(i,"style"),q(i,"classes"),q(i,"showPopups"),tt(i,"showPopups",!0),i[Be]=function(){const{visibility:u,display:c,requirements:p,earned:d,image:v,style:f,classes:_,mark:C,small:b,id:M}=this;return{visibility:u,display:c,requirements:p,earned:d,image:v,style:o(f),classes:_,mark:C,small:b,id:M}},i.requirements){const u=i,c=[El(u),be(()=>!u.earned.value),...wn(i.requirements)?i.requirements:[i.requirements]];zt(()=>{De.active===G.id&&nl(c)&&u.complete()})}return i})}Gt.on("loadSettings",e=>{tt(e,"msDisplay",Bn.All)});const Vc=Object.values(Bn).map(e=>({label:un(e),value:e}));or(k(()=>r(Il,{title:k(()=>r("span",{class:"option-title"},[m("Show achievements"),r("desc",null,[m("Select which achievements to display based on criterias.")])])),options:Vc,"onUpdate:modelValue":e=>De.msDisplay=e,modelValue:De.msDisplay},null)));const zc=Z({__name:"Sticky",setup(e){const t=X("0"),n=new ResizeObserver(a),i=kt(null);function a(){let s=i.value;if(s==null)return;let u=0;for(;s.previousSibling;){const c=s.previousSibling;c.dataset&&"vSticky"in c.dataset&&(u+=c.offsetHeight),s=c}t.value=u+"px"}return Vt(a),document.fonts.ready.then(a),vi(()=>{var u;const s=(u=i.value)==null?void 0:u.parentElement;s&&n.observe(s)}),(s,u)=>(h(),x("div",{class:"sticky",style:Ae({top:t.value}),ref_key:"element",ref:i,"data-v-sticky":""},[Zt(s.$slots,"default",{},void 0,!0)],4))}});var Fl=me(zc,[["__scopeId","data-v-cccac690"]]);const wl=Z({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=w(()=>Nn(t.resource));return(i,a)=>(h(),x("h2",{style:Ae({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},ee(o(n)),5))}});const Gc={class:"main-display"},Uc={key:0},Xc={key:1},Hc=m(", "),qi=Z({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=ot(e),i=X(null),a=En(n.effectDisplay),s=w(()=>l.lt(n.resource.value,"1e1000"));return(u,c)=>(h(),U(Fl,null,{default:re(()=>{var p,d,v,f;return[g("div",{class:Me(["main-display-container",(p=e.classes)!=null?p:{}]),style:Ae([{height:`${((v=(d=i.value)==null?void 0:d.$el.clientHeight)!=null?v:0)+50}px`},(f=e.style)!=null?f:{}])},[g("div",Gc,[o(s)?(h(),x("span",Uc,"You have ")):B("",!0),r(wl,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),m(" "+ee(e.resource.displayName),1),o(a)?(h(),x("span",Xc,[Hc,(h(),U(Pe(o(a)),{ref_key:"effectRef",ref:i},null,512))])):B("",!0)])],6)]}),_:1}))}}),Fa=e=>(an("data-v-71dcf259"),e=e(),sn(),e),Jc={class:"spell-tree-container"},Wc=Fa(()=>g("div",{class:"spell-tree"},null,-1)),Qc={style:{display:"none"}},Zc=Fa(()=>g("filter",{id:"skilltreeturbulence"},[g("feTurbulence",{x:"-50vw",y:"-50vh",width:"200vw",height:"200vh",baseFrequency:"0.015",numOctaves:"10",seed:"2"}),g("feDisplacementMap",{in:"SourceGraphic",scale:"10"},[g("animate",{attributeName:"scale",values:"10;50;10",dur:"10s",repeatCount:"indefinite"})])],-1)),Kc=[Zc];var Yc=Z({__name:"SpellTree",props:{spell:null},setup(e){const t=e,n=kt("");zt(()=>{n.value=We(t.spell.tree)});const i=jn(()=>({display:"reset",classes:{"reset-tree":!0},onClick(){Object.values(t.spell.treeNodes).forEach(s=>s.bought.value=!1),t.spell.castingTime.value=0}})),a=We(i);return(s,u)=>(h(),x("div",Jc,[Wc,(h(),U(Pe(o(n)))),(h(),U(Pe(o(a)))),(h(),x("svg",Qc,Kc))]))}});var ed=me(Yc,[["__scopeId","data-v-71dcf259"]]);const td=Z({props:{visibility:{type:j(Number,Boolean),required:!0},display:{type:j(Object,String,Function),required:!0},style:j(String,Object,Array),classes:j(Object),glowColor:j(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:n,glowColor:i,floating:a}=ot(e),s=ii(n),u=w(()=>{const p=st(i);return p==null||p===""?{}:o(a)?Oc(p):{boxShadow:`0px 9px 5px -6px ${p}`}});function c(){t("selectTab")}return{selectTab:c,component:s,glowColorStyle:u,unref:o,Visibility:Le,isVisible:gt,isHidden:In}}});function nd(e,t,n,i,a,s){var u;return e.isVisible(e.visibility)?(h(),x("button",{key:0,onClick:t[0]||(t[0]=(...c)=>e.selectTab&&e.selectTab(...c)),class:Me(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:Ae([{visibility:e.isHidden(e.visibility)?"hidden":void 0},e.glowColorStyle,(u=e.unref(e.style))!=null?u:{}])},[(h(),U(Pe(e.component)))],6)):B("",!0)}var qa=me(td,[["render",nd],["__scopeId","data-v-21427abb"]]);const id=Z({props:{visibility:{type:j(Number,Boolean),required:!0},activeTab:{type:j(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:j(Object),required:!0},style:j(String,Object,Array),classes:j(Object),buttonContainerStyle:j(String,Object,Array),buttonContainerClasses:j(Object)},components:{Sticky:Fl,TabButton:qa},setup(e){const{activeTab:t}=ot(e),n=w(()=>hi[De.theme].floatingTabs),i=kt("");zt(()=>{const c=st(t);if(c==null){i.value="";return}if(fn(c)){i.value=he(c);return}i.value=he(o(c.display))});const a=w(()=>{const c=st(t);return fn(c)||!c?void 0:o(c.classes)}),s=w(()=>{const c=st(t);return fn(c)||!c?void 0:o(c.style)});function u(c){const{display:p,style:d,classes:v,glowColor:f,visibility:_}=c;return{display:p,style:o(d),classes:v,glowColor:f,visibility:_}}return{floating:n,tabClasses:a,tabStyle:s,Visibility:Le,component:i,gatherButtonProps:u,unref:o,isVisible:gt,isHidden:In}}});function ld(e,t,n,i,a,s){var p,d;const u=At("TabButton"),c=At("Sticky");return e.isVisible(e.visibility)?(h(),x("div",{key:0,class:Me(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:Ae([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(p=e.unref(e.style))!=null?p:[],(d=e.tabStyle)!=null?d:[]])},[r(c,{class:Me(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:Ae(e.unref(e.buttonContainerStyle))},{default:re(()=>[g("div",{class:Me(["tab-buttons",{floating:e.floating}])},[(h(!0),x(F,null,Tn(e.unref(e.tabs),(v,f)=>(h(),U(u,Qt({onSelectTab:_=>e.selected.value=f,floating:e.floating,key:f,active:e.unref(v.tab)===e.unref(e.activeTab)},e.gatherButtonProps(v)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(h(),U(Pe(e.unref(e.component)),{key:0})):B("",!0)],6)):B("",!0)}var ad=me(id,[["render",ld],["__scopeId","data-v-58dbf83a"]]);const sd=Symbol("TabButton"),rd=Symbol("TabFamily");function Pn(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),new Error("Cannot create tab family with 0 tabs");const n=H(Object.keys(e)[0],!1);return dt(i=>{var u;const a=(u=t==null?void 0:t.call(i,i))!=null?u:{};a.id=mn("tabFamily-"),a.type=rd,a[nt]=ad,a.tabs=Object.keys(e).reduce((c,p)=>{const d=e[p]();return d.type=sd,d[nt]=qa,q(d,"visibility"),tt(d,"visibility",Le.Visible),q(d,"tab"),q(d,"display"),q(d,"classes"),q(d,"style"),q(d,"glowColor"),c[p]=d,c},{}),a.selected=n,a.activeTab=w(()=>{const c=o(s.tabs);if(n.value in c&&gt(c[n.value].visibility))return o(c[n.value].tab);const p=Object.values(c).find(d=>gt(d.visibility));return p?o(p.tab):null}),q(a,"visibility"),tt(a,"visibility",Le.Visible),q(a,"classes"),q(a,"style"),q(a,"buttonContainerClasses"),q(a,"buttonContainerStyle"),a[Be]=function(){const{visibility:c,activeTab:p,selected:d,tabs:v,style:f,classes:_,buttonContainerClasses:C,buttonContainerStyle:b}=this;return{visibility:c,activeTab:p,selected:d,tabs:v,style:o(f),classes:_,buttonContainerClasses:C,buttonContainerStyle:b}};const s=a;return s})}function yt(e){return dt(t=>{const{addend:n,description:i,enabled:a,smallerIsBetter:s}=e.call(t,t),u=Qe(n),c=Qe(i),p=a==null?void 0:Qe(a);return{apply:d=>l.add(d,o(u)),invert:d=>l.sub(d,o(u)),getFormula:d=>E.add(d,u),enabled:p,description:i==null?void 0:k(()=>r("div",{class:"modifier-container"},[o(c)!=null?r("span",{class:"modifier-description"},[rt(o(c))]):null,r("span",{class:"modifier-amount",style:(s===!0?l.gt(o(u),0):l.lt(o(u),0))?"color: var(--danger)":""},[l.gte(o(u),0)?"+":"",Ei(o(u))])]))}})}function A(e){return dt(t=>{const{multiplier:n,description:i,enabled:a,smallerIsBetter:s}=e.call(t,t),u=Qe(n),c=Qe(i),p=a==null?void 0:Qe(a);return{apply:d=>l.times(d,o(u)),invert:d=>l.div(d,o(u)),getFormula:d=>E.times(d,u),enabled:p,description:i==null?void 0:k(()=>r("div",{class:"modifier-container"},[o(c)!=null?r("span",{class:"modifier-description"},[rt(o(c))]):null,r("span",{class:"modifier-amount",style:(s===!0?l.gt(o(u),1):l.lt(o(u),1))?"color: var(--danger)":""},[m("\xD7"),Ei(o(u))])]))}})}function Qi(e){return dt(t=>{const{exponent:n,description:i,enabled:a,supportLowNumbers:s,smallerIsBetter:u}=e.call(t,t),c=Qe(n),p=Qe(i),d=a==null?void 0:Qe(a);return{apply:v=>{let f=v;return s&&(f=l.add(f,1)),f=l.pow(f,o(c)),s&&(f=l.sub(f,1)),f},invert:v=>{let f=v;return s&&(f=l.add(f,1)),f=l.root(f,o(c)),s&&(f=l.sub(f,1)),f},getFormula:v=>s?E.add(v,1).pow(c).sub(1):E.pow(v,c),enabled:d,description:i==null?void 0:k(()=>r("div",{class:"modifier-container"},[o(p)!=null?r("span",{class:"modifier-description"},[rt(o(p)),s?" (+1 effective)":null]):null,r("span",{class:"modifier-amount",style:(u===!0?l.gt(o(c),1):l.lt(o(c),1))?"color: var(--danger)":""},[m("^"),Ei(o(c))])]))}})}function ne(e){return dt(()=>{const t=e();return{apply:n=>t.filter(i=>o(i.enabled)!==!1).reduce((i,a)=>a.apply(i),n),invert:t.every(n=>n.invert!=null)?n=>t.filter(i=>o(i.enabled)!==!1).reduceRight((i,a)=>a.invert(i),n):void 0,getFormula:t.every(n=>n.getFormula!=null)?n=>t.filter(i=>o(i.enabled)!==!1).reduce((i,a)=>a.getFormula(i),n):void 0,enabled:t.some(n=>n.enabled!=null)?w(()=>t.filter(n=>o(n.enabled)!==!1).length>0):void 0,description:t.some(n=>n.description!=null)?k(()=>r(F,null,[t.filter(n=>o(n.enabled)!==!1).map(n=>o(n.description)).filter(n=>n).map(rt)])):void 0}})}const od=Z({__name:"Tab",props:{display:null},setup(e){const t=e,{display:n}=ot(t),i=ii(n);return(a,s)=>(h(),U(Pe(o(i))))}}),ud=Symbol("Tab");function zn(e){return dt(t=>{const n=e.call(t,t);return n.id=mn("tab-"),n.type=ud,n[nt]=od,n[Be]=function(){const{display:i}=this;return{display:i}},n})}var oi=["Can we skip to the good part?","I have such great expectations for myself","I'm standing on the shoulders of giants","I can feel it's power","I feel you","What other job should I start?","I wonder what comes next","I hope I'm not too late","Will I finish in time? Can I go back?","Sometimes the logic of this world surprises me","This reminds me of something...","Hello, world!","I must keep moving forward, keep progressing","Every task brings me closer to my goal","I'm finding my purpose","I wonder what hidden talents I'll uncover","My actions feel strangely familiar, like d\xE9j\xE0 vu","These tasks seem almost... orchestrated","Every now and then, I sense a pattern","Do coincidences hold hidden meaning?","Sometimes I feel like I'm on a guided path","One step at a time, I'll make it","Are there hidden layers to this world?","Curious connections seem to surround me","I wonder if there's more to this than meets the eye"],cd=["Chalk? I love chalk!","It's all coming together","I'm so close now...","Everything must be so precise","Fortunately I have a penchant for rules","Careful now","The power grows stronger with each ritual","Rituals bring order to chaos","This power is intoxicating","Can I truly control this?","Is this power consuming me?","Addiction to power, a dangerous path","I feel like I'm playing with fire","The rituals have a life of their own","The more I control, the less I'm in control","There's a fine line between mastery and obsession","The power is overwhelming, but I must continue","This energy calls to me, but at what cost?","I'm walking a tightrope of power and control","Each ritual brings me closer to the edge","Ancient forces are at work here","What have I unleashed?","Is this the path to greatness or destruction?","Excellence is not an act, but a habit","Hold fast to dreams"];const dd=Z({__name:"Ritual",setup(e){return(t,n)=>(h(),x("div",null," Ritual goes here "))}}),Ri="rituals",Ti=Fn(Ri,function(){const e="Performing Rituals",t="#D12626",n=pn(w(()=>0),"active rituals"),i=Hn(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"\u238A",randomQuips(){return[...cd,...oi]},resource:n,layerID:Ri,modifierInfo:k(()=>rt(ut)),visibility:()=>Ve.milestones.jobMilestone.earned.value&&Dt.milestones.jobMilestone.earned.value})),a=H([]),s=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,2)),display:{requirement:`Achieve ${i.name} Level 2`,effectDisplay:'Unlock fourth column of runes and "Ritual of Emolumentum"'}})),u=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,4)),display:{requirement:`Achieve ${i.name} Level 4`,effectDisplay:'Unlock fourth row of runes and "Ritual of Melius"'},visibility:s.earned})),c=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,5)),display:{requirement:`Achieve ${i.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility:u.earned})),p=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,6)),display:{requirement:`Achieve ${i.name} Level 6`,effectDisplay:'Unlock fifth column of runes and "Ritual of Collegium"'},visibility:c.earned})),d=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,8)),display:{requirement:`Achieve ${i.name} Level 8`,effectDisplay:'Unlock fifth row of runes and "Ritual of Celeritas"'},visibility:p.earned})),v=ye(()=>({requirements:be(()=>l.gte(i.rawLevel.value,10)),display:{requirement:`Achieve ${i.name} Level 10`,effectDisplay:"Unlock Ritual of G\xE9nesis"},visibility:d.earned})),f={fourthColMilestone:s,fourthRowMilestone:u,timeSlotMilestone:c,fifthColMilestone:p,fifthRowMilestone:d,genesisMilestone:v},_=[v,d,p,c,u,s],C=H(!0),b=w(()=>_.filter(L=>L.earned.value===!1)),{firstFeature:M,collapsedContent:Q,hasCollapsedContent:ie}=ai(_,L=>L.earned.value),P=w(()=>{let L=3;return u.earned.value&&L++,d.earned.value&&L++,L}),T=w(()=>{let L=3;return s.earned.value&&L++,p.earned.value&&L++,L});function J({name:L,visibility:z}){const de=Qe(z!=null?z:Le.Visible);return{name:L,visibility:de,[nt]:dd,[Be]:function(){return{}}}}const oe=J({name:"Ritual of Doctrina"}),ue=J({name:"Ritual of Emolumentum",visibility:s.earned}),V=J({name:"Ritual of Melius",visibility:u.earned}),W=J({name:"Ritual of Collegium",visibility:p.earned}),Re=J({name:"Ritual of Celeritas",visibility:d.earned}),Te={doctrina:oe,emolumentum:ue,melius:V,collegium:W,celeritas:Re};w(()=>l.pow(1.1,i.level.value));const _e=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===Ri})),Ve.batteries.breeding.timePassing.modifier]),Ze=w(()=>new l(_e.apply(1)).toNumber()),ae=ne(()=>[Ve.batteries.breeding.xpGain.modifier]),Et={timePassing:_e,jobXpGain:ae},[pt,ze]=Wt(()=>[{title:"Time Passing",modifier:_e,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:`${i.name} EXP Gain`,modifier:ae,base:1}]),ut=Pn({general:()=>({display:"General",glowColor(){return ut.activeTab.value===this.tab?t:""},tab:pt,generalTabCollapsed:ze})},()=>({style:`--layer-color: ${t}`}));return this.on("preUpdate",L=>{i.timeLoopActive.value===!1&&G.tabs[1]!==Ri||(L=l.times(L,Ze.value).toNumber())}),{name:e,color:t,minWidth:670,job:i,activeRituals:n,runeRows:P,runeCols:T,selectedRunes:a,rituals:Te,modifiers:Et,milestones:f,collapseMilestones:C,modifierTabs:ut,display:k(()=>{const L=[...b.value];return M.value&&L.push(M.value),r(F,null,[li(...L,k(()=>dn(r(ri,{collapsed:C,content:Q,display:C.value?"Show other completed milestones":"Hide other completed milestones"},null),[[$n,o(ie)]]))),r(xe,null,null)])})}});const pd={width:"300",height:"300",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},md={transform:"translate(50 50)"},fd=["transform"],vd=["transform","fill"],gd=Z({__name:"Atom",props:{speed:null},setup(e){const t=e,n=["#7E7DFF","#7290E8","#89C6FF","#72CEE8","#7DFFF9"],i=X(Math.random()*1e5);let a=null;vi(()=>{a=Gt.on("update",c=>{i.value=i.value+t.speed*c/1e3})}),kl(()=>{a&&(a(),a=null)});function s(c){return c<=2?.168:c<=10?.333:c<=28?.5:c<=60?.667:c<=78?.833:1}function u(c){const p=c**2,d=(c%2===0?1:-1)*p,v=i.value+p;return d*v%360}return(c,p)=>(h(),x("svg",pd,[g("g",md,[(h(),x(F,null,Tn(82,d=>g("g",{key:d,transform:`scale(${s(d)})`},[g("path",{d:"M0 0L0 -40A40 40 0 0 1 3.061970113459826 -39.88263204734962",class:"electron",transform:`rotate(${u(d)} 0 0)`,fill:n[d%5]},null,8,vd)],8,fd)),64))])]))}});var dl=me(gd,[["__scopeId","data-v-baafb966"]]);const hd={class:"field"},bd={key:0,class:"field-title"},yd=["min","max"],wd=Z({__name:"Slider",props:{title:null,modelValue:null,min:null,max:null},emits:["update:modelValue"],setup(e,{emit:t}){const i=ot(e),a=w({get(){var s;return String((s=o(i.modelValue))!=null?s:0)},set(s){t("update:modelValue",Number(s))}});return(s,u)=>(h(),x("div",hd,[e.title?(h(),x("span",bd,ee(e.title),1)):B("",!0),r(lt,{display:`${o(a)}`,class:Me({fullWidth:!e.title}),direction:o($e).Down},{default:re(()=>[dn(g("input",{type:"range","onUpdate:modelValue":u[0]||(u[0]=c=>qt(a)?a.value=c:null),min:e.min,max:e.max},null,8,yd),[[ua,o(a)]])]),_:1},8,["display","class","direction"])]))}});var Da=me(wd,[["__scopeId","data-v-267283ff"]]);const ql=e=>(an("data-v-02c1c27a"),e=e(),sn(),e),_d=ql(()=>g("br",null,null,-1)),Cd=ql(()=>g("defs",null,[g("filter",{id:"glow",x:"-100%",y:"-100%",width:"300%",height:"300%"},[g("feDropShadow",{dx:"0",dy:"0",stdDeviation:3})])],-1)),Sd=["d"],kd={class:"charge-display"},Nd=ql(()=>g("br",null,null,-1)),xd=m("energeia"),$d=Z({__name:"Battery",props:{charge:null,effect:null,effectDescription:null,feedAmount:null,color:null,sumFeedAmounts:null,visibility:null,setFeedAmount:null},setup(e){const t=e,n=20,i=4,a=30,s=0,u=100-s*2,c=100,p=X([]),d=X(3);let v=null,f=()=>{const _=Math.max(3,Math.floor(n*t.feedAmount.value/u));p.value=new Array(_).fill(1).map((C,b)=>{let M=b===0,Q=b===_-1,ie=(t.feedAmount.value-s*2)/(_-1)*b+s;return{x:M||Q?c/2:(c-a)/2+Math.random()*a,y:ie}}),d.value=Math.random()*(5-2)+2,v&&clearTimeout(v),v=setTimeout(f,Math.random()*200+100)};return et(()=>t.feedAmount.value,f,{immediate:!0}),(_,C)=>o(gt)(e.visibility)?(h(),x("div",{key:0,class:"battery-container feature dontMerge",style:Ae({visibility:o(In)(e.visibility)?"hidden":void 0})},[g("div",null,ee(o(je)(o(e.effect)))+"x "+ee(e.effectDescription),1),_d,g("div",{class:"battery",style:Ae({borderColor:o(e.color),width:`${c}px`})},[(h(),x("svg",{style:Ae({height:`${e.feedAmount.value}%`,borderColor:o(e.color)})},[Cd,g("path",{style:Ae([{filter:"url(#glow)"},{opacity:3,strokeWidth:i}]),d:`M${p.value.map(b=>b.x+","+b.y).join(" L")}`},null,12,Sd)],4)),g("div",kd,[m(ee(o(je)(e.charge.value)),1),Nd,xd])],4),r(Da,{max:100-o(e.sumFeedAmounts)+o(e.feedAmount),modelValue:o(e.feedAmount),"onUpdate:modelValue":C[0]||(C[0]=b=>e.setFeedAmount(b))},null,8,["max","modelValue"])],4)):B("",!0)}});var Md=me($d,[["__scopeId","data-v-02c1c27a"]]),Pd=["Huh, why is 82 compelling? It doesn't fit the usual patterns...","Atoms? I love atoms!","I can feel the power!","The power kinda tingles","Power!","Energy, the ultimate currency of the universe","I'm tapping into something greater","The fusion of elements creates untold power","The dance of electrons empower me","Energy conversion, the key to progress","Power flows through my fingertips","The energy I wield is boundless","Channeling the strength of the universe","Every surge brings me closer to my goals","I'm a conduit for untamed power","Electricity crackles and sparks my progress","A torrent of energy fuels my journey","Power and potential in every charge","Power lies not in strength, but in persistence","The energy of the mind is the essence of life","Strength does not come from physical capacity","The true sign of intelligence is imagination","Power is not an institution, but a relation","A man's true power lies in his determination","Strive for greatness, but never forget humility"];function Td(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ra(e)}const Kn="generators",Ve=Fn(Kn,function(){const e="Harnessing Power",t="#26D1CE",n=pn(0,"energeia"),i=H(0),a=Hn(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"\u269B",randomQuips(){return[...Pd,...oi]},resource:Ut(n),layerID:Kn,modifierInfo:k(()=>rt(ze)),visibility:Se.milestones.jobMilestone.earned})),s=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,2)),display:{requirement:`Achieve ${a.name} Level 2`,effectDisplay:"Unlock multiple generators"}})),u=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,4)),display:{requirement:`Achieve ${a.name} Level 4`,effectDisplay:"Unlock resource gain batteries"},visibility:s.earned})),c=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,5)),display:{requirement:`Achieve ${a.name} Level 5`,effectDisplay:'Unlock buying machines in "Breeding Plants" Job'},visibility:u.earned})),p=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,6)),display:{requirement:`Achieve ${a.name} Level 6`,effectDisplay:"Unlock xp gain batteries"},visibility:c.earned})),d=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,8)),display:{requirement:`Achieve ${a.name} Level 8`,effectDisplay:"Unlock time passing batteries"},visibility:p.earned})),v=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,10)),display:{requirement:`Achieve ${a.name} Level 10`,effectDisplay:'Unlock 1/2 of "Performing Rituals" Job'},visibility:d.earned,onComplete(){Dt.milestones.jobMilestone.earned.value&&_n(Ti,G)}})),f={multiLoopMilestone:s,resourceBatteriesMilestone:u,machinesMilestone:c,xpBatteriesMilestone:p,timeBatteriesMilestone:d,jobMilestone:v},_=[v,d,p,c,u,s],C=H(!0),b=w(()=>_.filter(L=>L.earned.value===!1)),{firstFeature:M,collapsedContent:Q,hasCollapsedContent:ie}=ai(_,L=>L.earned.value);function P(L){const z=H(0),de=H(0);return dt(()=>{const fe=L(),ke=w(()=>o(at.jobs[fe.job].color)),wt=fe.visibility!=null?Qe(fe.visibility):Le.Visible,Nt=w(()=>fe.effectFormula(z.value)),K=ne(()=>[yt(()=>({addend:()=>l.times(n.value,de.value).div(100),description:"Battery charging"})),Qi(()=>({exponent:()=>l.div(de.value,500).add(1),description:"Battery charging bonus",supportLowNumbers:!0})),yt(()=>({addend:()=>l.times(z.value,.1).neg(),description:"Battery discharge"}))]),it=w(()=>K.apply(0)),Oe=A(()=>({multiplier:Nt,description:un(fe.effectDescription)+" battery",enabled:()=>gt(wt)}));return{charge:z,chargeGain:K,computedChargeGain:it,color:ke,feedAmount:de,effect:Nt,effectDescription:fe.effectDescription,modifier:Oe,visibility:wt,setFeedAmount:Xe=>de.value=Xe,[nt]:Md,[Be]:function(){const{charge:Xe,effect:Ge,effectDescription:ce,feedAmount:mt,color:_t,visibility:ft,setFeedAmount:$}=this;return{charge:Xe,effect:Ge,effectDescription:ce,feedAmount:mt,color:_t,visibility:ft,sumFeedAmounts:J,setFeedAmount:$}}}})}const T=Dl.reduce((L,z)=>(L[z]={job:z,resourceGain:P(()=>({job:z,effectDescription:"resource gain",effectFormula:de=>l.div(de,z===Kn?10:100).add(1).log(1.3).add(1).pow(1)})),xpGain:P(()=>({job:z,effectDescription:"xp gain",effectFormula:de=>l.div(de,z===Kn?6:60).add(1).log(1.3).add(1),visibility:p.earned})),timePassing:P(()=>({job:z,effectDescription:"time passing",effectFormula:de=>l.div(de,z===Kn?10:100).add(1).log(10).add(1),visibility:u.earned}))},L),{}),J=w(()=>Object.values(T).reduce((L,z)=>L+z.timePassing.feedAmount.value+z.resourceGain.feedAmount.value+z.xpGain.feedAmount.value,0)),oe=w(()=>l.pow(1.1,a.level.value)),ue=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===Kn})),T.generators.timePassing.modifier]),V=w(()=>new l(ue.apply(1)).toNumber()),W=ne(()=>[yt(()=>({addend:i,description:"Allocated time slots"})),yt(()=>({addend:1,description:"Bonus generator",enabled:()=>Dt.job.active.value&&Dt.milestones.bonusGeneratorMilestone.earned.value}))]),Re=w(()=>W.apply(1)),Te=ne(()=>[A(()=>({multiplier:oe,description:`${a.name} level (x1.1 each)`})),A(()=>({multiplier:()=>l.pow(Re.value,2),description:"Allocated time slots",enabled:s.earned})),T.generators.resourceGain.modifier,Dt.plants.energeia.modifier]),_e=ne(()=>[T.generators.xpGain.modifier]),Ze={timePassing:ue,timeSlotsGenerating:W,energeiaGain:Te,jobXpGain:_e},[ae,Et]=Wt(()=>[{title:"Time Passing",modifier:ue,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||d.earned.value},{title:"Generators",modifier:W,base:1},{title:"Energeia Gain",modifier:Te,base:1},{title:`${a.name} EXP Gain`,modifier:_e,base:1,baseText:"Base (per energeia gained)"}]),pt=["resourceGain","xpGain","timePassing"].map(L=>Wt(()=>Object.values(T).map(z=>({title:un(z.job)+" Battery Charge Gain",modifier:z[L].chargeGain,enabled:()=>gt(z[L].visibility),base:0})))),ze=Pn({general:()=>({display:"General",glowColor(){return ze.activeTab.value===this.tab?t:""},tab:ae,generalTabCollapsed:Et}),...pt.reduce((L,[z,de],fe)=>{const ke=["timePassing","resourceGain","xpGain"][fe];return L[ke]=()=>({display:un(ke),glowColor(){return ze.activeTab.value===this.tab?t:""},tab:z,tabCollapsed:de,visibility:[d,u,p][fe].earned}),L},{})},()=>({style:`--layer-color: ${t}`}));this.on("preUpdate",L=>{if(a.timeLoopActive.value===!1&&G.tabs[1]!==Kn)return;L=l.times(L,V.value).toNumber();let z=new l(0);Object.values(T).forEach(fe=>{Object.values(fe).forEach(ke=>{typeof ke!="string"&&(ke.charge.value=l.add(ke.charge.value,l.times(ke.computedChargeGain.value,L)).clampMin(0),z=z.add(ke.feedAmount.value))})}),n.value=l.sub(n.value,l.div(z,100).times(n.value));const de=l.times(Te.apply(1),L);n.value=l.add(n.value,de),a.xp.value=l.add(a.xp.value,_e.apply(de))});const ut=Pn({generation:()=>({display:"Generation",tab:zn(()=>({display:k(()=>{let L;return r(F,null,[r($i,null,{default:()=>[r(dl,{speed:V.value},null),Dt.milestones.bonusGeneratorMilestone.earned.value?r(dl,{speed:V.value},null):null]}),s.earned.value?r(F,null,[r("div",null,[at.hasTimeSlotAvailable.value?"Click to allocate or deallocate additional time loops to this job":"Free up time slots to allocate additional time loops to this job"]),r($i,null,Td(L=Array(at.hasTimeSlotAvailable.value?i.value+1:i.value).fill(0).map((z,de)=>r(dl,{speed:V.value,width:"100px",height:"100px",style:l.lt(i.value,de+1)?"opacity: 0.25":"",onClick:()=>l.lt(i.value,de+1)?i.value++:i.value--},null)))?L:{default:()=>[L]})]):null])})})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),batteries:()=>({display:"Batteries",tab:zn(()=>({display:k(()=>r(F,null,[r(xe,null,null),r("div",null,[m("Allocate a percentage of "),n.displayName,m("/s to feed into each battery.")]),r("div",null,[m("Batteries discharge over time.")]),r(xe,null,null),bl(Object.values(T).filter(L=>o(at.jobs[L.job].visibility)===Le.Visible).map(L=>r(F,null,[r("h2",null,[at.jobs[L.job].name]),Vi(L.resourceGain,L.xpGain,L.timePassing)])),r(xe,{height:"50px"},null))]))})),visibility:d.earned})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}}));return{name:e,color:t,minWidth:670,energeia:n,extraTimeSlotsAllocated:i,job:a,modifiers:Ze,milestones:f,collapseMilestones:C,batteries:T,modifierTabs:ze,tabs:ut,display:k(()=>{const L=[...b.value];return M.value&&L.push(M.value),r(F,null,[r(qi,{resource:n,color:t},null),li(...L,k(()=>dn(r(ri,{collapsed:C,content:Q,display:C.value?"Show other completed milestones":"Hide other completed milestones"},null),[[$n,o(ie)]]))),r(xe,null,null),d.earned.value?We(ut):We(ut.activeTab.value)])})}});var Id=["I am the petals of the flower that is my inner soul","I am the stem of the flower that is my inner mind","These flowers are powerful, I can feel it","There is so much power here. I must fulfill their potential","How will I store all these flowers?","Euch; These flowers taste terrible!","It is a mistake to do things too easily","You are my number one priority now","Flowers? I love flowers!","It's the time you have wasted for your rose that makes your rose so important","What is essential is invisible to the eye","The more I collect, the stronger I become","Each bloom is a new beginning","My path is lined with petals","Nature's magic lies within these flowers","A touch of enchantment in every blossom","Every flower whispers secrets of the arcane","These flowers hold the key to untold magic","The beauty of the blooms belies their hidden power","With each flower, I delve deeper into the mystical","Like a wayfarer seeking truth, I gather petals","Chasing blooms as if chasing the wind","Each petal, a fragment of a greater spell","The magic within these flowers fuels my journey"];const Ed=!1,Fd=!0,qd={min:.5,max:2},Dd=.005,Ad=-1,Ld=1e3,Rd=!0,Od={x:0,y:0},jd=[{type:"alpha",config:{alpha:{list:[{time:0,value:1},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:2},{time:1,value:25}]},minMult:2}},{type:"scale",config:{scale:{list:[{time:0,value:.001},{time:1,value:1}]},minMult:.25}},{type:"color",config:{color:{list:[{time:0,value:"#EB428F"},{time:.25,value:"#F545ED"},{time:.5,value:"#B949DE"},{time:.75,value:"#9945F5"},{time:1,value:"#6442EB"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:20,minStart:270,maxStart:300}},{type:"textureRandom",config:{textures:["/Fire.png"]}},{type:"spawnShape",config:{type:"torus",data:{x:0,y:0,radius:75,innerRadius:75,affectRotation:!0}}}];var Ql={emit:Ed,autoUpdate:Fd,lifetime:qd,frequency:Dd,emitterLifetime:Ad,maxParticles:Ld,addAtBack:Rd,pos:Od,behaviors:jd};const Zl=gi(),pl="flowers",qe=Fn(pl,function(){const e="Harvesting Flowers",t="#A626D1",n=pn(0,"moly"),i=tl(n),a=Hn(e,()=>({color:t,image:"/harvesting.png",imageFocus:{x:"50%",y:"65%"},symbol:"\u2698",randomQuips(){return[...Id,...oi]},resource:Ut(n),layerID:pl,modifierInfo:k(()=>rt(Jn)),modifierModalAttrs:{class:"flowers-modal"},showNotif:()=>Object.values(ke).some(te=>te.showNotif.value)})),s=w(()=>Object.values(ke).filter(te=>te.active.value).length),u=w(()=>1),c=el(()=>({fullscreen:!1,zIndex:-1,boundingRect:X(null),onContainerResized(te){this.boundingRect.value=te},onHotReload(){Object.values(ke).forEach(te=>{te.particleEffect.value.then(jt=>jt.destroy()),te.particleEffect.value=c.addEmitter(te.particleEffectConfig),te.updateParticleEffect(te.active.value)})}})),p=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,2)),display:{requirement:`Achieve ${a.name} Level 2`,effectDisplay:"Double T\xE9chnasma potency and unlock experience for spells"}})),d=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,4)),display:{requirement:`Achieve ${a.name} Level 4`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Theriz\xF3"},visibility:p.earned})),v=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,6)),display:{requirement:`Achieve ${a.name} Level 6`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Pr\u014Dfici\u014D"},visibility:d.earned})),f=ye(()=>({requirements:be(()=>l.gte(a.rawLevel.value,8)),display:{requirement:`Achieve ${a.name} Level 8`,effectDisplay:"Double T\xE9chnasma potency and unlock a new spell - Schol\u0113"},visibility:v.earned})),_={spellExpMilestone:p,flowerSpellMilestone:d,chargeSpellMilestone:v,expSpellMilestone:f},C=[f,v,d,p],b=H(!0),M=w(()=>C.filter(te=>te.earned.value===!1)),{firstFeature:Q,collapsedContent:ie,hasCollapsedContent:P}=ai(C,te=>te.earned.value),T=Wl(()=>({visibility:Le.Hidden}));function J(te,jt,za,Rl,ci,Ol){const hn=Object.keys(ci).reduce((Tt,He)=>{const An=H(!1);return Tt[He]=Wl(()=>({display:ci[He].display,classes(){return{"spell-node":!0,bought:An.value}},bought:An,canClick(){var yi;return!(hn[He].bought.value||l.gte(rl.value,Wn.value)||(yi=ci[He].requirements)!=null&&yi.some(bn=>!hn[bn].bought.value))},onClick(){hn[He].bought.value=!0}})),Tt},{}),sl=H(0),Wn=w(()=>l.clampMin(sl.value,1).log10().floor()),rl=w(()=>Object.values(hn).reduce((Tt,He)=>Tt+(He.bought.value?1:0),0)),jl=w(()=>{const Tt=l.eq(Wn.value,0)?0:l.pow10(Wn.value),He=l.pow10(l.add(Wn.value,1));return l.sub(sl.value,Tt).div(l.sub(He,Tt)).times(100)}),Ai=jn(()=>({canClick(){return Bt.active.value||s.value<u.value},display(){return{title:`<h2>${te}</h2>`,description:k(()=>r(F,null,[r("br",null,null),r("i",null,[jt]),r("br",null,null),r("br",null,null),r("h3",null,[za]),p.earned.value?r("div",{class:"spell-level"},[r("div",{class:"spell-exp",style:`--exp: ${je(jl.value)}%`},null),r("span",null,[m("("),Rt(l.sub(Wn.value,rl.value)),m("/"),Rt(Wn.value),m(")")])]):null,Bl.value?r(Mn,null,null):null]))}},classes(){return{spellSelector:!0,activeSpell:Bt.active.value,can:o(Ai.canClick)}},onClick(){Bt.active.value=!Bt.active.value,Bt.castingTime.value=0},visibility:Rl})),Bl=Pi(Ai,()=>Ol.some(Tt=>Tt.some(He=>He!==T&&o(hn[He].canClick)))),Bt={treeNodes:hn,tree:Ic(()=>({nodes:Ol.map(Tt=>Tt.map(He=>He===T?T:hn[He])),branches:()=>Object.keys(ci).reduce((Tt,He)=>ci[He].requirements?[...Tt,...ci[He].requirements.map(An=>({startNode:hn[He],endNode:hn[An],stroke:hn[An].bought.value?"#B949DE":"var(--locked)","stroke-width":"4px"}))]:Tt,[])})),visibility:Rl,selector:Ai,showNotif:Bl,particleEffectConfig:Ql,active:H(!1),xp:sl,castingTime:H(0),level:Wn,spentPoints:rl,levelProgress:jl,particleEffectWatcher:X(null),particleEffect:X(c.addEmitter(Ql)),async updateParticleEffect(Tt){var An,yi;const He=await Bt.particleEffect.value;(yi=(An=Bt.particleEffectWatcher).value)==null||yi.call(An),Tt?Bt.particleEffectWatcher.value=et([()=>{var bn;return(bn=qe.nodes.value[Ai.id])==null?void 0:bn.rect},c.boundingRect],async([bn,ol])=>{bn!=null&&ol!=null?(He.cleanup(),He.updateOwnerPos(bn.x+bn.width/2-ol.x,bn.y+bn.height/2-ol.y),He.resetPositionTracking(),He.emit=!0):He.emit=!1},{immediate:!0}):(He.emit=!1,Bt.particleEffectWatcher.value=null)}};return et(Bt.active,Bt.updateParticleEffect),et(Bt.level,(Tt,He)=>{De.active!==G.id||l.neq(Tt,l.add(He,1))||(Bt.notif!=null&&Zl.dismiss(Bt.notif),Bt.notif=Zl.info(`${te} is now level ${Tt}!`))}),Bt}const oe=H(0),ue=Gi(()=>({direction:$e.Right,height:20,width:200,fillStyle:()=>`--time: ${(G.time%1e8/10).toLocaleString("fullwide",{useGrouping:!1})}px; --time-deg: ${(G.time%1e8/100).toLocaleString("fullwide",{useGrouping:!1})}deg`,classes:{chargeBar:!0},progress(){return l.div(oe.value,bt.value)},visibility:v.earned})),V=w(()=>l.pow(1.1,a.level.value)),W=w(()=>l.pow(1.25,Object.values(ke).filter(te=>gt(te.visibility.value)).length)),Re=V,Te=V,_e=w(()=>l.pow(1.1,ae.level.value)),Ze=V,ae=J("T\xE9chnasma","Practice using the flowers to perform minor magical tricks.","Gain job exp.",!0,{moreJobXpFlat:{display:"x4 job exp"},moreJobXpPerSpell:{display:k(()=>r("div",null,[m("x1.25 job exp per known spell"),r("br",null,null),m("(x"),je(W.value),m(")")])),requirements:["moreJobXpFlat"]},morePotencyPerJobLevel:{display:k(()=>r("div",null,[m("Additional x1.1 all spell potency per job level"),r("br",null,null),m("(x"),je(Re.value),m(")")])),requirements:["moreJobXpFlat"]},moreJobXpPerJobLevel:{display:k(()=>r("div",null,[m("Additional x1.1 job exp per job level"),r("br",null,null),m("(x"),je(Te.value),m(")")])),requirements:["moreJobXpPerSpell"]},moreJobXpPerSpellLevel:{display:k(()=>r("div",null,[m("Additional x1.1 job exp per T\xE9chnasma level"),r("br",null,null),m("(x"),je(_e.value),m(")")])),requirements:["moreJobXpPerSpell"]},morePotencyOverTime:{display:"Additional spell potency the longer it's been consecutively casted",requirements:["morePotencyPerJobLevel"]},moreSpellXpPerJobLevel:{display:k(()=>r("div",null,[m("x1.1 all spell exp per job level"),r("br",null,null),m("(x"),je(Ze.value),m(")")])),requirements:["morePotencyPerJobLevel"]}},[["moreJobXpFlat"],["moreJobXpPerSpell",T,"morePotencyPerJobLevel"],["moreJobXpPerJobLevel","moreJobXpPerSpellLevel","morePotencyOverTime","moreSpellXpPerJobLevel"]]),Et=w(()=>Object.values(ke).filter(te=>gt(te.visibility.value)).length*.25),pt=w(()=>l.pow(1.1,L.level.value)),ze=w(()=>l.log10(l.add(n.value,1)).pow(.777).add(1)),ut=r(F,null,[m("log"),r("sub",null,[m("2")]),m("(flowers + 1)"),r("sup",null,[m("0.777")]),m(" + 1")]),L=J("Theriz\xF3","Use the magic of the flowers to harvest themselves. They should make my spells more potent.","Gain flowers.",d.earned,{moreFlowersFlat:{display:"x2 flowers gain"},moreFlowersPerSpell:{display:k(()=>r("div",null,[m("+.25x Theriz\xF3 potency per known spell"),r("br",null,null),m("(+"),je(Et.value),m(")")])),requirements:["moreFlowersFlat"]},moreFlowersPerLevel:{display:k(()=>r("div",null,[m("Additional x1.1 Theriz\xF3 potency per Theriz\xF3 level"),r("br",null,null),m("(x"),je(pt.value),m(")")])),requirements:["moreFlowersPerSpell"]},moreJobXpPerFlower:{display:k(()=>r("div",null,[m("Flowers affect job exp"),r("br",null,null),m("(x"),je(ze.value),m(")")])),requirements:["moreFlowersFlat"]},moreSpellXpPerFlower:{display:k(()=>r("div",null,[m("Flowers affect all spell exp"),r("br",null,null),m("(x"),je(ze.value),m(")")])),requirements:["moreJobXpPerFlower"]},morePotencyPerFlower:{display:k(()=>r("div",null,[m("Flower's affect all spell potency twice"),r("br",null,null),m("(x"),je(ze.value),m(")")])),requirements:["moreSpellXpPerFlower"]},passiveFlowerGain:{display:"1% of flower gain when casting other spells",requirements:["moreSpellXpPerFlower"]}},[["moreFlowersPerLevel","moreFlowersPerSpell","moreFlowersFlat"],[T,T,"moreJobXpPerFlower"],[T,"passiveFlowerGain","moreSpellXpPerFlower"],[T,T,"morePotencyPerFlower"]]),z=J("Pr\u014Dfici\u014D","Charge up magic to cast another spell with greater potency.","Charge spell potency.",v.earned,{spellEff:{display:"x1.25 spell potency when discharging"},fasterChargeFlat:{display:"x1.5 faster charging",requirements:["spellEff"]},fasterChargeByLevel:{display:"Additional x1.1 faster charging for each Pr\u014Dfici\u014D level",requirements:["fasterChargeFlat"]},betterChargeMulti:{display:"Charge effect on spells is raised ^1.1",requirements:["fasterChargeByLevel"]},largerChargeFlat:{display:"x1.5 max charge",requirements:["spellEff"]},largerChargeByLevel:{display:"Additional x1.2 max charge for each Pr\u014Dfici\u014D level",requirements:["largerChargeFlat"]},slowerDischargeByLevel:{display:"x1.05 slower discharge for each of that spell's levels",requirements:["largerChargeByLevel"]}},[["spellEff"],["fasterChargeFlat","largerChargeFlat"],["fasterChargeByLevel","largerChargeByLevel"],["betterChargeMulti","slowerDischargeByLevel"]]),de=w(()=>l.div(fe.level.value,10)),fe=J("Schol\u0113","Practice a difficult routine that improves your ability at casting all spells.","Gain spell exp.",f.earned,{moreSpellXp:{display:"All spells gain double exp"},moreXpSpellXp:{display:"T\xE9chnasma spell gains double exp",requirements:["moreSpellXp"]},moreFlowerSpellXp:{display:"Theriz\xF3 spell gains double exp",requirements:["moreSpellXp"]},moreChargeSpellXp:{display:"Pr\u014Dfici\u014D spell gains double exp",requirements:["moreSpellXp"]},moreMassXpSpellXp:{display:"Schol\u0113 spell gains double exp",requirements:["moreSpellXp"]},moreXpPerLevel:{display:k(()=>r("div",null,[m("+.1x other spell exp per level of this spell"),r("br",null,null),m("(+"),je(de.value),m(")")])),requirements:["moreSpellXp"]},morePotency:{display:"Double potency of this spell",requirements:["moreSpellXp"]}},[["moreXpSpellXp","moreFlowerSpellXp"],["moreXpPerLevel","moreSpellXp","morePotency"],["moreChargeSpellXp","moreMassXpSpellXp"]]),ke={xpSpell:ae,flowerSpell:L,chargeSpell:z,massXpSpell:fe},wt=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===pl})),Ve.batteries.flowers.timePassing.modifier]),Nt=w(()=>wt.apply(1)),K=ne(()=>[A(()=>({multiplier:1.25,description:"Pr\u014Dfici\u014D skill (x1.25 when discharging)",enabled:()=>z.treeNodes.spellEff.bought.value&&l.gt(oe.value,0)})),Qi(()=>({exponent:1.1,description:"Pr\u014Dfici\u014D skill (flat)",enabled:z.treeNodes.betterChargeMulti.bought}))]),it=w(()=>K.apply(l.log10(l.add(oe.value,1)).add(1))),Oe=ne(()=>[A(()=>({multiplier:V,description:`${a.name} level (x1.1 each)`})),A(()=>({multiplier:Re,description:`T\xE9chnasma skill (x1.1 per ${a.name} level)`,enabled:ae.treeNodes.morePotencyPerJobLevel.bought})),A(()=>({multiplier:ze,description:k(()=>r(F,null,[m("Flowers Effect ("),ut,m(")")]))})),A(()=>({multiplier:ze,description:"Theriz\xF3 skill (Re-apply flowers effect)",enabled:L.treeNodes.morePotencyPerFlower.bought}))]),Xe=w(()=>Oe.apply(1)),Ge=ne(()=>[A(()=>({multiplier:Ze,description:`T\xE9chnasma skill (x1.1 per ${a.name} level)`,enabled:ae.treeNodes.moreSpellXpPerJobLevel.bought})),A(()=>({multiplier:ze,description:k(()=>r(F,null,[m("Theriz\xF3 skill ("),ut,m(")")])),enabled:L.treeNodes.moreSpellXpPerFlower.bought})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreSpellXp.bought}))]),ce=w(()=>Ge.apply(1)),mt=ne(()=>[A(()=>({multiplier:Xe,description:"All Spell Potency"})),A(()=>({multiplier:2,description:"Spell EXP milestone (flat)",enabled:p.earned})),A(()=>({multiplier:2,description:"Theriz\xF3 milestone (flat)",enabled:d.earned})),A(()=>({multiplier:2,description:"Pr\u014Dfici\u014D milestone (flat)",enabled:v.earned})),A(()=>({multiplier:2,description:"Schol\u0113 milestone (flat)",enabled:f.earned})),A(()=>({multiplier:()=>l.pow(1.1,ae.level.value),description:"T\xE9chnasma level (x1.1 each)",enabled:p.earned})),A(()=>({multiplier:()=>l.log2(l.add(ae.castingTime.value,1)).div(10).add(1),description:k(()=>r(F,null,[m("T\xE9chnasma skill (log"),r("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:ae.treeNodes.morePotencyOverTime.bought})),A(()=>({multiplier:it,description:"Charge Multiplier",enabled:v.earned}))]),_t=w(()=>mt.apply(1)),ft=ne(()=>[yt(()=>({addend:()=>l.div(fe.level.value,10),description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:fe.treeNodes.moreXpPerLevel.bought})),A(()=>({multiplier:ce,description:"All Spell EXP Gain"})),A(()=>({multiplier:_t,description:"T\xE9chnasma potency"})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreXpSpellXp.bought}))]),$=ne(()=>[yt(()=>({addend:_t,description:"T\xE9chnasma potency"})),A(()=>({multiplier:V,description:`${a.name} level (x1.1 each)`})),A(()=>({multiplier:4,description:"T\xE9chnasma skill (flat)",enabled:ae.treeNodes.moreJobXpFlat.bought})),A(()=>({multiplier:W,description:"T\xE9chnasma skill (x1.25 per known spell)",enabled:ae.treeNodes.moreJobXpPerSpell.bought})),A(()=>({multiplier:Te,description:`T\xE9chnasma skill (x1.1 per ${a.name} level)`,enabled:ae.treeNodes.moreJobXpPerJobLevel.bought})),A(()=>({multiplier:_e,description:"T\xE9chnasma skill (x1.1 per T\xE9chnasma level)",enabled:ae.treeNodes.moreJobXpPerSpellLevel.bought})),A(()=>({multiplier:ze,description:k(()=>r(F,null,[m("Flowers Effect ("),ut,m(")")])),enabled:L.treeNodes.moreJobXpPerFlower.bought})),Ve.batteries.study.xpGain.modifier]),R=ne(()=>[A(()=>({multiplier:()=>{var te;return l.pow(1/1.05,(te=ae.level.value)!=null?te:0)},description:"Theriz\xF3 skill (/1.05 per T\xE9chnasma level)",enabled:z.treeNodes.slowerDischargeByLevel.bought,smallerIsBetter:!0}))]),O=w(()=>R.apply(St.value)),we=ne(()=>[yt(()=>({addend:Et,description:"Theriz\xF3 skill (+.25 per known spell)",enabled:L.treeNodes.moreFlowersPerSpell.bought})),A(()=>({multiplier:Xe,description:"All Spell Potency"})),A(()=>({multiplier:()=>l.pow(1.1,L.level.value),description:"Theriz\xF3 level (x1.1 each)",enabled:p.earned})),A(()=>({multiplier:()=>l.log2(l.add(L.castingTime.value,1)).div(10).add(1),description:k(()=>r(F,null,[m("T\xE9chnasma skill (log"),r("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:ae.treeNodes.morePotencyOverTime.bought})),A(()=>({multiplier:it,description:"Charge Multiplier",enabled:v.earned}))]),le=w(()=>we.apply(1)),Ke=ne(()=>[yt(()=>({addend:de,description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:fe.treeNodes.moreXpPerLevel.bought})),A(()=>({multiplier:ce,description:"All Spell EXP Gain"})),A(()=>({multiplier:le,description:"Theriz\xF3 potency"})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreFlowerSpellXp.bought}))]),Ct=ne(()=>[yt(()=>({addend:le,description:"Theriz\xF3 potency"})),A(()=>({multiplier:2,description:"Theriz\xF3 skill (flat)",enabled:L.treeNodes.moreFlowersFlat.bought})),A(()=>({multiplier:pt,description:"Theriz\xF3 skill (x1.1 per Theriz\xF3 level)",enabled:L.treeNodes.moreFlowersPerLevel.bought})),Ve.batteries.study.resourceGain.modifier,Dt.plants.moly.modifier]),vt=w(()=>Ct.apply(0)),xt=ne(()=>[yt(()=>({addend:.01,description:"Theriz\xF3 skill (flat)",enabled:L.treeNodes.passiveFlowerGain.bought})),A(()=>({multiplier:vt,description:"Flower gain"}))]),Lt=ne(()=>[A(()=>({multiplier:()=>{var te;return l.pow(1/1.05,(te=L.level.value)!=null?te:0)},description:"Theriz\xF3 skill (/1.05 per Theriz\xF3 level)",enabled:z.treeNodes.slowerDischargeByLevel.bought,smallerIsBetter:!0}))]),se=w(()=>Lt.apply(St.value)),Ne=ne(()=>[A(()=>({multiplier:Xe,description:"All Spell Potency"})),A(()=>({multiplier:()=>l.pow(1.1,z.level.value),description:"Pr\u014Dfici\u014D level (x1.1 each)"})),A(()=>({multiplier:()=>l.log2(l.add(z.castingTime.value,1)).div(10).add(1),description:k(()=>r(F,null,[m("T\xE9chnasma skill (log"),r("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:ae.treeNodes.morePotencyOverTime.bought}))]),Ie=w(()=>Ne.apply(1)),Y=ne(()=>[yt(()=>({addend:()=>l.div(fe.level.value,10),description:"Schol\u0113 skill (+.1 per Schol\u0113 level)",enabled:fe.treeNodes.moreXpPerLevel.bought})),A(()=>({multiplier:ce,description:"All Spell EXP Gain"})),A(()=>({multiplier:Ie,description:"Pr\u014Dfici\u014D potency"})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreChargeSpellXp.bought}))]),Ye=ne(()=>[yt(()=>({addend:Ie,description:"Pr\u014Dfici\u014D potency"})),A(()=>({multiplier:1.5,description:"Pr\u014Dfici\u014D skill (flat)",enabled:z.treeNodes.largerChargeFlat.bought})),A(()=>({multiplier:()=>l.pow(1.2,z.level.value),description:"Pr\u014Dfici\u014D skill (x1.2 per Pr\u014Dfici\u014D level)",enabled:z.treeNodes.largerChargeByLevel.bought}))]),bt=w(()=>Ye.apply(0)),Kt=ne(()=>[yt(()=>({addend:()=>l.div(Ie.value,10),description:"Pr\u014Dfici\u014D potency (/10)"})),A(()=>({multiplier:1.5,description:"Pr\u014Dfici\u014D skill (flat)",enabled:z.treeNodes.fasterChargeFlat.bought})),A(()=>({multiplier:()=>l.pow(1.1,z.level.value),description:"Pr\u014Dfici\u014D skill (x1.1 per Pr\u014Dfici\u014D level)",enabled:z.treeNodes.fasterChargeFlat.bought}))]),$t=w(()=>Kt.apply(0)),Yt=ne(()=>[yt(()=>({addend:()=>l.div(Ie.value,10),description:"Pr\u014Dfici\u014D potency (/10)",smallerIsBetter:!0}))]),St=w(()=>Yt.apply(0)),vn=ne(()=>[A(()=>({multiplier:Xe,description:"All Spell Potency"})),A(()=>({multiplier:()=>l.pow(1.1,fe.level.value),description:"Schol\u0113 level (x1.1 each)"})),A(()=>({multiplier:()=>l.log2(l.add(fe.castingTime.value,1)).div(10).add(1),description:k(()=>r(F,null,[m("T\xE9chnasma skill (log"),r("sub",null,[m("2")]),m("(casting time)/10)")])),enabled:ae.treeNodes.morePotencyOverTime.bought})),A(()=>({multiplier:it,description:"Charge Multiplier",enabled:v.earned})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.morePotency.bought}))]),Cn=w(()=>vn.apply(1)),en=ne(()=>[A(()=>({multiplier:ce,description:"All Spell EXP Gain"})),A(()=>({multiplier:Cn,description:"Schol\u0113 potency"})),A(()=>({multiplier:2,description:"Schol\u0113 skill (flat)",enabled:fe.treeNodes.moreMassXpSpellXp.bought}))]),Ht=ne(()=>[yt(()=>({addend:()=>l.times(Cn.value,1),description:"Schol\u0113 potency"})),Qi(()=>({exponent:.9,description:"(softcapped)"}))]),tn=ne(()=>[A(()=>({multiplier:()=>{var te;return l.pow(1/1.05,(te=fe.level.value)!=null?te:0)},description:"Pr\u014Dfici\u014D skill (/1.05 per Schol\u0113 level)",enabled:z.treeNodes.slowerDischargeByLevel.bought,smallerIsBetter:!0}))]),Mt=w(()=>tn.apply(St.value)),Sn={timePassing:wt,chargeMult:K,allSpellPotency:Oe,allSpellXpGain:Ge,xpSpellPotency:mt,xpSpellXp:ft,jobXpGain:$,jobXpDischargeRate:R,flowerSpellPotency:we,flowerSpellXp:Ke,flowerGain:Ct,flowerPassiveGain:xt,flowerDischargeRate:Lt,chargeSpellPotency:Ne,chargeSpellXp:Y,chargeCap:Ye,chargeRate:Kt,baseDischargeRate:Yt,massXpSpellPotency:vn,massXpSpellXp:en,massXpGain:Ht,massXpDischargeRate:tn},[I,pe]=Wt(()=>[{title:"Time Passing",modifier:wt,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:"Harvesting Flowers EXP Gain",subtitle:"When T\xE9chnasma is active",modifier:$,base:0,unit:"/sec"},{title:"All Spell Potency",modifier:Oe},{title:"All Spell EXP Gain",subtitle:"When the spell is active",modifier:Ge,unit:"/sec"},{title:"Flowers Gain",subtitle:"When Theriz\xF3 is active",modifier:Ct,base:0,unit:"/sec",visible:d.earned},{title:"Flowers Gain",subtitle:"When Theriz\xF3 is NOT active",modifier:xt,base:0,unit:"/sec",visible:()=>d.earned.value&&l.neq(xt.apply(0),0)}]),[Ee,Fe]=Wt(()=>[{title:"T\xE9chnasma Potency",modifier:mt},{title:"T\xE9chnasma EXP Gain",subtitle:"When T\xE9chnasma is active",modifier:ft,unit:"/sec"},{title:"Discharge Rate",subtitle:"When T\xE9chnasma is active",modifier:R,base:St,unit:"/sec",visible:v.earned,smallerIsBetter:!0}]),[ct,Pt]=Wt(()=>[{title:"Theriz\xF3 Potency",modifier:we},{title:"Theriz\xF3 EXP Gain",subtitle:"When Theriz\xF3 is active",modifier:Ke,base:.1,unit:"/sec"},{title:"Discharge Rate",subtitle:"When Theriz\xF3 is active",modifier:Lt,base:St,unit:"/sec",visible:v.earned,smallerIsBetter:!0}]),[Ot,gn]=Wt(()=>[{title:"Pr\u014Dfici\u014D Potency",modifier:Ne},{title:"Pr\u014Dfici\u014D EXP Gain",subtitle:"When Pr\u014Dfici\u014D is active",modifier:Y,base:.01,unit:"/sec"},{title:"Charge Multiplier",subtitle:"When a non-Pr\u014Dfici\u014D spell is active",modifier:K,base:()=>l.log2(l.add(oe.value,1)).add(1),unit:"x",baseText:k(()=>r(F,null,[m("Base (log"),r("sub",null,[m("2")]),m("(charge + 1) + 1)")]))},{title:"Charge Rate",subtitle:"When Pr\u014Dfici\u014D is active",modifier:Kt,base:0,unit:"/sec"},{title:"Base Discharge Rate",subtitle:"When a non-Pr\u014Dfici\u014D spell is active",modifier:Yt,base:0,unit:"/sec",smallerIsBetter:!0},{title:"Maximum Charge",modifier:Ye,base:0}]),[Dn,ui]=Wt(()=>[{title:"Schol\u0113 Potency",modifier:vn},{title:"Schol\u0113 EXP Gain",subtitle:"When Schol\u0113 is active",modifier:en,base:.001,unit:"/sec"},{title:"Other Spell EXP Gain Efficiency",subtitle:"When Schol\u0113 is active",modifier:Ht,base:0,unit:"%"},{title:"Discharge Rate",subtitle:"When Schol\u0113 is active",modifier:tn,base:St,unit:"/sec",visible:v.earned,smallerIsBetter:!0}]),Jn=Pn({general:()=>({display:"General",glowColor(){return Jn.activeTab.value===this.tab?t:""},tab:I,generalTabCollapsed:pe}),xpSpell:()=>({display:"T\xE9chnasma",glowColor(){return Jn.activeTab.value===this.tab?t:""},tab:Ee,xpSpellTabCollapsed:Fe}),flowerSpell:()=>({display:"Theriz\xF3",visibility:d.earned,glowColor(){return Jn.activeTab.value===this.tab?t:""},tab:ct,flowerSpellTabCollapsed:Pt}),chargeSpell:()=>({display:"Pr\u014Dfici\u014D",visibility:v.earned,glowColor(){return Jn.activeTab.value===this.tab?t:""},tab:Ot,chargeSpellTabCollapsed:gn}),massXpSpell:()=>({display:"Schol\u0113",visibility:f.earned,glowColor(){return Jn.activeTab.value===this.tab?t:""},tab:Dn,massXpSpellTabCollapsed:ui})},()=>({style:`--layer-color: ${t}`}));return this.on("update",te=>{if(!!a.active.value){if(te=l.times(te,Nt.value).toNumber(),ae.active.value&&(a.xp.value=l.add(a.xp.value,l.times($.apply(0),te)),p.earned.value&&(ae.xp.value=l.add(ae.xp.value,l.times(ft.apply(1),te))),ae.castingTime.value+=te,oe.value=l.max(l.sub(oe.value,l.times(O.value,te)),0)),L.active.value)n.value=l.min(at.chapter.value>1?l.dInf:1e7,l.add(n.value,l.times(Ct.apply(0),te))),p.earned.value&&(L.xp.value=l.add(L.xp.value,l.times(Ke.apply(.1),te))),L.castingTime.value+=te,oe.value=l.max(l.sub(oe.value,l.times(se.value,te)),0);else{const jt=xt.apply(0);l.neq(jt,0)&&(n.value=l.min(at.chapter.value>1?l.dInf:1e7,l.add(n.value,l.times(jt,te))))}if(z.active.value&&(z.xp.value=l.add(z.xp.value,l.times(Y.apply(.01),te)),z.castingTime.value+=te,oe.value=l.min(l.add(oe.value,l.times($t.value,te)),bt.value)),fe.active.value){const jt=l.div(Ht.apply(0),100);ae.xp.value=l.add(ae.xp.value,l.times(ft.apply(jt),te)),L.xp.value=l.add(L.xp.value,l.times(Ke.apply(jt),te)),z.xp.value=l.add(z.xp.value,l.times(Y.apply(jt),te)),fe.xp.value=l.add(fe.xp.value,l.times(en.apply(.001),te)),fe.castingTime.value+=te,oe.value=l.max(l.sub(oe.value,l.times(Mt.value,te)),0)}}}),{name:e,color:t,minWidth:670,flowers:n,bestMoly:i,job:a,spells:ke,modifiers:Sn,milestones:_,collapseMilestones:b,chargeAmount:oe,modifierTabs:Jn,display:k(()=>{const te=[...M.value];return Q.value&&te.push(Q.value),r(F,null,[dn(r(qi,{resource:n,color:t,effectDisplay:`multiplying spell potency by x${je(ze.value)}`},null),[[$n,d.earned.value]]),li(...te,k(()=>dn(r(ri,{collapsed:b,content:ie,display:b.value?"Show other completed milestones":"Hide other completed milestones"},null),[[$n,o(P)]]))),r(xe,null,null),r("div",{style:"position: relative; z-index: 1"},[m("You can cast "),Rt(u.value),m(" spell"),u.value===1?"":"s",m(" at a time")]),hl(...Object.values(ke).map(jt=>jt.selector)),v.earned.value?r($i,{style:"margin-top: 40px !important; margin-bottom: -20px;"},{default:()=>[rt(ue),r("span",{style:"margin-left: 10px"},[je(it.value),m("x")])]}):null,p.earned.value?Object.values(ke).filter(jt=>jt.active.value).map(jt=>r(ed,{spell:jt},null)):null,rt(c)])})}}),Bd={},Vd={style:{"white-space":"nowrap","font-size":"larger","font-family":"initial"}},zd=m(" \u230A\xA0"),Gd=m("\xA0\u230B ");function Ud(e,t){return h(),x("span",Vd,[zd,Zt(e.$slots,"default"),Gd])}var Kl=me(Bd,[["render",Ud]]);const Xd={},Hd={style:{"white-space":"nowrap"}},Jd=g("span",{style:{"font-size":"larger","font-family":"initial"}},"\u221A",-1),Wd={style:{display:"inline-block","border-top":"1px solid","padding-left":"0.2em"}};function Qd(e,t){return h(),x("span",Hd,[Jd,g("div",Wd,[Zt(e.$slots,"default")])])}var Zd=me(Xd,[["render",Qd]]);const Yl={gold:"\u2609",silver:"\u263D",mercury:"\u263F",copper:"\u2640",iron:"\u2642",tin:"\u2643",lead:"\u2644"},Kd=["leo","virgo","libra","scorpio","capricorn","pisces"],Yd=["aries","taurus","gemini","cancer","sagittarius","aquarius"],Oi={aries:"fire",taurus:"earth",gemini:"air",cancer:"water",leo:"fire",virgo:"earth",libra:"air",scorpio:"water",sagittarius:"fire",capricorn:"earth",aquarius:"air",pisces:"water"},ep=Symbol("Card");function on(e){const t=H(0),n=H(0);return dt(i=>{const a=e.call(i,i);a.id=mn("card-"),a.type=ep,a[nt]=ki,a.amount=t,a.level=n,a.startingAmount!=null&&(t[fi]=t.value=a.startingAmount),a.display=k(()=>{var b;const f=a,_=he(typeof f.description=="function"?f.description(o(f.level)):o(f.description),"h3"),C=he((b=o(f.formula))!=null?b:"");return r(F,null,[r(_,null,null),r("div",{class:"metal"},[Yl[f.metal]]),f.formula!=null?r("div",{class:"formula"},[r(C,null,null)]):null])});const s=he(a.display),u=ki,c=k(()=>{var b;const f=a,_=he(typeof f.description=="function"?f.description(l.add(o(f.level),1)):o(f.description),"h3"),C=he((b=o(f.formula))!=null?b:"");return r(F,null,[r(_,null,null),r("div",{class:"metal"},[Yl[f.metal]]),f.formula!=null?r("div",{class:"formula"},[r(C,null,null)]):null])});a.renderForUpgrade=f=>r(u,Qt({id:`${a.id}-upg-${f}`},a[Be](),{display:f?c:s,class:"big",canClick:!1}),null),a.renderForDeck={[nt]:u,[Be]:()=>({id:`${a.id}-deck`,...a[Be](),display:k(()=>r(F,null,[r(s,null,null),r("div",{class:"badge amount"},[a.amount.value]),a.showNotif.value?r(Mn,{style:"left: 20px; top: -20px"},null):null])),onClick:a.onSelect})};const p=k(()=>r(F,null,[r(s,null,null),a.amount.value===0?r("div",{class:"badge new"},[m("NEW!")]):null]));a.renderForShop=k(()=>{const f=a;return f.price==null?r(u,Qt({id:`${a.id}-shop`},f[Be](),{class:{shop:!0,hidden:!0},canClick:!1}),null):r(u,Qt({id:`${a.id}-shop`},f[Be](),{class:{shop:!0},display:p,canClick:!1}),null)});const d=X(!0);let v=-1;return a.renderForPlay=f=>{const _=a,C=ki;return f.value!==v&&(d.value=!1,requestAnimationFrame(()=>d.value=!0),v=f.value),r(C,Qt({id:`${a.id}-play`},_[Be](),{class:{big:!0,playing:!0,flipping:d.value},canClick:!1}),null)},q(a,"description"),tt(a,"actions",{}),q(a,"formula"),a.showNotif=Pi(a.renderForDeck,a.shouldNotify.bind(a)),a[Be]=function(){const{id:f,display:_,sign:C}=this;return{id:f,display:_,visibility:Le.Visible,classes:{card:!0,dontMerge:!0,solar:Kd.includes(C),lunar:Yd.includes(C)},canClick:!0}},a})}function Aa(e,t){return q(t,"display"),q(t,"classes"),q(t,"style"),q(t,"direction"),tt(t,"direction",$e.Up),q(t,"xoffset"),q(t,"yoffset"),t.pinnable&&(t.pinned=H(!1,!1)),Vt(()=>{t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1,Nr(t.pinned)):e.pinned=t.pinned);const n=e[nt];e[nt]=lt;const i=e[Be].bind(e);e[Be]=function(){const{display:s,classes:u,style:c,direction:p,xoffset:d,yoffset:v,pinned:f}=this;return{element:{[nt]:n,[Be]:i},display:s,classes:u,style:o(c),direction:p,xoffset:d,yoffset:v,pinned:f}}.bind(t)}),t}const tp=Symbol("Repeatable");function La(e){const t=H(0);return dt(n=>{var d;const i=e.call(n,n);i.id=mn("repeatable-"),i.type=tp,i[nt]=ki,i.amount=t,i.amount[fi]=(d=i.initialAmount)!=null?d:0;const a={requirementMet:w(()=>l.sub(o(i.limit),i.amount.value)),requiresPay:!1,visibility:Le.None},s=El(i);wn(i.requirements)?(i.requirements.unshift(s),i.requirements.push(a)):i.requirements=[s,i.requirements,a],i.maxed=w(()=>l.gte(i.amount.value,o(i.limit))),q(i,"classes");const u=i.classes;i.classes=w(()=>{const v=o(u)||{};return i.maxed.value&&(v.bought=!0),v}),i.amountToIncrease=w(()=>o(i.maximize)?Ia(i.requirements):1),i.canClick=w(()=>nl(i.requirements));const c=i.onClick;i.onClick=function(v){const f=i;!o(f.canClick)||(Ea(i.requirements,o(i.amountToIncrease)),f.amount.value=l.add(f.amount.value,1),c==null||c(v))},q(i,"display");const p=i.display;return i.display=k(()=>{var f,_,C;const v=o(p);if(fn(v)){const b=he(v);return r(b,null,null)}if(v!=null){const b=i,M=he((f=v.title)!=null?f:"","h3"),Q=he((_=v.description)!=null?_:""),ie=he((C=v.effectDisplay)!=null?C:"");return r("span",null,[v.title==null?null:r("div",null,[r(M,null,null)]),v.description==null?null:r(Q,null,null),v.showAmount===!1?null:r("div",null,[r("br",null,null),o(b.limit)===l.dInf?r(F,null,[m("Amount: "),ge(b.amount.value)]):r(F,null,[m("Amount: "),ge(b.amount.value),m(" /")," ",ge(o(b.limit))])]),v.effectDisplay==null?null:r("div",null,[r("br",null,null),m("Currently: "),r(ie,null,null)]),b.maxed.value?null:r("div",null,[r("br",null,null),il(b.requirements,o(i.amountToIncrease))])])}return""}),q(i,"visibility"),tt(i,"visibility",Le.Visible),q(i,"limit"),tt(i,"limit",l.dInf),q(i,"style"),q(i,"mark"),q(i,"small"),q(i,"maximize"),i[Be]=function(){const{display:v,visibility:f,style:_,classes:C,onClick:b,canClick:M,small:Q,mark:ie,id:P}=this;return{display:v,visibility:f,style:o(_),classes:C,onClick:b,canClick:M,small:Q,mark:ie,id:P}},i})}const np=!1,ip=!0,lp={min:2,max:1.8},ap=.1,sp=-1,rp=1e3,op=!0,up={x:.5,y:.5},cp=[{type:"alpha",config:{alpha:{list:[{time:0,value:0},{time:.2,value:.4},{time:1,value:0}]}}},{type:"moveSpeedStatic",config:{min:10,max:10}},{type:"scale",config:{scale:{list:[{time:0,value:.5},{time:1,value:.1}]},minMult:1}},{type:"rotationStatic",config:{min:0,max:360}},{type:"blendMode",config:{blendMode:"screen"}},{type:"textureRandom",config:{textures:["/smokeparticle.png","/particle.png"]}},{type:"spawnShape",config:{type:"torus",data:{x:0,y:12.5,radius:25,innerRadius:0,affectRotation:!1}}}];var ea={emit:np,autoUpdate:ip,lifetime:lp,frequency:ap,emitterLifetime:sp,maxParticles:rp,addAtBack:op,pos:up,behaviors:cp},dp=["Now we're cooking","Alchemy's always been more of a philosophical experience for me","Transform!","The elements transform you just as much as you transform them","You cannot step twice into the same stream","Sometimes I wonder if there may be dozens of elements","Could I mix two elements to create something new? No, that wouldn't make sense","There is no intelligence where there is no need of change","But what good is time without change?","Elements? I love elements!","What doesn't challenge you, doesn't change you","Change is the only constant","Flowers and elements, a potent combination","Alchemy unveils the power hidden within","Turning the ordinary into the extraordinary","Every transformation brings new insights","From flowers to elements, the journey continues","These processes are a delicate balance","Unlocking the potential hidden in every bloom","Everything flows and nothing abides; everything gives way and nothing stays fixed","Change is the law of life","In the midst of change, we find purpose","Embrace change, explore new paths","Where flowers bloom, so does hope","Unlocking potential, one transformation at a time"];const pp=w(()=>at.chapter.value>1);function ji(e,t){return Object.assign({},ea,{behaviors:[...ea.behaviors,{type:"color",config:{color:{list:[{time:0,value:e},{time:1,value:t}]}}}]})}const ml="distill",Je=Fn(ml,function(){const e="Purifying Flowers",t="#267BD1",n=pn(0,"essentia"),i=tl(n),a=w(()=>Object.values(Te).some(K=>{var it;return o((it=K.showNotif)==null?void 0:it.value)})),s=Hn(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"25%",y:"60%"},symbol:"\u{1F76D}",randomQuips(){return[...dp,...oi]},resource:Ut(n),layerID:ml,modifierInfo:k(()=>rt(Nt)),visibility:pp,showNotif:a})),u=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,2)),display:{requirement:`Achieve ${s.name} Level 2`,effectDisplay:"Unlock Water"}})),c=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,4)),display:{requirement:`Achieve ${s.name} Level 4`,effectDisplay:"Unlock Principles"},visibility:u.earned})),p=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,5)),display:{requirement:`Achieve ${s.name} Level 5`,effectDisplay:'Unlock "Studying" Job'},visibility:c.earned,onComplete(){_n(xn,G)}})),d=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,6)),display:{requirement:`Achieve ${s.name} Level 6`,effectDisplay:"Unlock Air"},visibility:p.earned})),v=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,8)),display:{requirement:`Achieve ${s.name} Level 8`,effectDisplay:"Unlock Fire"},visibility:d.earned})),f=ye(()=>({requirements:be(()=>l.gte(s.rawLevel.value,10)),display:{requirement:`Achieve ${s.name} Level 10`,effectDisplay:'Unlock "Measuring" Job'},visibility:v.earned,onComplete(){_n(Se,G)}})),_={waterMilestone:u,principlesMilestone:c,studyMilestone:p,airMilestone:d,fireMilestone:v,experimentsMilestone:f},C=[f,v,d,p,c,u],b=H(!0),M=w(()=>C.filter(K=>K.earned.value===!1)),{firstFeature:Q,collapsedContent:ie,hasCollapsedContent:P}=ai(C,K=>K.earned.value),T=el(()=>({fullscreen:!1,zIndex:-1,boundingRect:X(void 0),onContainerResized(K){this.boundingRect.value=K},onHotReload(){Object.values(Te).forEach(K=>K.refreshParticleEffect())}})),J=w(()=>l.pow(1.1,s.level.value));function oe(K,it,Oe=""){const Xe=H(0),Ge=pn(0,K+" essence",2);let ce=[];const[mt,_t]=Wt(()=>ce);let ft=null,$=null;const R=ne(()=>[yt(()=>({addend:()=>{var O;return l.times((O=ft==null?void 0:ft.amount.value)!=null?O:0,5)},description:k(()=>r(F,null,[un(Oe),m(" effect (5 x "),Oe,m(" amount)")]))}))]);return Oe&&(ft=La(O=>{const we=Ta(()=>({resource:Ut(Ge),cost:E.variable(O.amount).pow_base(10)}));return{display:k(()=>r("div",null,[m("Prepare "),Oe,m(" to gain a portion of "),K,m(" whenever the above instrument is active"),r("br",null,null),m("("),ge(R.apply(0)),m("%)"),r("br",null,null),r("br",null,null),m("Cost:")," ",Nn(Ge,o(we.cost.evaluate()))," ",Ge.displayName,$!=null&&$.value?r(Mn,{style:"top: -25px"},null):null])),visibility:c.earned,requirements:we}}),$=Pi(ft,ft.canClick)),dt(()=>{const O=Object.assign({principle:"",prevElement:null,visible:!0},it()),we=Qe(O.visible),le=ne(()=>[]),Ke=w(()=>le.apply(l.times(qe.flowers.value,Xe.value).div(100).floor())),Ct=ne(()=>[A(()=>({multiplier:()=>l.div(Xe.value,100)})),A(()=>({multiplier:J,description:`${s.name} level (x1.1 each)`})),Ve.batteries.distill.resourceGain.modifier,...O.modifiers()]),vt=w(()=>{var Ie,Y;return l.add(Ct.apply(l.gt(Ke.value,0)?l.div(Ke.value,100).ceil().log(10):0),l.times((Y=(Ie=O.prevElement)==null?void 0:Ie.actualGain.value)!=null?Y:0,R.apply(0)).div(100))});ce=[{title:"Flowers Loss",modifier:le,base:()=>l.times(qe.flowers.value,Xe.value).div(100).floor(),baseText:k(()=>r(F,null,[m("Base (\u230Aflowers x conversion amount\u230B)")])),unit:"/sec"},{title:`${un(K)} Essence Gain`,subtitle:"When cost is non-zero",modifier:Ct,base:()=>l.gt(Ke.value,0)?l.div(Ke.value,100).ceil().log(10):0,baseText:k(()=>r(F,null,[m("Base (log"),r("sub",null,[m("10")]),m("(flowers loss))")])),unit:"/sec"}],ft&&O.prevElement&&ce.push({title:`${un(K)} Essence Gain`,subtitle:`% of ${un(O.prevElement.name)} essence gain`,modifier:R,base:0,unit:"%"});const xt=k(()=>o(we)?r("div",{class:"element-display",style:"color: "+O.color},[r(lt,{display:un(K)},{default:()=>[r("div",{class:"element-logo"},[O.symbol,r(Xn,{id:K},null)])]}),r("div",{class:"element-amount"},[ge(Ge.value)])]):""),Lt=X(T.addEmitter(O.particlesConfig)),se=async([Ie,Y,Ye])=>{const bt=await Lt.value;bt.emit=Ie&&Y!=null&&Ye!=null,Ie&&Y&&Ye&&!bt.destroyed&&(bt.cleanup(),bt.updateOwnerPos(Y.x+Y.width/2-Ye.x,Y.y+Y.height/2-Ye.y),bt.resetPositionTracking())},Ne=()=>{Lt.value.then(Ie=>Ie.destroy()).then(()=>Lt.value=T.addEmitter(O.particlesConfig)).then(()=>{var Ie;return se([l.gt(vt.value,0),(Ie=Je.nodes.value[K])==null?void 0:Ie.rect,T.boundingRect.value])})};return Vt(()=>et([()=>l.gt(vt.value,0),()=>{var Ie;return(Ie=Je.nodes.value[K])==null?void 0:Ie.rect},T.boundingRect],se)),{name:K,...O,resource:Ge,conversionAmount:Xe,cost:le,computedCost:Ke,gain:Ct,actualGain:vt,tab:mt,tabCollapsed:_t,display:xt,showNotif:$,visible:we,principleClickable:ft,particlesEmitter:Lt,refreshParticleEffect:Ne}})}const ue=oe("earth",()=>({symbol:"\u{1F703}",color:"green",particlesConfig:ji("#B6FF0D","#59E80C"),modifiers:()=>[Dt.plants.earthEssence.modifier]})),V=oe("water",()=>({symbol:"\u{1F704}",color:"blue",particlesConfig:ji("#0D8CFF","#0C46E8"),modifiers:()=>[Dt.plants.waterEssence.modifier],prevElement:Ut(ue),visible:u.earned}),"salt"),W=oe("air",()=>({symbol:"\u{1F701}",color:"yellow",particlesConfig:ji("#FFCE0D","#E8D20C"),modifiers:()=>[Dt.plants.airEssence.modifier],prevElement:Ut(V),visible:d.earned}),"mercury"),Re=oe("fire",()=>({symbol:"\u{1F702}",color:"red",particlesConfig:ji("#FF530D","#E82C0C"),modifiers:()=>[Dt.plants.fireEssence.modifier],prevElement:Ut(W),visible:v.earned}),"sulfur"),Te={earth:ue,water:V,air:W,fire:Re};function _e(K,it,Oe){const Xe=k(()=>o(K.visible)?r("div",null,[r("div",{class:{instrument:!0,principled:K.principleClickable&&gt(K.principleClickable.visibility)},style:`--progress: ${K.conversionAmount.value/100}; --foreground: ${K.color}`},[r("div",{style:"width: 100%; display: flex"},[r("span",{class:"instrument-logo"},[Oe]),r("span",{class:"instrument-details"},[r("div",null,[un(it)]),r("div",null,[m("-"),Nn(qe.flowers,K.computedCost.value)," ",qe.flowers.displayName,m("/sec")]),r("div",null,[m("+"),Nn(K.resource,K.actualGain.value)," ",K.resource.displayName,m("/sec")]),r(Da,{max:Object.values(ze).filter(Ge=>Ge.name!==it).reduce((Ge,ce)=>Ge-ce.element.conversionAmount.value,100),modelValue:K.conversionAmount.value,"onUpdate:modelValue":Ge=>K.conversionAmount.value=Ge},null)])])]),K.principleClickable?rt(K.principleClickable):null]):"");return{name:it,symbol:Oe,element:Ut(K),display:Xe}}const Ze=_e(ue,"alembic","\u{1F76A}"),ae=_e(V,"retort","\u{1F76D}"),Et=_e(W,"crucible","\u{1F767}"),pt=_e(Re,"bainMarie","\u{1F76B}"),ze={retort:ae,alembic:Ze,crucible:Et,bainMarie:pt},ut=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===ml})),Ve.batteries.distill.timePassing.modifier]),L=w(()=>ut.apply(1)),z=ne(()=>[A(()=>({multiplier:()=>l.max(1,ue.resource.value),description:"Earth Essence"})),A(()=>({multiplier:()=>l.max(1,V.resource.value),description:"Water Essence"})),A(()=>({multiplier:()=>l.max(1,W.resource.value),description:"Air Essence"})),A(()=>({multiplier:()=>l.max(1,Re.resource.value),description:"Fire Essence"})),Ve.batteries.distill.xpGain.modifier]),de=ne(()=>[yt(()=>({addend:ue.computedCost,description:"Alembic"})),yt(()=>({addend:V.computedCost,description:"Retort"})),yt(()=>({addend:W.computedCost,description:"Crucible"})),yt(()=>({addend:Re.computedCost,description:"Bain-Marie"}))]),fe={timePassing:ut,jobXp:z,totalFlowerLoss:de},[ke,wt]=Wt(()=>[{title:"Time Passing",modifier:ut,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:"Essentia",subtitle:`Also ${s.name} EXP Amount`,modifier:z,base:1},{title:"Flowers Loss",modifier:de,base:0,unit:"/sec"}]),Nt=Pn({general:()=>({display:"General",glowColor(){return Nt.activeTab.value===this.tab?t:""},tab:ke,generalTabCollapsed:wt}),...Object.entries(Te).reduce((K,[it,Oe])=>({...K,[it]:()=>({display:un(Oe.name),glowColor(){return Nt.activeTab.value===this.tab?t:""},tab:Oe.tab,tabCollapsed:Oe.tabCollapsed})}),{})});return this.on("preUpdate",K=>{if(n.value=Object.values(Te).reduce((Oe,Xe)=>Oe.times(l.max(1,Xe.resource.value)),new l(1)),l.gt(n.value,s.xp.value)&&(s.xp.value=n.value),!s.active.value)return;K=l.times(K,L.value).toNumber();const it=de.apply(0);Object.values(Te).forEach(Oe=>{Oe.resource.value=l.add(Oe.resource.value,l.times(Oe.actualGain.value,K))}),qe.flowers.value=l.sub(qe.flowers.value,it).max(0)}),{name:e,color:t,minWidth:670,essentia:n,bestEssentia:i,elements:Te,instruments:ze,job:s,milestones:_,modifiers:fe,modifierTabs:Nt,collapseMilestones:b,display:k(()=>{const K=[...M.value];return Q.value&&K.push(Q.value),r(F,null,[r(qi,{resource:n,color:t},null),li(...K,k(()=>dn(r(ri,{collapsed:b,content:ie,display:b.value?"Show other completed milestones":"Hide other completed milestones"},null),[[$n,o(P)]]))),hl(ue.display,V.display,W.display,Re.display),r(xe,null,null),hl(Ze.display,ae.display,Et.display,pt.display),We(T)])})}});var mp=["I've always had an affinity for lead","When I'm near lead I feel in my element","Sometimes I wonder if there may be more planets","I have to believe in the heart of the cards","My deck has no bad cards","Honestly, cards are pretty abstract","Cards? I love cards!","Is this world governed more by logic or chance?","Each flower holds a secret","In every bloom, there's a story waiting to unfold","Uncovering nature's mysteries, one card at a time","The elements guide my every move","Knowledge, like a river, constantly flows","The art of discovery lies within the cards","Every revelation brings me closer to mastery","A world of wonder, waiting to be deciphered","In the cards, the key to understanding","Comprehending the intricate dance of elements","The wisdom of ages, in the palm of my hand","The only true wisdom is in knowing you know nothing","The roots of education are bitter, but the fruit is sweet","Education is the kindling of a flame, not the filling of a vessel","All learning has an emotional base","Knowledge is power","Wonder is the beginning of wisdom"];const fp={min:.5,max:1},vp=[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],gp=.001,hp=.1,bp=100,yp=!0,wp={x:0,y:0},_p=!1,Cp=[{type:"alpha",config:{alpha:{list:[{time:0,value:.74},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:700},{time:1,value:0}]},minMult:1}},{type:"scale",config:{scale:{list:[{time:0,value:5},{time:1,value:1.2}]},minMult:1}},{type:"color",config:{color:{list:[{time:0,value:"#ffdfa0"},{time:1,value:"#100f0c"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:200,minStart:0,maxStart:360}},{type:"textureRandom",config:{textures:["/particle.png"]}},{type:"spawnShape",config:{type:"rect",data:{x:-300,y:-125,w:600,h:250}}}];var Sp={lifetime:fp,ease:vp,frequency:gp,emitterLifetime:hp,maxParticles:bp,addAtBack:yp,pos:wp,emit:_p,behaviors:Cp};const di=gi(),fl="study",xn=Fn(fl,function(){const e="Studying",t="#D16726",n=pn(0,"properties"),i=pn(0,"insights"),a=tl(i),s=H(0),u=H(0),c=w(()=>v.earned.value&&Object.values(Y).some(I=>I.showNotif.value)),p=Hn(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"25%",y:"20%"},symbol:"\u{1F56E}",randomQuips(){return[...mp,...oi]},resource:Ut(n),layerID:fl,modifierInfo:k(()=>rt(it)),visibility:Je.milestones.studyMilestone.earned,showNotif:c})),d=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,2)),display:{requirement:`Achieve ${p.name} Level 2`,effectDisplay:"Unlock drawing cards manually"}})),v=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,4)),display:{requirement:`Achieve ${p.name} Level 4`,effectDisplay:"Unlock purchasing and selling cards"},visibility:d.earned})),f=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,5)),display:{requirement:`Achieve ${p.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility:v.earned})),_=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,6)),display:{requirement:`Achieve ${p.name} Level 6`,effectDisplay:"Unlock optimizations"},visibility:f.earned})),C=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,8)),display:{requirement:`Achieve ${p.name} Level 8`,effectDisplay:"Unlock upgrading cards"},visibility:_.earned})),b=ye(()=>({requirements:be(()=>l.gte(p.rawLevel.value,10)),display:{requirement:`Achieve ${p.name} Level 10`,effectDisplay:'Unlock "Breeding Plants" Job'},visibility:C.earned,onComplete(){_n(Dt,G)}})),M={manualMilestone:d,shopMilestone:v,timeSlotMilestone:f,optimizationsMilestone:_,upgradingMilestone:C,jobMilestone:b},Q=[b,C,_,f,v,d],ie=H(!0),P=w(()=>Q.filter(I=>I.earned.value===!1)),{firstFeature:T,collapsedContent:J,hasCollapsedContent:oe}=ai(Q,I=>I.earned.value),ue=w(()=>_.earned.value?l.pow(1.1,l.max(qe.bestMoly.value,1).log10().floor()):1);let V=null;Vt(()=>et(()=>ge(l.times(ue.value,100).sub(100)),I=>{De.active===G.id&&(V!=null&&di.dismiss(V),V=di.info(r(F,null,[r("h3",null,[m("Experience Optimized!")]),r("div",null,[m("Experience optimization is now "),I,m("%")])])))}));const W=Gi(()=>({direction:$e.Right,width:500,height:25,progress:()=>l.sub(1,l.add(qe.bestMoly.value,1).log10().ceil().sub(l.max(qe.bestMoly.value,1).log10())),display:k(()=>r(F,null,[je(qe.bestMoly.value),m(" best moly")])),borderStyle:{borderColor:qe.color,color:"#FFF"},fillStyle:{backgroundColor:qe.color}})),Re=w(()=>_.earned.value?l.pow(1.1,l.max(Je.bestEssentia.value,1).log10().floor()):1);let Te=null;Vt(()=>et(()=>ge(l.times(Re.value,100).sub(100)),I=>{De.active===G.id&&(Te!=null&&di.dismiss(Te),Te=di.info(r(F,null,[r("h3",null,[p.name,m(" Optimized!")]),r("div",null,[p.name,m(" optimization is now "),I,m("%")])])))}));const _e=Gi(()=>({direction:$e.Right,width:500,height:25,progress:()=>l.sub(1,l.add(Je.bestEssentia.value,1).log10().ceil().sub(l.max(Je.bestEssentia.value,1).log10())),display:k(()=>r(F,null,[je(Je.bestEssentia.value),m(" best essentia")])),borderStyle:{borderColor:Je.color,color:"#FFF"},fillStyle:{backgroundColor:Je.color}})),Ze=w(()=>_.earned.value?l.pow(1.1,l.max(a.value,1).log10().floor()):1);let ae=null;Vt(()=>et(()=>ge(l.times(Ze.value,100).sub(100)),I=>{De.active===G.id&&(ae!=null&&di.dismiss(ae),ae=di.info(r(F,null,[r("h3",null,[m("Draw Time Optimized!")]),r("div",null,[m("Draw time optimization is now "),I,m("%")])])))}));const Et=Gi(()=>({direction:$e.Right,width:500,height:25,progress:()=>l.sub(1,l.add(a.value,1).log10().ceil().sub(l.max(a.value,1).log10())),display:k(()=>r(F,null,[je(a.value),m(" best insights")])),borderStyle:{borderColor:t,color:"#FFF"},fillStyle:{backgroundColor:t}})),pt=w(()=>l.pow(1.1,p.level.value)),ze=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===fl})),Ve.batteries.study.timePassing.modifier]),ut=w(()=>ze.apply(1)),L=ne(()=>[A(()=>({multiplier:pt,description:`${p.name} level (x1.1 each)`})),A(()=>({multiplier:Re,description:`${p.name} optimization`,enabled:_.earned})),Ve.batteries.study.resourceGain.modifier,Dt.plants.properties.modifier]),z=w(()=>L.apply(10)),de=ne(()=>[A(()=>({multiplier:()=>l.times(.01,u.value).add(1),description:"Drawn cards (+.01x each)"})),A(()=>({multiplier:ue,description:"Experience optimization",enabled:_.earned})),Ve.batteries.study.xpGain.modifier]),fe=ne(()=>[A(()=>({multiplier:()=>l.div(1,Ze.value),description:"Draw speed optimization",enabled:_.earned,smallerIsBetter:!0})),A(()=>({multiplier:.5,description:"Faster draw card",enabled:()=>vt.value>0,smallerIsBetter:!0}))]),ke=w(()=>fe.apply(10)),wt=ne(()=>[A(()=>({multiplier:.5,description:"Manual bonus",smallerIsBetter:!0}))]),Nt=w(()=>wt.apply(ke.value)),K={timePassing:ze,propertiesGain:L,jobXpGain:de,drawTime:fe,manualDrawTime:wt},[it,Oe]=Wt(()=>[{title:"Time Passing",modifier:ze,base:1,visible:()=>Se.milestones.appliedTimeMilestone.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:"Properties Gain",modifier:L,base:10},{title:`${p.name} EXP Gain`,modifier:de,base:1,baseText:"Base (per property gained)"},{title:"Automatic Card Draw",modifier:fe,base:10,unit:"s",smallerIsBetter:!0},{title:"Manual Card Draw",modifier:wt,base:ke,unit:"s",smallerIsBetter:!0}]),Xe=el(()=>({fullscreen:!1,zIndex:-1,boundingRect:X(null),onContainerResized(I){this.boundingRect.value=I}})),Ge=w(()=>Object.values(Y).reduce((I,pe)=>I+pe.amount.value,0)),ce=H(""),mt=H(["","",""]),_t=H("nothing"),ft=X(0),$=on(()=>({description:"Do nothing.",metal:"mercury",sign:"gemini",startingAmount:4,onSelect:()=>ce.value="nothing",shouldNotify:function(){return Mt(this)}})),R=on(()=>({description:I=>k(()=>r("h3",null,[m("Record")," ",Ft(ge(l.times(z.value,l.add(I,1))))," ",m("properties and job exp.")])),metal:"gold",sign:"leo",actions:{onPlay:I=>{const pe=l.times(z.value,l.add(I,1));n.value=l.add(n.value,pe),p.xp.value=l.add(p.xp.value,de.apply(pe))}},formula:k(()=>Ft("properties gain x level")),price:1,startingAmount:4,onSelect:()=>ce.value="gainPoints",shouldNotify:function(){return Mt(this)}})),O=on(()=>({description:I=>k(()=>r("h3",null,[m("Record")," ",Ft(ge(l.times(z.value,l.add(I,1)).times(10).pow(1.2)))," ",m("properties and job exp. Destroy this card.")])),metal:"tin",sign:"sagittarius",actions:{onPlay:(I,pe)=>{const Ee=l.times(z.value,l.add(I,1)).times(10).pow(1.2);n.value=l.add(n.value,Ee),p.xp.value=l.add(p.xp.value,de.apply(Ee)),pe||(O.amount.value=Math.max(O.amount.value-1,0),O.amount.value<=0&&ce.value==="gainBigPoints"&&(ce.value=""))}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[m("(properties gain x 10 x level)"),r("sup",null,[m("1.2")])])),price:8,onSelect:()=>ce.value="gainBigPoints",shouldNotify:function(){return Mt(this)}})),we=on(()=>({description:I=>l.eq(I,0)?k(()=>r("h3",null,[m("Gain "),Ft("1"),m(" key insight.")])):k(()=>r("h3",null,[m("Gain "),Ft(ge(l.add(I,1))),m(" key insights.")])),metal:"copper",sign:"libra",actions:{onPlay:I=>{i.value=l.add(i.value,I).add(1)}},formula:k(()=>Ft("level")),price:0,startingAmount:2,onSelect:()=>ce.value="gainInsight",shouldNotify:function(){return Mt(this)}})),le=on(()=>({description:I=>k(()=>r("h3",null,[m("Use the size of your deck to gain")," ",Ft(ge(l.times(Ge.value,l.add(I,1))))," ",m("key insights.")])),metal:"silver",sign:"cancer",actions:{onPlay:I=>{const pe=l.times(Ge.value,l.add(I,1));i.value=l.add(i.value,pe)}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[m("cards x level")])),price:13,onSelect:()=>ce.value="gainBigInsight",shouldNotify:function(){return Mt(this)}})),Ke=on(()=>({description:I=>l.eq(I,0)?"Play the next card an extra time (does not stack)":k(()=>r("h3",null,[m("Play the next card an extra time, with")," ",Ft(je(l.div(I,4))),m(" bonus levels (does not stack)")])),metal:"iron",sign:"scorpio",actions:{onNextCardPlay:I=>{const pe=I.actions.onPlay;return pe&&pe(l.add(I.level.value,l.div(Ke.level.value,4)),!0),u.value++,!0}},formula:k(()=>Ft("(level - 1) / 4")),price:32,onSelect:()=>ce.value="playTwice",shouldNotify:function(){return Mt(this)}})),Ct=on(()=>({description:I=>k(()=>r("h3",null,[m("Gain xp equal to "),Ft(je(l.div(l.add(I,1),10),1)),m("x times your number of properties.")])),metal:"tin",sign:"pisces",actions:{onPlay:I=>{p.xp.value=l.add(p.xp.value,de.apply(l.add(I,1).div(10).times(n.value)))}},formula:k(()=>Ft("properties x level / 10")),price:25,onSelect:()=>ce.value="gainXp",shouldNotify:function(){return Mt(this)}})),vt=H(0),xt=on(()=>({description:I=>k(()=>r("h3",null,[m("Drawing cards is 2x faster for the next")," ",Ft(ge(l.times(_l.value,l.add(I,1))))," ",m("seconds (doesn't stack)")])),metal:"mercury",sign:"virgo",actions:{onPlay:I=>vt.value=l.times(_l.value,l.add(I,1)).toNumber()},formula:k(()=>Ft("number of jobs x level")),price:48,onSelect:()=>ce.value="fasterDraws",shouldNotify:function(){return Mt(this)}})),Lt=on(()=>({description:I=>k(()=>r("h3",null,[m("Gain")," ",Ft(ge(Object.values(at.jobs).reduce((pe,Ee)=>pe.add(Ee.level.value),new l(0)).sqrt().floor().times(l.add(I,1))))," ",m("of a random elemental essence")])),metal:"iron",sign:"aries",actions:{onPlay:I=>{const pe=Object.values(Je.elements).filter(Fe=>o(Fe.visible)),Ee=pe[Math.floor(Math.random()*pe.length)];Ee.resource.value=l.add(Ee.resource.value,at.sumJobLevels.value.times(l.add(I,1).sqrt().floor()))}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[r(Kl,null,{default:()=>[r(Zd,null,{default:()=>[m("sum job levels")]})]})," ",m("x level")])),price:16,onSelect:()=>ce.value="gainElementalEssence",shouldNotify:function(){return Mt(this)}})),se=on(()=>({description:I=>k(()=>r("h3",null,[m("Gain")," ",Ft(ge(l.times(Object.values(at.jobs).reduce((pe,Ee)=>pe.add(Ee.level.value),new l(0)),l.add(I,1)).floor()))," ",m("key insights")])),metal:"lead",sign:"capricorn",actions:{onPlay:I=>{const pe=l.times(Object.values(at.jobs).reduce((Ee,Fe)=>Ee.add(Fe.level.value),new l(0)),l.add(I,1)).floor();i.value=l.add(i.value,pe)}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[m("sum job levels x level")])),price:14,onSelect:()=>ce.value="gainInsightFromJobs",shouldNotify:function(){return Mt(this)}})),Ne=on(()=>({description:I=>k(()=>r("h3",null,[m("Gain "),Ft(ge(l.add(I,1).times(5))),m("s of moly production")])),metal:"lead",sign:"aquarius",actions:{onPlay:I=>{qe.flowers.value=l.add(qe.flowers.value,l.times(qe.modifiers.flowerGain.apply(0),l.add(1,I).times(5)))}},formula:k(()=>Ft("5 x level")),price:9,onSelect:()=>ce.value="gainMolyFromEssentia",shouldNotify:function(){return Mt(this)}})),Ie=on(()=>({description:I=>k(()=>r("h3",null,[m("Convert half your moly into")," ",Ft(ge(l.div(qe.flowers.value,2).max(1).ln().floor().times(l.add(1,I)).times(z.value)))," ",m("properties and job exp")])),metal:"copper",sign:"taurus",actions:{onPlay:I=>{const pe=l.div(qe.flowers.value,2).max(1).ln().floor().times(l.add(1,I)).times(z.value);qe.flowers.value=l.div(qe.flowers.value,2).floor(),n.value=l.add(n.value,pe),p.xp.value=l.add(p.xp.value,de.apply(pe))}},formula:k(()=>r("span",{style:"color: var(--accent2)"},[m("properties gain x "),r(Kl,null,{default:()=>[m("ln(spent moly)")]}),m(" x level")])),price:8,onSelect:()=>ce.value="gainPropertiesFromFlowers",shouldNotify:function(){return Mt(this)}})),Y={nothing:$,gainPoints:R,gainBigPoints:O,gainInsight:we,gainBigInsight:le,playTwice:Ke,gainXp:Ct,fasterDraws:xt,gainElementalEssence:Lt,gainInsightFromJobs:se,gainMolyFromEssentia:Ne,gainPropertiesFromFlowers:Ie},Ye=w(()=>{if(ce.value in Y){const I=Y[ce.value];return new l(10).pow(l.add(I.level.value,2))}return 0}),bt=jn(()=>({display:{title:"+1 Level",description:k(()=>{if(ce.value in Y){const I=Y[ce.value];return r(F,null,[m("Current level: "),ge(l.add(I.level.value,1)),r("br",null,null),ce.value==="nothing"?r("span",null,[m("Max level!")]):r("span",null,[m("Cost: "),je(Ye.value),m(" "),i.displayName])])}return""})},canClick(){return ce.value!=="nothing"&&ce.value in Y&&l.gte(i.value,Ye.value)},onClick(){if(ce.value in Y){const I=Y[ce.value];i.value=l.sub(i.value,Ye.value),I.level.value=l.add(I.level.value,1)}},style:{height:"120px",alignSelf:"center"}})),Kt=w(()=>l.gte(s.value,Nt.value)),$t=jn(()=>({display:{title:"Draw",description:k(()=>r(F,null,[r("div",null,[m("Focus harder in order to discover the next card faster.")]),Kt.value?r("div",null,[m("Available Now!")]):r("div",null,[m("Available in")," ",Gn(l.sub(Nt.value,s.value))])]))},canClick:Kt,onClick:tn,style:{minHeight:"50px",width:"200px"}})),Yt=H(0),St=w(()=>l.pow(2,Yt.value).times(100)),vn=jn(()=>({display:{title:"Purge card",description:k(()=>r(F,null,[m("Remove card from deck"),r("br",null,null),m("Cost: "),je(St.value),m(" "),i.displayName]))},canClick(){return l.gte(i.value,St.value)},async onClick(){var I;if(ce.value in Y){const pe=Y[ce.value];i.value=l.sub(i.value,St.value),Yt.value++,pe.amount.value--;const Ee=Xe.boundingRect.value,Fe=(I=xn.nodes.value.deck)==null?void 0:I.rect;Ee&&Fe&&(await Vt(),Xe.addEmitter(Sp).then(ct=>{ct.updateOwnerPos(Fe.x+Fe.width/2-Ee.x,Fe.y+Fe.height/2-Ee.y),ct.playOnceAndDestroy()})),pe.amount.value<=0&&(ce.value="")}},style:{"--layer-color":"var(--danger)",minHeight:"50px",width:"200px"}})),Cn=new Array(3).fill(0).map((I,pe)=>{const Ee=jn(()=>({display:{title:"Purchase Card",description:k(()=>{const Fe=mt.value[pe];if(Fe==="")return r(F,null,[m("Out of Stock!"),r("div",{class:"element-cost"},null)]);const ct=Y[Fe],Pt=Oi[ct.sign];return r(F,null,[ge(ct.price),m(" "),Pt,m(" essence"),r("div",{class:"element-cost",style:{color:Je.elements[Pt].color}},[Je.elements[Pt].symbol])])})},canClick(){const Fe=mt.value[pe];if(Fe==="")return!1;const ct=Y[Fe],Pt=Oi[ct.sign],Ot=Je.elements[Pt].resource;return l.gte(Ot.value,ct.price)},onClick(){const Fe=mt.value[pe];if(Fe==="")return!1;const ct=Y[Fe],Pt=Oi[ct.sign],Ot=Je.elements[Pt].resource;ct.amount.value+=1,Ot.value=l.sub(Ot.value,ct.price),mt.value[pe]=""},style:{width:"165px",margin:"20px 7.5px",minHeight:"50px",paddingLeft:"55px",borderTopLeftRadius:"25px",borderBottomLeftRadius:"25px"}}));return Aa(Ee,{display:k(()=>{const Fe=mt.value[pe];if(Fe==="")return r(F,null,null);const ct=Y[Fe],Pt=Oi[ct.sign],Ot=Je.elements[Pt].resource;return r(F,null,[m("You have "),Nn(Ot),m(" "),Ot.displayName])}),direction:$e.Down}),Ee}),en=H(0),Ht=w(()=>7);function tn(){var Ee,Fe,ct,Pt,Ot;s.value=0,ft.value++,en.value++,u.value++;const I=_t.value;let pe=Math.floor(Math.random()*Ge.value);if(_t.value=Object.keys(Y).find(gn=>pe<=Y[gn].amount.value?!0:(pe-=Y[gn].amount.value,!1)),((ct=(Fe=(Ee=Y[I].actions).onNextCardPlay)==null?void 0:Fe.call(Ee,Y[_t.value],!1))==null||ct)&&((Ot=(Pt=Y[_t.value].actions).onPlay)==null||Ot.call(Pt,Y[_t.value].level.value,!1)),en.value>=Ht.value){en.value=0;const gn=Object.keys(Y).filter(Dn=>"price"in Y[Dn]);mt.value=new Array(3).fill(0).map(()=>gn[Math.floor(Math.random()*gn.length)])}}function Mt(I){return v.earned.value&&I.amount.value>0&&l.gte(i.value,new l(10).pow(l.add(I.level.value,2)))}this.on("preUpdate",I=>{!p.active.value||(I=l.times(I,ut.value).toNumber(),s.value+=I,vt.value=Math.max(0,vt.value-I),l.gte(s.value,ke.value)&&tn())});const Sn=Pn({play:()=>({display:"Play",tab:zn(()=>({display:k(()=>r(F,null,[r(xe,null,null),Y[_t.value].renderForPlay(ft),r(xe,null,null),d.earned.value?Vi($t):null,r(xe,null,null),v.earned.value?r("div",null,[m("Shop will refresh in")," ",Ht.value-en.value,m(" draws")]):null,r("div",null,[m("Card will be drawn automatically in")," ",Gn(l.sub(ke.value,s.value))])]))})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),deck:()=>({display:k(()=>r("span",{style:"position: relative;"},[m("Cards"),c.value?r(Mn,{style:"left: -15px; top: -10px"},null):null])),tab:zn(()=>({display:k(()=>{const I=Object.values(Y).filter(Ee=>Ee.amount.value>0),pe=Math.ceil(I.length/5);return r(F,null,[r(xe,null,null),v.earned.value?r(F,null,[r("h2",null,[m("Shop")]),r(xe,null,null),mt.value.map(Ee=>Ee===""?Y.nothing.renderForShop():Y[Ee].renderForShop()),Vi(...Cn),r("div",null,[m("Shop will refresh in")," ",Ht.value-en.value," ",m("draws")]),r(xe,{height:"50px"},null)]):null,r("h2",null,[m("Deck")]),r(xe,null,null),r("div",{class:"cardDeck-container"},[r(Xn,{id:"deck"},null),...new Array(pe).fill(0).map((Ee,Fe)=>Vi(...I.slice(Fe*Math.ceil(I.length/pe),(Fe+1)*Math.ceil(I.length/pe)).map(ct=>ct.renderForDeck)))]),r(xe,null,null),ce.value?r(F,null,[C.earned.value?r("div",{style:"display: flex; justify-content: center;"},[Y[ce.value].renderForUpgrade(!1),r("div",{style:"display: flex; flex-direction: column; color: var(--layer-color); font-size: xxx-large; margin-left: -30px; margin-right: -30px"},[r("span",{style:"margin-bottom: 20px"},[m(">>>")]),We(bt),r("span",{style:"margin-top: 20px"},[m(">>>")])]),Y[ce.value].renderForUpgrade(!0)]):Y[ce.value].renderForUpgrade(!1),v.earned.value?We(vn):null]):null])})}))}),optimizations:()=>({display:"Optimizations",visibility:_.earned,tab:zn(()=>({display:k(()=>r(F,null,[r(xe,null,null),r("h2",null,[m("Experience Optimization")]),r("div",{style:"margin: 20px"},[m("The magnitude of your best moly amount has allowed you to optimize your exp gain by")," ",ge(l.times(ue.value,100).sub(100)),m("%."),r("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),We(W),r(xe,{height:"50px"},null),r("h2",null,[p.name,m(" Optimization")]),r("div",{style:"margin: 20px"},[m("The magnitude of your best essentia amount has allowed you to optimize your properties gain by")," ",ge(l.times(Re.value,100).sub(100)),m("%."),r("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),We(_e),r(xe,{height:"50px"},null),r("h2",null,[m("Draw Speed Optimization")]),r("div",{style:"margin: 20px"},[m("The magnitude of your best insights amount has allowed you to optimize your drawing speed by")," ",ge(l.times(Ze.value,100).sub(100)),m("%."),r("br",null,null),m("Each additional order of magnitude gives a compounding 10% optimization.")]),We(Et)]))}))})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}}));return{name:e,color:t,minWidth:670,properties:n,insights:i,bestInsights:a,timeDrawing:s,job:p,cards:Y,modifiers:K,milestones:M,collapseMilestones:ie,generalTabCollapsed:Oe,tabs:Sn,selectedCard:ce,drawnCard:_t,soldCards:Yt,cardShop:mt,cardsDrawnToShop:en,fasterDrawTime:vt,totalCardsDrawn:u,display:k(()=>{const I=[...P.value];return T.value&&I.push(T.value),r(F,null,[r(Fl,null,{default:()=>[r("div",{style:"height: 50px; line-height: 50px; margin-bottom: 20px"},[m("You have "),r(wl,{resource:n,color:t},null),m(" properties studied and "),r(wl,{resource:i,color:"darkcyan"},null),m(" key insights")])]}),li(...I,k(()=>dn(r(ri,{collapsed:ie,content:J,display:ie.value?"Show other completed milestones":"Hide other completed milestones"},null),[[$n,o(oe)]]))),r(xe,null,null),We(Sn),We(Xe)])})}});const kp={class:"applied-time-selectors-container"},Np=["onClick"],xp={key:0,class:"applied-time-symbol"},$p={key:1,class:"applied-time-symbol material-icons"},Mp={class:"applied-time-effect"},Pp=Z({__name:"AppliedTimeSelectors",props:{jobs:null,selectedJob:null,effect:null},emits:["selectJob"],setup(e,{emit:t}){const n=e,{jobs:i,selectedJob:a,effect:s}=ot(n),u=w(()=>Object.keys(i.value).filter(p=>gt(i.value[p].visibility)).reduce((p,d)=>({...p,[d]:i.value[d]}),{})),c=w(()=>Math.PI*2/Object.keys(u.value).length);return(p,d)=>(h(),x("div",kp,[(h(!0),x(F,null,Tn(o(u),(v,f,_)=>(h(),x("div",{key:f,class:Me(["feature can dontMerge applied-time-selector",o(a)===f?"selected":""]),style:Ae({backgroundColor:o(v.color),top:`${Math.sin(_*o(c)+o(G).time/1e4)*200+300}px`,left:`${Math.cos(_*o(c)+o(G).time/1e4)*200+300}px`}),onClick:C=>t("selectJob",f)},[o(v.symbol).length<=2?(h(),x("div",xp,ee(v.symbol),1)):(h(),x("span",$p,ee(v.symbol),1))],14,Np))),128)),g("div",Mp,ee(o(je)(o(s)))+"x",1)]))}});var Tp=me(Pp,[["__scopeId","data-v-0bbe577e"]]);const Ip={key:1,class:"grain complete"},Ep=Z({__name:"Grain",props:{index:null,chippingProgress:null,chippingIndex:null},setup(e){const t=e,{index:n,chippingProgress:i,chippingIndex:a}=ot(t);return(s,u)=>o(a)<o(n)?(h(),x("div",{key:0,class:Me(["grain not-started",{}])})):(h(),x("div",Ip,[o(a)===o(n)?(h(),x("div",{key:0,class:"grain",style:Ae({clipPath:`polygon(0 0, 100% 0, 100% ${(1-o(i))*100}%, 0 ${(1-o(i))*100}%)`})},null,4)):B("",!0)]))}});var ta=me(Ep,[["__scopeId","data-v-63857638"]]);const Fp=e=>(an("data-v-e8dadcb2"),e=e(),sn(),e),qp={class:"single-grain-label"},Dp={style:{display:"none"}},Ap={id:"grain-filter"},Lp=["seed"],Rp=Fp(()=>g("feDisplacementMap",{in:"SourceGraphic",scale:"20"},null,-1)),Op=Z({__name:"Grains",props:{baseGrains:null,chippingProgress:null},setup(e){const t=e,{baseGrains:n,chippingProgress:i}=ot(t),a=w(()=>l.pow(2,new l(n.value).log2().floor()).round().toNumber()),s=w(()=>l.pow(2,new l(a.value).log2().div(2).floor()).round().toNumber()),u=w(()=>l.div(a.value,s.value).round().toNumber()),c=w(()=>l.sub(n.value,a.value).add(1).round().toNumber());return(p,d)=>(h(),x(F,null,[o(l).lt(o(n),1024)?(h(),x("div",{key:0,class:"grains-container",style:Ae({gridTemplateColumns:`repeat(${o(u)}, 1fr)`,columnGap:o(u)===o(s)?"var(--feature-margin)":`calc(var(--feature-margin) + ${150/(o(u)-1)}px)`,maxWidth:o(u)===o(s)?"300px":"600px"})},[(h(!0),x(F,null,Tn(o(a),v=>(h(),U(ta,{key:v,index:v,chippingProgress:o(i),chippingIndex:o(c)},null,8,["index","chippingProgress","chippingIndex"]))),128))],4)):(h(),x(F,{key:1},[r(ta,{index:0,chippingProgress:o(i),chippingIndex:0,class:"single-grain"},null,8,["chippingProgress"]),g("div",qp,ee(o(ge)(o(c)))+"/"+ee(o(ge)(o(a))),1)],64)),(h(),x("svg",Dp,[g("filter",Ap,[g("feTurbulence",{x:"0",y:"0",width:"700px",height:"700px",baseFrequency:"0.005",numOctaves:"10",seed:o(l).lt(o(n),1024)?o(a):new o(l)(o(n)).toNumber()},null,8,Lp),Rp])]))],64))}});var jp=me(Op,[["__scopeId","data-v-e8dadcb2"]]);const Ra=e=>(an("data-v-93b37faa"),e=e(),sn(),e),Bp=Ra(()=>g("clipPath",{id:"glass-mask"},[g("path",{d:"M204 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175C103 254.699 -38 300 10 350H204C252 300 111 254.699 111 175C111 95.3005 252 50 204 -2.82683e-05Z",fill:"black"})],-1)),Vp={id:"sand-top-mask"},zp=["transform"],Gp={id:"sand-bottom-mask"},Up=["transform"],Xp={id:"flipping-mask"},Hp=["transform"],Jp=Ha('<g id="sand" transform="translate(42, 20)" clip-path="url(#glass-mask)" data-v-93b37faa><g clip-path="url(#flipping-mask)" data-v-93b37faa><path id="sand-top" d="M204 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175V350H111V175C111 95.3005 252 50 204 -2.82683e-05Z" fill="white" clip-path="url(#sand-top-mask)" data-v-93b37faa></path></g><rect id="sand-bottom" width="300" height="390" fill="white" clip-path="url(#sand-bottom-mask)" data-v-93b37faa></rect></g><path id="glass" transform="translate(38, 20)" d="M212 -2.82683e-05L10 -2.83344e-05C-38 50 103 95.3005 103 175C103 254.699 -38 300 10 350H212C260 300 119 254.699 119 175C119 95.3005 260 50 212 -2.82683e-05Z" fill="#0003" data-v-93b37faa></path><path id="frame" fill-rule="evenodd" clip-rule="evenodd" d="M300 0H0V20H300V0ZM300 370H0V390H300V370Z" fill="#9E9169" data-v-93b37faa></path><path id="sides" transform="translate(15, 20)" d="M20 0H0V350H20V0ZM270 0H250V350H270V0Z" fill="#817654" data-v-93b37faa></path>',4),Wp={key:1,class:"remainingGrains"},Qp={key:2,class:"flip-request"},Zp=m(" Press to "),Kp=Ra(()=>g("br",null,null,-1)),Yp=m(" flip "),em=[Zp,Kp,Yp],tm={class:"fallenGrains"},nm=Z({__name:"Hourglass",props:{totalGrains:null,grainsFallen:null,flippingProgress:null,showHourglassNotif:{type:Boolean}},emits:["flip"],setup(e,{emit:t}){return(n,i)=>(h(),x("div",{class:Me(["hourglass-container",{flipping:e.flippingProgress<1}]),onClick:i[0]||(i[0]=a=>t("flip"))},[e.showHourglassNotif?(h(),U(Mn,{key:0})):B("",!0),(h(),x("svg",{width:"240",height:"312",viewBox:"0 0 300 390",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Ae({transform:`rotateZ(${(1-e.flippingProgress)*180}deg)`})},[g("defs",null,[Bp,g("clipPath",Vp,[g("path",{d:"M149.25 19.5C89.9195 19.5 0.5 0.5 0.5 0.5V390H299.5V0.5C299.5 0.5 208.581 19.5 149.25 19.5Z",transform:e.flippingProgress<1?`translate(0, ${-40+e.flippingProgress*40})`:`translate(0, ${o(l).div(e.grainsFallen,e.totalGrains).sqr().times(190).toNumber()})`,fill:"black"},null,8,zp)]),g("clipPath",Gp,[g("path",{d:"M148.75 0C89.4195 0 0 19 0 19V389.5H299V19C299 19 208.081 0 148.75 0Z",transform:`translate(-40, ${o(l).sub(350,o(l).div(e.grainsFallen,e.totalGrains).sqr().times(150)).toNumber()})`,fill:"black"},null,8,Up)]),g("clipPath",Xp,[g("path",{d:"M150.25 389.5C209.581 389.5 300 370.5 300 370.5L300 3.05176e-05L1.87924e-05 4.37817e-06L-1.35978e-05 370.5C-1.35978e-05 370.5 90.9194 389.5 150.25 389.5Z",fill:"black",transform:`translate(0, ${Math.max(e.flippingProgress,.5)*420-445})`},null,8,Hp)])]),Jp],4)),o(l).sub(e.totalGrains,e.grainsFallen).gt(0)?(h(),x("div",Wp,ee(o(ge)(o(l).sub(e.totalGrains,e.grainsFallen))),1)):(h(),x("div",Qp,em)),g("div",tm,ee(o(ge)(e.grainsFallen)),1)],2))}});var im=me(nm,[["__scopeId","data-v-93b37faa"]]),lm=["Time? I love time!","I don't like sand. It's coarse and rough and irritating - and it gets everywhere","Those who make the worst use of their time are the first to complain of its brevity","Oh, how the time has flown","Time is an illusion","Time does not pass, it continues","This, too, shall pass","The hourglass mesmerizes me","Each grain split makes my measurements more precise","Wait!","Capturing time, one grain at a time","Turning stones into sands of time","Time waits for no one","Sand and time, forever intertwined","Patience is the companion of wisdom","Time is the most valuable resource","As the sands shift, so do I","Tempus fugit","Carpe diem","Time is the most valuable thing a man can spend","Time crumbles things; everything grows old","We live, not as we wish to, but as we can","The only way to measure time is by living it","Time discovers truth","The two most powerful warriors are patience and time"];const na=gi(),ia={additive:"+",multiplicative:"x",exponential:"^"},am={additive:(e,t)=>()=>l.times(o(e),t.value),multiplicative:(e,t)=>()=>l.pow(o(e),t.value),exponential:(e,t)=>()=>l.tetrate(o(e),new l(t.value).toNumber())},vl="experiments",Se=Fn(vl,function(){const e="Measuring",t="#D1C926",n=pn(0,"potentia"),i=H(1),a=H(0),s=H(1),u=H(0),c=H("experiments"),p=w(()=>f.earned.value?Object.values(_e).some(se=>se.showNotif.value)?!0:C.earned.value?!!Object.values(ze).some(se=>se.showNotif.value):!1:!1),d=Hn(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"85%",y:"60%"},symbol:"\u29D6",randomQuips(){return[...lm,...oi]},resource:Ut(n),layerID:vl,modifierInfo:k(()=>rt(le)),visibility:Je.milestones.experimentsMilestone.earned,showNotif:()=>Lt.value||p.value})),v=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,2)),display:{requirement:`Achieve ${d.name} Level 2`,effectDisplay:"Unlock grinding grains"}})),f=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,4)),display:{requirement:`Achieve ${d.name} Level 4`,effectDisplay:"Unlock potentials"},visibility:v.earned})),_=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,5)),display:{requirement:`Achieve ${d.name} Level 5`,effectDisplay:"Unlock a time slot"},visibility:f.earned})),C=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,6)),display:{requirement:`Achieve ${d.name} Level 6`,effectDisplay:"Unlock advanced potentials"},visibility:_.earned})),b=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,8)),display:{requirement:`Achieve ${d.name} Level 8`,effectDisplay:"Unlock applied time"},visibility:C.earned})),M=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,10)),display:{requirement:`Achieve ${d.name} Level 10`,effectDisplay:'Unlock "Harnessing Power" Job'},visibility:b.earned,onComplete(){_n(Ve,G)}})),Q={chippingMilestone:v,potentialsMilestone:f,timeSlotMilestone:_,advancedPotentialsMilestone:C,appliedTimeMilestone:b,jobMilestone:M},ie=[M,b,C,_,f,v],P=H(!0),T=w(()=>ie.filter(se=>se.earned.value===!1)),{firstFeature:J,collapsedContent:oe,hasCollapsedContent:ue}=ai(ie,se=>se.earned.value);function V({name:se,precision:Ne,effectRatio:Ie,xpReqRatio:Y,baseBoostCost:Ye,boostCostRatio:bt,boostCostResource:Kt,modifierType:$t,isAdvanced:Yt}){const St=Qe(Ie),vn=Qe(Y),Cn=Qe(Ye),en=Qe(bt),Ht=Qe(Kt),tn=H(0),Mt=H(0),Sn=w(()=>l.pow(o(vn),tn.value).times(100)),I=am[$t!=null?$t:"multiplicative"](St,tn);let pe;$t==="exponential"?pe=Qi(()=>({exponent:I,description:se+" potential",enabled:Yt?C.earned:f.earned,smallerIsBetter:l.lt(o(St),1)})):$t==="additive"?pe=yt(()=>({addend:I,description:se+" potential",enabled:Yt?C.earned:f.earned,smallerIsBetter:l.lt(o(St),1)})):pe=A(()=>({multiplier:I,description:se+" potential",enabled:Yt?C.earned:f.earned,smallerIsBetter:l.lt(o(St),1)}));const Ee=H(0),Fe=w(()=>l.times(o(Cn),l.pow(o(en),Ee.value))),ct=w(()=>l.gte(wi(Ht).value,Fe.value)),Pt=jn(()=>({display:k(()=>r(F,null,[m("x2 boost for"),r("br",null,null),Rt(Fe.value),r("br",null,null),wi(Ht).displayName,gn.value?r(Mn,{style:"top: -15px"},null):null])),canClick:ct,onClick(){const Dn=wi(Ht);Dn.value=l.sub(Dn.value,Fe.value),Ee.value++}}));Aa(Pt,{display:k(()=>r(F,null,[m("You have "),Nn(wi(Ht))," ",wi(Ht).displayName]))});let Ot=null;et(tn,()=>{De.active===G.id&&(Ot!=null&&na.dismiss(Ot),Ot=na.info(r(F,null,[r("h3",null,[m("Potential increased!")]),r("div",null,[ia[$t!=null?$t:"multiplicative"],je(o(St),Ne!=null?Ne:2),m(" "),se])])))});const gn=Pi(Pt,ct);return{level:tn,xp:Mt,xpRequired:Sn,effect:I,modifier:pe,boosts:Ee,cost:Fe,clickable:Pt,showNotif:gn,effectRatio:St,xpReqRatio:vn,baseBoostCost:Cn,boostCostRatio:en,boostCostResource:Ht,update(Dn){let ui=l.add(Mt.value,l.pow(2,Ee.value).times(_t.apply(Dn)));for(;l.gte(ui,Sn.value);)ui=ui.sub(Sn.value),tn.value++;Mt.value=ui.toNumber()},display:k(()=>r("div",{class:"potential feature dontMerge"},[We(Pt),r("div",{class:"potential-details"},[m("Lv "),Rt(tn.value),m(" "),se,m(" ("),ia[$t!=null?$t:"multiplicative"],je(o(St),Ne!=null?Ne:2),m(" each)")]),r("div",{class:"potential-xp"},[r("div",{class:"potential-xp-fill",style:{width:`${l.div(Mt.value,Sn.value).times(100).toNumber()}%`}},null)])]))}}const W=V({name:"Grinding duration",effectRatio:.9,precision:1,xpReqRatio:1.3,baseBoostCost:100,boostCostRatio:2,boostCostResource:Ut(n)}),Re=V({name:"Potentia gain",effectRatio:1.05,xpReqRatio:1.08,baseBoostCost:100,boostCostRatio:10,boostCostResource:Ut(n)}),Te=V({name:"Grains fall speed",effectRatio:1.025,precision:3,xpReqRatio:1.1,baseBoostCost:100,boostCostRatio:4,boostCostResource:Ut(n)}),_e={grindingSpeedPotential:W,potentiaGainPotential:Re,fallSpeedPotential:Te},Ze=V({name:"Potentials speed",effectRatio:1.1,precision:1,xpReqRatio:1.5,baseBoostCost:1e4,boostCostRatio:10,boostCostResource:Ut(n),isAdvanced:!0}),ae=V({name:"Bonus grains",effectRatio:1.05,xpReqRatio:2,baseBoostCost:100,boostCostRatio:1.25,boostCostResource:()=>Object.values(Je.elements)[ae.boosts.value%4].resource,isAdvanced:!0}),Et=V({name:"Job EXP gain",effectRatio:1.1,precision:1,xpReqRatio:1.25,baseBoostCost:1e6,boostCostRatio:8,boostCostResource:qe.flowers,isAdvanced:!0}),pt=V({name:"Passive grinding",effectRatio:1,precision:0,xpReqRatio:1.2,baseBoostCost:1e3,boostCostRatio:5,boostCostResource:xn.insights,modifierType:"additive",isAdvanced:!0}),ze={potentialsSpeedPotential:Ze,effectiveGrainsPotential:ae,jobXPPotential:Et,passiveGrindingPotential:pt},ut=w(()=>l.pow(1.1,d.level.value)),L=w(()=>new l(i.value).log2().floor()),z=w(()=>l.pow(1.1,d.level.value)),de=ne(()=>[A(()=>({multiplier:z,description:"Applied time",enabled:()=>d.active.value&&b.earned.value&&c.value===vl})),Ve.batteries.experiments.timePassing.modifier]),fe=w(()=>de.apply(1)),ke=ne(()=>[Et.modifier,Ve.batteries.experiments.xpGain.modifier]),wt=ne(()=>[ae.modifier]),Nt=w(()=>wt.apply(i.value)),K=ne(()=>[A(()=>({multiplier:()=>l.pow(1.1,L.value),description:"Grain size (x1.1 each split)",enabled:v.earned})),Te.modifier]),it=w(()=>K.apply(1)),Oe=ne(()=>[A(()=>({multiplier:()=>l.pow(2,L.value),description:"Grain size (x2 each split)",smallerIsBetter:!0})),W.modifier]),Xe=w(()=>Oe.apply(1)),Ge=ne(()=>[pt.modifier]),ce=w(()=>Ge.apply(0)),mt=ne(()=>[A(()=>({multiplier:ut,description:`${d.name} level (x1.1 each)`})),Re.modifier,Ve.batteries.experiments.resourceGain.modifier,Dt.plants.potentia.modifier]),_t=ne(()=>[Ze.modifier]),ft={timePassing:de,jobXpGain:ke,totalGrains:wt,grainsFallRate:K,chippingDuration:Oe,potentiaGain:mt,potentialsSpeed:_t,passiveGrinding:Ge},[$,R]=Wt(()=>[{title:"Time Passing",modifier:de,base:1,visible:()=>b.earned.value||Ve.milestones.timeBatteriesMilestone.earned.value},{title:`${d.name} EXP Gain`,modifier:ke,base:1},{title:"Potentia Gain",modifier:mt,base:1},{title:"Potentials speed",modifier:_t,base:1,visible:C.earned}]),[O,we]=Wt(()=>[{title:"Total Grains",modifier:wt,base:i},{title:"Grains Fall Speed",modifier:K,base:1,unit:"/s"},{title:"Grinding duration",modifier:Oe,base:1,unit:"s",visible:v.earned,smallerIsBetter:!0},{title:"Passive grinding",modifier:Ge,base:0,unit:"%",visible:C.earned}]),le=Pn({general:()=>({display:"General",glowColor(){return le.activeTab.value===this.tab?t:""},tab:$,generalTabCollapsed:R}),grains:()=>({display:"Grains",glowColor(){return le.activeTab.value===this.tab?t:""},tab:O,grainsTabCollapsed:we})},()=>({style:`--layer-color: ${t}`})),Ke=jn(()=>({display:{title:"Grind",description:"Hover to grind grains apart, to create new grains"}})),Ct=Sa(Ke);this.on("preUpdate",se=>{if(!!d.active.value){if(se=l.times(se,fe.value).toNumber(),f.earned.value&&Object.values(_e).forEach(Ne=>Ne.update(se)),C.earned.value&&(Object.values(ze).forEach(Ne=>Ne.update(se)),u.value=l.add(u.value,l.times(se,ce.value).div(100)).toNumber()),l.lt(s.value,1))s.value=l.add(s.value,se).min(1).toNumber();else if(l.lt(a.value,Nt.value)){const Ne=l.add(a.value,l.times(it.value,se)).min(Nt.value),Ie=mt.apply(l.sub(Ne,a.value));n.value=l.add(n.value,Ie),d.xp.value=l.add(d.xp.value,ke.apply(Ie)),a.value=Ne}for(Ct.value&&(u.value=u.value+se);l.gt(u.value,Xe.value);){const Ne=l.div(u.value,Xe.value).floor().min(new l(2).pow(new l(i.value).add(1).log2().floor().add(1)).sub(i.value));u.value=u.value-Ne.times(Xe.value).toNumber(),i.value=l.add(i.value,Ne)}}});const vt=Pn({grains:()=>({display:"Grains",tab:zn(()=>({display:k(()=>r(F,null,[r(xe,null,null),r(jp,{baseGrains:i.value,chippingProgress:l.div(u.value,Xe.value).toNumber()},null),r(xe,null,null),We(Ke)]))})),style:{borderLeft:"5px solid var(--outline)",marginLeft:"5px"}}),potentials:()=>({display:k(()=>r("span",{style:"position: relative;"},[m("Potentials"),p.value?r(Mn,{style:"left: -15px; top: -10px"},null):null])),tab:zn(()=>({display:k(()=>r(F,null,[r(xe,null,null),r("h2",null,[m("Basic Potentials")]),r(xe,null,null),Mi(...Object.values(_e).map(se=>se.display)),C.earned.value?r(F,null,[r(xe,null,null),r("h2",null,[m("Advanced Potentials")]),r(xe,null,null),Mi(...Object.values(ze).map(se=>se.display))]):null]))})),visibility:f.earned}),appliedTime:()=>({display:"Applied Time",tab:zn(()=>({display:k(()=>r(F,null,[r(xe,null,null),r("div",null,[m("Focus your potential towards speeding up an entire job's time loop."),r("br",null,null),m("Strength increases with "),d.name,m(" level.")]),r(xe,null,null),r(Tp,{effect:z.value,jobs:at.jobs,selectedJob:c.value,onSelectJob:se=>c.value=se},null)]))})),visibility:b.earned})},()=>({classes:{floating:!1},style:{borderStyle:"none",marginLeft:"-20px",marginRight:"-20px"},buttonContainerStyle:{top:"50px"}})),xt={[nt]:im,[Be]:()=>({totalGrains:Nt.value,grainsFallen:a.value,flippingProgress:s.value,onFlip:()=>{s.value=s.value>=1?0:s.value,a.value=0},showHourglassNotif:Lt.value})},Lt=Pi(xt,()=>l.sub(Nt.value,a.value).lte(0));return{name:e,color:t,minWidth:670,potentia:n,baseTotalGrains:i,grainsFallen:a,flippingProgress:s,chippingProgress:u,basicPotentials:_e,advancedPotentials:ze,job:d,selectedJob:c,modifiers:ft,milestones:Q,collapseMilestones:P,modifierTabs:le,tabs:vt,appliedTimeEffect:z,display:k(()=>{const se=[...T.value];return J.value&&se.push(J.value),r(F,null,[r(qi,{resource:n,color:t},null),li(...se,k(()=>dn(r(ri,{collapsed:P,content:oe,display:P.value?"Show other completed milestones":"Hide other completed milestones"},null),[[$n,o(ue)]]))),r(xe,null,null),We(xt),r(xe,{height:"50px"},null),v.earned.value?We(vt):null])})}});var sm=["Seeds? I love seeds!","They can still be improved, I'm sure of it","Together we'll both grow to our full potentials","Progress moves ever forward, generation by generation","Grow!","They require meticulous care","Growth is a never-ending process","The perfect bloom is within reach","A garden of endless possibilities awaits","Delicate petals hold the key to advancement","Every flower has its own unique charm","Patience and care will yield beauty","The diversity of nature, in my hands","Each new generation holds untapped potential","The future blooms in these delicate seeds","New traits emerge from clever combinations","Fusing strengths to create something greater","Nature does nothing uselessly","Change begets growth","The earth laughs in flowers","Nature is the best teacher","Necessity is the mother of invention","The future is in the seeds we sow today","Progress is the child of time","The best way to predict the future is to create it"];const rm={key:2,class:"analyzed"};var pi=Z({__name:"SeedSlot",props:{selected:{type:Boolean},seed:null,onClick:null},setup(e){const t=e,n=En(w(()=>k(()=>t.seed==="none"?"":rt(Dt.plants[t.seed.type].seed)))),i=he(k(()=>t.seed==="none"||!t.seed.analyzed?"":r(F,null,[m("Speed: "),ge(t.seed.speed),r("br",null,null),m("Harvest Size: "),ge(t.seed.harvest),r("br",null,null),m("Mutability: "),ge(t.seed.mutability)])));return(a,s)=>(h(),x("div",{class:Me(["seed feature can",{selected:e.selected}]),onClick:s[0]||(s[0]=u=>e.onClick(e.seed))},[e.seed!=="none"&&e.seed.analyzed?(h(),U(lt,{key:0,display:o(i)},{default:re(()=>[o(n)?(h(),U(Pe(o(n)),{key:0})):B("",!0),Zt(a.$slots,"default")]),_:3},8,["display"])):(h(),x(F,{key:1},[o(n)?(h(),U(Pe(o(n)),{key:0})):B("",!0),Zt(a.$slots,"default")],64)),e.seed!=="none"&&e.seed.analyzed?(h(),x("div",rm,"*")):B("",!0)],2))}});const om={class:"inputs"},um=g("path",{d:"M4 29C15.1929 16.5 26.3858 4 54 4C109.228 4 98.7715 54 154 54C181.614 54 192.807 41.5 204 29",stroke:"grey","stroke-width":"7","stroke-linecap":"round"},null,-1),cm=Z({__name:"Machine",props:{index:null,numInputs:null,inputs:null,timer:null,poweredUp:{type:Boolean},canPowerUp:null,duration:null,outputDisplay:null,setInput:null},emits:["setPoweredUp"],setup(e,{emit:t}){const n=e,i=kt();zt(()=>{i.value=he(n.outputDisplay(n.inputs,n.index))});const a=w(()=>n.numInputs!==n.inputs.filter(s=>s!=null&&s!=="none").length);return(s,u)=>(h(),x("div",{class:Me(["machine feature",{poweredUp:e.poweredUp,canPowerUp:!e.poweredUp&&o(e.canPowerUp)}])},[g("div",om,[(h(!0),x(F,null,Tn(e.numInputs,c=>{var p;return h(),U(pi,{key:c-1,seed:(p=e.inputs[c-1])!=null?p:"none",onClick:()=>e.setInput(e.index,c-1)},null,8,["seed","onClick"])}),128))]),(h(),x("svg",{width:"208",height:"58",viewBox:"0 0 208 58",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:u[0]||(u[0]=c=>t("setPoweredUp"))},[um,g("path",{d:"M4 29C15.1929 16.5 26.3858 4 54 4C109.228 4 98.7715 54 154 54C181.614 54 192.807 41.5 204 29",stroke:"black","stroke-width":"7","stroke-linecap":"round",class:"progress",style:Ae({strokeDashoffset:`calc(var(--dash-length) * ${o(l).sub(.33,o(l).div(e.timer,e.duration(e.inputs)).times(1.33)).toNumber()})`})},null,4)])),o(i)?(h(),U(Pe(o(i)),{key:0})):B("",!0),o(a)?(h(),U(Mn,{key:1})):B("",!0)],2))}});const dm={key:0},pm=g("span",{class:"toggle"},"\u25BC",-1),mm=Z({__name:"MachineType",props:{id:null,name:null,enabled:null,numInputs:null,inputs:null,timers:null,collapsed:null,machines:null,poweredUpMachine:null,canPowerUp:null,duration:null,outputDisplay:null,setInput:null,setPoweredUpMachine:null},setup(e){return(t,n)=>o(e.enabled)?(h(),x("div",dm,[g("h2",{onClick:n[0]||(n[0]=i=>e.collapsed.value=!e.collapsed.value),class:Me(["breeding-collapsible",{collapsed:e.collapsed.value}])},[pm,m(ee(e.name),1)],2),e.collapsed.value?B("",!0):(h(),U(Ki,{key:0},{default:re(()=>[(h(!0),x(F,null,Tn(new o(l)(e.machines.amount.value).toNumber(),i=>{var a,s;return h(),U(cm,{key:i-1,index:i-1,numInputs:e.numInputs,inputs:(a=o(e.inputs)[i-1])!=null?a:[],timer:(s=o(e.timers)[i-1])!=null?s:0,duration:e.duration,outputDisplay:e.outputDisplay,setInput:e.setInput,canPowerUp:e.canPowerUp,poweredUp:e.poweredUpMachine.value.type===e.id&&i-1===e.poweredUpMachine.value.index,onSetPoweredUp:()=>e.setPoweredUpMachine(i-1)},null,8,["index","numInputs","inputs","timer","duration","outputDisplay","setInput","canPowerUp","poweredUp","onSetPoweredUp"])}),128)),(h(),U(Pe(e.machines[o(nt)]),ca(Ja(e.machines[o(Be)]())),null,16))]),_:1}))])):B("",!0)}});const fm={class:"plant feature"},vm={class:"plant-symbol"},gm={class:"plant-details"},hm=g("div",{style:{"flex-grow":"1"}},null,-1),bm=g("h3",null,"Consume",-1),ym=g("br",null,null,-1),wm={key:0},_m=Z({__name:"Plant",props:{name:null,symbol:null,color:null,effectDescription:null,amount:null,consumedTimeRemaining:null,multiplier:null,consume:null},setup(e){const t=e,n=w(()=>`${je(l.add(t.amount.value,1).log10().add(1))}x ${t.effectDescription} for ${Gn(l.pow(t.amount.value,2).add(1).log2())}`);return(i,a)=>(h(),x("div",fm,[g("div",{class:"plant-info",style:Ae({color:e.color})},[g("span",vm,ee(e.symbol),1),g("div",gm,[g("span",null,ee(e.name),1),g("span",null,"Stored: "+ee(o(ge)(o(e.amount))),1)]),hm,g("button",{class:"button",onClick:a[0]||(a[0]=(...s)=>e.consume&&e.consume(...s))},[bm,ym,m(ee(o(n)),1)])],4),o(l).gt(o(e.consumedTimeRemaining),0)?(h(),x("div",wm," Current bonus: "+ee(o(je)(o(e.multiplier)))+"x "+ee(e.effectDescription)+" for "+ee(o(Gn)(o(e.consumedTimeRemaining))),1)):B("",!0)]))}}),_i="breeding",Dt=Fn(_i,function(){const e="Breeding Plants",t="#51D126",n=pn(0,"mutagens"),i=H([{type:"moly",analyzed:!1,speed:1,mutability:1,harvest:1}]),a=H("none"),s=H("none"),u=H({type:"none",index:-1}),c=H(!1),p=H(!1),d=Hn(e,()=>({color:t,image:"https://dummyimage.com/512x288/000/fff.png",imageFocus:{x:"75%",y:"60%"},symbol:"emoji_nature",randomQuips(){return[...sm,...oi]},resource:n,layerID:_i,modifierInfo:k(()=>rt(mt)),visibility:xn.milestones.jobMilestone.earned,showNotif:()=>Object.values(wt).some($=>o($.machines.canClick)||i.value.length!==0&&$.inputs.value.some(R=>$.numInputs!==R.filter(O=>O!==null&&O!=="none").length))})),v=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,2)),display:{requirement:`Achieve ${d.name} Level 2`,effectDisplay:"Unlock breeding and analyzing machines"}})),f=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,4)),display:{requirement:`Achieve ${d.name} Level 4`,effectDisplay:"Unlock powering up machines"},visibility:v.earned})),_=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,5)),display:{requirement:`Achieve ${d.name} Level 5`,effectDisplay:'Unlock bonus generator in "Harnessing Power" job'},visibility:f.earned})),C=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,6)),display:{requirement:`Achieve ${d.name} Level 6`,effectDisplay:"Unlock recycling machine"},visibility:_.earned})),b=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,8)),display:{requirement:`Achieve ${d.name} Level 8`,effectDisplay:"Unlock mutating machine"},visibility:C.earned})),M=ye(()=>({requirements:be(()=>l.gte(d.rawLevel.value,10)),display:{requirement:`Achieve ${d.name} Level 10`,effectDisplay:'Unlock 1/2 of "Performing Rituals" Job'},visibility:b.earned,onComplete(){Ve.milestones.jobMilestone.earned.value&&_n(Ti,G)}})),Q={breedingAnalyzingMilestone:v,powerupMilestone:f,bonusGeneratorMilestone:_,recyclingMilestone:C,mutatingMilestone:b,jobMilestone:M},ie=[M,b,C,_,f,v],P=H(!0),T=w(()=>ie.filter($=>$.earned.value===!1)),{firstFeature:J,collapsedContent:oe,hasCollapsedContent:ue}=ai(ie,$=>$.earned.value);function V($){const R=H(0),O=H(0),we=H(0),le=H(!1);return dt(Ke=>{const Ct=$.call(Ke,Ke),vt=w(()=>l.add(O.value,1).log10().add(1));return{...Ct,amount:R,consumedAmount:O,consumedTimeRemaining:we,discovered:le,multiplier:vt,modifier:A(()=>({multiplier:vt,description:`${Ct.name} consumption`,enabled:()=>we.value>0})),consume:function(){O.value=R.value,we.value=l.pow(R.value,2).add(1).log2().toNumber(),R.value=0,le.value=!0},seed:{[nt]:he(`\u{1F331}<sub><span class="material-icons" style="color: ${Ct.color}">${Ct.symbol}</span></sub>`),[Be]:()=>({})},[nt]:_m,[Be]:function(){const{name:xt,symbol:Lt,color:se,effectDescription:Ne,amount:Ie,consumedTimeRemaining:Y,multiplier:Ye,consume:bt}=this;return{name:xt,symbol:Lt,color:se,effectDescription:Ne,amount:Ie,consumedTimeRemaining:Y,multiplier:Ye,consume:bt}}}})}const W={moly:V(()=>({name:"Tempus Largitatis",symbol:qe.job.symbol,color:qe.job.color,effectDescription:"Moly gain"})),earthEssence:V(()=>({name:"Terra Lupulus",symbol:Je.elements.earth.symbol,color:Je.elements.earth.color,effectDescription:"Earth essence gain"})),waterEssence:V(()=>({name:"Aqua Lupulus",symbol:Je.elements.water.symbol,color:Je.elements.water.color,effectDescription:"Water essence gain"})),airEssence:V(()=>({name:"Aer Lupulus",symbol:Je.elements.air.symbol,color:Je.elements.air.color,effectDescription:"Air essence gain"})),fireEssence:V(()=>({name:"Ignis Lupulus",symbol:Je.elements.fire.symbol,color:Je.elements.fire.color,effectDescription:"Fire essence gain"})),properties:V(()=>({name:"Discipulo Scriptor",symbol:xn.job.symbol,color:xn.job.color,effectDescription:"Properties gain"})),potentia:V(()=>({name:"Glarea Fovea",symbol:Se.job.symbol,color:Se.job.color,effectDescription:"Potentia gain"})),energeia:V(()=>({name:"Vis Salutarias",symbol:Ve.job.symbol,color:Ve.job.color,effectDescription:"Energeia gain"}))};function Re($,R,O){const we=H([]),le=H([]),Ke=H(!1),Ct=La(vt=>({initialValue:1,visibility:Ve.milestones.machinesMilestone.earned,requirements:Ta(()=>({cost:E.variable(vt.amount).pow_base(R),resource:Ve.energeia})),display:{description:`Additional ${$.slice(0,-1)}`,showAmount:!1},style:{width:"600px",minHeight:"unset"}}));return dt(vt=>{const xt=O.call(vt,vt),Lt=Qe(xt.enabled);return et(Ct.amount,se=>{for(;l.lt(we.value.length,se);)we.value.push([]);for(;l.lt(le.value.length,se);)le.value.push(0)}),{...xt,name:$,priceRatio:R,enabled:Lt,inputs:we,timers:le,collapsed:Ke,machines:Ct,setInput:function(se,Ne){var Ye,bt,Kt;const Ie=(bt=(Ye=we.value[se])==null?void 0:Ye[Ne])!=null?bt:"none";Ie!=="none"&&i.value.push(Ie);const Y=(Kt=we.value[se])!=null?Kt:[];Y[Ne]=a.value,we.value[se]=Y,i.value=i.value.filter($t=>$t!==a.value),a.value="none"},duration:function(se){const Ne=se.filter(Ye=>Ye!=="none");if(Ne.length===0)return 1/0;const Ie=Ne.map(Ye=>Ye.speed).reduce((Ye,bt)=>Ye+bt)/Ne.length,Y=l.times(xt.baseDuration,l.pow(.99,l.sqrt(Ie)));return new l(xt.durationModifier.apply(Y)).toNumber()},setPoweredUpMachine(se){Nt(xt.id,se)},[nt]:mm,[Be]:function(){const{id:se,name:Ne,enabled:Ie,numInputs:Y,inputs:Ye,timers:bt,collapsed:Kt,machines:$t,duration:Yt,outputDisplay:St,setInput:vn,setPoweredUpMachine:Cn}=this;return{id:se,name:Ne,enabled:Ie,numInputs:Y,inputs:Ye,timers:bt,collapsed:Kt,machines:$t,poweredUpMachine:u,canPowerUp:f.earned,duration:Yt,outputDisplay:St,setInput:vn,setPoweredUpMachine:Cn}}}})}const Te=Re("Growing Machines",50,()=>({id:"growMachines",enabled:!0,numInputs:1,baseDuration:100,durationModifier:ne(()=>[]),isRunning:$=>Object.keys($).length===1&&$[0]!=="none",onActivate:$=>{if(Object.keys($).length===0||$[0]==="none")return;W[$[0].type].amount.value=l.add(W[$[0].type].amount.value,$[0].harvest);const R=$[0].mutability;n.value=l.add(n.value,R),d.xp.value=l.add(d.xp.value,Ge.apply(R))},outputDisplay:$=>k(()=>Object.keys($).length===0||$[0]==="none"?r("div",null,[r("div",{style:"font-size: xx-large"},[m("?")]),r("div",null,[m("+1 mutations")])]):r("div",null,[r("div",{style:{fontSize:"xx-large",color:W[$[0].type].color}},[ge(W[$[0].type].amount.value)," ",W[$[0].type].symbol]),r("div",null,[m("+ "),n.displayName])]))})),_e=H([]);function Ze($){return l.times($.speed,$.harvest).pow(2).div($.mutability).ceil()}function ae($,R){return l.max(1,l.add($,l.sqrt(R).times(Math.random()-.4).ceil())).toNumber()}const Et=Re("Breeding Machines",80,()=>({id:"breedingMachines",enabled:v.earned,numInputs:1,baseDuration:600,durationModifier:ne(()=>[]),isRunning:($,R)=>{var O;return((O=_e.value[R])!=null?O:"none")==="none"&&Object.keys($).length===1&&$[0]!=="none"&&l.gte(n.value,Ze($[0]))},onActivate:($,R)=>{if(Object.keys($).length!==1||$[0]==="none"||_e.value[R]!=null&&_e.value[R]!=="none")return;n.value=l.sub(n.value,Ze($[0]));let{speed:O,harvest:we,mutability:le}=$[0],Ke=$[0].type;l.sub(1,l.add(le,1).log(1e6).pow(1.3).add(1).recip()).toNumber()>Math.random()&&(Ke=Object.keys(W)[Math.floor(Math.random()*Object.keys(W).length)],O=Math.sqrt(O),we=Math.sqrt(we),le=Math.sqrt(le)),O=ae(O,le),we=ae(we,le),le=ae(le,le),_e.value[R]={type:Ke,speed:O,harvest:we,mutability:le,analyzed:!1}},outputDisplay:($,R)=>k(()=>{var O;return r("div",null,[r(pi,{seed:(O=_e.value[R])!=null?O:"none",onClick:we=>{const le=_e.value[R];we!=="none"&&le!=null&&le!=="none"&&(i.value.push(le),_e.value[R]="none")}},null),Et.isRunning($,R)?r("div",null,[m("-"),ge(Ze($[0]))," ",n.displayName]):null])})})),pt=H([]);function ze($){return l.times($.speed,$.harvest).times($.mutability).ceil()}const ut=Re("Analyzing Machines",100,()=>({id:"analyzingMachines",enabled:v.earned,numInputs:1,baseDuration:1200,durationModifier:ne(()=>[]),isRunning:($,R)=>{var O;return((O=pt.value[R])!=null?O:"none")==="none"&&Object.keys($).length===1&&$[0]!=="none"&&$[0].analyzed===!1&&l.gte(qe.flowers.value,ze($[0]))},onActivate:($,R)=>{Object.keys($).length!==1||$[0]==="none"||$[0].analyzed||pt.value[R]!=null&&pt.value[R]!=="none"||(qe.flowers.value=l.sub(qe.flowers.value,ze($[0])),pt.value[R]={...$[0],analyzed:!0},ut.inputs.value[R]=[])},outputDisplay:($,R)=>k(()=>{var O;return r("div",null,[r(pi,{seed:(O=pt.value[R])!=null?O:"none",onClick:we=>{const le=pt.value[R];we!=="none"&&le!=null&&le!=="none"&&(i.value.push(le),pt.value[R]="none")}},null),ut.isRunning($,R)?r("div",null,[m("-"),ge(ze($[0]))," ",qe.flowers.displayName]):null])})}));function L($){return l.times($.speed,$.harvest).times($.mutability).ceil()}const z=Re("Recycling Machines",90,()=>({id:"recyclingMachines",enabled:C.earned,numInputs:1,baseDuration:900,durationModifier:ne(()=>[]),isRunning:$=>Object.keys($).length===1&&$[0]!=="none",onActivate:($,R)=>{if(Object.keys($).length!==1||$[0]==="none")return;const O=L($[0]);n.value=l.add(n.value,O),d.xp.value=l.add(d.xp.value,Ge.apply(O.times(10))),z.inputs.value[R]=[]},outputDisplay:($,R)=>k(()=>r("div",null,[z.isRunning($,R)&&$[0].analyzed?r("div",null,[m("+"),ge(L($[0]))," ",n.displayName,r("br",null,null),m("x10 exp gained")]):r("div",null,[m("+ "),n.displayName,r("br",null,null),m("x10 exp gained")])]))})),de=H([]);function fe($){return l.times($.mutability,2).pow(2).ceil()}const ke=Re("Mutating Machines",150,()=>({id:"mutatingMachines",enabled:b.earned,numInputs:1,baseDuration:1800,durationModifier:ne(()=>[]),isRunning:($,R)=>{var O;return((O=de.value[R])!=null?O:"none")==="none"&&Object.keys($).length===1&&$[0]!=="none"&&l.gte(n.value,fe($[0]))},onActivate:($,R)=>{Object.keys($).length!==1||$[0]==="none"||de.value[R]!=null&&de.value[R]!=="none"||(n.value=l.sub(n.value,fe($[0])),de.value[R]={...$[0],mutability:$[0].mutability*2},ke.inputs.value[R]=[])},outputDisplay:($,R)=>k(()=>{var O;return r("div",null,[r(pi,{seed:(O=de.value[R])!=null?O:"none",onClick:we=>{const le=de.value[R];we!=="none"&&le!=null&&le!=="none"&&(i.value.push(le),de.value[R]="none")}},null),ke.isRunning($,R)?r("div",null,[m("-"),ge(fe($[0])),m(" "),n.displayName]):null])})})),wt={growMachines:Te,breedingMachines:Et,analyzingMachines:ut,recyclingMachines:z,mutatingMachines:ke};function Nt($,R){u.value={type:$,index:R}}const K=w(()=>l.pow(1.1,d.level.value)),it=w(()=>Object.values(W).filter($=>$.discovered.value).length),Oe=ne(()=>[A(()=>({multiplier:Se.appliedTimeEffect,description:"Applied time",enabled:()=>Se.job.active.value&&Se.milestones.appliedTimeMilestone.earned.value&&Se.selectedJob.value===_i})),A(()=>({multiplier:()=>l.pow(1.1,it.value),description:"Unique plants eaten (x1.1 each)"})),A(()=>({multiplier:K,description:`${d.name} level (x1.1 each)`})),Ve.batteries.breeding.timePassing.modifier]),Xe=w(()=>new l(Oe.apply(1)).toNumber()),Ge=ne(()=>[Ve.batteries.breeding.xpGain.modifier,A(()=>({multiplier:K,description:`${d.name} level (x1.1 each)`}))]),ce={timePassing:Oe,jobXpGain:Ge},[mt,_t]=Wt(()=>[{title:"Time Passing",modifier:Oe,base:1},{title:`${d.name} EXP Gain`,modifier:Ge,base:1}]),ft=Pn({general:()=>({display:"General",glowColor(){return ft.activeTab.value===this.tab?t:""},tab:mt,generalTabCollapsed:_t})},()=>({style:`--layer-color: ${t}`}));return this.on("preUpdate",$=>{d.timeLoopActive.value===!1&&G.tabs[1]!==_i||($=l.times($,Xe.value).toNumber(),Object.values(wt).forEach(R=>{var we;const O=R.timers.value;for(let le=0;l.lt(le,R.machines.amount.value);le++){const Ke=(we=R.inputs.value[le])!=null?we:[];R.isRunning(Ke,le)?(O[le]+=u.value.type===R.id&&u.value.index===le?$*2:$,l.gte(O[le],R.duration(Ke))&&(R.onActivate(R.inputs.value[le],le),O[le]=0)):O[le]=0}R.timers.value=O}))}),Gt.on("update",($,R)=>{d.timeLoopActive.value===!1&&G.tabs[1]!==_i||Object.values(W).forEach(O=>{O.consumedTimeRemaining.value!==0&&(O.consumedTimeRemaining.value=Math.max(0,O.consumedTimeRemaining.value-R))})}),{name:e,color:t,minWidth:670,job:d,modifiers:ce,milestones:Q,collapseMilestones:P,modifierTabs:ft,machines:wt,seeds:i,selectedSeed:a,recycling:s,plants:W,breedingOutputs:_e,analyzingOutputs:pt,mutatingOutputs:de,poweredUpMachine:u,plantsCollapsed:c,seedsCollapsed:p,display:k(()=>{const $=[...T.value];J.value&&$.push(J.value);const R=Object.keys(W).filter(O=>W[O].discovered.value||l.gt(W[O].amount.value,0));return r(F,null,[r(qi,{resource:n,color:t},null),li(...$,k(()=>dn(r(ri,{collapsed:P,content:oe,display:P.value?"Show other completed milestones":"Hide other completed milestones"},null),[[$n,o(ue)]]))),r(xe,null,null),f.earned.value?r(F,null,[r("div",null,[m("Select a machine by clicking on its progress bar to make it work 2x faster")]),r(xe,null,null)]):null,We(Te),We(Et),We(ut),We(z),We(ke),R.length>0?r(F,null,[r(xe,null,null),r("h2",{class:{"breeding-collapsible":!0,collapsed:c.value},onClick:()=>c.value=!c.value},[r("span",{class:"toggle"},[m("\u25BC")]),m("Plants")]),c.value?null:Mi(...R.map(O=>W[O]))]):null,r(xe,null,null),r("h2",{class:{"breeding-collapsible":!0,collapsed:p.value},onClick:()=>p.value=!p.value},[r("span",{class:"toggle"},[m("\u25BC")]),m("Seeds")]),p.value?null:r("div",{style:"width: 600px"},[i.value.map(O=>r(pi,{seed:O,selected:a.value===O,onClick:()=>{a.value=a.value===O?"none":O}},null)),r("hr",null,null),r("div",{style:"display: flex; align-items: center; text-align: left"},[r(pi,{seed:s.value,onClick:()=>{a.value==="none"?s.value!=="none"&&(i.value.push(s.value),s.value="none"):(s.value=a.value,i.value=i.value.filter(O=>O!==a.value),a.value="none")}},{default:()=>[s.value==="none"?r("div",{class:"material-icons",style:"font-size: xxx-large; color: var(--outline); position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: -1;"},[m("delete")]):null]}),r("span",{style:"margin-left: 10px"},[m("Click here to trash your selected seed, or restore your most recently trashed seed.")])])])])})}}),Cm={min:.5,max:1},Sm=[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],km=.001,Nm=.1,xm=100,$m=!0,Mm={x:0,y:0},Pm=!1,Tm=[{type:"alpha",config:{alpha:{list:[{time:0,value:.74},{time:1,value:0}]}}},{type:"moveSpeed",config:{speed:{list:[{time:0,value:700},{time:1,value:0}]},minMult:1}},{type:"scale",config:{scale:{list:[{time:0,value:5},{time:1,value:1.2}]},minMult:1}},{type:"color",config:{color:{list:[{time:0,value:"#ffdfa0"},{time:1,value:"#100f0c"}]}}},{type:"rotation",config:{accel:0,minSpeed:0,maxSpeed:200,minStart:0,maxStart:360}},{type:"textureRandom",config:{textures:["/particle.png"]}},{type:"spawnShape",config:{type:"rect",data:{x:0,y:0,w:200,h:100}}}];var la={lifetime:Cm,ease:Sm,frequency:km,emitterLifetime:Nm,maxParticles:xm,addAtBack:$m,pos:Mm,emit:Pm,behaviors:Tm};const Oa=e=>(an("data-v-22f08ee0"),e=e(),sn(),e),Im={class:"modal-mask",style:{"z-index":"10","background-color":"var(--raised-background)",top:"50px"}},Em={class:"cutscene-positioner"},Fm={class:"modal-container cutscene-container"},qm=Oa(()=>g("div",{class:"paper-background"},null,-1)),Dm={class:"content"},Am={key:0,class:"caption"},Lm={style:{display:"none"}},Rm={id:"wavy2"},Om=["seed"],jm=Oa(()=>g("feDisplacementMap",{in:"SourceGraphic",scale:"20"},null,-1)),Bm=Z({__name:"Cutscene",props:{stage:null,caption:null},emits:["next"],setup(e,{emit:t}){const n=e,i=ln(n,"stage"),a=ln(n,"caption"),s=X(1);et([i,a],()=>s.value++);const u=ii(i),c=En(a);return(p,d)=>(h(),U(oa,{to:"#modal-root"},[r(Zi,{name:"cutscene-modal"},{default:re(()=>[g("div",Im,[g("div",Em,[g("div",Fm,[qm,g("div",Dm,[(h(),U(Pe(o(u)))),o(c)?(h(),x("div",Am,[(h(),U(Pe(o(c))))])):B("",!0)]),g("button",{onClick:d[0]||(d[0]=v=>t("next")),class:"button next"},"Next")]),(h(),x("svg",Lm,[g("filter",Rm,[g("feTurbulence",{x:"-50vw",y:"-50vh",width:"200vw",height:"200vh",baseFrequency:"0.015",numOctaves:"10",seed:s.value},null,8,Om),jm])]))])])]),_:1})]))}});var Vm=me(Bm,[["__scopeId","data-v-22f08ee0"]]);const aa=gi(),Dl=["flowers","distill","study","experiments","generators","breeding","rituals"],zm="main",at=Fn(zm,function(){const e=H(0),t=Ut({flowers:qe.job,distill:Je.job,study:xn.job,experiments:Se.job,generators:Ve.job,breeding:Dt.job,rituals:Ti.job}),n=w(()=>{let b=0;return e.value>1&&(b=1,xn.milestones.timeSlotMilestone.earned.value&&b++,Se.milestones.timeSlotMilestone.earned.value&&b++,Ti.milestones.timeSlotMilestone.earned.value&&b++),b}),i=w(()=>Object.values(t).filter(b=>b.timeLoopActive.value).length+Ve.extraTimeSlotsAllocated.value),a=w(()=>n.value>i.value),s=H([0,0,0,0,0]);Object.values(t).forEach(b=>{let M=0;et(b.rawLevel,(Q,ie)=>{var P;if(!(De.active!==G.id||l.neq(Q,l.add(ie,1)))&&(b.notif!=null&&aa.dismiss(b.notif),b.notif=aa.info(`${b.name} is now level ${Q}!`),Date.now()-M>500)){const T=(P=at.nodes.value[b.id])==null?void 0:P.rect,J=v.boundingRect.value;if(T&&J){M=Date.now();const oe=Object.assign({},la,{behaviors:[...la.behaviors.slice(0,-1),{type:"spawnShape",config:{type:"rect",data:{x:T.x-J.x,y:T.y-J.y,w:T.width,h:T.height}}}]});v.addEmitter(oe).then(ue=>ue.playOnceAndDestroy())}}})});const u=pn(w(()=>Object.values(t).reduce((b,M)=>b.add(M.level.value),new l(0))),"Sum of all job levels"),c=To(u),p=tl(u),d=fc(()=>({display:{title:"<h1>Close the time loop</h1>",description:"<br/><i>The flowers are collected, and I have just enough. It's time to get started.</i>"},requirements:[],style:`width: 150px; height: 150px; --layer-color: ${qe.color}`,visibility:()=>e.value==1&&l.gte(qe.flowers.value,1e7)})),v=el(()=>({boundingRect:X(null),onContainerResized(b){this.boundingRect.value=b},style:"z-index: -1"})),f=X(null);zt(()=>{if(De.active===G.id){if(e.value===0){f.value={pages:[{stage:k(()=>r("img",{style:"max-width: 100%; flex-grow: 1",src:"https://upload.wikimedia.org/wikipedia/commons/7/71/Serpiente_alquimica.jpg"},null))},{stage:k(()=>r("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"Test"},{stage:k(()=>r("div",{style:"display: flex"},[r("img",{style:"max-width: 100%; flex-grow: 1; margin-right: -20%",src:"https://dummyimage.com/386x320/000/fff.png"},null),r("img",{style:"max-width: 100%; flex-grow: 1; margin-left: -20%",src:"https://dummyimage.com/386x320/000/fff.png"},null)])),caption:"Other test"}],page:0,onFinished(){e.value=1,_n(qe,G)}};return}else if(e.value===1&&d.bought.value){f.value={pages:[{stage:k(()=>r("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"I can wrap this field in a time loop and reset it whenever the field is empty. If I take the flowers out of the loop before hand I will have a perfectly sustainable source of moly."},{stage:k(()=>r("img",{style:"max-width: 100%; flex-grow: 1",src:"https://dummyimage.com/720x320/000/fff.png"},null)),caption:"Now my focus will be transforming the flowers, and determining how best to utilize their power. I'll start by distilling the flowers into their component elements."}],page:0,onFinished(){e.value=2,_n(Je,G)}};return}f.value=null}});const _=w(()=>e.value===1?r("h2",null,[m("Current Goal: Harvest all the moly"),r("br",null,null),m("("),ge(l.sub(1e7,qe.flowers.value).clampMin(0))," ",m("remaining)")]):e.value==2?r("h2",null,[m("Current Goal: Perform Ritual of G\xE9nesis")]):r(F,null,null)),C=Hn("???",()=>({color:"black",image:"https://dummyimage.com/720x320/000/fff.png",imageFocus:{x:"50%",y:"50%"},layerID:"unknown",symbol:"",loopable:!1,visibility:()=>Ve.milestones.jobMilestone.earned.value!==Dt.milestones.jobMilestone.earned.value?Le.Visible:Le.None,classes:{broken:!0},open:()=>{}}));return{name:"Jobs",chapter:e,timeSlots:n,hasTimeSlotAvailable:a,resetTimes:s,closeTimeLoop:d,activeCutscene:f,classes:{nigredo:!0},jobs:t,partialJob:C,sumJobLevels:u,bestJobLevelsSum:p,totalJobLevelsSum:c,display:k(()=>f.value?r(Vm,{stage:f.value.pages[f.value.page].stage,caption:f.value.pages[f.value.page].caption,onNext:()=>{var b,M;f.value&&(f.value.page==f.value.pages.length-1?(M=(b=f.value).onFinished)==null||M.call(b):f.value.page++)}},null):r(F,null,[G.devSpeed===0?r("div",null,[m("Game Paused")]):null,G.devSpeed!=null&&G.devSpeed!==1?r("div",null,[m("Dev Speed: "),je(G.devSpeed),m("x")]):null,G.offlineTime!=null?r("div",null,[m("Offline Time: "),Gn(G.offlineTime)]):null,G.devSpeed!=null||G.offlineTime!=null?r(xe,null,null):null,o(_),r(xe,null,null),l.gt(n.value,0)?r("div",null,[n.value-i.value,m(" Time Slot"),n.value-i.value===1?"":"s",m(" Available")]):null,Mi(...Object.values(t),C),We(d),We(v)]))}});Gt.on("update",e=>{at.chapter.value>-1&&at.activeCutscene.value!=null&&(at.resetTimes.value[at.chapter.value-1]+=e)});const _l=w(()=>Dl.filter(e=>gt(at.jobs[e].visibility)).length),Gm=e=>{var n,i,a,s,u,c,p,d,v,f,_,C,b,M,Q,ie,P,T,J,oe,ue,V,W,Re,Te,_e,Ze;const t=(a=(i=(n=e.layers)==null?void 0:n.main)==null?void 0:i.chapter)!=null?a:0;if(t===0)return[at];if(t===1)return[at,qe];if(t===2){const ae=[at,qe,Je];return((p=(c=(u=(s=e.layers)==null?void 0:s.distill)==null?void 0:u.milestones)==null?void 0:c.studyMilestone)==null?void 0:p.earned)===!0&&ae.push(xn),((_=(f=(v=(d=e.layers)==null?void 0:d.distill)==null?void 0:v.milestones)==null?void 0:f.experimentsMilestone)==null?void 0:_.earned)===!0&&ae.push(Se),((Q=(M=(b=(C=e.layers)==null?void 0:C.experiments)==null?void 0:b.milestones)==null?void 0:M.jobMilestone)==null?void 0:Q.earned)===!0&&ae.push(Ve),((J=(T=(P=(ie=e.layers)==null?void 0:ie.study)==null?void 0:P.milestones)==null?void 0:T.jobMilestone)==null?void 0:J.earned)===!0&&ae.push(Dt),((W=(V=(ue=(oe=e.layers)==null?void 0:oe.generators)==null?void 0:ue.milestones)==null?void 0:V.jobMilestone)==null?void 0:W.earned)===!0&&((Ze=(_e=(Te=(Re=e.layers)==null?void 0:Re.breeding)==null?void 0:Te.milestones)==null?void 0:_e.jobMilestone)==null?void 0:Ze.earned)===!0&&ae.push(Ti),ae}throw`Chapter ${t} not supported`},ja=w(()=>!1);function Um(e,t){}var Xm=Object.freeze(Object.defineProperty({__proto__:null,jobKeys:Dl,main:at,numJobs:_l,getInitialLayers:Gm,hasWon:ja,fixOldSave:Um},Symbol.toStringTag,{value:"Module"}));const Hm={class:"modifier-info-toggle"},Jm=Z({__name:"ModifierInfo",props:{display:null,name:null},setup(e){const n=ln(e,"display"),i=X(!1),a=kt();let s=null;return et(i,u=>{s==null||s(),u?s=zt(()=>{a.value=he(st(n))}):s=null}),kl(()=>s==null?void 0:s()),(u,c)=>(h(),x(F,null,[r(lt,{direction:o($e).Left,display:"Open Modifiers",xoffset:"10px"},{default:re(()=>[g("div",Hm,[g("button",{onClick:c[0]||(c[0]=ni(p=>i.value=!0,["stop"]))},"?")])]),_:1},8,["direction"]),r(Un,Qt({modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=p=>i.value=p),class:"modifiers-modal"},u.$attrs),{header:re(()=>[g("h2",null,ee(e.name)+" Modifiers",1)]),body:re(({shown:p})=>[p?(h(),U(Pe(o(a)),{key:0})):B("",!0)]),_:1},16,["modelValue"])],64))}});var Wm=me(Jm,[["__scopeId","data-v-19951ae7"]]),Qm=Z({props:{visibility:{type:j(Number),required:!0},style:j(String,Object,Array),classes:j(Object),xp:{type:Object,required:!0},level:{type:Object,required:!0},levelProgress:{type:Object,required:!0},timeLoopActive:{type:Object,required:!0},name:{type:String,required:!0},color:{type:j(String),required:!0},image:{type:j(String),required:!0},imageFocus:{type:j(Object),required:!0},resource:[Object,Array],layerID:{type:String,required:!0},currentQuip:{type:Object,required:!0},randomQuips:{type:j(Array)},modifierInfo:j(String,Object,Function),id:{type:String,required:!0},modifierModalAttrs:Object,showNotif:j(Boolean),loopable:j(Boolean),open:{type:Function,required:!0}},components:{Node:Xn,ModifierInfo:Wm,Tooltip:lt,Notif:Mn},setup(e){const{layerID:t,currentQuip:n,randomQuips:i,resource:a}=ot(e),s=w(()=>G.tabs[1]==t.value),u=w(()=>at.chapter.value>1),c=at.hasTimeSlotAvailable;let p;zt(()=>{var _;clearInterval(p);const f=(_=st(i))!=null?_:[];n.value?p=setTimeout(()=>{n.value=null},15e3):p=setTimeout(()=>{n.value=f[Math.floor(Math.random()*f.length)]},Math.random()*15e3+15e3)}),Cl(()=>clearInterval(p));const d=X(!1);et(s,()=>{d.value=!0,setTimeout(()=>d.value=!1,250)});const v=w(()=>{if("displayName"in a)return[a];const f=o(a);return Array.isArray(f)?f:[]});return{selected:s,animating:d,finishedFirstChapter:u,hasTimeSlotAvailable:c,formatWhole:ge,unref:o,displayResource:Nn,resourceArray:v,Visibility:Le,Direction:$e,isVisible:gt,isHidden:In}}});const ll=e=>(an("data-v-244765c3"),e=e(),sn(),e),Zm=["src"],Km={class:"job-contents"},Ym={class:"job-resource"},ef=ll(()=>g("br",null,null,-1)),tf=ll(()=>g("br",null,null,-1)),nf={class:"job-title"},lf={style:{"margin-bottom":"0"}},af=ll(()=>g("span",{style:{"flex-grow":"1"}},null,-1)),sf={key:0,class:"job-quip"},rf=ll(()=>g("div",{class:"job-clipping-container"},[g("div",{class:"job-progress-container"},[g("div",{class:"job-progress"})])],-1)),of=["disabled"];function uf(e,t,n,i,a,s){var v,f;const u=At("ModifierInfo"),c=At("Tooltip"),p=At("Node"),d=At("Notif");return e.isVisible(e.visibility)?(h(),x("span",{key:0,style:Ae([{visibility:e.isHidden(e.visibility)?"hidden":void 0,"--posx":e.unref(e.imageFocus).x,"--posy":e.unref(e.imageFocus).y,"--progress":`${(1-e.unref(e.levelProgress))*100}%`,"--foreground":e.unref(e.color)},(v=e.unref(e.style))!=null?v:{}]),class:Me(["feature dontMerge job",[{selected:e.selected,active:e.selected||e.unref(e.timeLoopActive),animating:e.animating},(f=e.unref(e.classes))!=null?f:{}]]),onClick:t[1]||(t[1]=(..._)=>e.open&&e.open(..._))},[g("img",{src:e.unref(e.image)},null,8,Zm),g("div",Km,[(h(!0),x(F,null,Tn(e.resourceArray,(_,C)=>(h(),x(F,{key:C},[g("div",Ym,[m(ee(e.displayResource(_))+" "+ee(_.displayName),1),ef]),tf],64))),128)),g("div",nf,[g("h2",null,ee(e.name),1),g("span",lf,"Lv. "+ee(e.formatWhole(e.level.value)),1),af,e.modifierInfo?(h(),U(u,Qt({key:0,display:e.modifierInfo,name:e.name},e.modifierModalAttrs),null,16,["display","name"])):B("",!0)])]),e.selected&&e.unref(e.currentQuip)?(h(),x("div",sf,'"'+ee(e.unref(e.currentQuip))+'"',1)):B("",!0),rf,e.unref(e.loopable)!==!1?(h(),U(c,{key:1,direction:e.Direction.Left,display:"Toggle Time Loop",class:"job-loop-toggle"},{default:re(()=>[e.finishedFirstChapter?(h(),x("button",{key:0,class:Me(["material-icons",{active:e.unref(e.timeLoopActive)}]),onClick:t[0]||(t[0]=ni(_=>e.timeLoopActive.value=!e.unref(e.timeLoopActive),["stop"])),disabled:!e.hasTimeSlotAvailable&&!e.unref(e.timeLoopActive)}," all_inclusive ",10,of)):B("",!0)]),_:1},8,["direction"])):B("",!0),r(p,{id:e.id},null,8,["id"]),e.unref(e.showNotif)?(h(),U(d,{key:2})):B("",!0)],6)):B("",!0)}var cf=me(Qm,[["render",uf],["__scopeId","data-v-244765c3"]]);const df=Symbol("Job"),Al=.7643;function Hn(e,t){const n=pn(0,e+" XP"),i=H(!1);return dt(a=>{const s=t.call(a,a);return s.id=mn("job-"),s.type=df,s[nt]=cf,s.name=e,s.xp=n,s.timeLoopActive=i,s.rawLevel=w(()=>{const u=s;if(l.eq(u.xp.value,0))return 1;let c=l.clampMin(u.xp.value,1).log10().add(1);return c.gt(25)&&(c=c.sub(25).pow(Al).add(25)),c.floor()}),s.level=pn(w(()=>s.rawLevel.value),s.name+" Levels"),s.levelProgress=w(()=>{const u=s,c=u.rawLevel.value,p=sa(c),d=sa(l.add(c,1));let v;return l.lt(c,25)?v=l.sub(u.xp.value,p).div(l.sub(d,p)).toNumber():v=l.log10(u.xp.value).sub(l.log10(p)).div(l.log10(d).sub(l.log10(p))).toNumber(),v}),s.active=w(()=>gt(s.visibility)&&(s.timeLoopActive.value||G.tabs[1]===s.layerID)),s.currentQuip=X(null),tt(s,"open",function(){G.tabs.splice(1,1,s.layerID)}),s.setQuip=function(u){const c=s;if(c.currentQuip.value!=null){c.currentQuip.value=null,Vt(c.setQuip);return}if(u!=null)c.currentQuip.value=u;else if(o(c.randomQuips)){const p=o(c.randomQuips);c.currentQuip.value=p[Math.floor(Math.random()*p.length)]}},q(s,"visibility"),tt(s,"visibility",Le.Visible),q(s,"classes"),q(s,"style"),q(s,"color"),q(s,"image"),q(s,"imageFocus"),q(s,"randomQuips"),q(s,"modifierInfo"),q(s,"showNotif"),q(s,"loopable"),s[Be]=function(){const{id:u,xp:c,level:p,levelProgress:d,timeLoopActive:v,name:f,visibility:_,color:C,image:b,imageFocus:M,resource:Q,layerID:ie,classes:P,style:T,currentQuip:J,randomQuips:oe,modifierInfo:ue,modifierModalAttrs:V,showNotif:W,loopable:Re,open:Te}=this;return{id:u,xp:c,level:p,levelProgress:d,timeLoopActive:v,name:f,visibility:_,color:C,image:b,imageFocus:M,resource:Q,layerID:ie,classes:P,style:o(T),currentQuip:J,randomQuips:oe,modifierInfo:ue,modifierModalAttrs:V,showNotif:W,loopable:Re,open:Te}},s})}function sa(e){return l.eq(e,1)?0:(l.gt(e,25)&&(e=l.sub(e,25).pow(1/Al).add(25)),l.sub(e,1).pow10())}const pf={key:0},mf=["onClick","disabled"],ff={key:0},vf=["onClick"],gf=Z({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const i=ot(e),a=X(!1);et(a,c=>{t("confirmingChanged",c)});function s(){if(o(i.skipConfirm)){t("click");return}a.value&&t("click"),a.value=!a.value}function u(){a.value=!1}return(c,p)=>(h(),x("span",{class:Me(["container",{confirming:a.value}])},[a.value?(h(),x("span",pf,"Are you sure?")):B("",!0),g("button",{onClick:ni(s,["stop"]),class:"button danger",disabled:e.disabled},[a.value?(h(),x("span",ff,"Yes")):Zt(c.$slots,"default",{key:1},void 0,!0)],8,mf),a.value?(h(),x("button",{key:1,class:"button",onClick:ni(u,["stop"])},"No",8,vf)):B("",!0)],2))}});var hf=me(gf,[["__scopeId","data-v-2f8ef34c"]]);const qn=e=>(an("data-v-7a38a5a2"),e=e(),sn(),e),bf=qn(()=>g("div",{class:"handle material-icons"},"drag_handle",-1)),yf={key:0,class:"actions"},wf=qn(()=>g("span",{class:"material-icons"},"content_paste",-1)),_f=qn(()=>g("span",{class:"material-icons"},"content_copy",-1)),Cf=qn(()=>g("span",{class:"material-icons"},"edit",-1)),Sf=qn(()=>g("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),kf={key:1,class:"actions"},Nf=qn(()=>g("span",{class:"material-icons"},"check",-1)),xf=qn(()=>g("span",{class:"material-icons"},"close",-1)),$f={key:2,class:"details"},Mf={class:"save-version"},Pf=qn(()=>g("br",null,null,-1)),Tf={key:0},If={key:1},Ef={key:3,class:"details"},Ff={key:4,class:"details error"},qf=qn(()=>g("br",null,null,-1)),Df=Z({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:i}=ot(n),a=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),s=X(!1),u=X(!1),c=X("");et(s,()=>{var _;return c.value=(_=i.value.name)!=null?_:""});const p=w(()=>i.value!=null&&i.value.id===G.id),d=w(()=>{var _;return p.value?G.time:(_=i.value!=null&&i.value.time)!=null?_:0}),v=ii(w(()=>{var C,b,M,Q,ie,P,T,J,oe,ue,V,W,Re;const _=(Q=(M=(b=(C=i.value)==null?void 0:C.layers)==null?void 0:b.main)==null?void 0:M.chapter)!=null?Q:0;if(_==0)return"Just started";if(_==1){const Te=(J=(T=(P=(ie=i.value)==null?void 0:ie.layers)==null?void 0:P.flowers)==null?void 0:T.flowers)!=null?J:0;return`Chapter 1; ${ge(Te)} flowers`}else if(_==2){const Te=(Re=Object.values((W=(V=(ue=(oe=i.value)==null?void 0:oe.layers)==null?void 0:ue.main)==null?void 0:V.jobs)!=null?W:{}).reduce((_e,Ze)=>{if(Ze.xp==null)return _e;if(l.eq(Ze.xp,0))return _e.add(1);let ae=l.clampMin(Ze.xp,1).log10().add(1);return ae.gt(25)&&(ae=ae.sub(25).pow(Al).add(25)),ae.floor().add(_e)},new l(0)))!=null?Re:new l(0);return`Chapter 2; ${ge(Te)} total job levels`}else return`Chapter ${_}`}));function f(){t("editName",c.value),s.value=!1}return(_,C)=>(h(),x("div",{class:Me(["save",{active:o(p)}])},[bf,s.value?(h(),x("div",kf,[g("button",{onClick:f,class:"button"},[r(lt,{display:"Save",direction:o($e).Left,class:"info"},{default:re(()=>[Nf]),_:1},8,["direction"])]),g("button",{onClick:C[5]||(C[5]=b=>s.value=!s.value),class:"button"},[r(lt,{display:"Cancel",direction:o($e).Left,class:"info"},{default:re(()=>[xf]),_:1},8,["direction"])])])):(h(),x("div",yf,[o(i).error==null&&!u.value?(h(),U($a,{key:0,onClick:C[0]||(C[0]=b=>t("export")),class:"button",left:""},{default:re(()=>[r(lt,{display:"Export",direction:o($e).Left,class:"info"},{default:re(()=>[wf]),_:1},8,["direction"])]),_:1})):B("",!0),o(i).error==null&&!u.value?(h(),x("button",{key:1,onClick:C[1]||(C[1]=b=>t("duplicate")),class:"button"},[r(lt,{display:"Duplicate",direction:o($e).Left,class:"info"},{default:re(()=>[_f]),_:1},8,["direction"])])):B("",!0),o(i).error==null&&!u.value?(h(),x("button",{key:2,onClick:C[2]||(C[2]=b=>s.value=!s.value),class:"button"},[r(lt,{display:"Edit Name",direction:o($e).Left,class:"info"},{default:re(()=>[Cf]),_:1},8,["direction"])])):B("",!0),r(hf,{disabled:o(p),onClick:C[3]||(C[3]=b=>t("delete")),onConfirmingChanged:C[4]||(C[4]=b=>u.value=b)},{default:re(()=>[r(lt,{display:"Delete",direction:o($e).Left,class:"info"},{default:re(()=>[Sf]),_:1},8,["direction"])]),_:1},8,["disabled"])])),o(i).error==null&&!s.value?(h(),x("div",$f,[g("button",{class:"button open",onClick:C[6]||(C[6]=b=>t("open"))},[g("h3",null,ee(o(i).name),1)]),g("span",Mf,"v"+ee(o(i).modVersion),1),Pf,o(d)?(h(),x("div",Tf,"Last played "+ee(o(a).format(o(d))),1)):B("",!0),o(v)?(h(),x("div",If,[(h(),U(Pe(o(v))))])):B("",!0)])):o(i).error==null&&s.value?(h(),x("div",Ef,[r(Ma,{modelValue:c.value,"onUpdate:modelValue":C[7]||(C[7]=b=>c.value=b),class:"editname",onSubmit:f},null,8,["modelValue"])])):(h(),x("div",Ff,[m(" Error: Failed to load save with id "+ee(o(i).id),1),qf,m(ee(o(i).error),1)]))],2))}});var Af=me(Df,[["__scopeId","data-v-7a38a5a2"]]);const Ll=e=>(an("data-v-2a4275be"),e=e(),sn(),e),Lf=Ll(()=>g("h2",null,"Saves Manager",-1)),Rf={class:"modal-footer"},Of={class:"field"},jf=Ll(()=>g("span",{class:"field-title"},"Create Save",-1)),Bf={class:"field-buttons"},Vf={class:"footer"},zf=Ll(()=>g("div",{style:{"flex-grow":"1"}},null,-1)),Gf=Z({__name:"SavesManager",setup(e,{expose:t}){const n=X(!1),i=X(null);t({open(){n.value=!0}});const a=X(!1),s=X(""),u=X(null);et(s,P=>{P?Vt(()=>{try{if(P[0]!=="{")if(P[0]==="e")P=decodeURIComponent(escape(atob(P)));else if(P[0]==="\u1BE1")P=On.decompressFromUTF16(P);else{console.warn("Unable to determine preset encoding",P),a.value=!0;return}const T=JSON.parse(P);if(typeof T!="object"){a.value=!0;return}const J=Bi();T.id=J,nn(T),s.value="",a.value=!1,De.saves.push(J)}catch{a.value=!0}}):a.value=!1});let c={},p=X(Object.keys(c).reduce((P,T)=>(P.push({label:T.split("/").slice(-1)[0].slice(0,-4),value:c[T]}),P),[]));const d=Sl({});function v(P){if(d[P]==null){let T=localStorage.getItem(P);if(T==null)d[P]={error:"Save doesn't exist in localStorage",id:P};else if(T==="dW5kZWZpbmVk")d[P]={error:"Save is undefined",id:P};else try{if(T[0]!=="{")if(T[0]==="e")T=decodeURIComponent(escape(atob(T)));else if(T[0]==="\u1BE1")T=On.decompressFromUTF16(T);else return console.warn("Unable to determine preset encoding",T),a.value=!0,d[P]={error:"Unable to determine preset encoding",id:P},d[P];d[P]={...JSON.parse(T),id:P}}catch(J){d[P]={error:J,id:P},console.warn(`SavesManager: Failed to load info about save with id ${P}:
${J}
${T}`)}}return d[P]}et(n,P=>{P&&Object.keys(d).forEach(T=>delete d[T])});const f=w(()=>De.saves.reduce((P,T)=>(P[T]=v(T),P),{}));function _(P){let T;switch(G.id===P?T=ya(G):T=JSON.stringify(f.value[P]),Ue.exportEncoding){default:console.warn(`Unknown save encoding: ${Ue.exportEncoding}. Defaulting to lz`);case"lz":T=On.compressToUTF16(T);break;case"base64":T=btoa(unescape(encodeURIComponent(T)));break;case"plain":break}const J=document.createElement("textarea");J.value=T,document.body.appendChild(J),J.select(),J.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(J)}function C(P){G.id===P&&nn();const T={...f.value[P],id:Bi()};nn(T),De.saves.push(T.id)}function b(P){De.saves=De.saves.filter(T=>T!==P),localStorage.removeItem(P),d[P]=void 0}function M(P){f.value[G.id].time=G.time,nn(),d[G.id]=void 0,Yn(f.value[P]),d[P]=void 0}function Q(P){if(u.value=P,Vt(()=>{u.value=null}),P[0]!=="{")if(P[0]==="e")P=decodeURIComponent(escape(atob(P)));else if(P[0]==="\u1BE1")P=On.decompressFromUTF16(P);else{console.warn("Unable to determine preset encoding",P);return}const T=JSON.parse(P);T.id=Bi(),nn(T),De.saves.push(T.id),M(T.id)}function ie(P,T){const J=f.value[P];J!=null&&(J.name=T,G.id===P?(G.name=T,nn()):(nn(J),d[P]=void 0))}return(P,T)=>(h(),U(Un,{modelValue:n.value,"onUpdate:modelValue":T[4]||(T[4]=J=>n.value=J),ref_key:"modal",ref:i},{header:re(()=>[Lf]),body:re(({shown:J})=>[J?(h(),U(o(Za),{key:0,list:o(De).saves,handle:".handle",itemKey:oe=>oe},{item:re(({element:oe})=>[r(Af,{save:o(f)[oe],onOpen:ue=>M(oe),onExport:ue=>_(oe),onEditName:ue=>ie(oe,ue),onDuplicate:ue=>C(oe),onDelete:ue=>b(oe)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):B("",!0)]),footer:re(()=>[g("div",Rf,[r(Ma,{modelValue:s.value,"onUpdate:modelValue":T[0]||(T[0]=J=>s.value=J),title:"Import Save",placeholder:"Paste your save here!",class:Me({importingFailed:a.value})},null,8,["modelValue","class"]),g("div",Of,[jf,g("div",Bf,[g("button",{class:"button",onClick:T[1]||(T[1]=J=>M(o(mi)().id))},"New Game"),Object.keys(o(p)).length>0?(h(),U(Il,{key:0,options:o(p),modelValue:u.value,"onUpdate:modelValue":T[2]||(T[2]=J=>Q(J)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):B("",!0)])]),g("div",Vf,[zf,g("button",{class:"button modal-default-button",onClick:T[3]||(T[3]=J=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var Ba=me(Gf,[["__scopeId","data-v-2a4275be"]]);const rn=e=>(an("data-v-2ba32660"),e=e(),sn(),e),Uf=["src","alt"],Xf={key:1,class:"title"},Hf=rn(()=>g("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Jf={class:"discord"},Wf={class:"discord-links"},Qf={key:0},Zf=["href"],Kf=rn(()=>g("li",null,[g("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Yf=rn(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),ev={href:"https://forums.moddingtree.com/",target:"_blank"},tv=rn(()=>g("span",{class:"material-icons"},"forum",-1)),nv=rn(()=>g("span",{class:"material-icons"},"info",-1)),iv=rn(()=>g("span",{class:"material-icons"},"library_books",-1)),lv=rn(()=>g("span",{class:"material-icons"},"settings",-1)),av=rn(()=>g("span",{class:"material-icons"},"library_books",-1)),sv=rn(()=>g("span",{class:"material-icons"},"settings",-1)),rv=rn(()=>g("span",{class:"material-icons"},"info",-1)),ov={href:"https://forums.moddingtree.com/",target:"_blank"},uv=rn(()=>g("span",{class:"material-icons"},"forum",-1)),cv={class:"discord"},dv={class:"discord-links"},pv={key:0},mv=["href"],fv=rn(()=>g("li",null,[g("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),vv=rn(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),gv=Z({__name:"Nav",setup(e){const t=X(null),n=X(null),i=X(null),a=X(null),{useHeader:s,banner:u,title:c,discordName:p,discordLink:d,versionNumber:v}=Ue;function f(){window.open(d,"mywindow")}return(_,C)=>(h(),x(F,null,[o(s)?(h(),x("div",Qt({key:0,class:"nav"},_.$attrs),[o(u)?(h(),x("img",{key:0,src:o(u),class:"banner",alt:o(c),style:{"margin-left":"10px"}},null,8,Uf)):(h(),x("div",Xf,ee(o(c)),1)),g("div",{onClick:C[0]||(C[0]=b=>{var M;return(M=a.value)==null?void 0:M.open()}),class:"version-container"},[r(lt,{display:"Changelog",direction:o($e).Down,class:"version"},{default:re(()=>[g("span",null,"v"+ee(o(v)),1)]),_:1},8,["direction"])]),Hf,g("div",Jf,[g("span",{onClick:f,class:"material-icons"},"discord"),g("ul",Wf,[o(d)?(h(),x("li",Qf,[g("a",{href:o(d),target:"_blank"},ee(o(p)),9,Zf)])):B("",!0),Kf,Yf])]),g("div",null,[g("a",ev,[r(lt,{display:"Forums",direction:o($e).Down,yoffset:"5px"},{default:re(()=>[tv]),_:1},8,["direction"])])]),g("div",{onClick:C[1]||(C[1]=b=>{var M;return(M=t.value)==null?void 0:M.open()})},[r(lt,{display:"Info",direction:o($e).Down,class:"info"},{default:re(()=>[nv]),_:1},8,["direction"])]),g("div",{onClick:C[2]||(C[2]=b=>{var M;return(M=n.value)==null?void 0:M.open()})},[r(lt,{display:"Saves",direction:o($e).Down,xoffset:"-20px"},{default:re(()=>[iv]),_:1},8,["direction"])]),g("div",{onClick:C[3]||(C[3]=b=>{var M;return(M=i.value)==null?void 0:M.open()})},[r(lt,{display:"Settings",direction:o($e).Down,xoffset:"-66px"},{default:re(()=>[lv]),_:1},8,["direction"])])],16)):(h(),x("div",Qt({key:1,class:"overlay-nav"},_.$attrs),[g("div",{onClick:C[4]||(C[4]=b=>{var M;return(M=a.value)==null?void 0:M.open()}),class:"version-container"},[r(lt,{display:"Changelog",direction:o($e).Right,xoffset:"25%",class:"version"},{default:re(()=>[g("span",null,"v"+ee(o(v)),1)]),_:1},8,["direction"])]),g("div",{onClick:C[5]||(C[5]=b=>{var M;return(M=n.value)==null?void 0:M.open()})},[r(lt,{display:"Saves",direction:o($e).Right},{default:re(()=>[av]),_:1},8,["direction"])]),g("div",{onClick:C[6]||(C[6]=b=>{var M;return(M=i.value)==null?void 0:M.open()})},[r(lt,{display:"Settings",direction:o($e).Right},{default:re(()=>[sv]),_:1},8,["direction"])]),g("div",{onClick:C[7]||(C[7]=b=>{var M;return(M=t.value)==null?void 0:M.open()})},[r(lt,{display:"Info",direction:o($e).Right},{default:re(()=>[rv]),_:1},8,["direction"])]),g("div",null,[g("a",ov,[r(lt,{display:"Forums",direction:o($e).Right,xoffset:"7px"},{default:re(()=>[uv]),_:1},8,["direction"])])]),g("div",cv,[g("span",{onClick:f,class:"material-icons"},"discord"),g("ul",dv,[o(d)?(h(),x("li",pv,[g("a",{href:o(d),target:"_blank"},ee(o(p)),9,mv)])):B("",!0),fv,vv])])],16)),r(no,{ref_key:"info",ref:t,changelog:a.value},null,8,["changelog"]),r(Ba,{ref_key:"savesManager",ref:n},null,512),r(go,{ref_key:"options",ref:i},null,512),r(Lr,{ref_key:"changelog",ref:a},null,512)],64))}});var Va=me(gv,[["__scopeId","data-v-2ba32660"]]);const hv={class:"inner-tab"},bv=Z({__name:"Game",setup(e){const t=ln(G,"tabs"),n=w(()=>Object.keys(Xt)),i=Ue.useHeader;function a(s){const{display:u,minimized:c,name:p,color:d,minimizable:v,nodes:f,minimizedDisplay:_}=s;return{display:u,minimized:c,name:p,color:d,minimizable:v,nodes:f,minimizedDisplay:_}}return(s,u)=>(h(),x("div",{class:Me(["tabs-container",{useHeader:o(i)}])},[(h(!0),x(F,null,Tn(o(t),(c,p)=>{var d,v;return h(),x("div",{key:p,class:Me(["tab",o((d=o(Xt)[c])==null?void 0:d.classes)]),style:Ae(o((v=o(Xt)[c])==null?void 0:v.style))},[p===0&&!o(i)?(h(),U(Va,{key:0})):B("",!0),g("div",hv,[o(n).includes(c)?(h(),U(Fr,Qt({key:0},a(o(Xt)[c]),{index:p,onSetMinimized:f=>o(Xt)[c].minimized.value=f}),null,16,["index","onSetMinimized"])):(h(),U(Pe(c),{key:1,index:p},null,8,["index"]))])],6)}),128))],2))}});var yv=me(bv,[["__scopeId","data-v-dcd207b4"]]);const Di=e=>(an("data-v-4a50ce42"),e=e(),sn(),e),wv={class:"game-over-modal-header"},_v=["src","alt"],Cv={class:"game-over-modal-title"},Sv=Di(()=>g("h2",null,"Congratulations!",-1)),kv={key:0},Nv=Di(()=>g("br",null,null,-1)),xv=Di(()=>g("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),$v=Di(()=>g("br",null,null,-1)),Mv=["href"],Pv=Di(()=>g("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),Tv=Z({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:i,discordLink:a,versionNumber:s,versionTitle:u}=Ue,c=w(()=>Gn(G.timePlayed)),p=w(()=>ja.value&&!G.keepGoing),d=ln(G,"autosave");function v(){G.keepGoing=!0}function f(){Yn(mi())}return(_,C)=>(h(),U(Un,{"model-value":o(p)},{header:re(()=>[g("div",wv,[o(n)?(h(),x("img",{key:0,class:"game-over-modal-logo",src:o(n),alt:o(t)},null,8,_v)):B("",!0),g("div",Cv,[Sv,g("h4",null,"You've beaten "+ee(o(t))+" v"+ee(o(s))+": "+ee(o(u)),1)])])]),body:re(({shown:b})=>[b?(h(),x("div",kv,[g("div",null,"It took you "+ee(o(c))+" to beat the game.",1),Nv,xv,$v,g("div",null,[g("a",{href:o(a),class:"game-over-modal-discord-link"},[Pv,m(" "+ee(o(i)),1)],8,Mv)]),r(kn,{title:"Autosave",modelValue:o(d),"onUpdate:modelValue":C[0]||(C[0]=M=>qt(d)?d.value=M:null)},null,8,["modelValue"])])):B("",!0)]),footer:re(()=>[g("div",{class:"game-over-footer"},[g("button",{onClick:v,class:"button"},"Keep Going"),g("button",{onClick:f,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var Iv=me(Tv,[["__scopeId","data-v-4a50ce42"]]);const al=e=>(an("data-v-336bf74f"),e=e(),sn(),e),Ev=al(()=>g("div",{class:"nan-modal-header"},[g("h2",null,"NaN value detected!")],-1)),Fv={key:0},qv=al(()=>g("br",null,null,-1)),Dv=["href"],Av=al(()=>g("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Lv=al(()=>g("br",null,null,-1)),Rv={class:"nan-footer"},Ov=Z({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=Ue,i=X(!0),a=X(!0),s=ln(It,"hasNaN"),u=X(null);et(s,_=>{_?(i.value=G.autosave,a.value=G.devSpeed===0):(G.autosave=i.value,G.devSpeed=a.value?0:null)});const c=w(()=>{var _;return(_=It.NaNPath)==null?void 0:_.join(".")}),p=w(()=>It.NaNPersistent!=null?It.NaNPersistent.value:null);function d(){It.NaNPersistent!=null&&(It.NaNPersistent.value=new l(0),It.hasNaN=!1)}function v(){It.NaNPersistent&&(It.NaNPersistent.value=new l(1),It.hasNaN=!1)}function f(){It.NaNPersistent&&(It.NaNPersistent.value=new l(NaN),It.hasNaN=!1)}return(_,C)=>(h(),x(F,null,[r(Un,Qt({modelValue:o(s),"onUpdate:modelValue":C[4]||(C[4]=b=>qt(s)?s.value=b:null)},_.$attrs),{header:re(()=>[Ev]),body:re(()=>[g("div",null,[m(' Attempted to assign "'+ee(o(c))+'" to NaN',1),o(p)?(h(),x("span",Fv,ee(" ")+"(previously "+ee(o(je)(o(p)))+")",1)):B("",!0),m(". Auto-saving has been "+ee(i.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),qv,g("div",null,[g("a",{href:o(n)||"https://discord.gg/WzejVAx",class:"nan-modal-discord-link"},[Av,m(" "+ee(o(t)||"The Paper Pilot Community"),1)],8,Dv)]),Lv,r(kn,{title:"Autosave",modelValue:i.value,"onUpdate:modelValue":C[0]||(C[0]=b=>i.value=b)},null,8,["modelValue"]),o(Ue).enablePausing?(h(),U(kn,{key:0,title:"Pause game",modelValue:a.value,"onUpdate:modelValue":C[1]||(C[1]=b=>a.value=b)},null,8,["modelValue"])):B("",!0)]),footer:re(()=>[g("div",Rv,[g("button",{onClick:C[2]||(C[2]=b=>{var M;return(M=u.value)==null?void 0:M.open()}),class:"button"},"Open Saves Manager"),g("button",{onClick:d,class:"button"},"Set to 0"),g("button",{onClick:v,class:"button"},"Set to 1"),o(p)&&o(l).neq(o(p),0)&&o(l).neq(o(p),1)?(h(),x("button",{key:0,onClick:C[3]||(C[3]=b=>s.value=!1),class:"button"}," Set to previous ")):B("",!0),g("button",{onClick:f,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),r(Ba,{ref_key:"savesManager",ref:u},null,512)],64))}});var jv=me(Ov,[["__scopeId","data-v-336bf74f"]]);const Bv={key:0,class:"tpsDisplay"},Vv={key:0,class:"low"},zv=Z({__name:"TPS",setup(e){const t=w(()=>l.div(It.lastTenTicks.length,It.lastTenTicks.reduce((s,u)=>s+u,0))),n=X([]);zt(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const i=w(()=>n.value.reduce((s,u)=>l.max(s,u),0)),a=w(()=>l.sub(t.value,i.value).gt(1));return(s,u)=>o(t).isNan()?B("",!0):(h(),x("div",Bv,[m(" TPS: "+ee(o(ge)(o(t)))+" ",1),r(Zi,{name:"fade"},{default:re(()=>[o(a)?(h(),x("span",Vv,ee(o(ge)(o(i))),1)):B("",!0)]),_:1})]))}});var Gv=me(zv,[["__scopeId","data-v-46a3ed5b"]]);var Uv=Z({__name:"App",setup(e){const t=Ue.useHeader,n=w(()=>hi[De.theme].variables),i=ln(De,"showTPS"),a=w(()=>he(k(()=>r(F,null,[cr.map(We)]))));return(s,u)=>(h(),x(F,null,[g("div",{id:"modal-root",style:Ae(o(n))},null,4),g("div",{class:Me(["app",{useHeader:o(t)}]),style:Ae(o(n))},[o(t)?(h(),U(Va,{key:0})):B("",!0),r(yv),o(o(i))?(h(),U(Gv,{key:1})):B("",!0),r(Iv),r(jv),(h(),U(Pe(o(a))))],6)],64))}});var Xv=me(Uv,[["__scopeId","data-v-41d15e5e"]]);function Hv(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisterError:s}=e;let u,c;const p=async(d=!0)=>{d&&(u==null||u.addEventListener("controlling",v=>{v.isUpdate&&window.location.reload()})),c&&c.waiting&&await as(c.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){u=new ls("./sw.js",{scope:"./",type:"classic"}),u.addEventListener("activated",d=>{d.isUpdate||i==null||i()});{const d=()=>{n==null||n()};u.addEventListener("waiting",d),u.addEventListener("externalwaiting",d)}u.register({immediate:t}).then(d=>{c=d,a==null||a(d)}).catch(d=>{s==null||s(d)})}return p}function Jv(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisterError:s}=e,u=X(!1),c=X(!1);return{updateServiceWorker:Hv({immediate:t,onNeedRefresh(){u.value=!0,n==null||n()},onOfflineReady(){c.value=!0,i==null||i()},onRegistered:a,onRegisterError:s}),offlineReady:c,needRefresh:u}}document.title=Ue.title;window.projInfo=Ue;if(Ue.id==="")throw new Error("Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await ar();const{globalBus:e}=await Xi(()=>Promise.resolve().then(function(){return ir}),void 0),{startGameLoop:t}=await Xi(()=>import("./gameLoop.6f4c334b.js"),["assets/gameLoop.6f4c334b.js","assets/@fontsource.f66d05e7.css","assets/vue.0b1ef07e.js","assets/earcut.b6f90e68.js","assets/@vue.a5783f16.js","assets/nanoevents.1080beb7.js","assets/lz-string.f2f3b7cf.js","assets/vue-next-select.348eb514.js","assets/vue-next-select.9e6f4164.css","assets/vuedraggable.3773156d.js","assets/sortablejs.a68aa018.js","assets/vue-textarea-autosize.35804eaf.js","assets/@pixi.d7e055ca.js","assets/ismobilejs.5c6954b9.js","assets/eventemitter3.dc5195d7.js","assets/url.832c6d94.js","assets/querystring.ed407679.js","assets/vue-toastification.e4040407.js","assets/vue-toastification.4b5f8ac8.css","assets/workbox-window.8d14e8b7.js"]),n=window.vue=Wa(Xv);e.emit("setupVue",n),n.mount("#app"),Vt(()=>{const i=gi(),{updateServiceWorker:a}=Jv({onNeedRefresh(){i.info("New content available, click here to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){a()}})},onOfflineReady(){i.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(s){s&&setInterval(()=>s.update(),60*60*1e3)}})}),t()});export{l as D,Xi as _,It as a,Ue as b,Xm as c,Gt as g,xl as l,G as p,De as s};
